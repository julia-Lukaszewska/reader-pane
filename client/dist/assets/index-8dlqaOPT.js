const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Vj-fb_tY.js","assets/index-DulfDZ-H.js"])))=>i.map(i=>d[i]);
var l5=Object.defineProperty;var $C=i=>{throw TypeError(i)};var c5=(i,t,e)=>t in i?l5(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var bt=(i,t,e)=>c5(i,typeof t!="symbol"?t+"":t,e),ww=(i,t,e)=>t.has(i)||$C("Cannot "+e);var f=(i,t,e)=>(ww(i,t,"read from private field"),e?e.call(i):t.get(i)),k=(i,t,e)=>t.has(i)?$C("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),T=(i,t,e,n)=>(ww(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),L=(i,t,e)=>(ww(i,t,"access private method"),e);var ai=(i,t,e,n)=>({set _(a){T(i,t,a,e)},get _(){return f(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function JR(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Sw={exports:{}},Ff={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function u5(){if(qC)return Ff;qC=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:i,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Ff.Fragment=t,Ff.jsx=e,Ff.jsxs=e,Ff}var GC;function d5(){return GC||(GC=1,Sw.exports=u5()),Sw.exports}var P=d5(),Aw={exports:{}},Xt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC;function h5(){if(VC)return Xt;VC=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function E(z,Z,ot){this.props=z,this.context=Z,this.refs=A,this.updater=ot||v}E.prototype.isReactComponent={},E.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},E.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function x(){}x.prototype=E.prototype;function M(z,Z,ot){this.props=z,this.context=Z,this.refs=A,this.updater=ot||v}var C=M.prototype=new x;C.constructor=M,S(C,E.prototype),C.isPureReactComponent=!0;var _=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function N(z,Z,ot,lt,mt,pt){return ot=pt.ref,{$$typeof:i,type:z,key:Z,ref:ot!==void 0?ot:null,props:pt}}function $(z,Z){return N(z.type,Z,void 0,void 0,void 0,z.props)}function j(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function H(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ot){return Z[ot]})}var F=/\/+/g;function G(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):Z.toString(36)}function Q(){}function X(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Q,Q):(z.status="pending",z.then(function(Z){z.status==="pending"&&(z.status="fulfilled",z.value=Z)},function(Z){z.status==="pending"&&(z.status="rejected",z.reason=Z)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function ut(z,Z,ot,lt,mt){var pt=typeof z;(pt==="undefined"||pt==="boolean")&&(z=null);var yt=!1;if(z===null)yt=!0;else switch(pt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(z.$$typeof){case i:case t:yt=!0;break;case g:return yt=z._init,ut(yt(z._payload),Z,ot,lt,mt)}}if(yt)return mt=mt(z),yt=lt===""?"."+G(z,0):lt,_(mt)?(ot="",yt!=null&&(ot=yt.replace(F,"$&/")+"/"),ut(mt,Z,ot,"",function(me){return me})):mt!=null&&(j(mt)&&(mt=$(mt,ot+(mt.key==null||z&&z.key===mt.key?"":(""+mt.key).replace(F,"$&/")+"/")+yt)),Z.push(mt)),1;yt=0;var St=lt===""?".":lt+":";if(_(z))for(var Pt=0;Pt<z.length;Pt++)lt=z[Pt],pt=St+G(lt,Pt),yt+=ut(lt,Z,ot,pt,mt);else if(Pt=b(z),typeof Pt=="function")for(z=Pt.call(z),Pt=0;!(lt=z.next()).done;)lt=lt.value,pt=St+G(lt,Pt++),yt+=ut(lt,Z,ot,pt,mt);else if(pt==="object"){if(typeof z.then=="function")return ut(X(z),Z,ot,lt,mt);throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return yt}function B(z,Z,ot){if(z==null)return z;var lt=[],mt=0;return ut(z,lt,"","",function(pt){return Z.call(ot,pt,mt++)}),lt}function V(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(ot){(z._status===0||z._status===-1)&&(z._status=1,z._result=ot)},function(ot){(z._status===0||z._status===-1)&&(z._status=2,z._result=ot)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var at=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function ct(){}return Xt.Children={map:B,forEach:function(z,Z,ot){B(z,function(){Z.apply(this,arguments)},ot)},count:function(z){var Z=0;return B(z,function(){Z++}),Z},toArray:function(z){return B(z,function(Z){return Z})||[]},only:function(z){if(!j(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Xt.Component=E,Xt.Fragment=e,Xt.Profiler=a,Xt.PureComponent=M,Xt.StrictMode=n,Xt.Suspense=d,Xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Xt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return D.H.useMemoCache(z)}},Xt.cache=function(z){return function(){return z.apply(null,arguments)}},Xt.cloneElement=function(z,Z,ot){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var lt=S({},z.props),mt=z.key,pt=void 0;if(Z!=null)for(yt in Z.ref!==void 0&&(pt=void 0),Z.key!==void 0&&(mt=""+Z.key),Z)!R.call(Z,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&Z.ref===void 0||(lt[yt]=Z[yt]);var yt=arguments.length-2;if(yt===1)lt.children=ot;else if(1<yt){for(var St=Array(yt),Pt=0;Pt<yt;Pt++)St[Pt]=arguments[Pt+2];lt.children=St}return N(z.type,mt,void 0,void 0,pt,lt)},Xt.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},Xt.createElement=function(z,Z,ot){var lt,mt={},pt=null;if(Z!=null)for(lt in Z.key!==void 0&&(pt=""+Z.key),Z)R.call(Z,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(mt[lt]=Z[lt]);var yt=arguments.length-2;if(yt===1)mt.children=ot;else if(1<yt){for(var St=Array(yt),Pt=0;Pt<yt;Pt++)St[Pt]=arguments[Pt+2];mt.children=St}if(z&&z.defaultProps)for(lt in yt=z.defaultProps,yt)mt[lt]===void 0&&(mt[lt]=yt[lt]);return N(z,pt,void 0,void 0,null,mt)},Xt.createRef=function(){return{current:null}},Xt.forwardRef=function(z){return{$$typeof:u,render:z}},Xt.isValidElement=j,Xt.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:V}},Xt.memo=function(z,Z){return{$$typeof:p,type:z,compare:Z===void 0?null:Z}},Xt.startTransition=function(z){var Z=D.T,ot={};D.T=ot;try{var lt=z(),mt=D.S;mt!==null&&mt(ot,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(ct,at)}catch(pt){at(pt)}finally{D.T=Z}},Xt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Xt.use=function(z){return D.H.use(z)},Xt.useActionState=function(z,Z,ot){return D.H.useActionState(z,Z,ot)},Xt.useCallback=function(z,Z){return D.H.useCallback(z,Z)},Xt.useContext=function(z){return D.H.useContext(z)},Xt.useDebugValue=function(){},Xt.useDeferredValue=function(z,Z){return D.H.useDeferredValue(z,Z)},Xt.useEffect=function(z,Z,ot){var lt=D.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return lt.useEffect(z,Z)},Xt.useId=function(){return D.H.useId()},Xt.useImperativeHandle=function(z,Z,ot){return D.H.useImperativeHandle(z,Z,ot)},Xt.useInsertionEffect=function(z,Z){return D.H.useInsertionEffect(z,Z)},Xt.useLayoutEffect=function(z,Z){return D.H.useLayoutEffect(z,Z)},Xt.useMemo=function(z,Z){return D.H.useMemo(z,Z)},Xt.useOptimistic=function(z,Z){return D.H.useOptimistic(z,Z)},Xt.useReducer=function(z,Z,ot){return D.H.useReducer(z,Z,ot)},Xt.useRef=function(z){return D.H.useRef(z)},Xt.useState=function(z){return D.H.useState(z)},Xt.useSyncExternalStore=function(z,Z,ot){return D.H.useSyncExternalStore(z,Z,ot)},Xt.useTransition=function(){return D.H.useTransition()},Xt.version="19.1.0",Xt}var YC;function $b(){return YC||(YC=1,Aw.exports=h5()),Aw.exports}var U=$b();const wn=JR(U);var xw={exports:{}},Hf={},Ew={exports:{}},_w={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC;function f5(){return XC||(XC=1,function(i){function t(B,V){var at=B.length;B.push(V);t:for(;0<at;){var ct=at-1>>>1,z=B[ct];if(0<a(z,V))B[ct]=V,B[at]=z,at=ct;else break t}}function e(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var V=B[0],at=B.pop();if(at!==V){B[0]=at;t:for(var ct=0,z=B.length,Z=z>>>1;ct<Z;){var ot=2*(ct+1)-1,lt=B[ot],mt=ot+1,pt=B[mt];if(0>a(lt,at))mt<z&&0>a(pt,lt)?(B[ct]=pt,B[mt]=at,ct=mt):(B[ct]=lt,B[ot]=at,ct=ot);else if(mt<z&&0>a(pt,at))B[ct]=pt,B[mt]=at,ct=mt;else break t}}return V}function a(B,V){var at=B.sortIndex-V.sortIndex;return at!==0?at:B.id-V.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();i.unstable_now=function(){return c.now()-u}}var d=[],p=[],g=1,y=null,b=3,v=!1,S=!1,A=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function _(B){for(var V=e(p);V!==null;){if(V.callback===null)n(p);else if(V.startTime<=B)n(p),V.sortIndex=V.expirationTime,t(d,V);else break;V=e(p)}}function D(B){if(A=!1,_(B),!S)if(e(d)!==null)S=!0,R||(R=!0,G());else{var V=e(p);V!==null&&ut(D,V.startTime-B)}}var R=!1,N=-1,$=5,j=-1;function H(){return E?!0:!(i.unstable_now()-j<$)}function F(){if(E=!1,R){var B=i.unstable_now();j=B;var V=!0;try{t:{S=!1,A&&(A=!1,M(N),N=-1),v=!0;var at=b;try{e:{for(_(B),y=e(d);y!==null&&!(y.expirationTime>B&&H());){var ct=y.callback;if(typeof ct=="function"){y.callback=null,b=y.priorityLevel;var z=ct(y.expirationTime<=B);if(B=i.unstable_now(),typeof z=="function"){y.callback=z,_(B),V=!0;break e}y===e(d)&&n(d),_(B)}else n(d);y=e(d)}if(y!==null)V=!0;else{var Z=e(p);Z!==null&&ut(D,Z.startTime-B),V=!1}}break t}finally{y=null,b=at,v=!1}V=void 0}}finally{V?G():R=!1}}}var G;if(typeof C=="function")G=function(){C(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,X=Q.port2;Q.port1.onmessage=F,G=function(){X.postMessage(null)}}else G=function(){x(F,0)};function ut(B,V){N=x(function(){B(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(B){switch(b){case 1:case 2:case 3:var V=3;break;default:V=b}var at=b;b=V;try{return B()}finally{b=at}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var at=b;b=B;try{return V()}finally{b=at}},i.unstable_scheduleCallback=function(B,V,at){var ct=i.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?ct+at:ct):at=ct,B){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=at+z,B={id:g++,callback:V,priorityLevel:B,startTime:at,expirationTime:z,sortIndex:-1},at>ct?(B.sortIndex=at,t(p,B),e(d)===null&&B===e(p)&&(A?(M(N),N=-1):A=!0,ut(D,at-ct))):(B.sortIndex=z,t(d,B),S||v||(S=!0,R||(R=!0,G()))),B},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(B){var V=b;return function(){var at=b;b=V;try{return B.apply(this,arguments)}finally{b=at}}}}(_w)),_w}var QC;function p5(){return QC||(QC=1,Ew.exports=f5()),Ew.exports}var Cw={exports:{}},Qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC;function g5(){if(WC)return Qn;WC=1;var i=$b();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qn.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,g)},Qn.flushSync=function(d){var p=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=p,n.p=g,n.d.f()}},Qn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},Qn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Qn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},Qn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qn.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},Qn.requestFormReset=function(d){n.d.r(d)},Qn.unstable_batchedUpdates=function(d,p){return d(p)},Qn.useFormState=function(d,p,g){return c.H.useFormState(d,p,g)},Qn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Qn.version="19.1.0",Qn}var KC;function tM(){if(KC)return Cw.exports;KC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Cw.exports=g5(),Cw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function m5(){if(ZC)return Hf;ZC=1;var i=p5(),t=$b(),e=tM();function n(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function u(r){if(o(r)!==r)throw Error(n(188))}function d(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(n(188));return s!==r?null:r}for(var l=r,h=s;;){var m=l.return;if(m===null)break;var w=m.alternate;if(w===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===l)return u(m),r;if(w===h)return u(m),s;w=w.sibling}throw Error(n(188))}if(l.return!==h.return)l=m,h=w;else{for(var O=!1,I=m.child;I;){if(I===l){O=!0,l=m,h=w;break}if(I===h){O=!0,h=m,l=w;break}I=I.sibling}if(!O){for(I=w.child;I;){if(I===l){O=!0,l=w,h=m;break}if(I===h){O=!0,h=w,l=m;break}I=I.sibling}if(!O)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var Q=Symbol.for("react.client.reference");function X(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Q?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList";case j:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case v:return"Portal";case C:return(r.displayName||"Context")+".Provider";case M:return(r._context.displayName||"Context")+".Consumer";case _:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return s=r.displayName||null,s!==null?s:X(r.type)||"Memo";case $:s=r._payload,r=r._init;try{return X(r(s))}catch{}}return null}var ut=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},ct=[],z=-1;function Z(r){return{current:r}}function ot(r){0>z||(r.current=ct[z],ct[z]=null,z--)}function lt(r,s){z++,ct[z]=r.current,r.current=s}var mt=Z(null),pt=Z(null),yt=Z(null),St=Z(null);function Pt(r,s){switch(lt(yt,s),lt(pt,r),lt(mt,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?yC(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=yC(s),r=bC(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ot(mt),lt(mt,r)}function me(){ot(mt),ot(pt),ot(yt)}function Nt(r){r.memoizedState!==null&&lt(St,r);var s=mt.current,l=bC(s,r.type);s!==l&&(lt(pt,r),lt(mt,l))}function Ut(r){pt.current===r&&(ot(mt),ot(pt)),St.current===r&&(ot(St),Nf._currentValue=at)}var Zt=Object.prototype.hasOwnProperty,ii=i.unstable_scheduleCallback,Ie=i.unstable_cancelCallback,cs=i.unstable_shouldYield,gi=i.unstable_requestPaint,Ye=i.unstable_now,Us=i.unstable_getCurrentPriorityLevel,Qa=i.unstable_ImmediatePriority,bu=i.unstable_UserBlockingPriority,$s=i.unstable_NormalPriority,kr=i.unstable_LowPriority,Wa=i.unstable_IdlePriority,Sm=i.log,Uh=i.unstable_setDisableYieldValue,mi=null,Ue=null;function Lr(r){if(typeof Sm=="function"&&Uh(r),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(mi,r)}catch{}}var kn=Math.clz32?Math.clz32:Am,mv=Math.log,us=Math.LN2;function Am(r){return r>>>=0,r===0?32:31-(mv(r)/us|0)|0}var Al=256,xl=4194304;function qs(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function El(r,s,l){var h=r.pendingLanes;if(h===0)return 0;var m=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var I=h&134217727;return I!==0?(h=I&~w,h!==0?m=qs(h):(O&=I,O!==0?m=qs(O):l||(l=I&~r,l!==0&&(m=qs(l))))):(I=h&~w,I!==0?m=qs(I):O!==0?m=qs(O):l||(l=h&~r,l!==0&&(m=qs(l)))),m===0?0:s!==0&&s!==m&&(s&w)===0&&(w=m&-m,l=s&-s,w>=l||w===32&&(l&4194048)!==0)?s:m}function ds(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function xm(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vu(){var r=Al;return Al<<=1,(Al&4194048)===0&&(Al=256),r}function Em(){var r=xl;return xl<<=1,(xl&62914560)===0&&(xl=4194304),r}function wu(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function _l(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function _m(r,s,l,h,m,w){var O=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var I=r.entanglements,q=r.expirationTimes,et=r.hiddenUpdates;for(l=O&~l;0<l;){var dt=31-kn(l),ft=1<<dt;I[dt]=0,q[dt]=-1;var nt=et[dt];if(nt!==null)for(et[dt]=null,dt=0;dt<nt.length;dt++){var it=nt[dt];it!==null&&(it.lane&=-536870913)}l&=~ft}h!==0&&Cl(r,h,0),w!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~s))}function Cl(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var h=31-kn(s);r.entangledLanes|=s,r.entanglements[h]=r.entanglements[h]|1073741824|l&4194090}function Tl(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-kn(l),m=1<<h;m&s|r[h]&s&&(r[h]|=s),l&=~m}}function $h(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function qh(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Y(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:jC(r.type))}function J(r,s){var l=V.p;try{return V.p=r,s()}finally{V.p=l}}var rt=Math.random().toString(36).slice(2),gt="__reactFiber$"+rt,vt="__reactProps$"+rt,Tt="__reactContainer$"+rt,It="__reactEvents$"+rt,Et="__reactListeners$"+rt,kt="__reactHandles$"+rt,Lt="__reactResources$"+rt,Ft="__reactMarker$"+rt;function Dt(r){delete r[gt],delete r[vt],delete r[It],delete r[Et],delete r[kt]}function $t(r){var s=r[gt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Tt]||l[gt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=AC(r);r!==null;){if(l=r[gt])return l;r=AC(r)}return s}r=l,l=r.parentNode}return null}function ce(r){if(r=r[gt]||r[Tt]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Le(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(n(33))}function $e(r){var s=r[Lt];return s||(s=r[Lt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function he(r){r[Ft]=!0}var ae=new Set,Ka={};function ri(r,s){lr(r,s),lr(r+"Capture",s)}function lr(r,s){for(Ka[r]=s,r=0;r<s.length;r++)ae.add(s[r])}var yi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Za={},Ja={};function Gh(r){return Zt.call(Ja,r)?!0:Zt.call(Za,r)?!1:yi.test(r)?Ja[r]=!0:(Za[r]=!0,!1)}function cr(r,s,l){if(Gh(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function Gs(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function Jt(r,s,l,h){if(h===null)r.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+h)}}var Yn,Pr;function Nr(r){if(Yn===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Yn=s&&s[1]||"",Pr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yn+r+Pr}var Rl=!1;function je(r,s){if(!r||Rl)return"";Rl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(it){var nt=it}Reflect.construct(r,[],ft)}else{try{ft.call()}catch(it){nt=it}r.call(ft.prototype)}}else{try{throw Error()}catch(it){nt=it}(ft=r())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(it){if(it&&nt&&typeof it.stack=="string")return[it.stack,nt.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),O=w[0],I=w[1];if(O&&I){var q=O.split(`
`),et=I.split(`
`);for(m=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;m<et.length&&!et[m].includes("DetermineComponentFrameRoot");)m++;if(h===q.length||m===et.length)for(h=q.length-1,m=et.length-1;1<=h&&0<=m&&q[h]!==et[m];)m--;for(;1<=h&&0<=m;h--,m--)if(q[h]!==et[m]){if(h!==1||m!==1)do if(h--,m--,0>m||q[h]!==et[m]){var dt=`
`+q[h].replace(" at new "," at ");return r.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",r.displayName)),dt}while(1<=h&&0<=m);break}}}finally{Rl=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Nr(l):""}function to(r){switch(r.tag){case 26:case 27:case 5:return Nr(r.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 15:return je(r.type,!1);case 11:return je(r.type.render,!1);case 1:return je(r.type,!0);case 31:return Nr("Activity");default:return""}}function Vh(r){try{var s="";do s+=to(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function bi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function hE(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function i3(r){var s=hE(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,w=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(O){h=""+O,w.call(this,O)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(O){h=""+O},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Cm(r){r._valueTracker||(r._valueTracker=i3(r))}function fE(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=hE(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Tm(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var r3=/[\n"\\]/g;function ur(r){return r.replace(r3,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yv(r,s,l,h,m,w,O,I){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),s!=null?O==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+bi(s)):r.value!==""+bi(s)&&(r.value=""+bi(s)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),s!=null?bv(r,O,bi(s)):l!=null?bv(r,O,bi(l)):h!=null&&r.removeAttribute("value"),m==null&&w!=null&&(r.defaultChecked=!!w),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+bi(I):r.removeAttribute("name")}function pE(r,s,l,h,m,w,O,I){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),s!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||s!=null))return;l=l!=null?""+bi(l):"",s=s!=null?""+bi(s):l,I||s===r.value||(r.value=s),r.defaultValue=s}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=I?r.checked:!!h,r.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O)}function bv(r,s,l){s==="number"&&Tm(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Su(r,s,l,h){if(r=r.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=s.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&h&&(r[l].defaultSelected=!0)}else{for(l=""+bi(l),s=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,h&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function gE(r,s,l){if(s!=null&&(s=""+bi(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+bi(l):""}function mE(r,s,l,h){if(s==null){if(h!=null){if(l!=null)throw Error(n(92));if(ut(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),s=l}l=bi(s),r.defaultValue=l,h=r.textContent,h===l&&h!==""&&h!==null&&(r.value=h)}function Au(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var s3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yE(r,s,l){var h=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":h?r.setProperty(s,l):typeof l!="number"||l===0||s3.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function bE(r,s,l){if(s!=null&&typeof s!="object")throw Error(n(62));if(r=r.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var m in s)h=s[m],s.hasOwnProperty(m)&&l[m]!==h&&yE(r,m,h)}else for(var w in s)s.hasOwnProperty(w)&&yE(r,w,s[w])}function vv(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),o3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rm(r){return o3.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var wv=null;function Sv(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xu=null,Eu=null;function vE(r){var s=ce(r);if(s&&(r=s.stateNode)){var l=r[vt]||null;t:switch(r=s.stateNode,s.type){case"input":if(yv(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ur(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var m=h[vt]||null;if(!m)throw Error(n(90));yv(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)h=l[s],h.form===r.form&&fE(h)}break t;case"textarea":gE(r,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&Su(r,!!l.multiple,s,!1)}}}var Av=!1;function wE(r,s,l){if(Av)return r(s,l);Av=!0;try{var h=r(s);return h}finally{if(Av=!1,(xu!==null||Eu!==null)&&(fy(),xu&&(s=xu,r=Eu,Eu=xu=null,vE(s),r)))for(s=0;s<r.length;s++)vE(r[s])}}function Yh(r,s){var l=r.stateNode;if(l===null)return null;var h=l[vt]||null;if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break t;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,s,typeof l));return l}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xv=!1;if(Vs)try{var Xh={};Object.defineProperty(Xh,"passive",{get:function(){xv=!0}}),window.addEventListener("test",Xh,Xh),window.removeEventListener("test",Xh,Xh)}catch{xv=!1}var eo=null,Ev=null,Mm=null;function SE(){if(Mm)return Mm;var r,s=Ev,l=s.length,h,m="value"in eo?eo.value:eo.textContent,w=m.length;for(r=0;r<l&&s[r]===m[r];r++);var O=l-r;for(h=1;h<=O&&s[l-h]===m[w-h];h++);return Mm=m.slice(r,1<h?1-h:void 0)}function Dm(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Om(){return!0}function AE(){return!1}function vi(r){function s(l,h,m,w,O){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(l=r[I],this[I]=l?l(w):w[I]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Om:AE,this.isPropagationStopped=AE,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Om)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Om)},persist:function(){},isPersistent:Om}),s}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},km=vi(Ml),Qh=g({},Ml,{view:0,detail:0}),l3=vi(Qh),_v,Cv,Wh,Lm=g({},Qh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rv,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wh&&(Wh&&r.type==="mousemove"?(_v=r.screenX-Wh.screenX,Cv=r.screenY-Wh.screenY):Cv=_v=0,Wh=r),_v)},movementY:function(r){return"movementY"in r?r.movementY:Cv}}),xE=vi(Lm),c3=g({},Lm,{dataTransfer:0}),u3=vi(c3),d3=g({},Qh,{relatedTarget:0}),Tv=vi(d3),h3=g({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),f3=vi(h3),p3=g({},Ml,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),g3=vi(p3),m3=g({},Ml,{data:0}),EE=vi(m3),y3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w3(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=v3[r])?!!s[r]:!1}function Rv(){return w3}var S3=g({},Qh,{key:function(r){if(r.key){var s=y3[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Dm(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?b3[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rv,charCode:function(r){return r.type==="keypress"?Dm(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Dm(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),A3=vi(S3),x3=g({},Lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_E=vi(x3),E3=g({},Qh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rv}),_3=vi(E3),C3=g({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),T3=vi(C3),R3=g({},Lm,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),M3=vi(R3),D3=g({},Ml,{newState:0,oldState:0}),O3=vi(D3),k3=[9,13,27,32],Mv=Vs&&"CompositionEvent"in window,Kh=null;Vs&&"documentMode"in document&&(Kh=document.documentMode);var L3=Vs&&"TextEvent"in window&&!Kh,CE=Vs&&(!Mv||Kh&&8<Kh&&11>=Kh),TE=" ",RE=!1;function ME(r,s){switch(r){case"keyup":return k3.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DE(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var _u=!1;function P3(r,s){switch(r){case"compositionend":return DE(s);case"keypress":return s.which!==32?null:(RE=!0,TE);case"textInput":return r=s.data,r===TE&&RE?null:r;default:return null}}function N3(r,s){if(_u)return r==="compositionend"||!Mv&&ME(r,s)?(r=SE(),Mm=Ev=eo=null,_u=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return CE&&s.locale!=="ko"?null:s.data;default:return null}}var I3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OE(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!I3[r.type]:s==="textarea"}function kE(r,s,l,h){xu?Eu?Eu.push(h):Eu=[h]:xu=h,s=vy(s,"onChange"),0<s.length&&(l=new km("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var Zh=null,Jh=null;function j3(r){hC(r,0)}function Pm(r){var s=Le(r);if(fE(s))return r}function LE(r,s){if(r==="change")return s}var PE=!1;if(Vs){var Dv;if(Vs){var Ov="oninput"in document;if(!Ov){var NE=document.createElement("div");NE.setAttribute("oninput","return;"),Ov=typeof NE.oninput=="function"}Dv=Ov}else Dv=!1;PE=Dv&&(!document.documentMode||9<document.documentMode)}function IE(){Zh&&(Zh.detachEvent("onpropertychange",jE),Jh=Zh=null)}function jE(r){if(r.propertyName==="value"&&Pm(Jh)){var s=[];kE(s,Jh,r,Sv(r)),wE(j3,s)}}function B3(r,s,l){r==="focusin"?(IE(),Zh=s,Jh=l,Zh.attachEvent("onpropertychange",jE)):r==="focusout"&&IE()}function z3(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Pm(Jh)}function F3(r,s){if(r==="click")return Pm(s)}function H3(r,s){if(r==="input"||r==="change")return Pm(s)}function U3(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Di=typeof Object.is=="function"?Object.is:U3;function tf(r,s){if(Di(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Zt.call(s,m)||!Di(r[m],s[m]))return!1}return!0}function BE(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zE(r,s){var l=BE(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=BE(l)}}function FE(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?FE(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function HE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Tm(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Tm(r.document)}return s}function kv(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var $3=Vs&&"documentMode"in document&&11>=document.documentMode,Cu=null,Lv=null,ef=null,Pv=!1;function UE(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pv||Cu==null||Cu!==Tm(h)||(h=Cu,"selectionStart"in h&&kv(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ef&&tf(ef,h)||(ef=h,h=vy(Lv,"onSelect"),0<h.length&&(s=new km("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=Cu)))}function Dl(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Tu={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionrun:Dl("Transition","TransitionRun"),transitionstart:Dl("Transition","TransitionStart"),transitioncancel:Dl("Transition","TransitionCancel"),transitionend:Dl("Transition","TransitionEnd")},Nv={},$E={};Vs&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete Tu.animationend.animation,delete Tu.animationiteration.animation,delete Tu.animationstart.animation),"TransitionEvent"in window||delete Tu.transitionend.transition);function Ol(r){if(Nv[r])return Nv[r];if(!Tu[r])return r;var s=Tu[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in $E)return Nv[r]=s[l];return r}var qE=Ol("animationend"),GE=Ol("animationiteration"),VE=Ol("animationstart"),q3=Ol("transitionrun"),G3=Ol("transitionstart"),V3=Ol("transitioncancel"),YE=Ol("transitionend"),XE=new Map,Iv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Iv.push("scrollEnd");function Ir(r,s){XE.set(r,s),ri(s,[r])}var QE=new WeakMap;function dr(r,s){if(typeof r=="object"&&r!==null){var l=QE.get(r);return l!==void 0?l:(s={value:r,source:s,stack:Vh(s)},QE.set(r,s),s)}return{value:r,source:s,stack:Vh(s)}}var hr=[],Ru=0,jv=0;function Nm(){for(var r=Ru,s=jv=Ru=0;s<r;){var l=hr[s];hr[s++]=null;var h=hr[s];hr[s++]=null;var m=hr[s];hr[s++]=null;var w=hr[s];if(hr[s++]=null,h!==null&&m!==null){var O=h.pending;O===null?m.next=m:(m.next=O.next,O.next=m),h.pending=m}w!==0&&WE(l,m,w)}}function Im(r,s,l,h){hr[Ru++]=r,hr[Ru++]=s,hr[Ru++]=l,hr[Ru++]=h,jv|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Bv(r,s,l,h){return Im(r,s,l,h),jm(r)}function Mu(r,s){return Im(r,null,null,s),jm(r)}function WE(r,s,l){r.lanes|=l;var h=r.alternate;h!==null&&(h.lanes|=l);for(var m=!1,w=r.return;w!==null;)w.childLanes|=l,h=w.alternate,h!==null&&(h.childLanes|=l),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(m=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,m&&s!==null&&(m=31-kn(l),r=w.hiddenUpdates,h=r[m],h===null?r[m]=[s]:h.push(s),s.lane=l|536870912),w):null}function jm(r){if(50<Tf)throw Tf=0,q1=null,Error(n(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Du={};function Y3(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(r,s,l,h){return new Y3(r,s,l,h)}function zv(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ys(r,s){var l=r.alternate;return l===null?(l=Oi(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function KE(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Bm(r,s,l,h,m,w){var O=0;if(h=r,typeof r=="function")zv(r)&&(O=1);else if(typeof r=="string")O=QL(r,l,mt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case j:return r=Oi(31,l,s,m),r.elementType=j,r.lanes=w,r;case S:return kl(l.children,m,w,s);case A:O=8,m|=24;break;case E:return r=Oi(12,l,s,m|2),r.elementType=E,r.lanes=w,r;case D:return r=Oi(13,l,s,m),r.elementType=D,r.lanes=w,r;case R:return r=Oi(19,l,s,m),r.elementType=R,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:case C:O=10;break t;case M:O=9;break t;case _:O=11;break t;case N:O=14;break t;case $:O=16,h=null;break t}O=29,l=Error(n(130,r===null?"null":typeof r,"")),h=null}return s=Oi(O,l,s,m),s.elementType=r,s.type=h,s.lanes=w,s}function kl(r,s,l,h){return r=Oi(7,r,h,s),r.lanes=l,r}function Fv(r,s,l){return r=Oi(6,r,null,s),r.lanes=l,r}function Hv(r,s,l){return s=Oi(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Ou=[],ku=0,zm=null,Fm=0,fr=[],pr=0,Ll=null,Xs=1,Qs="";function Pl(r,s){Ou[ku++]=Fm,Ou[ku++]=zm,zm=r,Fm=s}function ZE(r,s,l){fr[pr++]=Xs,fr[pr++]=Qs,fr[pr++]=Ll,Ll=r;var h=Xs;r=Qs;var m=32-kn(h)-1;h&=~(1<<m),l+=1;var w=32-kn(s)+m;if(30<w){var O=m-m%5;w=(h&(1<<O)-1).toString(32),h>>=O,m-=O,Xs=1<<32-kn(s)+m|l<<m|h,Qs=w+r}else Xs=1<<w|l<<m|h,Qs=r}function Uv(r){r.return!==null&&(Pl(r,1),ZE(r,1,0))}function $v(r){for(;r===zm;)zm=Ou[--ku],Ou[ku]=null,Fm=Ou[--ku],Ou[ku]=null;for(;r===Ll;)Ll=fr[--pr],fr[pr]=null,Qs=fr[--pr],fr[pr]=null,Xs=fr[--pr],fr[pr]=null}var si=null,Xe=null,pe=!1,Nl=null,hs=!1,qv=Error(n(519));function Il(r){var s=Error(n(418,""));throw sf(dr(s,r)),qv}function JE(r){var s=r.stateNode,l=r.type,h=r.memoizedProps;switch(s[gt]=r,s[vt]=h,l){case"dialog":ie("cancel",s),ie("close",s);break;case"iframe":case"object":case"embed":ie("load",s);break;case"video":case"audio":for(l=0;l<Mf.length;l++)ie(Mf[l],s);break;case"source":ie("error",s);break;case"img":case"image":case"link":ie("error",s),ie("load",s);break;case"details":ie("toggle",s);break;case"input":ie("invalid",s),pE(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Cm(s);break;case"select":ie("invalid",s);break;case"textarea":ie("invalid",s),mE(s,h.value,h.defaultValue,h.children),Cm(s)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||h.suppressHydrationWarning===!0||mC(s.textContent,l)?(h.popover!=null&&(ie("beforetoggle",s),ie("toggle",s)),h.onScroll!=null&&ie("scroll",s),h.onScrollEnd!=null&&ie("scrollend",s),h.onClick!=null&&(s.onclick=wy),s=!0):s=!1,s||Il(r)}function t_(r){for(si=r.return;si;)switch(si.tag){case 5:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:si=si.return}}function nf(r){if(r!==si)return!1;if(!pe)return t_(r),pe=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||aw(r.type,r.memoizedProps)),l=!l),l&&Xe&&Il(r),t_(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){Xe=Br(r.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}Xe=null}}else s===27?(s=Xe,bo(r.type)?(r=uw,uw=null,Xe=r):Xe=s):Xe=si?Br(r.stateNode.nextSibling):null;return!0}function rf(){Xe=si=null,pe=!1}function e_(){var r=Nl;return r!==null&&(Ai===null?Ai=r:Ai.push.apply(Ai,r),Nl=null),r}function sf(r){Nl===null?Nl=[r]:Nl.push(r)}var Gv=Z(null),jl=null,Ws=null;function no(r,s,l){lt(Gv,s._currentValue),s._currentValue=l}function Ks(r){r._currentValue=Gv.current,ot(Gv)}function Vv(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Yv(r,s,l,h){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var w=m.dependencies;if(w!==null){var O=m.child;w=w.firstContext;t:for(;w!==null;){var I=w;w=m;for(var q=0;q<s.length;q++)if(I.context===s[q]){w.lanes|=l,I=w.alternate,I!==null&&(I.lanes|=l),Vv(w.return,l,r),h||(O=null);break t}w=I.next}}else if(m.tag===18){if(O=m.return,O===null)throw Error(n(341));O.lanes|=l,w=O.alternate,w!==null&&(w.lanes|=l),Vv(O,l,r),O=null}else O=m.child;if(O!==null)O.return=m;else for(O=m;O!==null;){if(O===r){O=null;break}if(m=O.sibling,m!==null){m.return=O.return,O=m;break}O=O.return}m=O}}function af(r,s,l,h){r=null;for(var m=s,w=!1;m!==null;){if(!w){if((m.flags&524288)!==0)w=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var O=m.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var I=m.type;Di(m.pendingProps.value,O.value)||(r!==null?r.push(I):r=[I])}}else if(m===St.current){if(O=m.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Nf):r=[Nf])}m=m.return}r!==null&&Yv(s,r,l,h),s.flags|=262144}function Hm(r){for(r=r.firstContext;r!==null;){if(!Di(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Bl(r){jl=r,Ws=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Xn(r){return n_(jl,r)}function Um(r,s){return jl===null&&Bl(r),n_(r,s)}function n_(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Ws===null){if(r===null)throw Error(n(308));Ws=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Ws=Ws.next=s;return l}var X3=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,h){r.push(h)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},Q3=i.unstable_scheduleCallback,W3=i.unstable_NormalPriority,pn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xv(){return{controller:new X3,data:new Map,refCount:0}}function of(r){r.refCount--,r.refCount===0&&Q3(W3,function(){r.controller.abort()})}var lf=null,Qv=0,Lu=0,Pu=null;function K3(r,s){if(lf===null){var l=lf=[];Qv=0,Lu=K1(),Pu={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Qv++,s.then(i_,i_),s}function i_(){if(--Qv===0&&lf!==null){Pu!==null&&(Pu.status="fulfilled");var r=lf;lf=null,Lu=0,Pu=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Z3(r,s){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){h.status="fulfilled",h.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var r_=B.S;B.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&K3(r,s),r_!==null&&r_(r,s)};var zl=Z(null);function Wv(){var r=zl.current;return r!==null?r:De.pooledCache}function $m(r,s){s===null?lt(zl,zl.current):lt(zl,s.pool)}function s_(){var r=Wv();return r===null?null:{parent:pn._currentValue,pool:r}}var cf=Error(n(460)),a_=Error(n(474)),qm=Error(n(542)),Kv={then:function(){}};function o_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Gm(){}function l_(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(Gm,Gm),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,u_(r),r;default:if(typeof s.status=="string")s.then(Gm,Gm);else{if(r=De,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=s,r.status="pending",r.then(function(h){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=h}},function(h){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,u_(r),r}throw uf=s,cf}}var uf=null;function c_(){if(uf===null)throw Error(n(459));var r=uf;return uf=null,r}function u_(r){if(r===cf||r===qm)throw Error(n(483))}var io=!1;function Zv(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jv(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ro(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function so(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ve&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,s=jm(r),WE(r,null,l),s}return Im(r,h,s,l),jm(r)}function df(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Tl(r,l)}}function t1(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var O={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?m=w=O:w=w.next=O,l=l.next}while(l!==null);w===null?m=w=s:w=w.next=s}else m=w=s;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var e1=!1;function hf(){if(e1){var r=Pu;if(r!==null)throw r}}function ff(r,s,l,h){e1=!1;var m=r.updateQueue;io=!1;var w=m.firstBaseUpdate,O=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var q=I,et=q.next;q.next=null,O===null?w=et:O.next=et,O=q;var dt=r.alternate;dt!==null&&(dt=dt.updateQueue,I=dt.lastBaseUpdate,I!==O&&(I===null?dt.firstBaseUpdate=et:I.next=et,dt.lastBaseUpdate=q))}if(w!==null){var ft=m.baseState;O=0,dt=et=q=null,I=w;do{var nt=I.lane&-536870913,it=nt!==I.lane;if(it?(le&nt)===nt:(h&nt)===nt){nt!==0&&nt===Lu&&(e1=!0),dt!==null&&(dt=dt.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var Ht=r,jt=I;nt=s;var Ee=l;switch(jt.tag){case 1:if(Ht=jt.payload,typeof Ht=="function"){ft=Ht.call(Ee,ft,nt);break t}ft=Ht;break t;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=jt.payload,nt=typeof Ht=="function"?Ht.call(Ee,ft,nt):Ht,nt==null)break t;ft=g({},ft,nt);break t;case 2:io=!0}}nt=I.callback,nt!==null&&(r.flags|=64,it&&(r.flags|=8192),it=m.callbacks,it===null?m.callbacks=[nt]:it.push(nt))}else it={lane:nt,tag:I.tag,payload:I.payload,callback:I.callback,next:null},dt===null?(et=dt=it,q=ft):dt=dt.next=it,O|=nt;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;it=I,I=it.next,it.next=null,m.lastBaseUpdate=it,m.shared.pending=null}}while(!0);dt===null&&(q=ft),m.baseState=q,m.firstBaseUpdate=et,m.lastBaseUpdate=dt,w===null&&(m.shared.lanes=0),po|=O,r.lanes=O,r.memoizedState=ft}}function d_(r,s){if(typeof r!="function")throw Error(n(191,r));r.call(s)}function h_(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)d_(l[r],s)}var Nu=Z(null),Vm=Z(0);function f_(r,s){r=ra,lt(Vm,r),lt(Nu,s),ra=r|s.baseLanes}function n1(){lt(Vm,ra),lt(Nu,Nu.current)}function i1(){ra=Vm.current,ot(Nu),ot(Vm)}var ao=0,Kt=null,Ae=null,sn=null,Ym=!1,Iu=!1,Fl=!1,Xm=0,pf=0,ju=null,J3=0;function Ke(){throw Error(n(321))}function r1(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Di(r[l],s[l]))return!1;return!0}function s1(r,s,l,h,m,w){return ao=w,Kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=r===null||r.memoizedState===null?W_:K_,Fl=!1,w=l(h,m),Fl=!1,Iu&&(w=g_(s,l,h,m)),p_(r),w}function p_(r){B.H=ty;var s=Ae!==null&&Ae.next!==null;if(ao=0,sn=Ae=Kt=null,Ym=!1,pf=0,ju=null,s)throw Error(n(300));r===null||An||(r=r.dependencies,r!==null&&Hm(r)&&(An=!0))}function g_(r,s,l,h){Kt=r;var m=0;do{if(Iu&&(ju=null),pf=0,Iu=!1,25<=m)throw Error(n(301));if(m+=1,sn=Ae=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}B.H=aL,w=s(l,h)}while(Iu);return w}function tL(){var r=B.H,s=r.useState()[0];return s=typeof s.then=="function"?gf(s):s,r=r.useState()[0],(Ae!==null?Ae.memoizedState:null)!==r&&(Kt.flags|=1024),s}function a1(){var r=Xm!==0;return Xm=0,r}function o1(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function l1(r){if(Ym){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ym=!1}ao=0,sn=Ae=Kt=null,Iu=!1,pf=Xm=0,ju=null}function wi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Kt.memoizedState=sn=r:sn=sn.next=r,sn}function an(){if(Ae===null){var r=Kt.alternate;r=r!==null?r.memoizedState:null}else r=Ae.next;var s=sn===null?Kt.memoizedState:sn.next;if(s!==null)sn=s,Ae=r;else{if(r===null)throw Kt.alternate===null?Error(n(467)):Error(n(310));Ae=r,r={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},sn===null?Kt.memoizedState=sn=r:sn=sn.next=r}return sn}function c1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gf(r){var s=pf;return pf+=1,ju===null&&(ju=[]),r=l_(ju,r,s),s=Kt,(sn===null?s.memoizedState:sn.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?W_:K_),r}function Qm(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return gf(r);if(r.$$typeof===C)return Xn(r)}throw Error(n(438,String(r)))}function u1(r){var s=null,l=Kt.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var h=Kt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=c1(),Kt.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),h=0;h<r;h++)l[h]=H;return s.index++,l}function Zs(r,s){return typeof s=="function"?s(r):s}function Wm(r){var s=an();return d1(s,Ae,r)}function d1(r,s,l){var h=r.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var m=r.baseQueue,w=h.pending;if(w!==null){if(m!==null){var O=m.next;m.next=w.next,w.next=O}s.baseQueue=m=w,h.pending=null}if(w=r.baseState,m===null)r.memoizedState=w;else{s=m.next;var I=O=null,q=null,et=s,dt=!1;do{var ft=et.lane&-536870913;if(ft!==et.lane?(le&ft)===ft:(ao&ft)===ft){var nt=et.revertLane;if(nt===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),ft===Lu&&(dt=!0);else if((ao&nt)===nt){et=et.next,nt===Lu&&(dt=!0);continue}else ft={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},q===null?(I=q=ft,O=w):q=q.next=ft,Kt.lanes|=nt,po|=nt;ft=et.action,Fl&&l(w,ft),w=et.hasEagerState?et.eagerState:l(w,ft)}else nt={lane:ft,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},q===null?(I=q=nt,O=w):q=q.next=nt,Kt.lanes|=ft,po|=ft;et=et.next}while(et!==null&&et!==s);if(q===null?O=w:q.next=I,!Di(w,r.memoizedState)&&(An=!0,dt&&(l=Pu,l!==null)))throw l;r.memoizedState=w,r.baseState=O,r.baseQueue=q,h.lastRenderedState=w}return m===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function h1(r){var s=an(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var h=l.dispatch,m=l.pending,w=s.memoizedState;if(m!==null){l.pending=null;var O=m=m.next;do w=r(w,O.action),O=O.next;while(O!==m);Di(w,s.memoizedState)||(An=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),l.lastRenderedState=w}return[w,h]}function m_(r,s,l){var h=Kt,m=an(),w=pe;if(w){if(l===void 0)throw Error(n(407));l=l()}else l=s();var O=!Di((Ae||m).memoizedState,l);O&&(m.memoizedState=l,An=!0),m=m.queue;var I=v_.bind(null,h,m,r);if(mf(2048,8,I,[r]),m.getSnapshot!==s||O||sn!==null&&sn.memoizedState.tag&1){if(h.flags|=2048,Bu(9,Km(),b_.bind(null,h,m,l,s),null),De===null)throw Error(n(349));w||(ao&124)!==0||y_(h,s,l)}return l}function y_(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Kt.updateQueue,s===null?(s=c1(),Kt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function b_(r,s,l,h){s.value=l,s.getSnapshot=h,w_(s)&&S_(r)}function v_(r,s,l){return l(function(){w_(s)&&S_(r)})}function w_(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Di(r,l)}catch{return!0}}function S_(r){var s=Mu(r,2);s!==null&&Ii(s,r,2)}function f1(r){var s=wi();if(typeof r=="function"){var l=r;if(r=l(),Fl){Lr(!0);try{l()}finally{Lr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:r},s}function A_(r,s,l,h){return r.baseState=l,d1(r,Ae,typeof h=="function"?h:Zs)}function eL(r,s,l,h,m){if(Jm(r))throw Error(n(485));if(r=s.action,r!==null){var w={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};B.T!==null?l(!0):w.isTransition=!1,h(w),l=s.pending,l===null?(w.next=s.pending=w,x_(s,w)):(w.next=l.next,s.pending=l.next=w)}}function x_(r,s){var l=s.action,h=s.payload,m=r.state;if(s.isTransition){var w=B.T,O={};B.T=O;try{var I=l(m,h),q=B.S;q!==null&&q(O,I),E_(r,s,I)}catch(et){p1(r,s,et)}finally{B.T=w}}else try{w=l(m,h),E_(r,s,w)}catch(et){p1(r,s,et)}}function E_(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){__(r,s,h)},function(h){return p1(r,s,h)}):__(r,s,l)}function __(r,s,l){s.status="fulfilled",s.value=l,C_(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,x_(r,l)))}function p1(r,s,l){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=l,C_(s),s=s.next;while(s!==h)}r.action=null}function C_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function T_(r,s){return s}function R_(r,s){if(pe){var l=De.formState;if(l!==null){t:{var h=Kt;if(pe){if(Xe){e:{for(var m=Xe,w=hs;m.nodeType!==8;){if(!w){m=null;break e}if(m=Br(m.nextSibling),m===null){m=null;break e}}w=m.data,m=w==="F!"||w==="F"?m:null}if(m){Xe=Br(m.nextSibling),h=m.data==="F!";break t}}Il(h)}h=!1}h&&(s=l[0])}}return l=wi(),l.memoizedState=l.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T_,lastRenderedState:s},l.queue=h,l=Y_.bind(null,Kt,h),h.dispatch=l,h=f1(!1),w=v1.bind(null,Kt,!1,h.queue),h=wi(),m={state:s,dispatch:null,action:r,pending:null},h.queue=m,l=eL.bind(null,Kt,m,w,l),m.dispatch=l,h.memoizedState=r,[s,l,!1]}function M_(r){var s=an();return D_(s,Ae,r)}function D_(r,s,l){if(s=d1(r,s,T_)[0],r=Wm(Zs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=gf(s)}catch(O){throw O===cf?qm:O}else h=s;s=an();var m=s.queue,w=m.dispatch;return l!==s.memoizedState&&(Kt.flags|=2048,Bu(9,Km(),nL.bind(null,m,l),null)),[h,w,r]}function nL(r,s){r.action=s}function O_(r){var s=an(),l=Ae;if(l!==null)return D_(s,l,r);an(),s=s.memoizedState,l=an();var h=l.queue.dispatch;return l.memoizedState=r,[s,h,!1]}function Bu(r,s,l,h){return r={tag:r,create:l,deps:h,inst:s,next:null},s=Kt.updateQueue,s===null&&(s=c1(),Kt.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r),r}function Km(){return{destroy:void 0,resource:void 0}}function k_(){return an().memoizedState}function Zm(r,s,l,h){var m=wi();h=h===void 0?null:h,Kt.flags|=r,m.memoizedState=Bu(1|s,Km(),l,h)}function mf(r,s,l,h){var m=an();h=h===void 0?null:h;var w=m.memoizedState.inst;Ae!==null&&h!==null&&r1(h,Ae.memoizedState.deps)?m.memoizedState=Bu(s,w,l,h):(Kt.flags|=r,m.memoizedState=Bu(1|s,w,l,h))}function L_(r,s){Zm(8390656,8,r,s)}function P_(r,s){mf(2048,8,r,s)}function N_(r,s){return mf(4,2,r,s)}function I_(r,s){return mf(4,4,r,s)}function j_(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function B_(r,s,l){l=l!=null?l.concat([r]):null,mf(4,4,j_.bind(null,s,r),l)}function g1(){}function z_(r,s){var l=an();s=s===void 0?null:s;var h=l.memoizedState;return s!==null&&r1(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function F_(r,s){var l=an();s=s===void 0?null:s;var h=l.memoizedState;if(s!==null&&r1(s,h[1]))return h[0];if(h=r(),Fl){Lr(!0);try{r()}finally{Lr(!1)}}return l.memoizedState=[h,s],h}function m1(r,s,l){return l===void 0||(ao&1073741824)!==0?r.memoizedState=s:(r.memoizedState=l,r=$2(),Kt.lanes|=r,po|=r,l)}function H_(r,s,l,h){return Di(l,s)?l:Nu.current!==null?(r=m1(r,l,h),Di(r,s)||(An=!0),r):(ao&42)===0?(An=!0,r.memoizedState=l):(r=$2(),Kt.lanes|=r,po|=r,s)}function U_(r,s,l,h,m){var w=V.p;V.p=w!==0&&8>w?w:8;var O=B.T,I={};B.T=I,v1(r,!1,s,l);try{var q=m(),et=B.S;if(et!==null&&et(I,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var dt=Z3(q,h);yf(r,s,dt,Ni(r))}else yf(r,s,h,Ni(r))}catch(ft){yf(r,s,{then:function(){},status:"rejected",reason:ft},Ni())}finally{V.p=w,B.T=O}}function iL(){}function y1(r,s,l,h){if(r.tag!==5)throw Error(n(476));var m=$_(r).queue;U_(r,m,s,at,l===null?iL:function(){return q_(r),l(h)})}function $_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:at},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function q_(r){var s=$_(r).next.queue;yf(r,s,{},Ni())}function b1(){return Xn(Nf)}function G_(){return an().memoizedState}function V_(){return an().memoizedState}function rL(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Ni();r=ro(l);var h=so(s,r,l);h!==null&&(Ii(h,s,l),df(h,s,l)),s={cache:Xv()},r.payload=s;return}s=s.return}}function sL(r,s,l){var h=Ni();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Jm(r)?X_(s,l):(l=Bv(r,s,l,h),l!==null&&(Ii(l,r,h),Q_(l,s,h)))}function Y_(r,s,l){var h=Ni();yf(r,s,l,h)}function yf(r,s,l,h){var m={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jm(r))X_(s,m);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var O=s.lastRenderedState,I=w(O,l);if(m.hasEagerState=!0,m.eagerState=I,Di(I,O))return Im(r,s,m,0),De===null&&Nm(),!1}catch{}finally{}if(l=Bv(r,s,m,h),l!==null)return Ii(l,r,h),Q_(l,s,h),!0}return!1}function v1(r,s,l,h){if(h={lane:2,revertLane:K1(),action:h,hasEagerState:!1,eagerState:null,next:null},Jm(r)){if(s)throw Error(n(479))}else s=Bv(r,l,h,2),s!==null&&Ii(s,r,2)}function Jm(r){var s=r.alternate;return r===Kt||s!==null&&s===Kt}function X_(r,s){Iu=Ym=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Q_(r,s,l){if((l&4194048)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Tl(r,l)}}var ty={readContext:Xn,use:Qm,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke},W_={readContext:Xn,use:Qm,useCallback:function(r,s){return wi().memoizedState=[r,s===void 0?null:s],r},useContext:Xn,useEffect:L_,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,Zm(4194308,4,j_.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Zm(4194308,4,r,s)},useInsertionEffect:function(r,s){Zm(4,2,r,s)},useMemo:function(r,s){var l=wi();s=s===void 0?null:s;var h=r();if(Fl){Lr(!0);try{r()}finally{Lr(!1)}}return l.memoizedState=[h,s],h},useReducer:function(r,s,l){var h=wi();if(l!==void 0){var m=l(s);if(Fl){Lr(!0);try{l(s)}finally{Lr(!1)}}}else m=s;return h.memoizedState=h.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},h.queue=r,r=r.dispatch=sL.bind(null,Kt,r),[h.memoizedState,r]},useRef:function(r){var s=wi();return r={current:r},s.memoizedState=r},useState:function(r){r=f1(r);var s=r.queue,l=Y_.bind(null,Kt,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:g1,useDeferredValue:function(r,s){var l=wi();return m1(l,r,s)},useTransition:function(){var r=f1(!1);return r=U_.bind(null,Kt,r.queue,!0,!1),wi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var h=Kt,m=wi();if(pe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=s(),De===null)throw Error(n(349));(le&124)!==0||y_(h,s,l)}m.memoizedState=l;var w={value:l,getSnapshot:s};return m.queue=w,L_(v_.bind(null,h,w,r),[r]),h.flags|=2048,Bu(9,Km(),b_.bind(null,h,w,l,s),null),l},useId:function(){var r=wi(),s=De.identifierPrefix;if(pe){var l=Qs,h=Xs;l=(h&~(1<<32-kn(h)-1)).toString(32)+l,s="«"+s+"R"+l,l=Xm++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=J3++,s="«"+s+"r"+l.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:b1,useFormState:R_,useActionState:R_,useOptimistic:function(r){var s=wi();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=v1.bind(null,Kt,!0,l),l.dispatch=s,[r,s]},useMemoCache:u1,useCacheRefresh:function(){return wi().memoizedState=rL.bind(null,Kt)}},K_={readContext:Xn,use:Qm,useCallback:z_,useContext:Xn,useEffect:P_,useImperativeHandle:B_,useInsertionEffect:N_,useLayoutEffect:I_,useMemo:F_,useReducer:Wm,useRef:k_,useState:function(){return Wm(Zs)},useDebugValue:g1,useDeferredValue:function(r,s){var l=an();return H_(l,Ae.memoizedState,r,s)},useTransition:function(){var r=Wm(Zs)[0],s=an().memoizedState;return[typeof r=="boolean"?r:gf(r),s]},useSyncExternalStore:m_,useId:G_,useHostTransitionStatus:b1,useFormState:M_,useActionState:M_,useOptimistic:function(r,s){var l=an();return A_(l,Ae,r,s)},useMemoCache:u1,useCacheRefresh:V_},aL={readContext:Xn,use:Qm,useCallback:z_,useContext:Xn,useEffect:P_,useImperativeHandle:B_,useInsertionEffect:N_,useLayoutEffect:I_,useMemo:F_,useReducer:h1,useRef:k_,useState:function(){return h1(Zs)},useDebugValue:g1,useDeferredValue:function(r,s){var l=an();return Ae===null?m1(l,r,s):H_(l,Ae.memoizedState,r,s)},useTransition:function(){var r=h1(Zs)[0],s=an().memoizedState;return[typeof r=="boolean"?r:gf(r),s]},useSyncExternalStore:m_,useId:G_,useHostTransitionStatus:b1,useFormState:O_,useActionState:O_,useOptimistic:function(r,s){var l=an();return Ae!==null?A_(l,Ae,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:u1,useCacheRefresh:V_},zu=null,bf=0;function ey(r){var s=bf;return bf+=1,zu===null&&(zu=[]),l_(zu,r,s)}function vf(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function ny(r,s){throw s.$$typeof===y?Error(n(525)):(r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Z_(r){var s=r._init;return s(r._payload)}function J_(r){function s(K,W){if(r){var tt=K.deletions;tt===null?(K.deletions=[W],K.flags|=16):tt.push(W)}}function l(K,W){if(!r)return null;for(;W!==null;)s(K,W),W=W.sibling;return null}function h(K){for(var W=new Map;K!==null;)K.key!==null?W.set(K.key,K):W.set(K.index,K),K=K.sibling;return W}function m(K,W){return K=Ys(K,W),K.index=0,K.sibling=null,K}function w(K,W,tt){return K.index=tt,r?(tt=K.alternate,tt!==null?(tt=tt.index,tt<W?(K.flags|=67108866,W):tt):(K.flags|=67108866,W)):(K.flags|=1048576,W)}function O(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function I(K,W,tt,ht){return W===null||W.tag!==6?(W=Fv(tt,K.mode,ht),W.return=K,W):(W=m(W,tt),W.return=K,W)}function q(K,W,tt,ht){var Ct=tt.type;return Ct===S?dt(K,W,tt.props.children,ht,tt.key):W!==null&&(W.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===$&&Z_(Ct)===W.type)?(W=m(W,tt.props),vf(W,tt),W.return=K,W):(W=Bm(tt.type,tt.key,tt.props,null,K.mode,ht),vf(W,tt),W.return=K,W)}function et(K,W,tt,ht){return W===null||W.tag!==4||W.stateNode.containerInfo!==tt.containerInfo||W.stateNode.implementation!==tt.implementation?(W=Hv(tt,K.mode,ht),W.return=K,W):(W=m(W,tt.children||[]),W.return=K,W)}function dt(K,W,tt,ht,Ct){return W===null||W.tag!==7?(W=kl(tt,K.mode,ht,Ct),W.return=K,W):(W=m(W,tt),W.return=K,W)}function ft(K,W,tt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Fv(""+W,K.mode,tt),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return tt=Bm(W.type,W.key,W.props,null,K.mode,tt),vf(tt,W),tt.return=K,tt;case v:return W=Hv(W,K.mode,tt),W.return=K,W;case $:var ht=W._init;return W=ht(W._payload),ft(K,W,tt)}if(ut(W)||G(W))return W=kl(W,K.mode,tt,null),W.return=K,W;if(typeof W.then=="function")return ft(K,ey(W),tt);if(W.$$typeof===C)return ft(K,Um(K,W),tt);ny(K,W)}return null}function nt(K,W,tt,ht){var Ct=W!==null?W.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Ct!==null?null:I(K,W,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case b:return tt.key===Ct?q(K,W,tt,ht):null;case v:return tt.key===Ct?et(K,W,tt,ht):null;case $:return Ct=tt._init,tt=Ct(tt._payload),nt(K,W,tt,ht)}if(ut(tt)||G(tt))return Ct!==null?null:dt(K,W,tt,ht,null);if(typeof tt.then=="function")return nt(K,W,ey(tt),ht);if(tt.$$typeof===C)return nt(K,W,Um(K,tt),ht);ny(K,tt)}return null}function it(K,W,tt,ht,Ct){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return K=K.get(tt)||null,I(W,K,""+ht,Ct);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case b:return K=K.get(ht.key===null?tt:ht.key)||null,q(W,K,ht,Ct);case v:return K=K.get(ht.key===null?tt:ht.key)||null,et(W,K,ht,Ct);case $:var te=ht._init;return ht=te(ht._payload),it(K,W,tt,ht,Ct)}if(ut(ht)||G(ht))return K=K.get(tt)||null,dt(W,K,ht,Ct,null);if(typeof ht.then=="function")return it(K,W,tt,ey(ht),Ct);if(ht.$$typeof===C)return it(K,W,tt,Um(W,ht),Ct);ny(W,ht)}return null}function Ht(K,W,tt,ht){for(var Ct=null,te=null,Ot=W,zt=W=0,En=null;Ot!==null&&zt<tt.length;zt++){Ot.index>zt?(En=Ot,Ot=null):En=Ot.sibling;var fe=nt(K,Ot,tt[zt],ht);if(fe===null){Ot===null&&(Ot=En);break}r&&Ot&&fe.alternate===null&&s(K,Ot),W=w(fe,W,zt),te===null?Ct=fe:te.sibling=fe,te=fe,Ot=En}if(zt===tt.length)return l(K,Ot),pe&&Pl(K,zt),Ct;if(Ot===null){for(;zt<tt.length;zt++)Ot=ft(K,tt[zt],ht),Ot!==null&&(W=w(Ot,W,zt),te===null?Ct=Ot:te.sibling=Ot,te=Ot);return pe&&Pl(K,zt),Ct}for(Ot=h(Ot);zt<tt.length;zt++)En=it(Ot,K,zt,tt[zt],ht),En!==null&&(r&&En.alternate!==null&&Ot.delete(En.key===null?zt:En.key),W=w(En,W,zt),te===null?Ct=En:te.sibling=En,te=En);return r&&Ot.forEach(function(xo){return s(K,xo)}),pe&&Pl(K,zt),Ct}function jt(K,W,tt,ht){if(tt==null)throw Error(n(151));for(var Ct=null,te=null,Ot=W,zt=W=0,En=null,fe=tt.next();Ot!==null&&!fe.done;zt++,fe=tt.next()){Ot.index>zt?(En=Ot,Ot=null):En=Ot.sibling;var xo=nt(K,Ot,fe.value,ht);if(xo===null){Ot===null&&(Ot=En);break}r&&Ot&&xo.alternate===null&&s(K,Ot),W=w(xo,W,zt),te===null?Ct=xo:te.sibling=xo,te=xo,Ot=En}if(fe.done)return l(K,Ot),pe&&Pl(K,zt),Ct;if(Ot===null){for(;!fe.done;zt++,fe=tt.next())fe=ft(K,fe.value,ht),fe!==null&&(W=w(fe,W,zt),te===null?Ct=fe:te.sibling=fe,te=fe);return pe&&Pl(K,zt),Ct}for(Ot=h(Ot);!fe.done;zt++,fe=tt.next())fe=it(Ot,K,zt,fe.value,ht),fe!==null&&(r&&fe.alternate!==null&&Ot.delete(fe.key===null?zt:fe.key),W=w(fe,W,zt),te===null?Ct=fe:te.sibling=fe,te=fe);return r&&Ot.forEach(function(o5){return s(K,o5)}),pe&&Pl(K,zt),Ct}function Ee(K,W,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===S&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case b:t:{for(var Ct=tt.key;W!==null;){if(W.key===Ct){if(Ct=tt.type,Ct===S){if(W.tag===7){l(K,W.sibling),ht=m(W,tt.props.children),ht.return=K,K=ht;break t}}else if(W.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===$&&Z_(Ct)===W.type){l(K,W.sibling),ht=m(W,tt.props),vf(ht,tt),ht.return=K,K=ht;break t}l(K,W);break}else s(K,W);W=W.sibling}tt.type===S?(ht=kl(tt.props.children,K.mode,ht,tt.key),ht.return=K,K=ht):(ht=Bm(tt.type,tt.key,tt.props,null,K.mode,ht),vf(ht,tt),ht.return=K,K=ht)}return O(K);case v:t:{for(Ct=tt.key;W!==null;){if(W.key===Ct)if(W.tag===4&&W.stateNode.containerInfo===tt.containerInfo&&W.stateNode.implementation===tt.implementation){l(K,W.sibling),ht=m(W,tt.children||[]),ht.return=K,K=ht;break t}else{l(K,W);break}else s(K,W);W=W.sibling}ht=Hv(tt,K.mode,ht),ht.return=K,K=ht}return O(K);case $:return Ct=tt._init,tt=Ct(tt._payload),Ee(K,W,tt,ht)}if(ut(tt))return Ht(K,W,tt,ht);if(G(tt)){if(Ct=G(tt),typeof Ct!="function")throw Error(n(150));return tt=Ct.call(tt),jt(K,W,tt,ht)}if(typeof tt.then=="function")return Ee(K,W,ey(tt),ht);if(tt.$$typeof===C)return Ee(K,W,Um(K,tt),ht);ny(K,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,W!==null&&W.tag===6?(l(K,W.sibling),ht=m(W,tt),ht.return=K,K=ht):(l(K,W),ht=Fv(tt,K.mode,ht),ht.return=K,K=ht),O(K)):l(K,W)}return function(K,W,tt,ht){try{bf=0;var Ct=Ee(K,W,tt,ht);return zu=null,Ct}catch(Ot){if(Ot===cf||Ot===qm)throw Ot;var te=Oi(29,Ot,null,K.mode);return te.lanes=ht,te.return=K,te}finally{}}}var Fu=J_(!0),t2=J_(!1),gr=Z(null),fs=null;function oo(r){var s=r.alternate;lt(gn,gn.current&1),lt(gr,r),fs===null&&(s===null||Nu.current!==null||s.memoizedState!==null)&&(fs=r)}function e2(r){if(r.tag===22){if(lt(gn,gn.current),lt(gr,r),fs===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(fs=r)}}else lo()}function lo(){lt(gn,gn.current),lt(gr,gr.current)}function Js(r){ot(gr),fs===r&&(fs=null),ot(gn)}var gn=Z(0);function iy(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||cw(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function w1(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:g({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var S1={enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Ni(),m=ro(h);m.payload=s,l!=null&&(m.callback=l),s=so(r,m,h),s!==null&&(Ii(s,r,h),df(s,r,h))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Ni(),m=ro(h);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=so(r,m,h),s!==null&&(Ii(s,r,h),df(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Ni(),h=ro(l);h.tag=2,s!=null&&(h.callback=s),s=so(r,h,l),s!==null&&(Ii(s,r,l),df(s,r,l))}};function n2(r,s,l,h,m,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,O):s.prototype&&s.prototype.isPureReactComponent?!tf(l,h)||!tf(m,w):!0}function i2(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&S1.enqueueReplaceState(s,s.state,null)}function Hl(r,s){var l=s;if("ref"in s){l={};for(var h in s)h!=="ref"&&(l[h]=s[h])}if(r=r.defaultProps){l===s&&(l=g({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}var ry=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function r2(r){ry(r)}function s2(r){console.error(r)}function a2(r){ry(r)}function sy(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function o2(r,s,l){try{var h=r.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function A1(r,s,l){return l=ro(l),l.tag=3,l.payload={element:null},l.callback=function(){sy(r,s)},l}function l2(r){return r=ro(r),r.tag=3,r}function c2(r,s,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var w=h.value;r.payload=function(){return m(w)},r.callback=function(){o2(s,l,h)}}var O=l.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){o2(s,l,h),typeof m!="function"&&(go===null?go=new Set([this]):go.add(this));var I=h.stack;this.componentDidCatch(h.value,{componentStack:I!==null?I:""})})}function oL(r,s,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=l.alternate,s!==null&&af(s,l,m,!0),l=gr.current,l!==null){switch(l.tag){case 13:return fs===null?V1():l.alternate===null&&Qe===0&&(Qe=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Kv?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([h]):s.add(h),X1(r,h,m)),!1;case 22:return l.flags|=65536,h===Kv?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([h]):l.add(h)),X1(r,h,m)),!1}throw Error(n(435,l.tag))}return X1(r,h,m),V1(),!1}if(pe)return s=gr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,h!==qv&&(r=Error(n(422),{cause:h}),sf(dr(r,l)))):(h!==qv&&(s=Error(n(423),{cause:h}),sf(dr(s,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,h=dr(h,l),m=A1(r.stateNode,h,m),t1(r,m),Qe!==4&&(Qe=2)),!1;var w=Error(n(520),{cause:h});if(w=dr(w,l),Cf===null?Cf=[w]:Cf.push(w),Qe!==4&&(Qe=2),s===null)return!0;h=dr(h,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=A1(l.stateNode,h,r),t1(l,r),!1;case 1:if(s=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(go===null||!go.has(w))))return l.flags|=65536,m&=-m,l.lanes|=m,m=l2(m),c2(m,r,l,h),t1(l,m),!1}l=l.return}while(l!==null);return!1}var u2=Error(n(461)),An=!1;function Ln(r,s,l,h){s.child=r===null?t2(s,null,l,h):Fu(s,r.child,l,h)}function d2(r,s,l,h,m){l=l.render;var w=s.ref;if("ref"in h){var O={};for(var I in h)I!=="ref"&&(O[I]=h[I])}else O=h;return Bl(s),h=s1(r,s,l,O,w,m),I=a1(),r!==null&&!An?(o1(r,s,m),ta(r,s,m)):(pe&&I&&Uv(s),s.flags|=1,Ln(r,s,h,m),s.child)}function h2(r,s,l,h,m){if(r===null){var w=l.type;return typeof w=="function"&&!zv(w)&&w.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=w,f2(r,s,w,h,m)):(r=Bm(l.type,null,h,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(w=r.child,!D1(r,m)){var O=w.memoizedProps;if(l=l.compare,l=l!==null?l:tf,l(O,h)&&r.ref===s.ref)return ta(r,s,m)}return s.flags|=1,r=Ys(w,h),r.ref=s.ref,r.return=s,s.child=r}function f2(r,s,l,h,m){if(r!==null){var w=r.memoizedProps;if(tf(w,h)&&r.ref===s.ref)if(An=!1,s.pendingProps=h=w,D1(r,m))(r.flags&131072)!==0&&(An=!0);else return s.lanes=r.lanes,ta(r,s,m)}return x1(r,s,l,h,m)}function p2(r,s,l){var h=s.pendingProps,m=h.children,w=r!==null?r.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=w!==null?w.baseLanes|l:l,r!==null){for(m=s.child=r.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;s.childLanes=w&~h}else s.childLanes=0,s.child=null;return g2(r,s,h,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&$m(s,w!==null?w.cachePool:null),w!==null?f_(s,w):n1(),e2(s);else return s.lanes=s.childLanes=536870912,g2(r,s,w!==null?w.baseLanes|l:l,l)}else w!==null?($m(s,w.cachePool),f_(s,w),lo(),s.memoizedState=null):(r!==null&&$m(s,null),n1(),lo());return Ln(r,s,m,l),s.child}function g2(r,s,l,h){var m=Wv();return m=m===null?null:{parent:pn._currentValue,pool:m},s.memoizedState={baseLanes:l,cachePool:m},r!==null&&$m(s,null),n1(),e2(s),r!==null&&af(r,s,h,!0),null}function ay(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function x1(r,s,l,h,m){return Bl(s),l=s1(r,s,l,h,void 0,m),h=a1(),r!==null&&!An?(o1(r,s,m),ta(r,s,m)):(pe&&h&&Uv(s),s.flags|=1,Ln(r,s,l,m),s.child)}function m2(r,s,l,h,m,w){return Bl(s),s.updateQueue=null,l=g_(s,h,l,m),p_(r),h=a1(),r!==null&&!An?(o1(r,s,w),ta(r,s,w)):(pe&&h&&Uv(s),s.flags|=1,Ln(r,s,l,w),s.child)}function y2(r,s,l,h,m){if(Bl(s),s.stateNode===null){var w=Du,O=l.contextType;typeof O=="object"&&O!==null&&(w=Xn(O)),w=new l(h,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=S1,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=h,w.state=s.memoizedState,w.refs={},Zv(s),O=l.contextType,w.context=typeof O=="object"&&O!==null?Xn(O):Du,w.state=s.memoizedState,O=l.getDerivedStateFromProps,typeof O=="function"&&(w1(s,l,O,h),w.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&S1.enqueueReplaceState(w,w.state,null),ff(s,h,w,m),hf(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(r===null){w=s.stateNode;var I=s.memoizedProps,q=Hl(l,I);w.props=q;var et=w.context,dt=l.contextType;O=Du,typeof dt=="object"&&dt!==null&&(O=Xn(dt));var ft=l.getDerivedStateFromProps;dt=typeof ft=="function"||typeof w.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,dt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I||et!==O)&&i2(s,w,h,O),io=!1;var nt=s.memoizedState;w.state=nt,ff(s,h,w,m),hf(),et=s.memoizedState,I||nt!==et||io?(typeof ft=="function"&&(w1(s,l,ft,h),et=s.memoizedState),(q=io||n2(s,l,q,h,nt,et,O))?(dt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=et),w.props=h,w.state=et,w.context=O,h=q):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Jv(r,s),O=s.memoizedProps,dt=Hl(l,O),w.props=dt,ft=s.pendingProps,nt=w.context,et=l.contextType,q=Du,typeof et=="object"&&et!==null&&(q=Xn(et)),I=l.getDerivedStateFromProps,(et=typeof I=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==ft||nt!==q)&&i2(s,w,h,q),io=!1,nt=s.memoizedState,w.state=nt,ff(s,h,w,m),hf();var it=s.memoizedState;O!==ft||nt!==it||io||r!==null&&r.dependencies!==null&&Hm(r.dependencies)?(typeof I=="function"&&(w1(s,l,I,h),it=s.memoizedState),(dt=io||n2(s,l,dt,h,nt,it,q)||r!==null&&r.dependencies!==null&&Hm(r.dependencies))?(et||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,it,q),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,it,q)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&nt===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&nt===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=it),w.props=h,w.state=it,w.context=q,h=dt):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&nt===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&nt===r.memoizedState||(s.flags|=1024),h=!1)}return w=h,ay(r,s),h=(s.flags&128)!==0,w||h?(w=s.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,r!==null&&h?(s.child=Fu(s,r.child,null,m),s.child=Fu(s,null,l,m)):Ln(r,s,l,m),s.memoizedState=w.state,r=s.child):r=ta(r,s,m),r}function b2(r,s,l,h){return rf(),s.flags|=256,Ln(r,s,l,h),s.child}var E1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _1(r){return{baseLanes:r,cachePool:s_()}}function C1(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=mr),r}function v2(r,s,l){var h=s.pendingProps,m=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(gn.current&2)!==0),O&&(m=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,r===null){if(pe){if(m?oo(s):lo(),pe){var I=Xe,q;if(q=I){t:{for(q=I,I=hs;q.nodeType!==8;){if(!I){I=null;break t}if(q=Br(q.nextSibling),q===null){I=null;break t}}I=q}I!==null?(s.memoizedState={dehydrated:I,treeContext:Ll!==null?{id:Xs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},q=Oi(18,null,null,0),q.stateNode=I,q.return=s,s.child=q,si=s,Xe=null,q=!0):q=!1}q||Il(s)}if(I=s.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return cw(I)?s.lanes=32:s.lanes=536870912,null;Js(s)}return I=h.children,h=h.fallback,m?(lo(),m=s.mode,I=oy({mode:"hidden",children:I},m),h=kl(h,m,l,null),I.return=s,h.return=s,I.sibling=h,s.child=I,m=s.child,m.memoizedState=_1(l),m.childLanes=C1(r,O,l),s.memoizedState=E1,h):(oo(s),T1(s,I))}if(q=r.memoizedState,q!==null&&(I=q.dehydrated,I!==null)){if(w)s.flags&256?(oo(s),s.flags&=-257,s=R1(r,s,l)):s.memoizedState!==null?(lo(),s.child=r.child,s.flags|=128,s=null):(lo(),m=h.fallback,I=s.mode,h=oy({mode:"visible",children:h.children},I),m=kl(m,I,l,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,Fu(s,r.child,null,l),h=s.child,h.memoizedState=_1(l),h.childLanes=C1(r,O,l),s.memoizedState=E1,s=m);else if(oo(s),cw(I)){if(O=I.nextSibling&&I.nextSibling.dataset,O)var et=O.dgst;O=et,h=Error(n(419)),h.stack="",h.digest=O,sf({value:h,source:null,stack:null}),s=R1(r,s,l)}else if(An||af(r,s,l,!1),O=(l&r.childLanes)!==0,An||O){if(O=De,O!==null&&(h=l&-l,h=(h&42)!==0?1:$h(h),h=(h&(O.suspendedLanes|l))!==0?0:h,h!==0&&h!==q.retryLane))throw q.retryLane=h,Mu(r,h),Ii(O,r,h),u2;I.data==="$?"||V1(),s=R1(r,s,l)}else I.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=q.treeContext,Xe=Br(I.nextSibling),si=s,pe=!0,Nl=null,hs=!1,r!==null&&(fr[pr++]=Xs,fr[pr++]=Qs,fr[pr++]=Ll,Xs=r.id,Qs=r.overflow,Ll=s),s=T1(s,h.children),s.flags|=4096);return s}return m?(lo(),m=h.fallback,I=s.mode,q=r.child,et=q.sibling,h=Ys(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,et!==null?m=Ys(et,m):(m=kl(m,I,l,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,I=r.child.memoizedState,I===null?I=_1(l):(q=I.cachePool,q!==null?(et=pn._currentValue,q=q.parent!==et?{parent:et,pool:et}:q):q=s_(),I={baseLanes:I.baseLanes|l,cachePool:q}),m.memoizedState=I,m.childLanes=C1(r,O,l),s.memoizedState=E1,h):(oo(s),l=r.child,r=l.sibling,l=Ys(l,{mode:"visible",children:h.children}),l.return=s,l.sibling=null,r!==null&&(O=s.deletions,O===null?(s.deletions=[r],s.flags|=16):O.push(r)),s.child=l,s.memoizedState=null,l)}function T1(r,s){return s=oy({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function oy(r,s){return r=Oi(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function R1(r,s,l){return Fu(s,r.child,null,l),r=T1(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function w2(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Vv(r.return,s,l)}function M1(r,s,l,h,m){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=h,w.tail=l,w.tailMode=m)}function S2(r,s,l){var h=s.pendingProps,m=h.revealOrder,w=h.tail;if(Ln(r,s,h.children,l),h=gn.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&w2(r,l,s);else if(r.tag===19)w2(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}switch(lt(gn,h),m){case"forwards":for(l=s.child,m=null;l!==null;)r=l.alternate,r!==null&&iy(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),M1(s,!1,m,l,w);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&iy(r)===null){s.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}M1(s,!0,l,null,w);break;case"together":M1(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ta(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),po|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(af(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,l=Ys(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Ys(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function D1(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Hm(r)))}function lL(r,s,l){switch(s.tag){case 3:Pt(s,s.stateNode.containerInfo),no(s,pn,r.memoizedState.cache),rf();break;case 27:case 5:Nt(s);break;case 4:Pt(s,s.stateNode.containerInfo);break;case 10:no(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(oo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?v2(r,s,l):(oo(s),r=ta(r,s,l),r!==null?r.sibling:null);oo(s);break;case 19:var m=(r.flags&128)!==0;if(h=(l&s.childLanes)!==0,h||(af(r,s,l,!1),h=(l&s.childLanes)!==0),m){if(h)return S2(r,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),lt(gn,gn.current),h)break;return null;case 22:case 23:return s.lanes=0,p2(r,s,l);case 24:no(s,pn,r.memoizedState.cache)}return ta(r,s,l)}function A2(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)An=!0;else{if(!D1(r,l)&&(s.flags&128)===0)return An=!1,lL(r,s,l);An=(r.flags&131072)!==0}else An=!1,pe&&(s.flags&1048576)!==0&&ZE(s,Fm,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var h=s.elementType,m=h._init;if(h=m(h._payload),s.type=h,typeof h=="function")zv(h)?(r=Hl(h,r),s.tag=1,s=y2(null,s,h,r,l)):(s.tag=0,s=x1(null,s,h,r,l));else{if(h!=null){if(m=h.$$typeof,m===_){s.tag=11,s=d2(null,s,h,r,l);break t}else if(m===N){s.tag=14,s=h2(null,s,h,r,l);break t}}throw s=X(h)||h,Error(n(306,s,""))}}return s;case 0:return x1(r,s,s.type,s.pendingProps,l);case 1:return h=s.type,m=Hl(h,s.pendingProps),y2(r,s,h,m,l);case 3:t:{if(Pt(s,s.stateNode.containerInfo),r===null)throw Error(n(387));h=s.pendingProps;var w=s.memoizedState;m=w.element,Jv(r,s),ff(s,h,null,l);var O=s.memoizedState;if(h=O.cache,no(s,pn,h),h!==w.cache&&Yv(s,[pn],l,!0),hf(),h=O.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=b2(r,s,h,l);break t}else if(h!==m){m=dr(Error(n(424)),s),sf(m),s=b2(r,s,h,l);break t}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Xe=Br(r.firstChild),si=s,pe=!0,Nl=null,hs=!0,l=t2(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(rf(),h===m){s=ta(r,s,l);break t}Ln(r,s,h,l)}s=s.child}return s;case 26:return ay(r,s),r===null?(l=CC(s.type,null,s.pendingProps,null))?s.memoizedState=l:pe||(l=s.type,r=s.pendingProps,h=Sy(yt.current).createElement(l),h[gt]=s,h[vt]=r,Nn(h,l,r),he(h),s.stateNode=h):s.memoizedState=CC(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Nt(s),r===null&&pe&&(h=s.stateNode=xC(s.type,s.pendingProps,yt.current),si=s,hs=!0,m=Xe,bo(s.type)?(uw=m,Xe=Br(h.firstChild)):Xe=m),Ln(r,s,s.pendingProps.children,l),ay(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&pe&&((m=h=Xe)&&(h=IL(h,s.type,s.pendingProps,hs),h!==null?(s.stateNode=h,si=s,Xe=Br(h.firstChild),hs=!1,m=!0):m=!1),m||Il(s)),Nt(s),m=s.type,w=s.pendingProps,O=r!==null?r.memoizedProps:null,h=w.children,aw(m,w)?h=null:O!==null&&aw(m,O)&&(s.flags|=32),s.memoizedState!==null&&(m=s1(r,s,tL,null,null,l),Nf._currentValue=m),ay(r,s),Ln(r,s,h,l),s.child;case 6:return r===null&&pe&&((r=l=Xe)&&(l=jL(l,s.pendingProps,hs),l!==null?(s.stateNode=l,si=s,Xe=null,r=!0):r=!1),r||Il(s)),null;case 13:return v2(r,s,l);case 4:return Pt(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Fu(s,null,h,l):Ln(r,s,h,l),s.child;case 11:return d2(r,s,s.type,s.pendingProps,l);case 7:return Ln(r,s,s.pendingProps,l),s.child;case 8:return Ln(r,s,s.pendingProps.children,l),s.child;case 12:return Ln(r,s,s.pendingProps.children,l),s.child;case 10:return h=s.pendingProps,no(s,s.type,h.value),Ln(r,s,h.children,l),s.child;case 9:return m=s.type._context,h=s.pendingProps.children,Bl(s),m=Xn(m),h=h(m),s.flags|=1,Ln(r,s,h,l),s.child;case 14:return h2(r,s,s.type,s.pendingProps,l);case 15:return f2(r,s,s.type,s.pendingProps,l);case 19:return S2(r,s,l);case 31:return h=s.pendingProps,l=s.mode,h={mode:h.mode,children:h.children},r===null?(l=oy(h,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=Ys(r.child,h),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return p2(r,s,l);case 24:return Bl(s),h=Xn(pn),r===null?(m=Wv(),m===null&&(m=De,w=Xv(),m.pooledCache=w,w.refCount++,w!==null&&(m.pooledCacheLanes|=l),m=w),s.memoizedState={parent:h,cache:m},Zv(s),no(s,pn,m)):((r.lanes&l)!==0&&(Jv(r,s),ff(s,null,null,l),hf()),m=r.memoizedState,w=s.memoizedState,m.parent!==h?(m={parent:h,cache:h},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),no(s,pn,h)):(h=w.cache,no(s,pn,h),h!==m.cache&&Yv(s,[pn],l,!0))),Ln(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function ea(r){r.flags|=4}function x2(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!OC(s)){if(s=gr.current,s!==null&&((le&4194048)===le?fs!==null:(le&62914560)!==le&&(le&536870912)===0||s!==fs))throw uf=Kv,a_;r.flags|=8192}}function ly(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Em():536870912,r.lanes|=s,qu|=s)}function wf(r,s){if(!pe)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function qe(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function cL(r,s,l){var h=s.pendingProps;switch($v(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return qe(s),null;case 3:return l=s.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Ks(pn),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(nf(s)?ea(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,e_())),qe(s),null;case 26:return l=s.memoizedState,r===null?(ea(s),l!==null?(qe(s),x2(s,l)):(qe(s),s.flags&=-16777217)):l?l!==r.memoizedState?(ea(s),qe(s),x2(s,l)):(qe(s),s.flags&=-16777217):(r.memoizedProps!==h&&ea(s),qe(s),s.flags&=-16777217),null;case 27:Ut(s),l=yt.current;var m=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==h&&ea(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return qe(s),null}r=mt.current,nf(s)?JE(s):(r=xC(m,h,l),s.stateNode=r,ea(s))}return qe(s),null;case 5:if(Ut(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&ea(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return qe(s),null}if(r=mt.current,nf(s))JE(s);else{switch(m=Sy(yt.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?r.multiple=!0:h.size&&(r.size=h.size);break;default:r=typeof h.is=="string"?m.createElement(l,{is:h.is}):m.createElement(l)}}r[gt]=s,r[vt]=h;t:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break t;for(;m.sibling===null;){if(m.return===null||m.return===s)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=r;t:switch(Nn(r,l,h),l){case"button":case"input":case"select":case"textarea":r=!!h.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&ea(s)}}return qe(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==h&&ea(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(n(166));if(r=yt.current,nf(s)){if(r=s.stateNode,l=s.memoizedProps,h=null,m=si,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}r[gt]=s,r=!!(r.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||mC(r.nodeValue,l)),r||Il(s)}else r=Sy(r).createTextNode(h),r[gt]=s,s.stateNode=r}return qe(s),null;case 13:if(h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=nf(s),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(n(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[gt]=s}else rf(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),m=!1}else m=e_(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Js(s),s):(Js(s),null)}if(Js(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=h!==null,r=r!==null&&r.memoizedState!==null,l){h=s.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var w=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==m&&(h.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),ly(s,s.updateQueue),qe(s),null;case 4:return me(),r===null&&ew(s.stateNode.containerInfo),qe(s),null;case 10:return Ks(s.type),qe(s),null;case 19:if(ot(gn),m=s.memoizedState,m===null)return qe(s),null;if(h=(s.flags&128)!==0,w=m.rendering,w===null)if(h)wf(m,!1);else{if(Qe!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=iy(r),w!==null){for(s.flags|=128,wf(m,!1),r=w.updateQueue,s.updateQueue=r,ly(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)KE(l,r),l=l.sibling;return lt(gn,gn.current&1|2),s.child}r=r.sibling}m.tail!==null&&Ye()>dy&&(s.flags|=128,h=!0,wf(m,!1),s.lanes=4194304)}else{if(!h)if(r=iy(w),r!==null){if(s.flags|=128,h=!0,r=r.updateQueue,s.updateQueue=r,ly(s,r),wf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!pe)return qe(s),null}else 2*Ye()-m.renderingStartTime>dy&&l!==536870912&&(s.flags|=128,h=!0,wf(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(r=m.last,r!==null?r.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ye(),s.sibling=null,r=gn.current,lt(gn,h?r&1|2:r&1),s):(qe(s),null);case 22:case 23:return Js(s),i1(),h=s.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(l&536870912)!==0&&(s.flags&128)===0&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),l=s.updateQueue,l!==null&&ly(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==l&&(s.flags|=2048),r!==null&&ot(zl),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ks(pn),qe(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function uL(r,s){switch($v(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ks(pn),me(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ut(s),null;case 13:if(Js(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));rf()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ot(gn),null;case 4:return me(),null;case 10:return Ks(s.type),null;case 22:case 23:return Js(s),i1(),r!==null&&ot(zl),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ks(pn),null;case 25:return null;default:return null}}function E2(r,s){switch($v(s),s.tag){case 3:Ks(pn),me();break;case 26:case 27:case 5:Ut(s);break;case 4:me();break;case 13:Js(s);break;case 19:ot(gn);break;case 10:Ks(s.type);break;case 22:case 23:Js(s),i1(),r!==null&&ot(zl);break;case 24:Ks(pn)}}function Sf(r,s){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&r)===r){h=void 0;var w=l.create,O=l.inst;h=w(),O.destroy=h}l=l.next}while(l!==m)}}catch(I){Me(s,s.return,I)}}function co(r,s,l){try{var h=s.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var w=m.next;h=w;do{if((h.tag&r)===r){var O=h.inst,I=O.destroy;if(I!==void 0){O.destroy=void 0,m=s;var q=l,et=I;try{et()}catch(dt){Me(m,q,dt)}}}h=h.next}while(h!==w)}}catch(dt){Me(s,s.return,dt)}}function _2(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{h_(s,l)}catch(h){Me(r,r.return,h)}}}function C2(r,s,l){l.props=Hl(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(h){Me(r,s,h)}}function Af(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof l=="function"?r.refCleanup=l(h):l.current=h}}catch(m){Me(r,s,m)}}function ps(r,s){var l=r.ref,h=r.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){Me(r,s,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Me(r,s,m)}else l.current=null}function T2(r){var s=r.type,l=r.memoizedProps,h=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){Me(r,r.return,m)}}function O1(r,s,l){try{var h=r.stateNode;OL(h,r.type,l,s),h[vt]=s}catch(m){Me(r,r.return,m)}}function R2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&bo(r.type)||r.tag===4}function k1(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||R2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&bo(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function L1(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=wy));else if(h!==4&&(h===27&&bo(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(L1(r,s,l),r=r.sibling;r!==null;)L1(r,s,l),r=r.sibling}function cy(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(h===27&&bo(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(cy(r,s,l),r=r.sibling;r!==null;)cy(r,s,l),r=r.sibling}function M2(r){var s=r.stateNode,l=r.memoizedProps;try{for(var h=r.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Nn(s,h,l),s[gt]=r,s[vt]=l}catch(w){Me(r,r.return,w)}}var na=!1,Ze=!1,P1=!1,D2=typeof WeakSet=="function"?WeakSet:Set,xn=null;function dL(r,s){if(r=r.containerInfo,rw=Ty,r=HE(r),kv(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else t:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break t}var O=0,I=-1,q=-1,et=0,dt=0,ft=r,nt=null;e:for(;;){for(var it;ft!==l||m!==0&&ft.nodeType!==3||(I=O+m),ft!==w||h!==0&&ft.nodeType!==3||(q=O+h),ft.nodeType===3&&(O+=ft.nodeValue.length),(it=ft.firstChild)!==null;)nt=ft,ft=it;for(;;){if(ft===r)break e;if(nt===l&&++et===m&&(I=O),nt===w&&++dt===h&&(q=O),(it=ft.nextSibling)!==null)break;ft=nt,nt=ft.parentNode}ft=it}l=I===-1||q===-1?null:{start:I,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(sw={focusedElem:r,selectionRange:l},Ty=!1,xn=s;xn!==null;)if(s=xn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,xn=r;else for(;xn!==null;){switch(s=xn,w=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,l=s,m=w.memoizedProps,w=w.memoizedState,h=l.stateNode;try{var Ht=Hl(l.type,m,l.elementType===l.type);r=h.getSnapshotBeforeUpdate(Ht,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(jt){Me(l,l.return,jt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)lw(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":lw(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=s.sibling,r!==null){r.return=s.return,xn=r;break}xn=s.return}}function O2(r,s,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:uo(r,l),h&4&&Sf(5,l);break;case 1:if(uo(r,l),h&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(O){Me(l,l.return,O)}else{var m=Hl(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(m,s,r.__reactInternalSnapshotBeforeUpdate)}catch(O){Me(l,l.return,O)}}h&64&&_2(l),h&512&&Af(l,l.return);break;case 3:if(uo(r,l),h&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{h_(r,s)}catch(O){Me(l,l.return,O)}}break;case 27:s===null&&h&4&&M2(l);case 26:case 5:uo(r,l),s===null&&h&4&&T2(l),h&512&&Af(l,l.return);break;case 12:uo(r,l);break;case 13:uo(r,l),h&4&&P2(r,l),h&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=wL.bind(null,l),BL(r,l))));break;case 22:if(h=l.memoizedState!==null||na,!h){s=s!==null&&s.memoizedState!==null||Ze,m=na;var w=Ze;na=h,(Ze=s)&&!w?ho(r,l,(l.subtreeFlags&8772)!==0):uo(r,l),na=m,Ze=w}break;case 30:break;default:uo(r,l)}}function k2(r){var s=r.alternate;s!==null&&(r.alternate=null,k2(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Dt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Be=null,Si=!1;function ia(r,s,l){for(l=l.child;l!==null;)L2(r,s,l),l=l.sibling}function L2(r,s,l){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(mi,l)}catch{}switch(l.tag){case 26:Ze||ps(l,s),ia(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ze||ps(l,s);var h=Be,m=Si;bo(l.type)&&(Be=l.stateNode,Si=!1),ia(r,s,l),Of(l.stateNode),Be=h,Si=m;break;case 5:Ze||ps(l,s);case 6:if(h=Be,m=Si,Be=null,ia(r,s,l),Be=h,Si=m,Be!==null)if(Si)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(l.stateNode)}catch(w){Me(l,s,w)}else try{Be.removeChild(l.stateNode)}catch(w){Me(l,s,w)}break;case 18:Be!==null&&(Si?(r=Be,SC(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),zf(r)):SC(Be,l.stateNode));break;case 4:h=Be,m=Si,Be=l.stateNode.containerInfo,Si=!0,ia(r,s,l),Be=h,Si=m;break;case 0:case 11:case 14:case 15:Ze||co(2,l,s),Ze||co(4,l,s),ia(r,s,l);break;case 1:Ze||(ps(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"&&C2(l,s,h)),ia(r,s,l);break;case 21:ia(r,s,l);break;case 22:Ze=(h=Ze)||l.memoizedState!==null,ia(r,s,l),Ze=h;break;default:ia(r,s,l)}}function P2(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{zf(r)}catch(l){Me(s,s.return,l)}}function hL(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new D2),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new D2),s;default:throw Error(n(435,r.tag))}}function N1(r,s){var l=hL(r);s.forEach(function(h){var m=SL.bind(null,r,h);l.has(h)||(l.add(h),h.then(m,m))})}function ki(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],w=r,O=s,I=O;t:for(;I!==null;){switch(I.tag){case 27:if(bo(I.type)){Be=I.stateNode,Si=!1;break t}break;case 5:Be=I.stateNode,Si=!1;break t;case 3:case 4:Be=I.stateNode.containerInfo,Si=!0;break t}I=I.return}if(Be===null)throw Error(n(160));L2(w,O,m),Be=null,Si=!1,w=m.alternate,w!==null&&(w.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)N2(s,r),s=s.sibling}var jr=null;function N2(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ki(s,r),Li(r),h&4&&(co(3,r,r.return),Sf(3,r),co(5,r,r.return));break;case 1:ki(s,r),Li(r),h&512&&(Ze||l===null||ps(l,l.return)),h&64&&na&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=jr;if(ki(s,r),Li(r),h&512&&(Ze||l===null||ps(l,l.return)),h&4){var w=l!==null?l.memoizedState:null;if(h=r.memoizedState,l===null)if(h===null)if(r.stateNode===null){t:{h=r.type,l=r.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":w=m.getElementsByTagName("title")[0],(!w||w[Ft]||w[gt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=m.createElement(h),m.head.insertBefore(w,m.querySelector("head > title"))),Nn(w,h,l),w[gt]=r,he(w),h=w;break t;case"link":var O=MC("link","href",m).get(h+(l.href||""));if(O){for(var I=0;I<O.length;I++)if(w=O[I],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){O.splice(I,1);break e}}w=m.createElement(h),Nn(w,h,l),m.head.appendChild(w);break;case"meta":if(O=MC("meta","content",m).get(h+(l.content||""))){for(I=0;I<O.length;I++)if(w=O[I],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){O.splice(I,1);break e}}w=m.createElement(h),Nn(w,h,l),m.head.appendChild(w);break;default:throw Error(n(468,h))}w[gt]=r,he(w),h=w}r.stateNode=h}else DC(m,r.type,r.stateNode);else r.stateNode=RC(m,h,r.memoizedProps);else w!==h?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,h===null?DC(m,r.type,r.stateNode):RC(m,h,r.memoizedProps)):h===null&&r.stateNode!==null&&O1(r,r.memoizedProps,l.memoizedProps)}break;case 27:ki(s,r),Li(r),h&512&&(Ze||l===null||ps(l,l.return)),l!==null&&h&4&&O1(r,r.memoizedProps,l.memoizedProps);break;case 5:if(ki(s,r),Li(r),h&512&&(Ze||l===null||ps(l,l.return)),r.flags&32){m=r.stateNode;try{Au(m,"")}catch(it){Me(r,r.return,it)}}h&4&&r.stateNode!=null&&(m=r.memoizedProps,O1(r,m,l!==null?l.memoizedProps:m)),h&1024&&(P1=!0);break;case 6:if(ki(s,r),Li(r),h&4){if(r.stateNode===null)throw Error(n(162));h=r.memoizedProps,l=r.stateNode;try{l.nodeValue=h}catch(it){Me(r,r.return,it)}}break;case 3:if(Ey=null,m=jr,jr=Ay(s.containerInfo),ki(s,r),jr=m,Li(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{zf(s.containerInfo)}catch(it){Me(r,r.return,it)}P1&&(P1=!1,I2(r));break;case 4:h=jr,jr=Ay(r.stateNode.containerInfo),ki(s,r),Li(r),jr=h;break;case 12:ki(s,r),Li(r);break;case 13:ki(s,r),Li(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(H1=Ye()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,N1(r,h)));break;case 22:m=r.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,et=na,dt=Ze;if(na=et||m,Ze=dt||q,ki(s,r),Ze=dt,na=et,Li(r),h&8192)t:for(s=r.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||q||na||Ze||Ul(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){q=l=s;try{if(w=q.stateNode,m)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{I=q.stateNode;var ft=q.memoizedProps.style,nt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;I.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(it){Me(q,q.return,it)}}}else if(s.tag===6){if(l===null){q=s;try{q.stateNode.nodeValue=m?"":q.memoizedProps}catch(it){Me(q,q.return,it)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=r.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,N1(r,l))));break;case 19:ki(s,r),Li(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,N1(r,h)));break;case 30:break;case 21:break;default:ki(s,r),Li(r)}}function Li(r){var s=r.flags;if(s&2){try{for(var l,h=r.return;h!==null;){if(R2(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var m=l.stateNode,w=k1(r);cy(r,w,m);break;case 5:var O=l.stateNode;l.flags&32&&(Au(O,""),l.flags&=-33);var I=k1(r);cy(r,I,O);break;case 3:case 4:var q=l.stateNode.containerInfo,et=k1(r);L1(r,et,q);break;default:throw Error(n(161))}}catch(dt){Me(r,r.return,dt)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function I2(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;I2(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function uo(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)O2(r,s.alternate,s),s=s.sibling}function Ul(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:co(4,s,s.return),Ul(s);break;case 1:ps(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&C2(s,s.return,l),Ul(s);break;case 27:Of(s.stateNode);case 26:case 5:ps(s,s.return),Ul(s);break;case 22:s.memoizedState===null&&Ul(s);break;case 30:Ul(s);break;default:Ul(s)}r=r.sibling}}function ho(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,m=r,w=s,O=w.flags;switch(w.tag){case 0:case 11:case 15:ho(m,w,l),Sf(4,w);break;case 1:if(ho(m,w,l),h=w,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(et){Me(h,h.return,et)}if(h=w,m=h.updateQueue,m!==null){var I=h.stateNode;try{var q=m.shared.hiddenCallbacks;if(q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<q.length;m++)d_(q[m],I)}catch(et){Me(h,h.return,et)}}l&&O&64&&_2(w),Af(w,w.return);break;case 27:M2(w);case 26:case 5:ho(m,w,l),l&&h===null&&O&4&&T2(w),Af(w,w.return);break;case 12:ho(m,w,l);break;case 13:ho(m,w,l),l&&O&4&&P2(m,w);break;case 22:w.memoizedState===null&&ho(m,w,l),Af(w,w.return);break;case 30:break;default:ho(m,w,l)}s=s.sibling}}function I1(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&of(l))}function j1(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&of(r))}function gs(r,s,l,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)j2(r,s,l,h),s=s.sibling}function j2(r,s,l,h){var m=s.flags;switch(s.tag){case 0:case 11:case 15:gs(r,s,l,h),m&2048&&Sf(9,s);break;case 1:gs(r,s,l,h);break;case 3:gs(r,s,l,h),m&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&of(r)));break;case 12:if(m&2048){gs(r,s,l,h),r=s.stateNode;try{var w=s.memoizedProps,O=w.id,I=w.onPostCommit;typeof I=="function"&&I(O,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(q){Me(s,s.return,q)}}else gs(r,s,l,h);break;case 13:gs(r,s,l,h);break;case 23:break;case 22:w=s.stateNode,O=s.alternate,s.memoizedState!==null?w._visibility&2?gs(r,s,l,h):xf(r,s):w._visibility&2?gs(r,s,l,h):(w._visibility|=2,Hu(r,s,l,h,(s.subtreeFlags&10256)!==0)),m&2048&&I1(O,s);break;case 24:gs(r,s,l,h),m&2048&&j1(s.alternate,s);break;default:gs(r,s,l,h)}}function Hu(r,s,l,h,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var w=r,O=s,I=l,q=h,et=O.flags;switch(O.tag){case 0:case 11:case 15:Hu(w,O,I,q,m),Sf(8,O);break;case 23:break;case 22:var dt=O.stateNode;O.memoizedState!==null?dt._visibility&2?Hu(w,O,I,q,m):xf(w,O):(dt._visibility|=2,Hu(w,O,I,q,m)),m&&et&2048&&I1(O.alternate,O);break;case 24:Hu(w,O,I,q,m),m&&et&2048&&j1(O.alternate,O);break;default:Hu(w,O,I,q,m)}s=s.sibling}}function xf(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,h=s,m=h.flags;switch(h.tag){case 22:xf(l,h),m&2048&&I1(h.alternate,h);break;case 24:xf(l,h),m&2048&&j1(h.alternate,h);break;default:xf(l,h)}s=s.sibling}}var Ef=8192;function Uu(r){if(r.subtreeFlags&Ef)for(r=r.child;r!==null;)B2(r),r=r.sibling}function B2(r){switch(r.tag){case 26:Uu(r),r.flags&Ef&&r.memoizedState!==null&&KL(jr,r.memoizedState,r.memoizedProps);break;case 5:Uu(r);break;case 3:case 4:var s=jr;jr=Ay(r.stateNode.containerInfo),Uu(r),jr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Ef,Ef=16777216,Uu(r),Ef=s):Uu(r));break;default:Uu(r)}}function z2(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function _f(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];xn=h,H2(h,r)}z2(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)F2(r),r=r.sibling}function F2(r){switch(r.tag){case 0:case 11:case 15:_f(r),r.flags&2048&&co(9,r,r.return);break;case 3:_f(r);break;case 12:_f(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,uy(r)):_f(r);break;default:_f(r)}}function uy(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];xn=h,H2(h,r)}z2(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:co(8,s,s.return),uy(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,uy(s));break;default:uy(s)}r=r.sibling}}function H2(r,s){for(;xn!==null;){var l=xn;switch(l.tag){case 0:case 11:case 15:co(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:of(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,xn=h;else t:for(l=r;xn!==null;){h=xn;var m=h.sibling,w=h.return;if(k2(h),h===l){xn=null;break t}if(m!==null){m.return=w,xn=m;break t}xn=w}}}var fL={getCacheForType:function(r){var s=Xn(pn),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},pL=typeof WeakMap=="function"?WeakMap:Map,ve=0,De=null,ne=null,le=0,we=0,Pi=null,fo=!1,$u=!1,B1=!1,ra=0,Qe=0,po=0,$l=0,z1=0,mr=0,qu=0,Cf=null,Ai=null,F1=!1,H1=0,dy=1/0,hy=null,go=null,Pn=0,mo=null,Gu=null,Vu=0,U1=0,$1=null,U2=null,Tf=0,q1=null;function Ni(){if((ve&2)!==0&&le!==0)return le&-le;if(B.T!==null){var r=Lu;return r!==0?r:K1()}return Y()}function $2(){mr===0&&(mr=(le&536870912)===0||pe?vu():536870912);var r=gr.current;return r!==null&&(r.flags|=32),mr}function Ii(r,s,l){(r===De&&(we===2||we===9)||r.cancelPendingCommit!==null)&&(Yu(r,0),yo(r,le,mr,!1)),_l(r,l),((ve&2)===0||r!==De)&&(r===De&&((ve&2)===0&&($l|=l),Qe===4&&yo(r,le,mr,!1)),ms(r))}function q2(r,s,l){if((ve&6)!==0)throw Error(n(327));var h=!l&&(s&124)===0&&(s&r.expiredLanes)===0||ds(r,s),m=h?yL(r,s):Y1(r,s,!0),w=h;do{if(m===0){$u&&!h&&yo(r,s,0,!1);break}else{if(l=r.current.alternate,w&&!gL(l)){m=Y1(r,s,!1),w=!1;continue}if(m===2){if(w=s,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;t:{var I=r;m=Cf;var q=I.current.memoizedState.isDehydrated;if(q&&(Yu(I,O).flags|=256),O=Y1(I,O,!1),O!==2){if(B1&&!q){I.errorRecoveryDisabledLanes|=w,$l|=w,m=4;break t}w=Ai,Ai=m,w!==null&&(Ai===null?Ai=w:Ai.push.apply(Ai,w))}m=O}if(w=!1,m!==2)continue}}if(m===1){Yu(r,0),yo(r,s,0,!0);break}t:{switch(h=r,w=m,w){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:yo(h,s,mr,!fo);break t;case 2:Ai=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(m=H1+300-Ye(),10<m)){if(yo(h,s,mr,!fo),El(h,0,!0)!==0)break t;h.timeoutHandle=vC(G2.bind(null,h,l,Ai,hy,F1,s,mr,$l,qu,fo,w,2,-0,0),m);break t}G2(h,l,Ai,hy,F1,s,mr,$l,qu,fo,w,0,-0,0)}}break}while(!0);ms(r)}function G2(r,s,l,h,m,w,O,I,q,et,dt,ft,nt,it){if(r.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(Pf={stylesheets:null,count:0,unsuspend:WL},B2(s),ft=ZL(),ft!==null)){r.cancelPendingCommit=ft(Z2.bind(null,r,s,w,l,h,m,O,I,q,dt,1,nt,it)),yo(r,w,O,!et);return}Z2(r,s,w,l,h,m,O,I,q)}function gL(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],w=m.getSnapshot;m=m.value;try{if(!Di(w(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yo(r,s,l,h){s&=~z1,s&=~$l,r.suspendedLanes|=s,r.pingedLanes&=~s,h&&(r.warmLanes|=s),h=r.expirationTimes;for(var m=s;0<m;){var w=31-kn(m),O=1<<w;h[w]=-1,m&=~O}l!==0&&Cl(r,l,s)}function fy(){return(ve&6)===0?(Rf(0),!1):!0}function G1(){if(ne!==null){if(we===0)var r=ne.return;else r=ne,Ws=jl=null,l1(r),zu=null,bf=0,r=ne;for(;r!==null;)E2(r.alternate,r),r=r.return;ne=null}}function Yu(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,LL(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),G1(),De=r,ne=l=Ys(r.current,null),le=s,we=0,Pi=null,fo=!1,$u=ds(r,s),B1=!1,qu=mr=z1=$l=po=Qe=0,Ai=Cf=null,F1=!1,(s&8)!==0&&(s|=s&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=s;0<h;){var m=31-kn(h),w=1<<m;s|=r[m],h&=~w}return ra=s,Nm(),l}function V2(r,s){Kt=null,B.H=ty,s===cf||s===qm?(s=c_(),we=3):s===a_?(s=c_(),we=4):we=s===u2?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pi=s,ne===null&&(Qe=1,sy(r,dr(s,r.current)))}function Y2(){var r=B.H;return B.H=ty,r===null?ty:r}function X2(){var r=B.A;return B.A=fL,r}function V1(){Qe=4,fo||(le&4194048)!==le&&gr.current!==null||($u=!0),(po&134217727)===0&&($l&134217727)===0||De===null||yo(De,le,mr,!1)}function Y1(r,s,l){var h=ve;ve|=2;var m=Y2(),w=X2();(De!==r||le!==s)&&(hy=null,Yu(r,s)),s=!1;var O=Qe;t:do try{if(we!==0&&ne!==null){var I=ne,q=Pi;switch(we){case 8:G1(),O=6;break t;case 3:case 2:case 9:case 6:gr.current===null&&(s=!0);var et=we;if(we=0,Pi=null,Xu(r,I,q,et),l&&$u){O=0;break t}break;default:et=we,we=0,Pi=null,Xu(r,I,q,et)}}mL(),O=Qe;break}catch(dt){V2(r,dt)}while(!0);return s&&r.shellSuspendCounter++,Ws=jl=null,ve=h,B.H=m,B.A=w,ne===null&&(De=null,le=0,Nm()),O}function mL(){for(;ne!==null;)Q2(ne)}function yL(r,s){var l=ve;ve|=2;var h=Y2(),m=X2();De!==r||le!==s?(hy=null,dy=Ye()+500,Yu(r,s)):$u=ds(r,s);t:do try{if(we!==0&&ne!==null){s=ne;var w=Pi;e:switch(we){case 1:we=0,Pi=null,Xu(r,s,w,1);break;case 2:case 9:if(o_(w)){we=0,Pi=null,W2(s);break}s=function(){we!==2&&we!==9||De!==r||(we=7),ms(r)},w.then(s,s);break t;case 3:we=7;break t;case 4:we=5;break t;case 7:o_(w)?(we=0,Pi=null,W2(s)):(we=0,Pi=null,Xu(r,s,w,7));break;case 5:var O=null;switch(ne.tag){case 26:O=ne.memoizedState;case 5:case 27:var I=ne;if(!O||OC(O)){we=0,Pi=null;var q=I.sibling;if(q!==null)ne=q;else{var et=I.return;et!==null?(ne=et,py(et)):ne=null}break e}}we=0,Pi=null,Xu(r,s,w,5);break;case 6:we=0,Pi=null,Xu(r,s,w,6);break;case 8:G1(),Qe=6;break t;default:throw Error(n(462))}}bL();break}catch(dt){V2(r,dt)}while(!0);return Ws=jl=null,B.H=h,B.A=m,ve=l,ne!==null?0:(De=null,le=0,Nm(),Qe)}function bL(){for(;ne!==null&&!cs();)Q2(ne)}function Q2(r){var s=A2(r.alternate,r,ra);r.memoizedProps=r.pendingProps,s===null?py(r):ne=s}function W2(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=m2(l,s,s.pendingProps,s.type,void 0,le);break;case 11:s=m2(l,s,s.pendingProps,s.type.render,s.ref,le);break;case 5:l1(s);default:E2(l,s),s=ne=KE(s,ra),s=A2(l,s,ra)}r.memoizedProps=r.pendingProps,s===null?py(r):ne=s}function Xu(r,s,l,h){Ws=jl=null,l1(s),zu=null,bf=0;var m=s.return;try{if(oL(r,m,s,l,le)){Qe=1,sy(r,dr(l,r.current)),ne=null;return}}catch(w){if(m!==null)throw ne=m,w;Qe=1,sy(r,dr(l,r.current)),ne=null;return}s.flags&32768?(pe||h===1?r=!0:$u||(le&536870912)!==0?r=!1:(fo=r=!0,(h===2||h===9||h===3||h===6)&&(h=gr.current,h!==null&&h.tag===13&&(h.flags|=16384))),K2(s,r)):py(s)}function py(r){var s=r;do{if((s.flags&32768)!==0){K2(s,fo);return}r=s.return;var l=cL(s.alternate,s,ra);if(l!==null){ne=l;return}if(s=s.sibling,s!==null){ne=s;return}ne=s=r}while(s!==null);Qe===0&&(Qe=5)}function K2(r,s){do{var l=uL(r.alternate,r);if(l!==null){l.flags&=32767,ne=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){ne=r;return}ne=r=l}while(r!==null);Qe=6,ne=null}function Z2(r,s,l,h,m,w,O,I,q){r.cancelPendingCommit=null;do gy();while(Pn!==0);if((ve&6)!==0)throw Error(n(327));if(s!==null){if(s===r.current)throw Error(n(177));if(w=s.lanes|s.childLanes,w|=jv,_m(r,l,w,O,I,q),r===De&&(ne=De=null,le=0),Gu=s,mo=r,Vu=l,U1=w,$1=m,U2=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,AL($s,function(){return iC(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=B.T,B.T=null,m=V.p,V.p=2,O=ve,ve|=4;try{dL(r,s,l)}finally{ve=O,V.p=m,B.T=h}}Pn=1,J2(),tC(),eC()}}function J2(){if(Pn===1){Pn=0;var r=mo,s=Gu,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var h=V.p;V.p=2;var m=ve;ve|=4;try{N2(s,r);var w=sw,O=HE(r.containerInfo),I=w.focusedElem,q=w.selectionRange;if(O!==I&&I&&I.ownerDocument&&FE(I.ownerDocument.documentElement,I)){if(q!==null&&kv(I)){var et=q.start,dt=q.end;if(dt===void 0&&(dt=et),"selectionStart"in I)I.selectionStart=et,I.selectionEnd=Math.min(dt,I.value.length);else{var ft=I.ownerDocument||document,nt=ft&&ft.defaultView||window;if(nt.getSelection){var it=nt.getSelection(),Ht=I.textContent.length,jt=Math.min(q.start,Ht),Ee=q.end===void 0?jt:Math.min(q.end,Ht);!it.extend&&jt>Ee&&(O=Ee,Ee=jt,jt=O);var K=zE(I,jt),W=zE(I,Ee);if(K&&W&&(it.rangeCount!==1||it.anchorNode!==K.node||it.anchorOffset!==K.offset||it.focusNode!==W.node||it.focusOffset!==W.offset)){var tt=ft.createRange();tt.setStart(K.node,K.offset),it.removeAllRanges(),jt>Ee?(it.addRange(tt),it.extend(W.node,W.offset)):(tt.setEnd(W.node,W.offset),it.addRange(tt))}}}}for(ft=[],it=I;it=it.parentNode;)it.nodeType===1&&ft.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ft.length;I++){var ht=ft[I];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Ty=!!rw,sw=rw=null}finally{ve=m,V.p=h,B.T=l}}r.current=s,Pn=2}}function tC(){if(Pn===2){Pn=0;var r=mo,s=Gu,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var h=V.p;V.p=2;var m=ve;ve|=4;try{O2(r,s.alternate,s)}finally{ve=m,V.p=h,B.T=l}}Pn=3}}function eC(){if(Pn===4||Pn===3){Pn=0,gi();var r=mo,s=Gu,l=Vu,h=U2;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pn=5:(Pn=0,Gu=mo=null,nC(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(go=null),qh(l),s=s.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(mi,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=B.T,m=V.p,V.p=2,B.T=null;try{for(var w=r.onRecoverableError,O=0;O<h.length;O++){var I=h[O];w(I.value,{componentStack:I.stack})}}finally{B.T=s,V.p=m}}(Vu&3)!==0&&gy(),ms(r),m=r.pendingLanes,(l&4194090)!==0&&(m&42)!==0?r===q1?Tf++:(Tf=0,q1=r):Tf=0,Rf(0)}}function nC(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,of(s)))}function gy(r){return J2(),tC(),eC(),iC()}function iC(){if(Pn!==5)return!1;var r=mo,s=U1;U1=0;var l=qh(Vu),h=B.T,m=V.p;try{V.p=32>l?32:l,B.T=null,l=$1,$1=null;var w=mo,O=Vu;if(Pn=0,Gu=mo=null,Vu=0,(ve&6)!==0)throw Error(n(331));var I=ve;if(ve|=4,F2(w.current),j2(w,w.current,O,l),ve=I,Rf(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(mi,w)}catch{}return!0}finally{V.p=m,B.T=h,nC(r,s)}}function rC(r,s,l){s=dr(l,s),s=A1(r.stateNode,s,2),r=so(r,s,2),r!==null&&(_l(r,2),ms(r))}function Me(r,s,l){if(r.tag===3)rC(r,r,l);else for(;s!==null;){if(s.tag===3){rC(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(go===null||!go.has(h))){r=dr(l,r),l=l2(2),h=so(s,l,2),h!==null&&(c2(l,h,s,r),_l(h,2),ms(h));break}}s=s.return}}function X1(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new pL;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(l)||(B1=!0,m.add(l),r=vL.bind(null,r,s,l),s.then(r,r))}function vL(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,De===r&&(le&l)===l&&(Qe===4||Qe===3&&(le&62914560)===le&&300>Ye()-H1?(ve&2)===0&&Yu(r,0):z1|=l,qu===le&&(qu=0)),ms(r)}function sC(r,s){s===0&&(s=Em()),r=Mu(r,s),r!==null&&(_l(r,s),ms(r))}function wL(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),sC(r,l)}function SL(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(s),sC(r,l)}function AL(r,s){return ii(r,s)}var my=null,Qu=null,Q1=!1,yy=!1,W1=!1,ql=0;function ms(r){r!==Qu&&r.next===null&&(Qu===null?my=Qu=r:Qu=Qu.next=r),yy=!0,Q1||(Q1=!0,EL())}function Rf(r,s){if(!W1&&yy){W1=!0;do for(var l=!1,h=my;h!==null;){if(r!==0){var m=h.pendingLanes;if(m===0)var w=0;else{var O=h.suspendedLanes,I=h.pingedLanes;w=(1<<31-kn(42|r)+1)-1,w&=m&~(O&~I),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,cC(h,w))}else w=le,w=El(h,h===De?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||ds(h,w)||(l=!0,cC(h,w));h=h.next}while(l);W1=!1}}function xL(){aC()}function aC(){yy=Q1=!1;var r=0;ql!==0&&(kL()&&(r=ql),ql=0);for(var s=Ye(),l=null,h=my;h!==null;){var m=h.next,w=oC(h,s);w===0?(h.next=null,l===null?my=m:l.next=m,m===null&&(Qu=l)):(l=h,(r!==0||(w&3)!==0)&&(yy=!0)),h=m}Rf(r)}function oC(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,m=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-kn(w),I=1<<O,q=m[O];q===-1?((I&l)===0||(I&h)!==0)&&(m[O]=xm(I,s)):q<=s&&(r.expiredLanes|=I),w&=~I}if(s=De,l=le,l=El(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,l===0||r===s&&(we===2||we===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&Ie(h),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ds(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(h!==null&&Ie(h),qh(l)){case 2:case 8:l=bu;break;case 32:l=$s;break;case 268435456:l=Wa;break;default:l=$s}return h=lC.bind(null,r),l=ii(l,h),r.callbackPriority=s,r.callbackNode=l,s}return h!==null&&h!==null&&Ie(h),r.callbackPriority=2,r.callbackNode=null,2}function lC(r,s){if(Pn!==0&&Pn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(gy()&&r.callbackNode!==l)return null;var h=le;return h=El(r,r===De?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(q2(r,h,s),oC(r,Ye()),r.callbackNode!=null&&r.callbackNode===l?lC.bind(null,r):null)}function cC(r,s){if(gy())return null;q2(r,s,!0)}function EL(){PL(function(){(ve&6)!==0?ii(Qa,xL):aC()})}function K1(){return ql===0&&(ql=vu()),ql}function uC(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Rm(""+r)}function dC(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function _L(r,s,l,h,m){if(s==="submit"&&l&&l.stateNode===m){var w=uC((m[vt]||null).action),O=h.submitter;O&&(s=(s=O[vt]||null)?uC(s.formAction):O.getAttribute("formAction"),s!==null&&(w=s,O=null));var I=new km("action","action",null,h,m);r.push({event:I,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ql!==0){var q=O?dC(m,O):new FormData(m);y1(l,{pending:!0,data:q,method:m.method,action:w},null,q)}}else typeof w=="function"&&(I.preventDefault(),q=O?dC(m,O):new FormData(m),y1(l,{pending:!0,data:q,method:m.method,action:w},w,q))},currentTarget:m}]})}}for(var Z1=0;Z1<Iv.length;Z1++){var J1=Iv[Z1],CL=J1.toLowerCase(),TL=J1[0].toUpperCase()+J1.slice(1);Ir(CL,"on"+TL)}Ir(qE,"onAnimationEnd"),Ir(GE,"onAnimationIteration"),Ir(VE,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(q3,"onTransitionRun"),Ir(G3,"onTransitionStart"),Ir(V3,"onTransitionCancel"),Ir(YE,"onTransitionEnd"),lr("onMouseEnter",["mouseout","mouseover"]),lr("onMouseLeave",["mouseout","mouseover"]),lr("onPointerEnter",["pointerout","pointerover"]),lr("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mf));function hC(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],m=h.event;h=h.listeners;t:{var w=void 0;if(s)for(var O=h.length-1;0<=O;O--){var I=h[O],q=I.instance,et=I.currentTarget;if(I=I.listener,q!==w&&m.isPropagationStopped())break t;w=I,m.currentTarget=et;try{w(m)}catch(dt){ry(dt)}m.currentTarget=null,w=q}else for(O=0;O<h.length;O++){if(I=h[O],q=I.instance,et=I.currentTarget,I=I.listener,q!==w&&m.isPropagationStopped())break t;w=I,m.currentTarget=et;try{w(m)}catch(dt){ry(dt)}m.currentTarget=null,w=q}}}}function ie(r,s){var l=s[It];l===void 0&&(l=s[It]=new Set);var h=r+"__bubble";l.has(h)||(fC(s,r,2,!1),l.add(h))}function tw(r,s,l){var h=0;s&&(h|=4),fC(l,r,h,s)}var by="_reactListening"+Math.random().toString(36).slice(2);function ew(r){if(!r[by]){r[by]=!0,ae.forEach(function(l){l!=="selectionchange"&&(RL.has(l)||tw(l,!1,r),tw(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[by]||(s[by]=!0,tw("selectionchange",!1,s))}}function fC(r,s,l,h){switch(jC(s)){case 2:var m=e5;break;case 8:m=n5;break;default:m=gw}l=m.bind(null,s,l,r),m=void 0,!xv||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?r.addEventListener(s,l,{capture:!0,passive:m}):r.addEventListener(s,l,!0):m!==void 0?r.addEventListener(s,l,{passive:m}):r.addEventListener(s,l,!1)}function nw(r,s,l,h,m){var w=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var I=h.stateNode.containerInfo;if(I===m)break;if(O===4)for(O=h.return;O!==null;){var q=O.tag;if((q===3||q===4)&&O.stateNode.containerInfo===m)return;O=O.return}for(;I!==null;){if(O=$t(I),O===null)return;if(q=O.tag,q===5||q===6||q===26||q===27){h=w=O;continue t}I=I.parentNode}}h=h.return}wE(function(){var et=w,dt=Sv(l),ft=[];t:{var nt=XE.get(r);if(nt!==void 0){var it=km,Ht=r;switch(r){case"keypress":if(Dm(l)===0)break t;case"keydown":case"keyup":it=A3;break;case"focusin":Ht="focus",it=Tv;break;case"focusout":Ht="blur",it=Tv;break;case"beforeblur":case"afterblur":it=Tv;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=xE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=u3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=_3;break;case qE:case GE:case VE:it=f3;break;case YE:it=T3;break;case"scroll":case"scrollend":it=l3;break;case"wheel":it=M3;break;case"copy":case"cut":case"paste":it=g3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=_E;break;case"toggle":case"beforetoggle":it=O3}var jt=(s&4)!==0,Ee=!jt&&(r==="scroll"||r==="scrollend"),K=jt?nt!==null?nt+"Capture":null:nt;jt=[];for(var W=et,tt;W!==null;){var ht=W;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||K===null||(ht=Yh(W,K),ht!=null&&jt.push(Df(W,ht,tt))),Ee)break;W=W.return}0<jt.length&&(nt=new it(nt,Ht,null,l,dt),ft.push({event:nt,listeners:jt}))}}if((s&7)===0){t:{if(nt=r==="mouseover"||r==="pointerover",it=r==="mouseout"||r==="pointerout",nt&&l!==wv&&(Ht=l.relatedTarget||l.fromElement)&&($t(Ht)||Ht[Tt]))break t;if((it||nt)&&(nt=dt.window===dt?dt:(nt=dt.ownerDocument)?nt.defaultView||nt.parentWindow:window,it?(Ht=l.relatedTarget||l.toElement,it=et,Ht=Ht?$t(Ht):null,Ht!==null&&(Ee=o(Ht),jt=Ht.tag,Ht!==Ee||jt!==5&&jt!==27&&jt!==6)&&(Ht=null)):(it=null,Ht=et),it!==Ht)){if(jt=xE,ht="onMouseLeave",K="onMouseEnter",W="mouse",(r==="pointerout"||r==="pointerover")&&(jt=_E,ht="onPointerLeave",K="onPointerEnter",W="pointer"),Ee=it==null?nt:Le(it),tt=Ht==null?nt:Le(Ht),nt=new jt(ht,W+"leave",it,l,dt),nt.target=Ee,nt.relatedTarget=tt,ht=null,$t(dt)===et&&(jt=new jt(K,W+"enter",Ht,l,dt),jt.target=tt,jt.relatedTarget=Ee,ht=jt),Ee=ht,it&&Ht)e:{for(jt=it,K=Ht,W=0,tt=jt;tt;tt=Wu(tt))W++;for(tt=0,ht=K;ht;ht=Wu(ht))tt++;for(;0<W-tt;)jt=Wu(jt),W--;for(;0<tt-W;)K=Wu(K),tt--;for(;W--;){if(jt===K||K!==null&&jt===K.alternate)break e;jt=Wu(jt),K=Wu(K)}jt=null}else jt=null;it!==null&&pC(ft,nt,it,jt,!1),Ht!==null&&Ee!==null&&pC(ft,Ee,Ht,jt,!0)}}t:{if(nt=et?Le(et):window,it=nt.nodeName&&nt.nodeName.toLowerCase(),it==="select"||it==="input"&&nt.type==="file")var Ct=LE;else if(OE(nt))if(PE)Ct=H3;else{Ct=z3;var te=B3}else it=nt.nodeName,!it||it.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?et&&vv(et.elementType)&&(Ct=LE):Ct=F3;if(Ct&&(Ct=Ct(r,et))){kE(ft,Ct,l,dt);break t}te&&te(r,nt,et),r==="focusout"&&et&&nt.type==="number"&&et.memoizedProps.value!=null&&bv(nt,"number",nt.value)}switch(te=et?Le(et):window,r){case"focusin":(OE(te)||te.contentEditable==="true")&&(Cu=te,Lv=et,ef=null);break;case"focusout":ef=Lv=Cu=null;break;case"mousedown":Pv=!0;break;case"contextmenu":case"mouseup":case"dragend":Pv=!1,UE(ft,l,dt);break;case"selectionchange":if($3)break;case"keydown":case"keyup":UE(ft,l,dt)}var Ot;if(Mv)t:{switch(r){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else _u?ME(r,l)&&(zt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(zt="onCompositionStart");zt&&(CE&&l.locale!=="ko"&&(_u||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&_u&&(Ot=SE()):(eo=dt,Ev="value"in eo?eo.value:eo.textContent,_u=!0)),te=vy(et,zt),0<te.length&&(zt=new EE(zt,r,null,l,dt),ft.push({event:zt,listeners:te}),Ot?zt.data=Ot:(Ot=DE(l),Ot!==null&&(zt.data=Ot)))),(Ot=L3?P3(r,l):N3(r,l))&&(zt=vy(et,"onBeforeInput"),0<zt.length&&(te=new EE("onBeforeInput","beforeinput",null,l,dt),ft.push({event:te,listeners:zt}),te.data=Ot)),_L(ft,r,et,l,dt)}hC(ft,s)})}function Df(r,s,l){return{instance:r,listener:s,currentTarget:l}}function vy(r,s){for(var l=s+"Capture",h=[];r!==null;){var m=r,w=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||w===null||(m=Yh(r,l),m!=null&&h.unshift(Df(r,m,w)),m=Yh(r,s),m!=null&&h.push(Df(r,m,w))),r.tag===3)return h;r=r.return}return[]}function Wu(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function pC(r,s,l,h,m){for(var w=s._reactName,O=[];l!==null&&l!==h;){var I=l,q=I.alternate,et=I.stateNode;if(I=I.tag,q!==null&&q===h)break;I!==5&&I!==26&&I!==27||et===null||(q=et,m?(et=Yh(l,w),et!=null&&O.unshift(Df(l,et,q))):m||(et=Yh(l,w),et!=null&&O.push(Df(l,et,q)))),l=l.return}O.length!==0&&r.push({event:s,listeners:O})}var ML=/\r\n?/g,DL=/\u0000|\uFFFD/g;function gC(r){return(typeof r=="string"?r:""+r).replace(ML,`
`).replace(DL,"")}function mC(r,s){return s=gC(s),gC(r)===s}function wy(){}function xe(r,s,l,h,m,w){switch(l){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||Au(r,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&Au(r,""+h);break;case"className":Gs(r,"class",h);break;case"tabIndex":Gs(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(r,l,h);break;case"style":bE(r,h,w);break;case"data":if(s!=="object"){Gs(r,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(l);break}h=Rm(""+h),r.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(s!=="input"&&xe(r,s,"name",m.name,m,null),xe(r,s,"formEncType",m.formEncType,m,null),xe(r,s,"formMethod",m.formMethod,m,null),xe(r,s,"formTarget",m.formTarget,m,null)):(xe(r,s,"encType",m.encType,m,null),xe(r,s,"method",m.method,m,null),xe(r,s,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(l);break}h=Rm(""+h),r.setAttribute(l,h);break;case"onClick":h!=null&&(r.onclick=wy);break;case"onScroll":h!=null&&ie("scroll",r);break;case"onScrollEnd":h!=null&&ie("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));r.innerHTML=l}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}l=Rm(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,""+h):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":h===!0?r.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,h):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(l,h):r.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(l):r.setAttribute(l,h);break;case"popover":ie("beforetoggle",r),ie("toggle",r),cr(r,"popover",h);break;case"xlinkActuate":Jt(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Jt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Jt(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Jt(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Jt(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Jt(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Jt(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Jt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Jt(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":cr(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=a3.get(l)||l,cr(r,l,h))}}function iw(r,s,l,h,m,w){switch(l){case"style":bE(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));r.innerHTML=l}}break;case"children":typeof h=="string"?Au(r,h):(typeof h=="number"||typeof h=="bigint")&&Au(r,""+h);break;case"onScroll":h!=null&&ie("scroll",r);break;case"onScrollEnd":h!=null&&ie("scrollend",r);break;case"onClick":h!=null&&(r.onclick=wy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ka.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),w=r[vt]||null,w=w!=null?w[l]:null,typeof w=="function"&&r.removeEventListener(s,w,m),typeof h=="function")){typeof w!="function"&&w!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,h,m);break t}l in r?r[l]=h:h===!0?r.setAttribute(l,""):cr(r,l,h)}}}function Nn(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ie("error",r),ie("load",r);var h=!1,m=!1,w;for(w in l)if(l.hasOwnProperty(w)){var O=l[w];if(O!=null)switch(w){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:xe(r,s,w,O,l,null)}}m&&xe(r,s,"srcSet",l.srcSet,l,null),h&&xe(r,s,"src",l.src,l,null);return;case"input":ie("invalid",r);var I=w=O=m=null,q=null,et=null;for(h in l)if(l.hasOwnProperty(h)){var dt=l[h];if(dt!=null)switch(h){case"name":m=dt;break;case"type":O=dt;break;case"checked":q=dt;break;case"defaultChecked":et=dt;break;case"value":w=dt;break;case"defaultValue":I=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,s));break;default:xe(r,s,h,dt,l,null)}}pE(r,w,I,q,et,O,m,!1),Cm(r);return;case"select":ie("invalid",r),h=O=w=null;for(m in l)if(l.hasOwnProperty(m)&&(I=l[m],I!=null))switch(m){case"value":w=I;break;case"defaultValue":O=I;break;case"multiple":h=I;default:xe(r,s,m,I,l,null)}s=w,l=O,r.multiple=!!h,s!=null?Su(r,!!h,s,!1):l!=null&&Su(r,!!h,l,!0);return;case"textarea":ie("invalid",r),w=m=h=null;for(O in l)if(l.hasOwnProperty(O)&&(I=l[O],I!=null))switch(O){case"value":h=I;break;case"defaultValue":m=I;break;case"children":w=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(91));break;default:xe(r,s,O,I,l,null)}mE(r,h,m,w),Cm(r);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(h=l[q],h!=null))switch(q){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:xe(r,s,q,h,l,null)}return;case"dialog":ie("beforetoggle",r),ie("toggle",r),ie("cancel",r),ie("close",r);break;case"iframe":case"object":ie("load",r);break;case"video":case"audio":for(h=0;h<Mf.length;h++)ie(Mf[h],r);break;case"image":ie("error",r),ie("load",r);break;case"details":ie("toggle",r);break;case"embed":case"source":case"link":ie("error",r),ie("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in l)if(l.hasOwnProperty(et)&&(h=l[et],h!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:xe(r,s,et,h,l,null)}return;default:if(vv(s)){for(dt in l)l.hasOwnProperty(dt)&&(h=l[dt],h!==void 0&&iw(r,s,dt,h,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(h=l[I],h!=null&&xe(r,s,I,h,l,null))}function OL(r,s,l,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,w=null,O=null,I=null,q=null,et=null,dt=null;for(it in l){var ft=l[it];if(l.hasOwnProperty(it)&&ft!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":q=ft;default:h.hasOwnProperty(it)||xe(r,s,it,null,h,ft)}}for(var nt in h){var it=h[nt];if(ft=l[nt],h.hasOwnProperty(nt)&&(it!=null||ft!=null))switch(nt){case"type":w=it;break;case"name":m=it;break;case"checked":et=it;break;case"defaultChecked":dt=it;break;case"value":O=it;break;case"defaultValue":I=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,s));break;default:it!==ft&&xe(r,s,nt,it,h,ft)}}yv(r,O,I,q,et,dt,w,m);return;case"select":it=O=I=nt=null;for(w in l)if(q=l[w],l.hasOwnProperty(w)&&q!=null)switch(w){case"value":break;case"multiple":it=q;default:h.hasOwnProperty(w)||xe(r,s,w,null,h,q)}for(m in h)if(w=h[m],q=l[m],h.hasOwnProperty(m)&&(w!=null||q!=null))switch(m){case"value":nt=w;break;case"defaultValue":I=w;break;case"multiple":O=w;default:w!==q&&xe(r,s,m,w,h,q)}s=I,l=O,h=it,nt!=null?Su(r,!!l,nt,!1):!!h!=!!l&&(s!=null?Su(r,!!l,s,!0):Su(r,!!l,l?[]:"",!1));return;case"textarea":it=nt=null;for(I in l)if(m=l[I],l.hasOwnProperty(I)&&m!=null&&!h.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:xe(r,s,I,null,h,m)}for(O in h)if(m=h[O],w=l[O],h.hasOwnProperty(O)&&(m!=null||w!=null))switch(O){case"value":nt=m;break;case"defaultValue":it=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==w&&xe(r,s,O,m,h,w)}gE(r,nt,it);return;case"option":for(var Ht in l)if(nt=l[Ht],l.hasOwnProperty(Ht)&&nt!=null&&!h.hasOwnProperty(Ht))switch(Ht){case"selected":r.selected=!1;break;default:xe(r,s,Ht,null,h,nt)}for(q in h)if(nt=h[q],it=l[q],h.hasOwnProperty(q)&&nt!==it&&(nt!=null||it!=null))switch(q){case"selected":r.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:xe(r,s,q,nt,h,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in l)nt=l[jt],l.hasOwnProperty(jt)&&nt!=null&&!h.hasOwnProperty(jt)&&xe(r,s,jt,null,h,nt);for(et in h)if(nt=h[et],it=l[et],h.hasOwnProperty(et)&&nt!==it&&(nt!=null||it!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,s));break;default:xe(r,s,et,nt,h,it)}return;default:if(vv(s)){for(var Ee in l)nt=l[Ee],l.hasOwnProperty(Ee)&&nt!==void 0&&!h.hasOwnProperty(Ee)&&iw(r,s,Ee,void 0,h,nt);for(dt in h)nt=h[dt],it=l[dt],!h.hasOwnProperty(dt)||nt===it||nt===void 0&&it===void 0||iw(r,s,dt,nt,h,it);return}}for(var K in l)nt=l[K],l.hasOwnProperty(K)&&nt!=null&&!h.hasOwnProperty(K)&&xe(r,s,K,null,h,nt);for(ft in h)nt=h[ft],it=l[ft],!h.hasOwnProperty(ft)||nt===it||nt==null&&it==null||xe(r,s,ft,nt,h,it)}var rw=null,sw=null;function Sy(r){return r.nodeType===9?r:r.ownerDocument}function yC(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bC(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function aw(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ow=null;function kL(){var r=window.event;return r&&r.type==="popstate"?r===ow?!1:(ow=r,!0):(ow=null,!1)}var vC=typeof setTimeout=="function"?setTimeout:void 0,LL=typeof clearTimeout=="function"?clearTimeout:void 0,wC=typeof Promise=="function"?Promise:void 0,PL=typeof queueMicrotask=="function"?queueMicrotask:typeof wC<"u"?function(r){return wC.resolve(null).then(r).catch(NL)}:vC;function NL(r){setTimeout(function(){throw r})}function bo(r){return r==="head"}function SC(r,s){var l=s,h=0,m=0;do{var w=l.nextSibling;if(r.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(0<h&&8>h){l=h;var O=r.ownerDocument;if(l&1&&Of(O.documentElement),l&2&&Of(O.body),l&4)for(l=O.head,Of(l),O=l.firstChild;O;){var I=O.nextSibling,q=O.nodeName;O[Ft]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&O.rel.toLowerCase()==="stylesheet"||l.removeChild(O),O=I}}if(m===0){r.removeChild(w),zf(s);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:h=l.charCodeAt(0)-48;else h=0;l=w}while(l);zf(s)}function lw(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":lw(l),Dt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function IL(r,s,l,h){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Ft])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var w=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Br(r.nextSibling),r===null)break}return null}function jL(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Br(r.nextSibling),r===null))return null;return r}function cw(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function BL(r,s){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")s();else{var h=function(){s(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Br(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var uw=null;function AC(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function xC(r,s,l){switch(s=Sy(l),r){case"html":if(r=s.documentElement,!r)throw Error(n(452));return r;case"head":if(r=s.head,!r)throw Error(n(453));return r;case"body":if(r=s.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Of(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Dt(r)}var yr=new Map,EC=new Set;function Ay(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var sa=V.d;V.d={f:zL,r:FL,D:HL,C:UL,L:$L,m:qL,X:VL,S:GL,M:YL};function zL(){var r=sa.f(),s=fy();return r||s}function FL(r){var s=ce(r);s!==null&&s.tag===5&&s.type==="form"?q_(s):sa.r(r)}var Ku=typeof document>"u"?null:document;function _C(r,s,l){var h=Ku;if(h&&typeof s=="string"&&s){var m=ur(s);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),EC.has(m)||(EC.add(m),r={rel:r,crossOrigin:l,href:s},h.querySelector(m)===null&&(s=h.createElement("link"),Nn(s,"link",r),he(s),h.head.appendChild(s)))}}function HL(r){sa.D(r),_C("dns-prefetch",r,null)}function UL(r,s){sa.C(r,s),_C("preconnect",r,s)}function $L(r,s,l){sa.L(r,s,l);var h=Ku;if(h&&r&&s){var m='link[rel="preload"][as="'+ur(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+ur(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+ur(l.imageSizes)+'"]')):m+='[href="'+ur(r)+'"]';var w=m;switch(s){case"style":w=Zu(r);break;case"script":w=Ju(r)}yr.has(w)||(r=g({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),yr.set(w,r),h.querySelector(m)!==null||s==="style"&&h.querySelector(kf(w))||s==="script"&&h.querySelector(Lf(w))||(s=h.createElement("link"),Nn(s,"link",r),he(s),h.head.appendChild(s)))}}function qL(r,s){sa.m(r,s);var l=Ku;if(l&&r){var h=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+ur(h)+'"][href="'+ur(r)+'"]',w=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ju(r)}if(!yr.has(w)&&(r=g({rel:"modulepreload",href:r},s),yr.set(w,r),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Lf(w)))return}h=l.createElement("link"),Nn(h,"link",r),he(h),l.head.appendChild(h)}}}function GL(r,s,l){sa.S(r,s,l);var h=Ku;if(h&&r){var m=$e(h).hoistableStyles,w=Zu(r);s=s||"default";var O=m.get(w);if(!O){var I={loading:0,preload:null};if(O=h.querySelector(kf(w)))I.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":s},l),(l=yr.get(w))&&dw(r,l);var q=O=h.createElement("link");he(q),Nn(q,"link",r),q._p=new Promise(function(et,dt){q.onload=et,q.onerror=dt}),q.addEventListener("load",function(){I.loading|=1}),q.addEventListener("error",function(){I.loading|=2}),I.loading|=4,xy(O,s,h)}O={type:"stylesheet",instance:O,count:1,state:I},m.set(w,O)}}}function VL(r,s){sa.X(r,s);var l=Ku;if(l&&r){var h=$e(l).hoistableScripts,m=Ju(r),w=h.get(m);w||(w=l.querySelector(Lf(m)),w||(r=g({src:r,async:!0},s),(s=yr.get(m))&&hw(r,s),w=l.createElement("script"),he(w),Nn(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function YL(r,s){sa.M(r,s);var l=Ku;if(l&&r){var h=$e(l).hoistableScripts,m=Ju(r),w=h.get(m);w||(w=l.querySelector(Lf(m)),w||(r=g({src:r,async:!0,type:"module"},s),(s=yr.get(m))&&hw(r,s),w=l.createElement("script"),he(w),Nn(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(m,w))}}function CC(r,s,l,h){var m=(m=yt.current)?Ay(m):null;if(!m)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Zu(l.href),l=$e(m).hoistableStyles,h=l.get(s),h||(h={type:"style",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Zu(l.href);var w=$e(m).hoistableStyles,O=w.get(r);if(O||(m=m.ownerDocument||m,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=m.querySelector(kf(r)))&&!w._p&&(O.instance=w,O.state.loading=5),yr.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},yr.set(r,l),w||XL(m,r,l,O.state))),s&&h===null)throw Error(n(528,""));return O}if(s&&h!==null)throw Error(n(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ju(l),l=$e(m).hoistableScripts,h=l.get(s),h||(h={type:"script",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Zu(r){return'href="'+ur(r)+'"'}function kf(r){return'link[rel="stylesheet"]['+r+"]"}function TC(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function XL(r,s,l,h){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=r.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Nn(s,"link",l),he(s),r.head.appendChild(s))}function Ju(r){return'[src="'+ur(r)+'"]'}function Lf(r){return"script[async]"+r}function RC(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var h=r.querySelector('style[data-href~="'+ur(l.href)+'"]');if(h)return s.instance=h,he(h),h;var m=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),he(h),Nn(h,"style",m),xy(h,l.precedence,r),s.instance=h;case"stylesheet":m=Zu(l.href);var w=r.querySelector(kf(m));if(w)return s.state.loading|=4,s.instance=w,he(w),w;h=TC(l),(m=yr.get(m))&&dw(h,m),w=(r.ownerDocument||r).createElement("link"),he(w);var O=w;return O._p=new Promise(function(I,q){O.onload=I,O.onerror=q}),Nn(w,"link",h),s.state.loading|=4,xy(w,l.precedence,r),s.instance=w;case"script":return w=Ju(l.src),(m=r.querySelector(Lf(w)))?(s.instance=m,he(m),m):(h=l,(m=yr.get(w))&&(h=g({},l),hw(h,m)),r=r.ownerDocument||r,m=r.createElement("script"),he(m),Nn(m,"link",h),r.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,xy(h,l.precedence,r));return s.instance}function xy(r,s,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,w=m,O=0;O<h.length;O++){var I=h[O];if(I.dataset.precedence===s)w=I;else if(w!==m)break}w?w.parentNode.insertBefore(r,w.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function dw(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function hw(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ey=null;function MC(r,s,l){if(Ey===null){var h=new Map,m=Ey=new Map;m.set(l,h)}else m=Ey,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(r))return h;for(h.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var w=l[m];if(!(w[Ft]||w[gt]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(s)||"";O=r+O;var I=h.get(O);I?I.push(w):h.set(O,[w])}}return h}function DC(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function QL(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function OC(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Pf=null;function WL(){}function KL(r,s,l){if(Pf===null)throw Error(n(475));var h=Pf;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=Zu(l.href),w=r.querySelector(kf(m));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(h.count++,h=_y.bind(h),r.then(h,h)),s.state.loading|=4,s.instance=w,he(w);return}w=r.ownerDocument||r,l=TC(l),(m=yr.get(m))&&dw(l,m),w=w.createElement("link"),he(w);var O=w;O._p=new Promise(function(I,q){O.onload=I,O.onerror=q}),Nn(w,"link",l),s.instance=w}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=_y.bind(h),r.addEventListener("load",s),r.addEventListener("error",s))}}function ZL(){if(Pf===null)throw Error(n(475));var r=Pf;return r.stylesheets&&r.count===0&&fw(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&fw(r,r.stylesheets),r.unsuspend){var h=r.unsuspend;r.unsuspend=null,h()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function _y(){if(this.count--,this.count===0){if(this.stylesheets)fw(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Cy=null;function fw(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Cy=new Map,s.forEach(JL,r),Cy=null,_y.call(r))}function JL(r,s){if(!(s.state.loading&4)){var l=Cy.get(r);if(l)var h=l.get(null);else{l=new Map,Cy.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<m.length;w++){var O=m[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(l.set(O.dataset.precedence,O),h=O)}h&&l.set(null,h)}m=s.instance,O=m.getAttribute("data-precedence"),w=l.get(O)||h,w===h&&l.set(null,m),l.set(O,m),this.count++,h=_y.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),w?w.parentNode.insertBefore(m,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),s.state.loading|=4}}var Nf={$$typeof:C,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function t5(r,s,l,h,m,w,O,I){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.hiddenUpdates=wu(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function kC(r,s,l,h,m,w,O,I,q,et,dt,ft){return r=new t5(r,s,l,O,I,q,et,ft),s=1,w===!0&&(s|=24),w=Oi(3,null,null,s),r.current=w,w.stateNode=r,s=Xv(),s.refCount++,r.pooledCache=s,s.refCount++,w.memoizedState={element:h,isDehydrated:l,cache:s},Zv(w),r}function LC(r){return r?(r=Du,r):Du}function PC(r,s,l,h,m,w){m=LC(m),h.context===null?h.context=m:h.pendingContext=m,h=ro(s),h.payload={element:l},w=w===void 0?null:w,w!==null&&(h.callback=w),l=so(r,h,s),l!==null&&(Ii(l,r,s),df(l,r,s))}function NC(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function pw(r,s){NC(r,s),(r=r.alternate)&&NC(r,s)}function IC(r){if(r.tag===13){var s=Mu(r,67108864);s!==null&&Ii(s,r,67108864),pw(r,67108864)}}var Ty=!0;function e5(r,s,l,h){var m=B.T;B.T=null;var w=V.p;try{V.p=2,gw(r,s,l,h)}finally{V.p=w,B.T=m}}function n5(r,s,l,h){var m=B.T;B.T=null;var w=V.p;try{V.p=8,gw(r,s,l,h)}finally{V.p=w,B.T=m}}function gw(r,s,l,h){if(Ty){var m=mw(h);if(m===null)nw(r,s,h,Ry,l),BC(r,h);else if(r5(m,r,s,l,h))h.stopPropagation();else if(BC(r,h),s&4&&-1<i5.indexOf(r)){for(;m!==null;){var w=ce(m);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=qs(w.pendingLanes);if(O!==0){var I=w;for(I.pendingLanes|=2,I.entangledLanes|=2;O;){var q=1<<31-kn(O);I.entanglements[1]|=q,O&=~q}ms(w),(ve&6)===0&&(dy=Ye()+500,Rf(0))}}break;case 13:I=Mu(w,2),I!==null&&Ii(I,w,2),fy(),pw(w,2)}if(w=mw(h),w===null&&nw(r,s,h,Ry,l),w===m)break;m=w}m!==null&&h.stopPropagation()}else nw(r,s,h,null,l)}}function mw(r){return r=Sv(r),yw(r)}var Ry=null;function yw(r){if(Ry=null,r=$t(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=c(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ry=r,null}function jC(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Us()){case Qa:return 2;case bu:return 8;case $s:case kr:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var bw=!1,vo=null,wo=null,So=null,If=new Map,jf=new Map,Ao=[],i5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BC(r,s){switch(r){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":If.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":jf.delete(s.pointerId)}}function Bf(r,s,l,h,m,w){return r===null||r.nativeEvent!==w?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:w,targetContainers:[m]},s!==null&&(s=ce(s),s!==null&&IC(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function r5(r,s,l,h,m){switch(s){case"focusin":return vo=Bf(vo,r,s,l,h,m),!0;case"dragenter":return wo=Bf(wo,r,s,l,h,m),!0;case"mouseover":return So=Bf(So,r,s,l,h,m),!0;case"pointerover":var w=m.pointerId;return If.set(w,Bf(If.get(w)||null,r,s,l,h,m)),!0;case"gotpointercapture":return w=m.pointerId,jf.set(w,Bf(jf.get(w)||null,r,s,l,h,m)),!0}return!1}function zC(r){var s=$t(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){r.blockedOn=s,J(r.priority,function(){if(l.tag===13){var h=Ni();h=$h(h);var m=Mu(l,h);m!==null&&Ii(m,l,h),pw(l,h)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function My(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=mw(r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);wv=h,l.target.dispatchEvent(h),wv=null}else return s=ce(l),s!==null&&IC(s),r.blockedOn=l,!1;s.shift()}return!0}function FC(r,s,l){My(r)&&l.delete(s)}function s5(){bw=!1,vo!==null&&My(vo)&&(vo=null),wo!==null&&My(wo)&&(wo=null),So!==null&&My(So)&&(So=null),If.forEach(FC),jf.forEach(FC)}function Dy(r,s){r.blockedOn===s&&(r.blockedOn=null,bw||(bw=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,s5)))}var Oy=null;function HC(r){Oy!==r&&(Oy=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Oy===r&&(Oy=null);for(var s=0;s<r.length;s+=3){var l=r[s],h=r[s+1],m=r[s+2];if(typeof h!="function"){if(yw(h||l)===null)continue;break}var w=ce(l);w!==null&&(r.splice(s,3),s-=3,y1(w,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function zf(r){function s(q){return Dy(q,r)}vo!==null&&Dy(vo,r),wo!==null&&Dy(wo,r),So!==null&&Dy(So,r),If.forEach(s),jf.forEach(s);for(var l=0;l<Ao.length;l++){var h=Ao[l];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Ao.length&&(l=Ao[0],l.blockedOn===null);)zC(l),l.blockedOn===null&&Ao.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],w=l[h+1],O=m[vt]||null;if(typeof w=="function")O||HC(l);else if(O){var I=null;if(w&&w.hasAttribute("formAction")){if(m=w,O=w[vt]||null)I=O.formAction;else if(yw(m)!==null)continue}else I=O.action;typeof I=="function"?l[h+1]=I:(l.splice(h,3),h-=3),HC(l)}}}function vw(r){this._internalRoot=r}ky.prototype.render=vw.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));var l=s.current,h=Ni();PC(l,h,r,s,null,null)},ky.prototype.unmount=vw.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;PC(r.current,2,null,r,null,null),fy(),s[Tt]=null}};function ky(r){this._internalRoot=r}ky.prototype.unstable_scheduleHydration=function(r){if(r){var s=Y();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Ao.length&&s!==0&&s<Ao[l].priority;l++);Ao.splice(l,0,r),l===0&&zC(r)}};var UC=t.version;if(UC!=="19.1.0")throw Error(n(527,UC,"19.1.0"));V.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=d(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var a5={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ly.isDisabled&&Ly.supportsFiber)try{mi=Ly.inject(a5),Ue=Ly}catch{}}return Hf.createRoot=function(r,s){if(!a(r))throw Error(n(299));var l=!1,h="",m=r2,w=s2,O=a2,I=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(I=s.unstable_transitionCallbacks)),s=kC(r,1,!1,null,null,l,h,m,w,O,I,null),r[Tt]=s.current,ew(r),new vw(s)},Hf.hydrateRoot=function(r,s,l){if(!a(r))throw Error(n(299));var h=!1,m="",w=r2,O=s2,I=a2,q=null,et=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(q=l.unstable_transitionCallbacks),l.formState!==void 0&&(et=l.formState)),s=kC(r,1,!0,s,l??null,h,m,w,O,I,q,et),s.context=LC(null),l=s.current,h=Ni(),h=$h(h),m=ro(h),m.callback=null,so(l,m,h),l=h,s.current.lanes=l,_l(s,l),ms(s),r[Tt]=s.current,ew(r),new ky(s)},Hf.version="19.1.0",Hf}var JC;function y5(){if(JC)return xw.exports;JC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),xw.exports=m5(),xw.exports}var b5=y5(),Tw={exports:{}},Rw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function v5(){if(tT)return Rw;tT=1;var i=$b();function t(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var e=typeof Object.is=="function"?Object.is:t,n=i.useSyncExternalStore,a=i.useRef,o=i.useEffect,c=i.useMemo,u=i.useDebugValue;return Rw.useSyncExternalStoreWithSelector=function(d,p,g,y,b){var v=a(null);if(v.current===null){var S={hasValue:!1,value:null};v.current=S}else S=v.current;v=c(function(){function E(D){if(!x){if(x=!0,M=D,D=y(D),b!==void 0&&S.hasValue){var R=S.value;if(b(R,D))return C=R}return C=D}if(R=C,e(M,D))return R;var N=y(D);return b!==void 0&&b(R,N)?(M=D,R):(M=D,C=N)}var x=!1,M,C,_=g===void 0?null:g;return[function(){return E(p())},_===null?void 0:function(){return E(_())}]},[p,g,y,b]);var A=n(d,v[0],v[1]);return o(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},Rw}var eT;function w5(){return eT||(eT=1,Tw.exports=v5()),Tw.exports}var S5=w5();function eM(i){i()}function A5(){let i=null,t=null;return{clear(){i=null,t=null},notify(){eM(()=>{let e=i;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=i;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:i=a,function(){!n||i===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:i=a.next)}}}}var nT={notify(){},get:()=>[]};function x5(i,t){let e,n=nT,a=0,o=!1;function c(A){g();const E=n.subscribe(A);let x=!1;return()=>{x||(x=!0,E(),y())}}function u(){n.notify()}function d(){S.onStateChange&&S.onStateChange()}function p(){return o}function g(){a++,e||(e=i.subscribe(d),n=A5())}function y(){a--,e&&a===0&&(e(),e=void 0,n.clear(),n=nT)}function b(){o||(o=!0,g())}function v(){o&&(o=!1,y())}const S={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:p,trySubscribe:b,tryUnsubscribe:v,getListeners:()=>n};return S}var E5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_5=E5(),C5=()=>typeof navigator<"u"&&navigator.product==="ReactNative",T5=C5(),R5=()=>_5||T5?U.useLayoutEffect:U.useEffect,M5=R5();function iT(i,t){return i===t?i!==0||t!==0||1/i===1/t:i!==i&&t!==t}function Ap(i,t){if(iT(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;const e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(!Object.prototype.hasOwnProperty.call(t,e[a])||!iT(i[e[a]],t[e[a]]))return!1;return!0}var Mw=Symbol.for("react-redux-context"),Dw=typeof globalThis<"u"?globalThis:{};function D5(){if(!U.createContext)return{};const i=Dw[Mw]??(Dw[Mw]=new Map);let t=i.get(U.createContext);return t||(t=U.createContext(null),i.set(U.createContext,t)),t}var hl=D5();function O5(i){const{children:t,context:e,serverState:n,store:a}=i,o=U.useMemo(()=>{const d=x5(a);return{store:a,subscription:d,getServerState:n?()=>n:void 0}},[a,n]),c=U.useMemo(()=>a.getState(),[a]);M5(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),c!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,c]);const u=e||hl;return U.createElement(u.Provider,{value:o},t)}var k5=O5;function nx(i=hl){return function(){return U.useContext(i)}}var nM=nx();function iM(i=hl){const t=i===hl?nM:nx(i),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var rM=iM();function L5(i=hl){const t=i===hl?rM:iM(i),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var or=L5(),P5=(i,t)=>i===t;function N5(i=hl){const t=i===hl?nM:nx(i),e=(n,a={})=>{const{equalityFn:o=P5}=typeof a=="function"?{equalityFn:a}:a,c=t(),{store:u,subscription:d,getServerState:p}=c;U.useRef(!0);const g=U.useCallback({[n.name](b){return n(b)}}[n.name],[n]),y=S5.useSyncExternalStoreWithSelector(d.addNestedSub,u.getState,p||u.getState,g,o);return U.useDebugValue(y),y};return Object.assign(e,{withTypes:()=>e}),e}var Vt=N5(),I5=eM;function i0(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i0=function(e){return typeof e}:i0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i0(i)}function j5(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function B5(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function z5(i,t,e){return t&&B5(i.prototype,t),i}function F5(i,t){return t&&(i0(t)==="object"||typeof t=="function")?t:r0(i)}function dS(i){return dS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dS(i)}function r0(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function H5(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&hS(i,t)}function hS(i,t){return hS=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},hS(i,t)}function s0(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var sM=function(i){H5(t,i);function t(){var e,n;j5(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return n=F5(this,(e=dS(t)).call.apply(e,[this].concat(o))),s0(r0(n),"state",{bootstrapped:!1}),s0(r0(n),"_unsubscribe",void 0),s0(r0(n),"handlePersistorState",function(){var u=n.props.persistor,d=u.getState(),p=d.bootstrapped;p&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return z5(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(U.PureComponent);s0(sM,"defaultProps",{children:null,loading:null});function Hn(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var U5=typeof Symbol=="function"&&Symbol.observable||"@@observable",rT=U5,Ow=()=>Math.random().toString(36).substring(7).split("").join("."),$5={INIT:`@@redux/INIT${Ow()}`,REPLACE:`@@redux/REPLACE${Ow()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ow()}`},Y0=$5;function fl(i){if(typeof i!="object"||i===null)return!1;let t=i;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t||Object.getPrototypeOf(i)===null}function ix(i,t,e){if(typeof i!="function")throw new Error(Hn(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Hn(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Hn(1));return e(ix)(i,t)}let n=i,a=t,o=new Map,c=o,u=0,d=!1;function p(){c===o&&(c=new Map,o.forEach((E,x)=>{c.set(x,E)}))}function g(){if(d)throw new Error(Hn(3));return a}function y(E){if(typeof E!="function")throw new Error(Hn(4));if(d)throw new Error(Hn(5));let x=!0;p();const M=u++;return c.set(M,E),function(){if(x){if(d)throw new Error(Hn(6));x=!1,p(),c.delete(M),o=null}}}function b(E){if(!fl(E))throw new Error(Hn(7));if(typeof E.type>"u")throw new Error(Hn(8));if(typeof E.type!="string")throw new Error(Hn(17));if(d)throw new Error(Hn(9));try{d=!0,a=n(a,E)}finally{d=!1}return(o=c).forEach(M=>{M()}),E}function v(E){if(typeof E!="function")throw new Error(Hn(10));n=E,b({type:Y0.REPLACE})}function S(){const E=y;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Hn(11));function M(){const _=x;_.next&&_.next(g())}return M(),{unsubscribe:E(M)}},[rT](){return this}}}return b({type:Y0.INIT}),{dispatch:b,subscribe:y,getState:g,replaceReducer:v,[rT]:S}}function q5(i){Object.keys(i).forEach(t=>{const e=i[t];if(typeof e(void 0,{type:Y0.INIT})>"u")throw new Error(Hn(12));if(typeof e(void 0,{type:Y0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Hn(13))})}function rx(i){const t=Object.keys(i),e={};for(let o=0;o<t.length;o++){const c=t[o];typeof i[c]=="function"&&(e[c]=i[c])}const n=Object.keys(e);let a;try{q5(e)}catch(o){a=o}return function(c={},u){if(a)throw a;let d=!1;const p={};for(let g=0;g<n.length;g++){const y=n[g],b=e[y],v=c[y],S=b(v,u);if(typeof S>"u")throw u&&u.type,new Error(Hn(14));p[y]=S,d=d||S!==v}return d=d||n.length!==Object.keys(c).length,d?p:c}}function X0(...i){return i.length===0?t=>t:i.length===1?i[0]:i.reduce((t,e)=>(...n)=>t(e(...n)))}function G5(...i){return t=>(e,n)=>{const a=t(e,n);let o=()=>{throw new Error(Hn(15))};const c={getState:a.getState,dispatch:(d,...p)=>o(d,...p)},u=i.map(d=>d(c));return o=X0(...u)(a.dispatch),{...a,dispatch:o}}}function sx(i){return fl(i)&&"type"in i&&typeof i.type=="string"}var ax=Symbol.for("immer-nothing"),xp=Symbol.for("immer-draftable"),Mi=Symbol.for("immer-state");function qn(i,...t){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var ou=Object.getPrototypeOf;function sr(i){return!!i&&!!i[Mi]}function rs(i){var t;return i?aM(i)||Array.isArray(i)||!!i[xp]||!!((t=i.constructor)!=null&&t[xp])||om(i)||lm(i):!1}var V5=Object.prototype.constructor.toString();function aM(i){if(!i||typeof i!="object")return!1;const t=ou(i);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===V5}function Y5(i){return sr(i)||qn(15,i),i[Mi].base_}function Cp(i,t){lu(i)===0?Reflect.ownKeys(i).forEach(e=>{t(e,i[e],i)}):i.forEach((e,n)=>t(n,e,i))}function lu(i){const t=i[Mi];return t?t.type_:Array.isArray(i)?1:om(i)?2:lm(i)?3:0}function Tp(i,t){return lu(i)===2?i.has(t):Object.prototype.hasOwnProperty.call(i,t)}function kw(i,t){return lu(i)===2?i.get(t):i[t]}function oM(i,t,e){const n=lu(i);n===2?i.set(t,e):n===3?i.add(e):i[t]=e}function X5(i,t){return i===t?i!==0||1/i===1/t:i!==i&&t!==t}function om(i){return i instanceof Map}function lm(i){return i instanceof Set}function Vl(i){return i.copy_||i.base_}function fS(i,t){if(om(i))return new Map(i);if(lm(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const e=aM(i);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(i);delete n[Mi];let a=Reflect.ownKeys(n);for(let o=0;o<a.length;o++){const c=a[o],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:i[c]})}return Object.create(ou(i),n)}else{const n=ou(i);if(n!==null&&e)return{...i};const a=Object.create(n);return Object.assign(a,i)}}function ox(i,t=!1){return qb(i)||sr(i)||!rs(i)||(lu(i)>1&&(i.set=i.add=i.clear=i.delete=Q5),Object.freeze(i),t&&Object.entries(i).forEach(([e,n])=>ox(n,!0))),i}function Q5(){qn(2)}function qb(i){return Object.isFrozen(i)}var pS={};function cu(i){const t=pS[i];return t||qn(0,i),t}function W5(i,t){pS[i]||(pS[i]=t)}var Rp;function lM(){return Rp}function K5(i,t){return{drafts_:[],parent_:i,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sT(i,t){t&&(cu("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=t)}function gS(i){mS(i),i.drafts_.forEach(Z5),i.drafts_=null}function mS(i){i===Rp&&(Rp=i.parent_)}function aT(i){return Rp=K5(Rp,i)}function Z5(i){const t=i[Mi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function oT(i,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return i!==void 0&&i!==e?(e[Mi].modified_&&(gS(t),qn(4)),rs(i)&&(i=Q0(t,i),t.parent_||W0(t,i)),t.patches_&&cu("Patches").generateReplacementPatches_(e[Mi].base_,i,t.patches_,t.inversePatches_)):i=Q0(t,e,[]),gS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),i!==ax?i:void 0}function Q0(i,t,e){if(qb(t))return t;const n=t[Mi];if(!n)return Cp(t,(a,o)=>lT(i,n,t,a,o,e)),t;if(n.scope_!==i)return t;if(!n.modified_)return W0(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let o=a,c=!1;n.type_===3&&(o=new Set(a),a.clear(),c=!0),Cp(o,(u,d)=>lT(i,n,a,u,d,e,c)),W0(i,a,!1),e&&i.patches_&&cu("Patches").generatePatches_(n,e,i.patches_,i.inversePatches_)}return n.copy_}function lT(i,t,e,n,a,o,c){if(sr(a)){const u=o&&t&&t.type_!==3&&!Tp(t.assigned_,n)?o.concat(n):void 0,d=Q0(i,a,u);if(oM(e,n,d),sr(d))i.canAutoFreeze_=!1;else return}else c&&e.add(a);if(rs(a)&&!qb(a)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;Q0(i,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,n)&&W0(i,a)}}function W0(i,t,e=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&ox(t,e)}function J5(i,t){const e=Array.isArray(i),n={type_:e?1:0,scope_:t?t.scope_:lM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,o=lx;e&&(a=[n],o=Mp);const{revoke:c,proxy:u}=Proxy.revocable(a,o);return n.draft_=u,n.revoke_=c,u}var lx={get(i,t){if(t===Mi)return i;const e=Vl(i);if(!Tp(e,t))return tP(i,e,t);const n=e[t];return i.finalized_||!rs(n)?n:n===Lw(i.base_,t)?(Pw(i),i.copy_[t]=bS(n,i)):n},has(i,t){return t in Vl(i)},ownKeys(i){return Reflect.ownKeys(Vl(i))},set(i,t,e){const n=cM(Vl(i),t);if(n!=null&&n.set)return n.set.call(i.draft_,e),!0;if(!i.modified_){const a=Lw(Vl(i),t),o=a==null?void 0:a[Mi];if(o&&o.base_===e)return i.copy_[t]=e,i.assigned_[t]=!1,!0;if(X5(e,a)&&(e!==void 0||Tp(i.base_,t)))return!0;Pw(i),yS(i)}return i.copy_[t]===e&&(e!==void 0||t in i.copy_)||Number.isNaN(e)&&Number.isNaN(i.copy_[t])||(i.copy_[t]=e,i.assigned_[t]=!0),!0},deleteProperty(i,t){return Lw(i.base_,t)!==void 0||t in i.base_?(i.assigned_[t]=!1,Pw(i),yS(i)):delete i.assigned_[t],i.copy_&&delete i.copy_[t],!0},getOwnPropertyDescriptor(i,t){const e=Vl(i),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:i.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){qn(11)},getPrototypeOf(i){return ou(i.base_)},setPrototypeOf(){qn(12)}},Mp={};Cp(lx,(i,t)=>{Mp[i]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Mp.deleteProperty=function(i,t){return Mp.set.call(this,i,t,void 0)};Mp.set=function(i,t,e){return lx.set.call(this,i[0],t,e,i[0])};function Lw(i,t){const e=i[Mi];return(e?Vl(e):i)[t]}function tP(i,t,e){var a;const n=cM(t,e);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(i.draft_):void 0}function cM(i,t){if(!(t in i))return;let e=ou(i);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=ou(e)}}function yS(i){i.modified_||(i.modified_=!0,i.parent_&&yS(i.parent_))}function Pw(i){i.copy_||(i.copy_=fS(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var eP=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const o=e;e=t;const c=this;return function(d=o,...p){return c.produce(d,g=>e.call(this,g,...p))}}typeof e!="function"&&qn(6),n!==void 0&&typeof n!="function"&&qn(7);let a;if(rs(t)){const o=aT(this),c=bS(t,void 0);let u=!0;try{a=e(c),u=!1}finally{u?gS(o):mS(o)}return sT(o,n),oT(a,o)}else if(!t||typeof t!="object"){if(a=e(t),a===void 0&&(a=t),a===ax&&(a=void 0),this.autoFreeze_&&ox(a,!0),n){const o=[],c=[];cu("Patches").generateReplacementPatches_(t,a,o,c),n(o,c)}return a}else qn(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,d=>t(d,...u));let n,a;return[this.produce(t,e,(c,u)=>{n=c,a=u}),n,a]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){rs(i)||qn(8),sr(i)&&(i=cx(i));const t=aT(this),e=bS(i,void 0);return e[Mi].isManual_=!0,mS(t),e}finishDraft(i,t){const e=i&&i[Mi];(!e||!e.isManual_)&&qn(9);const{scope_:n}=e;return sT(n,t),oT(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,t){let e;for(e=t.length-1;e>=0;e--){const a=t[e];if(a.path.length===0&&a.op==="replace"){i=a.value;break}}e>-1&&(t=t.slice(e+1));const n=cu("Patches").applyPatches_;return sr(i)?n(i,t):this.produce(i,a=>n(a,t))}};function bS(i,t){const e=om(i)?cu("MapSet").proxyMap_(i,t):lm(i)?cu("MapSet").proxySet_(i,t):J5(i,t);return(t?t.scope_:lM()).drafts_.push(e),e}function cx(i){return sr(i)||qn(10,i),uM(i)}function uM(i){if(!rs(i)||qb(i))return i;const t=i[Mi];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=fS(i,t.scope_.immer_.useStrictShallowCopy_)}else e=fS(i,!0);return Cp(e,(n,a)=>{oM(e,n,uM(a))}),t&&(t.finalized_=!1),e}function nP(){const t="replace",e="add",n="remove";function a(b,v,S,A){switch(b.type_){case 0:case 2:return c(b,v,S,A);case 1:return o(b,v,S,A);case 3:return u(b,v,S,A)}}function o(b,v,S,A){let{base_:E,assigned_:x}=b,M=b.copy_;M.length<E.length&&([E,M]=[M,E],[S,A]=[A,S]);for(let C=0;C<E.length;C++)if(x[C]&&M[C]!==E[C]){const _=v.concat([C]);S.push({op:t,path:_,value:y(M[C])}),A.push({op:t,path:_,value:y(E[C])})}for(let C=E.length;C<M.length;C++){const _=v.concat([C]);S.push({op:e,path:_,value:y(M[C])})}for(let C=M.length-1;E.length<=C;--C){const _=v.concat([C]);A.push({op:n,path:_})}}function c(b,v,S,A){const{base_:E,copy_:x}=b;Cp(b.assigned_,(M,C)=>{const _=kw(E,M),D=kw(x,M),R=C?Tp(E,M)?t:e:n;if(_===D&&R===t)return;const N=v.concat(M);S.push(R===n?{op:R,path:N}:{op:R,path:N,value:D}),A.push(R===e?{op:n,path:N}:R===n?{op:e,path:N,value:y(_)}:{op:t,path:N,value:y(_)})})}function u(b,v,S,A){let{base_:E,copy_:x}=b,M=0;E.forEach(C=>{if(!x.has(C)){const _=v.concat([M]);S.push({op:n,path:_,value:C}),A.unshift({op:e,path:_,value:C})}M++}),M=0,x.forEach(C=>{if(!E.has(C)){const _=v.concat([M]);S.push({op:e,path:_,value:C}),A.unshift({op:n,path:_,value:C})}M++})}function d(b,v,S,A){S.push({op:t,path:[],value:v===ax?void 0:v}),A.push({op:t,path:[],value:b})}function p(b,v){return v.forEach(S=>{const{path:A,op:E}=S;let x=b;for(let D=0;D<A.length-1;D++){const R=lu(x);let N=A[D];typeof N!="string"&&typeof N!="number"&&(N=""+N),(R===0||R===1)&&(N==="__proto__"||N==="constructor")&&qn(19),typeof x=="function"&&N==="prototype"&&qn(19),x=kw(x,N),typeof x!="object"&&qn(18,A.join("/"))}const M=lu(x),C=g(S.value),_=A[A.length-1];switch(E){case t:switch(M){case 2:return x.set(_,C);case 3:qn(16);default:return x[_]=C}case e:switch(M){case 1:return _==="-"?x.push(C):x.splice(_,0,C);case 2:return x.set(_,C);case 3:return x.add(C);default:return x[_]=C}case n:switch(M){case 1:return x.splice(_,1);case 2:return x.delete(_);case 3:return x.delete(S.value);default:return delete x[_]}default:qn(17,E)}}),b}function g(b){if(!rs(b))return b;if(Array.isArray(b))return b.map(g);if(om(b))return new Map(Array.from(b.entries()).map(([S,A])=>[S,g(A)]));if(lm(b))return new Set(Array.from(b).map(g));const v=Object.create(ou(b));for(const S in b)v[S]=g(b[S]);return Tp(b,xp)&&(v[xp]=b[xp]),v}function y(b){return sr(b)?g(b):b}W5("Patches",{applyPatches_:p,generatePatches_:a,generateReplacementPatches_:d})}var ar=new eP,Ih=ar.produce,dM=ar.produceWithPatches.bind(ar);ar.setAutoFreeze.bind(ar);ar.setUseStrictShallowCopy.bind(ar);var cT=ar.applyPatches.bind(ar);ar.createDraft.bind(ar);ar.finishDraft.bind(ar);function iP(i,t=`expected a function, instead received ${typeof i}`){if(typeof i!="function")throw new TypeError(t)}function rP(i,t=`expected an object, instead received ${typeof i}`){if(typeof i!="object")throw new TypeError(t)}function sP(i,t="expected all items to be functions, instead received the following types: "){if(!i.every(e=>typeof e=="function")){const e=i.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${e}]`)}}var uT=i=>Array.isArray(i)?i:[i];function aP(i){const t=Array.isArray(i[0])?i[0]:i;return sP(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function oP(i,t){const e=[],{length:n}=i;for(let a=0;a<n;a++)e.push(i[a].apply(null,t));return e}var lP=class{constructor(i){this.value=i}deref(){return this.value}},cP=typeof WeakRef<"u"?WeakRef:lP,uP=0,dT=1;function Py(){return{s:uP,v:void 0,o:null,p:null}}function Dp(i,t={}){let e=Py();const{resultEqualityCheck:n}=t;let a,o=0;function c(){var y;let u=e;const{length:d}=arguments;for(let b=0,v=d;b<v;b++){const S=arguments[b];if(typeof S=="function"||typeof S=="object"&&S!==null){let A=u.o;A===null&&(u.o=A=new WeakMap);const E=A.get(S);E===void 0?(u=Py(),A.set(S,u)):u=E}else{let A=u.p;A===null&&(u.p=A=new Map);const E=A.get(S);E===void 0?(u=Py(),A.set(S,u)):u=E}}const p=u;let g;if(u.s===dT)g=u.v;else if(g=i.apply(null,arguments),o++,n){const b=((y=a==null?void 0:a.deref)==null?void 0:y.call(a))??a;b!=null&&n(b,g)&&(g=b,o!==0&&o--),a=typeof g=="object"&&g!==null||typeof g=="function"?new cP(g):g}return p.s=dT,p.v=g,g}return c.clearCache=()=>{e=Py(),c.resetResultsCount()},c.resultsCount=()=>o,c.resetResultsCount=()=>{o=0},c}function hM(i,...t){const e=typeof i=="function"?{memoize:i,memoizeOptions:t}:i,n=(...a)=>{let o=0,c=0,u,d={},p=a.pop();typeof p=="object"&&(d=p,p=a.pop()),iP(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const g={...e,...d},{memoize:y,memoizeOptions:b=[],argsMemoize:v=Dp,argsMemoizeOptions:S=[]}=g,A=uT(b),E=uT(S),x=aP(a),M=y(function(){return o++,p.apply(null,arguments)},...A),C=v(function(){c++;const D=oP(x,arguments);return u=M.apply(null,D),u},...E);return Object.assign(C,{resultFunc:p,memoizedResultFunc:M,dependencies:x,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var jh=hM(Dp),dP=Object.assign((i,t=jh)=>{rP(i,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof i}`);const e=Object.keys(i),n=e.map(o=>i[o]);return t(n,(...o)=>o.reduce((c,u,d)=>(c[e[d]]=u,c),{}))},{withTypes:()=>dP});function fM(i){return({dispatch:e,getState:n})=>a=>o=>typeof o=="function"?o(e,n,i):a(o)}var hP=fM(),fP=fM,pP=(...i)=>{const t=hM(...i),e=Object.assign((...n)=>{const a=t(...n),o=(c,...u)=>a(sr(c)?cx(c):c,...u);return Object.assign(o,a),o},{withTypes:()=>e});return e},gP=pP(Dp),mP=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?X0:X0.apply(null,arguments)},yP=i=>i&&typeof i.match=="function";function es(i,t){function e(...n){if(t){let a=t(...n);if(!a)throw new Error(ns(0));return{type:i,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:i,payload:n[0]}}return e.toString=()=>`${i}`,e.type=i,e.match=n=>sx(n)&&n.type===i,e}function bP(i){return sx(i)&&Object.keys(i).every(vP)}function vP(i){return["type","payload","error","meta"].indexOf(i)>-1}var pM=class ep extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ep.prototype)}static get[Symbol.species](){return ep}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ep(...t[0].concat(this)):new ep(...t.concat(this))}};function hT(i){return rs(i)?Ih(i,()=>{}):i}function Ny(i,t,e){return i.has(t)?i.get(t):i.set(t,e(t)).get(t)}function wP(i){return typeof i=="boolean"}var SP=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=t??{};let c=new pM;return e&&(wP(e)?c.push(hP):c.push(fP(e.extraArgument))),c},Gb="RTK_autoBatch",Uf=()=>i=>({payload:i,meta:{[Gb]:!0}}),fT=i=>t=>{setTimeout(t,i)},AP=(i={type:"raf"})=>t=>(...e)=>{const n=t(...e);let a=!0,o=!1,c=!1;const u=new Set,d=i.type==="tick"?queueMicrotask:i.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fT(10):i.type==="callback"?i.queueNotification:fT(i.timeout),p=()=>{c=!1,o&&(o=!1,u.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const y=()=>a&&g(),b=n.subscribe(y);return u.add(g),()=>{b(),u.delete(g)}},dispatch(g){var y;try{return a=!((y=g==null?void 0:g.meta)!=null&&y[Gb]),o=!a,o&&(c||(c=!0,d(p))),n.dispatch(g)}finally{a=!0}}})},xP=i=>function(e){const{autoBatch:n=!0}=e??{};let a=new pM(i);return n&&a.push(AP(typeof n=="object"?n:void 0)),a};function EP(i){const t=SP(),{reducer:e=void 0,middleware:n,devTools:a=!0,preloadedState:o=void 0,enhancers:c=void 0}=i||{};let u;if(typeof e=="function")u=e;else if(fl(e))u=rx(e);else throw new Error(ns(1));let d;typeof n=="function"?d=n(t):d=t();let p=X0;a&&(p=mP({trace:!1,...typeof a=="object"&&a}));const g=G5(...d),y=xP(g);let b=typeof c=="function"?c(y):y();const v=p(...b);return ix(u,o,v)}function gM(i){const t={},e=[];let n;const a={addCase(o,c){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(ns(28));if(u in t)throw new Error(ns(29));return t[u]=c,a},addMatcher(o,c){return e.push({matcher:o,reducer:c}),a},addDefaultCase(o){return n=o,a}};return i(a),[t,e,n]}function _P(i){return typeof i=="function"}function CP(i,t){let[e,n,a]=gM(t),o;if(_P(i))o=()=>hT(i());else{const u=hT(i);o=()=>u}function c(u=o(),d){let p=[e[d.type],...n.filter(({matcher:g})=>g(d)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[a]),p.reduce((g,y)=>{if(y)if(sr(g)){const v=y(g,d);return v===void 0?g:v}else{if(rs(g))return Ih(g,b=>y(b,d));{const b=y(g,d);if(b===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return g},u)}return c.getInitialState=o,c}var mM=(i,t)=>yP(i)?i.match(t):i(t);function Va(...i){return t=>i.some(e=>mM(e,t))}function Ep(...i){return t=>i.every(e=>mM(e,t))}function Vb(i,t){if(!i||!i.meta)return!1;const e=typeof i.meta.requestId=="string",n=t.indexOf(i.meta.requestStatus)>-1;return e&&n}function cm(i){return typeof i[0]=="function"&&"pending"in i[0]&&"fulfilled"in i[0]&&"rejected"in i[0]}function ux(...i){return i.length===0?t=>Vb(t,["pending"]):cm(i)?Va(...i.map(t=>t.pending)):ux()(i[0])}function Mh(...i){return i.length===0?t=>Vb(t,["rejected"]):cm(i)?Va(...i.map(t=>t.rejected)):Mh()(i[0])}function Yb(...i){const t=e=>e&&e.meta&&e.meta.rejectedWithValue;return i.length===0?Ep(Mh(...i),t):cm(i)?Ep(Mh(...i),t):Yb()(i[0])}function pl(...i){return i.length===0?t=>Vb(t,["fulfilled"]):cm(i)?Va(...i.map(t=>t.fulfilled)):pl()(i[0])}function vS(...i){return i.length===0?t=>Vb(t,["pending","fulfilled","rejected"]):cm(i)?Va(...i.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):vS()(i[0])}var TP="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dx=(i=21)=>{let t="",e=i;for(;e--;)t+=TP[Math.random()*64|0];return t},RP=["name","message","stack","code"],Nw=class{constructor(i,t){bt(this,"_type");this.payload=i,this.meta=t}},pT=class{constructor(i,t){bt(this,"_type");this.payload=i,this.meta=t}},MP=i=>{if(typeof i=="object"&&i!==null){const t={};for(const e of RP)typeof i[e]=="string"&&(t[e]=i[e]);return t}return{message:String(i)}},gT="External signal was aborted",mT=(()=>{function i(t,e,n){const a=es(t+"/fulfilled",(d,p,g,y)=>({payload:d,meta:{...y||{},arg:g,requestId:p,requestStatus:"fulfilled"}})),o=es(t+"/pending",(d,p,g)=>({payload:void 0,meta:{...g||{},arg:p,requestId:d,requestStatus:"pending"}})),c=es(t+"/rejected",(d,p,g,y,b)=>({payload:y,error:(n&&n.serializeError||MP)(d||"Rejected"),meta:{...b||{},arg:g,requestId:p,rejectedWithValue:!!y,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"}}));function u(d,{signal:p}={}){return(g,y,b)=>{const v=n!=null&&n.idGenerator?n.idGenerator(d):dx(),S=new AbortController;let A,E;function x(C){E=C,S.abort()}p&&(p.aborted?x(gT):p.addEventListener("abort",()=>x(gT),{once:!0}));const M=async function(){var D,R;let C;try{let N=(D=n==null?void 0:n.condition)==null?void 0:D.call(n,d,{getState:y,extra:b});if(OP(N)&&(N=await N),N===!1||S.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const $=new Promise((j,H)=>{A=()=>{H({name:"AbortError",message:E||"Aborted"})},S.signal.addEventListener("abort",A)});g(o(v,d,(R=n==null?void 0:n.getPendingMeta)==null?void 0:R.call(n,{requestId:v,arg:d},{getState:y,extra:b}))),C=await Promise.race([$,Promise.resolve(e(d,{dispatch:g,getState:y,extra:b,requestId:v,signal:S.signal,abort:x,rejectWithValue:(j,H)=>new Nw(j,H),fulfillWithValue:(j,H)=>new pT(j,H)})).then(j=>{if(j instanceof Nw)throw j;return j instanceof pT?a(j.payload,v,d,j.meta):a(j,v,d)})])}catch(N){C=N instanceof Nw?c(null,v,d,N.payload,N.meta):c(N,v,d)}finally{A&&S.signal.removeEventListener("abort",A)}return n&&!n.dispatchConditionRejection&&c.match(C)&&C.meta.condition||g(C),C}();return Object.assign(M,{abort:x,requestId:v,arg:d,unwrap(){return M.then(DP)}})}}return Object.assign(u,{pending:o,rejected:c,fulfilled:a,settled:Va(c,a),typePrefix:t})}return i.withTypes=()=>i,i})();function DP(i){if(i.meta&&i.meta.rejectedWithValue)throw i.payload;if(i.error)throw i.error;return i.payload}function OP(i){return i!==null&&typeof i=="object"&&typeof i.then=="function"}var kP=Symbol.for("rtk-slice-createasyncthunk");function LP(i,t){return`${i}/${t}`}function PP({creators:i}={}){var e;const t=(e=i==null?void 0:i.asyncThunk)==null?void 0:e[kP];return function(a){const{name:o,reducerPath:c=o}=a;if(!o)throw new Error(ns(11));const u=(typeof a.reducers=="function"?a.reducers(IP()):a.reducers)||{},d=Object.keys(u),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(_,D){const R=typeof _=="string"?_:_.type;if(!R)throw new Error(ns(12));if(R in p.sliceCaseReducersByType)throw new Error(ns(13));return p.sliceCaseReducersByType[R]=D,g},addMatcher(_,D){return p.sliceMatchers.push({matcher:_,reducer:D}),g},exposeAction(_,D){return p.actionCreators[_]=D,g},exposeCaseReducer(_,D){return p.sliceCaseReducersByName[_]=D,g}};d.forEach(_=>{const D=u[_],R={reducerName:_,type:LP(o,_),createNotation:typeof a.reducers=="function"};BP(D)?FP(R,D,g,t):jP(R,D,g)});function y(){const[_={},D=[],R=void 0]=typeof a.extraReducers=="function"?gM(a.extraReducers):[a.extraReducers],N={..._,...p.sliceCaseReducersByType};return CP(a.initialState,$=>{for(let j in N)$.addCase(j,N[j]);for(let j of p.sliceMatchers)$.addMatcher(j.matcher,j.reducer);for(let j of D)$.addMatcher(j.matcher,j.reducer);R&&$.addDefaultCase(R)})}const b=_=>_,v=new Map,S=new WeakMap;let A;function E(_,D){return A||(A=y()),A(_,D)}function x(){return A||(A=y()),A.getInitialState()}function M(_,D=!1){function R($){let j=$[_];return typeof j>"u"&&D&&(j=Ny(S,R,x)),j}function N($=b){const j=Ny(v,D,()=>new WeakMap);return Ny(j,$,()=>{const H={};for(const[F,G]of Object.entries(a.selectors??{}))H[F]=NP(G,$,()=>Ny(S,$,x),D);return H})}return{reducerPath:_,getSelectors:N,get selectors(){return N(R)},selectSlice:R}}const C={name:o,reducer:E,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:x,...M(c),injectInto(_,{reducerPath:D,...R}={}){const N=D??c;return _.inject({reducerPath:N,reducer:E},R),{...C,...M(N,!0)}}};return C}}function NP(i,t,e,n){function a(o,...c){let u=t(o);return typeof u>"u"&&n&&(u=e()),i(u,...c)}return a.unwrapped=i,a}var Is=PP();function IP(){function i(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return i.withTypes=()=>i,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:i}}function jP({type:i,reducerName:t,createNotation:e},n,a){let o,c;if("reducer"in n){if(e&&!zP(n))throw new Error(ns(17));o=n.reducer,c=n.prepare}else o=n;a.addCase(i,o).exposeCaseReducer(t,o).exposeAction(t,c?es(i,c):es(i))}function BP(i){return i._reducerDefinitionType==="asyncThunk"}function zP(i){return i._reducerDefinitionType==="reducerWithPrepare"}function FP({type:i,reducerName:t},e,n,a){if(!a)throw new Error(ns(18));const{payloadCreator:o,fulfilled:c,pending:u,rejected:d,settled:p,options:g}=e,y=a(i,o,g);n.exposeAction(t,y),c&&n.addCase(y.fulfilled,c),u&&n.addCase(y.pending,u),d&&n.addCase(y.rejected,d),p&&n.addMatcher(y.settled,p),n.exposeCaseReducer(t,{fulfilled:c||Iy,pending:u||Iy,rejected:d||Iy,settled:p||Iy})}function Iy(){}function HP(){return{ids:[],entities:{}}}function UP(i){function t(e={},n){const a=Object.assign(HP(),e);return n?i.setAll(a,n):a}return{getInitialState:t}}function $P(){function i(t,e={}){const{createSelector:n=gP}=e,a=y=>y.ids,o=y=>y.entities,c=n(a,o,(y,b)=>y.map(v=>b[v])),u=(y,b)=>b,d=(y,b)=>y[b],p=n(a,y=>y.length);if(!t)return{selectIds:a,selectEntities:o,selectAll:c,selectTotal:p,selectById:n(o,u,d)};const g=n(t,o);return{selectIds:n(t,a),selectEntities:g,selectAll:n(t,c),selectTotal:n(t,p),selectById:n(g,u,d)}}return{getSelectors:i}}var qP=sr;function GP(i){const t=en((e,n)=>i(n));return function(n){return t(n,void 0)}}function en(i){return function(e,n){function a(c){return bP(c)}const o=c=>{a(n)?i(n.payload,c):i(n,c)};return qP(e)?(o(e),e):Ih(e,o)}}function fd(i,t){return t(i)}function su(i){return Array.isArray(i)||(i=Object.values(i)),i}function a0(i){return sr(i)?cx(i):i}function yM(i,t,e){i=su(i);const n=a0(e.ids),a=new Set(n),o=[],c=new Set([]),u=[];for(const d of i){const p=fd(d,t);a.has(p)||c.has(p)?u.push({id:p,changes:d}):(c.add(p),o.push(d))}return[o,u,n]}function bM(i){function t(S,A){const E=fd(S,i);E in A.entities||(A.ids.push(E),A.entities[E]=S)}function e(S,A){S=su(S);for(const E of S)t(E,A)}function n(S,A){const E=fd(S,i);E in A.entities||A.ids.push(E),A.entities[E]=S}function a(S,A){S=su(S);for(const E of S)n(E,A)}function o(S,A){S=su(S),A.ids=[],A.entities={},e(S,A)}function c(S,A){return u([S],A)}function u(S,A){let E=!1;S.forEach(x=>{x in A.entities&&(delete A.entities[x],E=!0)}),E&&(A.ids=A.ids.filter(x=>x in A.entities))}function d(S){Object.assign(S,{ids:[],entities:{}})}function p(S,A,E){const x=E.entities[A.id];if(x===void 0)return!1;const M=Object.assign({},x,A.changes),C=fd(M,i),_=C!==A.id;return _&&(S[A.id]=C,delete E.entities[A.id]),E.entities[C]=M,_}function g(S,A){return y([S],A)}function y(S,A){const E={},x={};S.forEach(C=>{var _;C.id in A.entities&&(x[C.id]={id:C.id,changes:{...(_=x[C.id])==null?void 0:_.changes,...C.changes}})}),S=Object.values(x),S.length>0&&S.filter(_=>p(E,_,A)).length>0&&(A.ids=Object.values(A.entities).map(_=>fd(_,i)))}function b(S,A){return v([S],A)}function v(S,A){const[E,x]=yM(S,i,A);e(E,A),y(x,A)}return{removeAll:GP(d),addOne:en(t),addMany:en(e),setOne:en(n),setMany:en(a),setAll:en(o),updateOne:en(g),updateMany:en(y),upsertOne:en(b),upsertMany:en(v),removeOne:en(c),removeMany:en(u)}}function VP(i,t,e){let n=0,a=i.length;for(;n<a;){let o=n+a>>>1;const c=i[o];e(t,c)>=0?n=o+1:a=o}return n}function YP(i,t,e){const n=VP(i,t,e);return i.splice(n,0,t),i}function XP(i,t){const{removeOne:e,removeMany:n,removeAll:a}=bM(i);function o(E,x){return c([E],x)}function c(E,x,M){E=su(E);const C=new Set(M??a0(x.ids)),_=E.filter(D=>!C.has(fd(D,i)));_.length!==0&&A(x,_)}function u(E,x){return d([E],x)}function d(E,x){if(E=su(E),E.length!==0){for(const M of E)delete x.entities[i(M)];A(x,E)}}function p(E,x){E=su(E),x.entities={},x.ids=[],c(E,x,[])}function g(E,x){return y([E],x)}function y(E,x){let M=!1,C=!1;for(let _ of E){const D=x.entities[_.id];if(!D)continue;M=!0,Object.assign(D,_.changes);const R=i(D);if(_.id!==R){C=!0,delete x.entities[_.id];const N=x.ids.indexOf(_.id);x.ids[N]=R,x.entities[R]=D}}M&&A(x,[],M,C)}function b(E,x){return v([E],x)}function v(E,x){const[M,C,_]=yM(E,i,x);M.length&&c(M,x,_),C.length&&y(C,x)}function S(E,x){if(E.length!==x.length)return!1;for(let M=0;M<E.length;M++)if(E[M]!==x[M])return!1;return!0}const A=(E,x,M,C)=>{const _=a0(E.entities),D=a0(E.ids),R=E.entities;let N=D;C&&(N=new Set(D));let $=[];for(const F of N){const G=_[F];G&&$.push(G)}const j=$.length===0;for(const F of x)R[i(F)]=F,j||YP($,F,t);j?$=x.slice().sort(t):M&&$.sort(t);const H=$.map(i);S(D,H)||(E.ids=H)};return{removeOne:e,removeMany:n,removeAll:a,addOne:en(o),updateOne:en(g),upsertOne:en(b),setOne:en(u),setMany:en(d),setAll:en(p),addMany:en(c),updateMany:en(y),upsertMany:en(v)}}function QP(i={}){const{selectId:t,sortComparer:e}={sortComparer:!1,selectId:c=>c.id,...i},n=e?XP(t,e):bM(t),a=UP(n),o=$P();return{selectId:t,sortComparer:e,...a,...o,...n}}function ns(i){return`Minified Redux Toolkit error #${i}; visit https://redux-toolkit.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var hx="persist:",fx="persist/FLUSH",Xb="persist/REHYDRATE",px="persist/PAUSE",gx="persist/PERSIST",mx="persist/PURGE",yx="persist/REGISTER",WP=-1;function o0(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o0=function(e){return typeof e}:o0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o0(i)}function yT(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function KP(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?yT(e,!0).forEach(function(n){ZP(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):yT(e).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function ZP(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function JP(i,t,e,n){n.debug;var a=KP({},e);return i&&o0(i)==="object"&&Object.keys(i).forEach(function(o){o!=="_persist"&&t[o]===e[o]&&(a[o]=i[o])}),a}function tN(i){var t=i.blacklist||null,e=i.whitelist||null,n=i.transforms||[],a=i.throttle||0,o="".concat(i.keyPrefix!==void 0?i.keyPrefix:hx).concat(i.key),c=i.storage,u;i.serialize===!1?u=function(D){return D}:typeof i.serialize=="function"?u=i.serialize:u=eN;var d=i.writeFailHandler||null,p={},g={},y=[],b=null,v=null,S=function(D){Object.keys(D).forEach(function(R){x(R)&&p[R]!==D[R]&&y.indexOf(R)===-1&&y.push(R)}),Object.keys(p).forEach(function(R){D[R]===void 0&&x(R)&&y.indexOf(R)===-1&&p[R]!==void 0&&y.push(R)}),b===null&&(b=setInterval(A,a)),p=D};function A(){if(y.length===0){b&&clearInterval(b),b=null;return}var _=y.shift(),D=n.reduce(function(R,N){return N.in(R,_,p)},p[_]);if(D!==void 0)try{g[_]=u(D)}catch(R){console.error("redux-persist/createPersistoid: error serializing state",R)}else delete g[_];y.length===0&&E()}function E(){Object.keys(g).forEach(function(_){p[_]===void 0&&delete g[_]}),v=c.setItem(o,u(g)).catch(M)}function x(_){return!(e&&e.indexOf(_)===-1&&_!=="_persist"||t&&t.indexOf(_)!==-1)}function M(_){d&&d(_)}var C=function(){for(;y.length!==0;)A();return v||Promise.resolve()};return{update:S,flush:C}}function eN(i){return JSON.stringify(i)}function nN(i){var t=i.transforms||[],e="".concat(i.keyPrefix!==void 0?i.keyPrefix:hx).concat(i.key),n=i.storage;i.debug;var a;return i.deserialize===!1?a=function(c){return c}:typeof i.deserialize=="function"?a=i.deserialize:a=iN,n.getItem(e).then(function(o){if(o)try{var c={},u=a(o);return Object.keys(u).forEach(function(d){c[d]=t.reduceRight(function(p,g){return g.out(p,d,u)},a(u[d]))}),c}catch(d){throw d}else return})}function iN(i){return JSON.parse(i)}function rN(i){var t=i.storage,e="".concat(i.keyPrefix!==void 0?i.keyPrefix:hx).concat(i.key);return t.removeItem(e,sN)}function sN(i){}function bT(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function aa(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?bT(e,!0).forEach(function(n){aN(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):bT(e).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function aN(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function oN(i,t){if(i==null)return{};var e=lN(i,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function lN(i,t){if(i==null)return{};var e={},n=Object.keys(i),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(e[a]=i[a]);return e}var cN=5e3;function wS(i,t){var e=i.version!==void 0?i.version:WP;i.debug;var n=i.stateReconciler===void 0?JP:i.stateReconciler,a=i.getStoredState||nN,o=i.timeout!==void 0?i.timeout:cN,c=null,u=!1,d=!0,p=function(y){return y._persist.rehydrated&&c&&!d&&c.update(y),y};return function(g,y){var b=g||{},v=b._persist,S=oN(b,["_persist"]),A=S;if(y.type===gx){var E=!1,x=function($,j){E||(y.rehydrate(i.key,$,j),E=!0)};if(o&&setTimeout(function(){!E&&x(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(i.key,'"')))},o),d=!1,c||(c=tN(i)),v)return aa({},t(A,y),{_persist:v});if(typeof y.rehydrate!="function"||typeof y.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return y.register(i.key),a(i).then(function(N){var $=i.migrate||function(j,H){return Promise.resolve(j)};$(N,e).then(function(j){x(j)},function(j){x(void 0,j)})},function(N){x(void 0,N)}),aa({},t(A,y),{_persist:{version:e,rehydrated:!1}})}else{if(y.type===mx)return u=!0,y.result(rN(i)),aa({},t(A,y),{_persist:v});if(y.type===fx)return y.result(c&&c.flush()),aa({},t(A,y),{_persist:v});if(y.type===px)d=!0;else if(y.type===Xb){if(u)return aa({},A,{_persist:aa({},v,{rehydrated:!0})});if(y.key===i.key){var M=t(A,y),C=y.payload,_=n!==!1&&C!==void 0?n(C,g,M,i):M,D=aa({},_,{_persist:aa({},v,{rehydrated:!0})});return p(D)}}}if(!v)return t(g,y);var R=t(A,y);return R===A?g:p(aa({},R,{_persist:v}))}}function vT(i){return hN(i)||dN(i)||uN()}function uN(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function dN(i){if(Symbol.iterator in Object(i)||Object.prototype.toString.call(i)==="[object Arguments]")return Array.from(i)}function hN(i){if(Array.isArray(i)){for(var t=0,e=new Array(i.length);t<i.length;t++)e[t]=i[t];return e}}function wT(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function SS(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?wT(e,!0).forEach(function(n){fN(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):wT(e).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function fN(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var vM={registry:[],bootstrapped:!1},pN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vM,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case yx:return SS({},t,{registry:[].concat(vT(t.registry),[e.key])});case Xb:var n=t.registry.indexOf(e.key),a=vT(t.registry);return a.splice(n,1),SS({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function gN(i,t,e){var n=ix(pN,vM,void 0),a=function(d){n.dispatch({type:yx,key:d})},o=function(d,p,g){var y={type:Xb,payload:p,err:g,key:d};i.dispatch(y),n.dispatch(y)},c=SS({},n,{purge:function(){var d=[];return i.dispatch({type:mx,result:function(g){d.push(g)}}),Promise.all(d)},flush:function(){var d=[];return i.dispatch({type:fx,result:function(g){d.push(g)}}),Promise.all(d)},pause:function(){i.dispatch({type:px})},persist:function(){i.dispatch({type:gx,register:a,rehydrate:o})}});return c.persist(),c}var $f={},jy={},By={},ST;function mN(){if(ST)return By;ST=1,By.__esModule=!0,By.default=a;function i(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i=function(u){return typeof u}:i=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},i(o)}function t(){}var e={getItem:t,setItem:t,removeItem:t};function n(o){if((typeof self>"u"?"undefined":i(self))!=="object"||!(o in self))return!1;try{var c=self[o],u="redux-persist ".concat(o," test");c.setItem(u,"test"),c.getItem(u),c.removeItem(u)}catch{return!1}return!0}function a(o){var c="".concat(o,"Storage");return n(c)?self[c]:e}return By}var AT;function yN(){if(AT)return jy;AT=1,jy.__esModule=!0,jy.default=e;var i=t(mN());function t(n){return n&&n.__esModule?n:{default:n}}function e(n){var a=(0,i.default)(n);return{getItem:function(c){return new Promise(function(u,d){u(a.getItem(c))})},setItem:function(c,u){return new Promise(function(d,p){d(a.setItem(c,u))})},removeItem:function(c){return new Promise(function(u,d){u(a.removeItem(c))})}}}return jy}var xT;function bN(){if(xT)return $f;xT=1,$f.__esModule=!0,$f.default=void 0;var i=t(yN());function t(n){return n&&n.__esModule?n:{default:n}}var e=(0,i.default)("local");return $f.default=e,$f}var vN=bN();const bx=JR(vN);var wN=class extends Error{constructor(t){super(t[0].message);bt(this,"issues");this.name="SchemaError",this.issues=t}},wM=(i=>(i.uninitialized="uninitialized",i.pending="pending",i.fulfilled="fulfilled",i.rejected="rejected",i))(wM||{});function ET(i){return{status:i,isUninitialized:i==="uninitialized",isLoading:i==="pending",isSuccess:i==="fulfilled",isError:i==="rejected"}}var _T=fl;function SM(i,t){if(i===t||!(_T(i)&&_T(t)||Array.isArray(i)&&Array.isArray(t)))return t;const e=Object.keys(t),n=Object.keys(i);let a=e.length===n.length;const o=Array.isArray(t)?[]:{};for(const c of e)o[c]=SM(i[c],t[c]),a&&(a=i[c]===o[c]);return a?i:o}function bd(i){let t=0;for(const e in i)t++;return t}var CT=i=>[].concat(...i);function SN(i){return new RegExp("(^|:)//").test(i)}function AN(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function K0(i){return i!=null}function xN(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var EN=i=>i.replace(/\/$/,""),_N=i=>i.replace(/^\//,"");function CN(i,t){if(!i)return t;if(!t)return i;if(SN(t))return t;const e=i.endsWith("/")||!t.startsWith("?")?"/":"";return i=EN(i),t=_N(t),`${i}${e}${t}`}function TN(i,t,e){return i.has(t)?i.get(t):i.set(t,e).get(t)}var TT=(...i)=>fetch(...i),RN=i=>i.status>=200&&i.status<=299,MN=i=>/ion\/(vnd\.api\+)?json/.test(i.get("content-type")||"");function RT(i){if(!fl(i))return i;const t={...i};for(const[e,n]of Object.entries(t))n===void 0&&delete t[e];return t}function AM({baseUrl:i,prepareHeaders:t=y=>y,fetchFn:e=TT,paramsSerializer:n,isJsonContentType:a=MN,jsonContentType:o="application/json",jsonReplacer:c,timeout:u,responseHandler:d,validateStatus:p,...g}={}){return typeof fetch>"u"&&e===TT&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(b,v,S)=>{const{getState:A,extra:E,endpoint:x,forced:M,type:C}=v;let _,{url:D,headers:R=new Headers(g.headers),params:N=void 0,responseHandler:$=d??"json",validateStatus:j=p??RN,timeout:H=u,...F}=typeof b=="string"?{url:b}:b,G,Q=v.signal;H&&(G=new AbortController,v.signal.addEventListener("abort",G.abort),Q=G.signal);let X={...g,signal:Q,...F};R=new Headers(RT(R)),X.headers=await t(R,{getState:A,arg:b,extra:E,endpoint:x,forced:M,type:C,extraOptions:S})||R;const ut=mt=>typeof mt=="object"&&(fl(mt)||Array.isArray(mt)||typeof mt.toJSON=="function");if(!X.headers.has("content-type")&&ut(X.body)&&X.headers.set("content-type",o),ut(X.body)&&a(X.headers)&&(X.body=JSON.stringify(X.body,c)),N){const mt=~D.indexOf("?")?"&":"?",pt=n?n(N):new URLSearchParams(RT(N));D+=mt+pt}D=CN(i,D);const B=new Request(D,X);_={request:new Request(D,X)};let at,ct=!1,z=G&&setTimeout(()=>{ct=!0,G.abort()},H);try{at=await e(B)}catch(mt){return{error:{status:ct?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(mt)},meta:_}}finally{z&&clearTimeout(z),G==null||G.signal.removeEventListener("abort",G.abort)}const Z=at.clone();_.response=Z;let ot,lt="";try{let mt;if(await Promise.all([y(at,$).then(pt=>ot=pt,pt=>mt=pt),Z.text().then(pt=>lt=pt,()=>{})]),mt)throw mt}catch(mt){return{error:{status:"PARSING_ERROR",originalStatus:at.status,data:lt,error:String(mt)},meta:_}}return j(at,ot)?{data:ot,meta:_}:{error:{status:at.status,data:ot},meta:_}};async function y(b,v){if(typeof v=="function")return v(b);if(v==="content-type"&&(v=a(b.headers)?"json":"text"),v==="json"){const S=await b.text();return S.length?JSON.parse(S):null}return b.text()}}var MT=class{constructor(i,t=void 0){this.value=i,this.meta=t}},vx=es("__rtkq/focused"),xM=es("__rtkq/unfocused"),wx=es("__rtkq/online"),EM=es("__rtkq/offline");function Qb(i){return i.type==="query"}function DN(i){return i.type==="mutation"}function Wb(i){return i.type==="infinitequery"}function Z0(i){return Qb(i)||Wb(i)}function Sx(i,t,e,n,a,o){return ON(i)?i(t,e,n,a).filter(K0).map(AS).map(o):Array.isArray(i)?i.map(AS).map(o):[]}function ON(i){return typeof i=="function"}function AS(i){return typeof i=="string"?{type:i}:i}function kN(i,t){return i.catch(t)}var Op=Symbol("forceQueryFn"),xS=i=>typeof i[Op]=="function";function LN({serializeQueryArgs:i,queryThunk:t,infiniteQueryThunk:e,mutationThunk:n,api:a,context:o}){const c=new Map,u=new Map,{unsubscribeQueryResult:d,removeMutationResult:p,updateSubscriptionOptions:g}=a.internalActions;return{buildInitiateQuery:E,buildInitiateInfiniteQuery:x,buildInitiateMutation:M,getRunningQueryThunk:y,getRunningMutationThunk:b,getRunningQueriesThunk:v,getRunningMutationsThunk:S};function y(C,_){return D=>{var $;const R=o.endpointDefinitions[C],N=i({queryArgs:_,endpointDefinition:R,endpointName:C});return($=c.get(D))==null?void 0:$[N]}}function b(C,_){return D=>{var R;return(R=u.get(D))==null?void 0:R[_]}}function v(){return C=>Object.values(c.get(C)||{}).filter(K0)}function S(){return C=>Object.values(u.get(C)||{}).filter(K0)}function A(C,_){const D=(R,{subscribe:N=!0,forceRefetch:$,subscriptionOptions:j,[Op]:H,...F}={})=>(G,Q)=>{var yt;const X=i({queryArgs:R,endpointDefinition:_,endpointName:C});let ut;const B={...F,type:"query",subscribe:N,forceRefetch:$,subscriptionOptions:j,endpointName:C,originalArgs:R,queryCacheKey:X,[Op]:H};if(Qb(_))ut=t(B);else{const{direction:St,initialPageParam:Pt}=F;ut=e({...B,direction:St,initialPageParam:Pt})}const V=a.endpoints[C].select(R),at=G(ut),ct=V(Q()),{requestId:z,abort:Z}=at,ot=ct.requestId!==z,lt=(yt=c.get(G))==null?void 0:yt[X],mt=()=>V(Q()),pt=Object.assign(H?at.then(mt):ot&&!lt?Promise.resolve(ct):Promise.all([lt,at]).then(mt),{arg:R,requestId:z,subscriptionOptions:j,queryCacheKey:X,abort:Z,async unwrap(){const St=await pt;if(St.isError)throw St.error;return St.data},refetch:()=>G(D(R,{subscribe:!1,forceRefetch:!0})),unsubscribe(){N&&G(d({queryCacheKey:X,requestId:z}))},updateSubscriptionOptions(St){pt.subscriptionOptions=St,G(g({endpointName:C,requestId:z,queryCacheKey:X,options:St}))}});if(!lt&&!ot&&!H){const St=TN(c,G,{});St[X]=pt,pt.then(()=>{delete St[X],bd(St)||c.delete(G)})}return pt};return D}function E(C,_){return A(C,_)}function x(C,_){return A(C,_)}function M(C){return(_,{track:D=!0,fixedCacheKey:R}={})=>(N,$)=>{const j=n({type:"mutation",endpointName:C,originalArgs:_,track:D,fixedCacheKey:R}),H=N(j),{requestId:F,abort:G,unwrap:Q}=H,X=kN(H.unwrap().then(at=>({data:at})),at=>({error:at})),ut=()=>{N(p({requestId:F,fixedCacheKey:R}))},B=Object.assign(X,{arg:H.arg,requestId:F,abort:G,unwrap:Q,reset:ut}),V=u.get(N)||{};return u.set(N,V),V[F]=B,B.then(()=>{delete V[F],bd(V)||u.delete(N)}),R&&(V[R]=B,B.then(()=>{V[R]===B&&(delete V[R],bd(V)||u.delete(N))})),B}}}var _M=class extends wN{constructor(i,t,e,n){super(i),this.value=t,this.schemaName=e,this._bqMeta=n}};async function Gl(i,t,e,n){const a=await i["~standard"].validate(t);if(a.issues)throw new _M(a.issues,t,e,n);return a.value}function PN(i){return i}var qf=(i={})=>({...i,[Gb]:!0});function NN({reducerPath:i,baseQuery:t,context:{endpointDefinitions:e},serializeQueryArgs:n,api:a,assertTagType:o,selectors:c,onSchemaFailure:u,catchSchemaFailure:d,skipSchemaValidation:p}){const g=(F,G,Q,X)=>(ut,B)=>{const V=e[F],at=n({queryArgs:G,endpointDefinition:V,endpointName:F});if(ut(a.internalActions.queryResultPatched({queryCacheKey:at,patches:Q})),!X)return;const ct=a.endpoints[F].select(G)(B()),z=Sx(V.providesTags,ct.data,void 0,G,{},o);ut(a.internalActions.updateProvidedBy([{queryCacheKey:at,providedTags:z}]))};function y(F,G,Q=0){const X=[G,...F];return Q&&X.length>Q?X.slice(0,-1):X}function b(F,G,Q=0){const X=[...F,G];return Q&&X.length>Q?X.slice(1):X}const v=(F,G,Q,X=!0)=>(ut,B)=>{const at=a.endpoints[F].select(G)(B()),ct={patches:[],inversePatches:[],undo:()=>ut(a.util.patchQueryData(F,G,ct.inversePatches,X))};if(at.status==="uninitialized")return ct;let z;if("data"in at)if(rs(at.data)){const[Z,ot,lt]=dM(at.data,Q);ct.patches.push(...ot),ct.inversePatches.push(...lt),z=Z}else z=Q(at.data),ct.patches.push({op:"replace",path:[],value:z}),ct.inversePatches.push({op:"replace",path:[],value:at.data});return ct.patches.length===0||ut(a.util.patchQueryData(F,G,ct.patches,X)),ct},S=(F,G,Q)=>X=>X(a.endpoints[F].initiate(G,{subscribe:!1,forceRefetch:!0,[Op]:()=>({data:Q})})),A=(F,G)=>F.query&&F[G]?F[G]:PN,E=async(F,{signal:G,abort:Q,rejectWithValue:X,fulfillWithValue:ut,dispatch:B,getState:V,extra:at})=>{var ot,lt;const ct=e[F.endpointName],{metaSchema:z,skipSchemaValidation:Z=p}=ct;try{let mt=A(ct,"transformResponse");const pt={signal:G,abort:Q,dispatch:B,getState:V,extra:at,endpoint:F.endpointName,type:F.type,forced:F.type==="query"?x(F,V()):void 0,queryCacheKey:F.type==="query"?F.queryCacheKey:void 0},yt=F.type==="query"?F[Op]:void 0;let St;const Pt=async(Nt,Ut,Zt,ii)=>{if(Ut==null&&Nt.pages.length)return Promise.resolve({data:Nt});const Ie={queryArg:F.originalArgs,pageParam:Ut},cs=await me(Ie),gi=ii?y:b;return{data:{pages:gi(Nt.pages,cs.data,Zt),pageParams:gi(Nt.pageParams,Ut,Zt)},meta:cs.meta}};async function me(Nt){let Ut;const{extraOptions:Zt,argSchema:ii,rawResponseSchema:Ie,responseSchema:cs}=ct;if(ii&&!Z&&(Nt=await Gl(ii,Nt,"argSchema",{})),yt?Ut=yt():ct.query?Ut=await t(ct.query(Nt),pt,Zt):Ut=await ct.queryFn(Nt,pt,Zt,Us=>t(Us,pt,Zt)),typeof process<"u",Ut.error)throw new MT(Ut.error,Ut.meta);let{data:gi}=Ut;Ie&&!Z&&(gi=await Gl(Ie,Ut.data,"rawResponseSchema",Ut.meta));let Ye=await mt(gi,Ut.meta,Nt);return cs&&!Z&&(Ye=await Gl(cs,Ye,"responseSchema",Ut.meta)),{...Ut,data:Ye}}if(F.type==="query"&&"infiniteQueryOptions"in ct){const{infiniteQueryOptions:Nt}=ct,{maxPages:Ut=1/0}=Nt;let Zt;const ii={pages:[],pageParams:[]},Ie=(ot=c.selectQueryEntry(V(),F.queryCacheKey))==null?void 0:ot.data,gi=x(F,V())&&!F.direction||!Ie?ii:Ie;if("direction"in F&&F.direction&&gi.pages.length){const Ye=F.direction==="backward",Qa=(Ye?CM:ES)(Nt,gi);Zt=await Pt(gi,Qa,Ut,Ye)}else{const{initialPageParam:Ye=Nt.initialPageParam}=F,Us=(Ie==null?void 0:Ie.pageParams)??[],Qa=Us[0]??Ye,bu=Us.length;Zt=await Pt(gi,Qa,Ut),yt&&(Zt={data:Zt.data.pages[0]});for(let $s=1;$s<bu;$s++){const kr=ES(Nt,Zt.data);Zt=await Pt(Zt.data,kr,Ut)}}St=Zt}else St=await me(F.originalArgs);return z&&!Z&&St.meta&&(St.meta=await Gl(z,St.meta,"metaSchema",St.meta)),ut(St.data,qf({fulfilledTimeStamp:Date.now(),baseQueryMeta:St.meta}))}catch(mt){let pt=mt;if(pt instanceof MT){let yt=A(ct,"transformErrorResponse");const{rawErrorResponseSchema:St,errorResponseSchema:Pt}=ct;let{value:me,meta:Nt}=pt;try{St&&!Z&&(me=await Gl(St,me,"rawErrorResponseSchema",Nt)),z&&!Z&&(Nt=await Gl(z,Nt,"metaSchema",Nt));let Ut=await yt(me,Nt,F.originalArgs);return Pt&&!Z&&(Ut=await Gl(Pt,Ut,"errorResponseSchema",Nt)),X(Ut,qf({baseQueryMeta:Nt}))}catch(Ut){pt=Ut}}try{if(pt instanceof _M){const yt={endpoint:F.endpointName,arg:F.originalArgs,type:F.type,queryCacheKey:F.type==="query"?F.queryCacheKey:void 0};(lt=ct.onSchemaFailure)==null||lt.call(ct,pt,yt),u==null||u(pt,yt);const{catchSchemaFailure:St=d}=ct;if(St)return X(St(pt,yt),qf({baseQueryMeta:pt._bqMeta}))}}catch(yt){pt=yt}throw console.error(pt),pt}};function x(F,G){const Q=c.selectQueryEntry(G,F.queryCacheKey),X=c.selectConfig(G).refetchOnMountOrArgChange,ut=Q==null?void 0:Q.fulfilledTimeStamp,B=F.forceRefetch??(F.subscribe&&X);return B?B===!0||(Number(new Date)-Number(ut))/1e3>=B:!1}const M=()=>mT(`${i}/executeQuery`,E,{getPendingMeta({arg:G}){const Q=e[G.endpointName];return qf({startedTimeStamp:Date.now(),...Wb(Q)?{direction:G.direction}:{}})},condition(G,{getState:Q}){var Z;const X=Q(),ut=c.selectQueryEntry(X,G.queryCacheKey),B=ut==null?void 0:ut.fulfilledTimeStamp,V=G.originalArgs,at=ut==null?void 0:ut.originalArgs,ct=e[G.endpointName],z=G.direction;return xS(G)?!0:(ut==null?void 0:ut.status)==="pending"?!1:x(G,X)||Qb(ct)&&((Z=ct==null?void 0:ct.forceRefetch)!=null&&Z.call(ct,{currentArg:V,previousArg:at,endpointState:ut,state:X}))?!0:!(B&&!z)},dispatchConditionRejection:!0}),C=M(),_=M(),D=mT(`${i}/executeMutation`,E,{getPendingMeta(){return qf({startedTimeStamp:Date.now()})}}),R=F=>"force"in F,N=F=>"ifOlderThan"in F,$=(F,G,Q)=>(X,ut)=>{const B=R(Q)&&Q.force,V=N(Q)&&Q.ifOlderThan,at=(z=!0)=>{const Z={forceRefetch:z,isPrefetch:!0};return a.endpoints[F].initiate(G,Z)},ct=a.endpoints[F].select(G)(ut());if(B)X(at());else if(V){const z=ct==null?void 0:ct.fulfilledTimeStamp;if(!z){X(at());return}(Number(new Date)-Number(new Date(z)))/1e3>=V&&X(at())}else X(at(!1))};function j(F){return G=>{var Q,X;return((X=(Q=G==null?void 0:G.meta)==null?void 0:Q.arg)==null?void 0:X.endpointName)===F}}function H(F,G){return{matchPending:Ep(ux(F),j(G)),matchFulfilled:Ep(pl(F),j(G)),matchRejected:Ep(Mh(F),j(G))}}return{queryThunk:C,mutationThunk:D,infiniteQueryThunk:_,prefetch:$,updateQueryData:v,upsertQueryData:S,patchQueryData:g,buildMatchThunkActions:H}}function ES(i,{pages:t,pageParams:e}){const n=t.length-1;return i.getNextPageParam(t[n],t,e[n],e)}function CM(i,{pages:t,pageParams:e}){var n;return(n=i.getPreviousPageParam)==null?void 0:n.call(i,t[0],t,e[0],e)}function TM(i,t,e,n){return Sx(e[i.meta.arg.endpointName][t],pl(i)?i.payload:void 0,Yb(i)?i.payload:void 0,i.meta.arg.originalArgs,"baseQueryMeta"in i.meta?i.meta.baseQueryMeta:void 0,n)}function zy(i,t,e){const n=i[t];n&&e(n)}function kp(i){return("arg"in i?i.arg.fixedCacheKey:i.fixedCacheKey)??i.requestId}function DT(i,t,e){const n=i[kp(t)];n&&e(n)}var Fy={};function IN({reducerPath:i,queryThunk:t,mutationThunk:e,serializeQueryArgs:n,context:{endpointDefinitions:a,apiUid:o,extractRehydrationInfo:c,hasRehydrationInfo:u},assertTagType:d,config:p}){const g=es(`${i}/resetApiState`);function y(j,H,F,G){var Q;j[Q=H.queryCacheKey]??(j[Q]={status:"uninitialized",endpointName:H.endpointName}),zy(j,H.queryCacheKey,X=>{X.status="pending",X.requestId=F&&X.requestId?X.requestId:G.requestId,H.originalArgs!==void 0&&(X.originalArgs=H.originalArgs),X.startedTimeStamp=G.startedTimeStamp;const ut=a[G.arg.endpointName];Wb(ut)&&"direction"in H&&(X.direction=H.direction)})}function b(j,H,F,G){zy(j,H.arg.queryCacheKey,Q=>{if(Q.requestId!==H.requestId&&!G)return;const{merge:X}=a[H.arg.endpointName];if(Q.status="fulfilled",X)if(Q.data!==void 0){const{fulfilledTimeStamp:ut,arg:B,baseQueryMeta:V,requestId:at}=H;let ct=Ih(Q.data,z=>X(z,F,{arg:B.originalArgs,baseQueryMeta:V,fulfilledTimeStamp:ut,requestId:at}));Q.data=ct}else Q.data=F;else Q.data=a[H.arg.endpointName].structuralSharing??!0?SM(sr(Q.data)?Y5(Q.data):Q.data,F):F;delete Q.error,Q.fulfilledTimeStamp=H.fulfilledTimeStamp})}const v=Is({name:`${i}/queries`,initialState:Fy,reducers:{removeQueryResult:{reducer(j,{payload:{queryCacheKey:H}}){delete j[H]},prepare:Uf()},cacheEntriesUpserted:{reducer(j,H){for(const F of H.payload){const{queryDescription:G,value:Q}=F;y(j,G,!0,{arg:G,requestId:H.meta.requestId,startedTimeStamp:H.meta.timestamp}),b(j,{arg:G,requestId:H.meta.requestId,fulfilledTimeStamp:H.meta.timestamp,baseQueryMeta:{}},Q,!0)}},prepare:j=>({payload:j.map(G=>{const{endpointName:Q,arg:X,value:ut}=G,B=a[Q];return{queryDescription:{type:"query",endpointName:Q,originalArgs:G.arg,queryCacheKey:n({queryArgs:X,endpointDefinition:B,endpointName:Q})},value:ut}}),meta:{[Gb]:!0,requestId:dx(),timestamp:Date.now()}})},queryResultPatched:{reducer(j,{payload:{queryCacheKey:H,patches:F}}){zy(j,H,G=>{G.data=cT(G.data,F.concat())})},prepare:Uf()}},extraReducers(j){j.addCase(t.pending,(H,{meta:F,meta:{arg:G}})=>{const Q=xS(G);y(H,G,Q,F)}).addCase(t.fulfilled,(H,{meta:F,payload:G})=>{const Q=xS(F.arg);b(H,F,G,Q)}).addCase(t.rejected,(H,{meta:{condition:F,arg:G,requestId:Q},error:X,payload:ut})=>{zy(H,G.queryCacheKey,B=>{if(!F){if(B.requestId!==Q)return;B.status="rejected",B.error=ut??X}})}).addMatcher(u,(H,F)=>{const{queries:G}=c(F);for(const[Q,X]of Object.entries(G))((X==null?void 0:X.status)==="fulfilled"||(X==null?void 0:X.status)==="rejected")&&(H[Q]=X)})}}),S=Is({name:`${i}/mutations`,initialState:Fy,reducers:{removeMutationResult:{reducer(j,{payload:H}){const F=kp(H);F in j&&delete j[F]},prepare:Uf()}},extraReducers(j){j.addCase(e.pending,(H,{meta:F,meta:{requestId:G,arg:Q,startedTimeStamp:X}})=>{Q.track&&(H[kp(F)]={requestId:G,status:"pending",endpointName:Q.endpointName,startedTimeStamp:X})}).addCase(e.fulfilled,(H,{payload:F,meta:G})=>{G.arg.track&&DT(H,G,Q=>{Q.requestId===G.requestId&&(Q.status="fulfilled",Q.data=F,Q.fulfilledTimeStamp=G.fulfilledTimeStamp)})}).addCase(e.rejected,(H,{payload:F,error:G,meta:Q})=>{Q.arg.track&&DT(H,Q,X=>{X.requestId===Q.requestId&&(X.status="rejected",X.error=F??G)})}).addMatcher(u,(H,F)=>{const{mutations:G}=c(F);for(const[Q,X]of Object.entries(G))((X==null?void 0:X.status)==="fulfilled"||(X==null?void 0:X.status)==="rejected")&&Q!==(X==null?void 0:X.requestId)&&(H[Q]=X)})}}),A={tags:{},keys:{}},E=Is({name:`${i}/invalidation`,initialState:A,reducers:{updateProvidedBy:{reducer(j,H){var F,G,Q;for(const{queryCacheKey:X,providedTags:ut}of H.payload){x(j,X);for(const{type:B,id:V}of ut){const at=(G=(F=j.tags)[B]??(F[B]={}))[Q=V||"__internal_without_id"]??(G[Q]=[]);at.includes(X)||at.push(X)}j.keys[X]=ut}},prepare:Uf()}},extraReducers(j){j.addCase(v.actions.removeQueryResult,(H,{payload:{queryCacheKey:F}})=>{x(H,F)}).addMatcher(u,(H,F)=>{var Q,X,ut;const{provided:G}=c(F);for(const[B,V]of Object.entries(G))for(const[at,ct]of Object.entries(V)){const z=(X=(Q=H.tags)[B]??(Q[B]={}))[ut=at||"__internal_without_id"]??(X[ut]=[]);for(const Z of ct)z.includes(Z)||z.push(Z)}}).addMatcher(Va(pl(t),Yb(t)),(H,F)=>{M(H,[F])}).addMatcher(v.actions.cacheEntriesUpserted.match,(H,F)=>{const G=F.payload.map(({queryDescription:Q,value:X})=>({type:"UNKNOWN",payload:X,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:Q}}));M(H,G)})}});function x(j,H){var G;const F=j.keys[H]??[];for(const Q of F){const X=Q.type,ut=Q.id??"__internal_without_id",B=(G=j.tags[X])==null?void 0:G[ut];B&&(j.tags[X][ut]=B.filter(V=>V!==H))}delete j.keys[H]}function M(j,H){const F=H.map(G=>{const Q=TM(G,"providesTags",a,d),{queryCacheKey:X}=G.meta.arg;return{queryCacheKey:X,providedTags:Q}});E.caseReducers.updateProvidedBy(j,E.actions.updateProvidedBy(F))}const C=Is({name:`${i}/subscriptions`,initialState:Fy,reducers:{updateSubscriptionOptions(j,H){},unsubscribeQueryResult(j,H){},internal_getRTKQSubscriptions(){}}}),_=Is({name:`${i}/internalSubscriptions`,initialState:Fy,reducers:{subscriptionsUpdated:{reducer(j,H){return cT(j,H.payload)},prepare:Uf()}}}),D=Is({name:`${i}/config`,initialState:{online:xN(),focused:AN(),middlewareRegistered:!1,...p},reducers:{middlewareRegistered(j,{payload:H}){j.middlewareRegistered=j.middlewareRegistered==="conflict"||o!==H?"conflict":!0}},extraReducers:j=>{j.addCase(wx,H=>{H.online=!0}).addCase(EM,H=>{H.online=!1}).addCase(vx,H=>{H.focused=!0}).addCase(xM,H=>{H.focused=!1}).addMatcher(u,H=>({...H}))}}),R=rx({queries:v.reducer,mutations:S.reducer,provided:E.reducer,subscriptions:_.reducer,config:D.reducer}),N=(j,H)=>R(g.match(H)?void 0:j,H),$={...D.actions,...v.actions,...C.actions,..._.actions,...S.actions,...E.actions,resetApiState:g};return{reducer:N,actions:$}}var Fr=Symbol.for("RTKQ/skipToken"),RM={status:"uninitialized"},OT=Ih(RM,()=>{}),kT=Ih(RM,()=>{});function jN({serializeQueryArgs:i,reducerPath:t,createSelector:e}){const n=C=>OT,a=C=>kT;return{buildQuerySelector:b,buildInfiniteQuerySelector:v,buildMutationSelector:S,selectInvalidatedBy:A,selectCachedArgsForQuery:E,selectApiState:c,selectQueries:u,selectMutations:p,selectQueryEntry:d,selectConfig:g};function o(C){return{...C,...ET(C.status)}}function c(C){return C[t]}function u(C){var _;return(_=c(C))==null?void 0:_.queries}function d(C,_){var D;return(D=u(C))==null?void 0:D[_]}function p(C){var _;return(_=c(C))==null?void 0:_.mutations}function g(C){var _;return(_=c(C))==null?void 0:_.config}function y(C,_,D){return R=>{if(R===Fr)return e(n,D);const N=i({queryArgs:R,endpointDefinition:_,endpointName:C});return e(j=>d(j,N)??OT,D)}}function b(C,_){return y(C,_,o)}function v(C,_){const{infiniteQueryOptions:D}=_;function R(N){const $={...N,...ET(N.status)},{isLoading:j,isError:H,direction:F}=$,G=F==="forward",Q=F==="backward";return{...$,hasNextPage:x(D,$.data),hasPreviousPage:M(D,$.data),isFetchingNextPage:j&&G,isFetchingPreviousPage:j&&Q,isFetchNextPageError:H&&G,isFetchPreviousPageError:H&&Q}}return y(C,_,R)}function S(){return C=>{let _;return typeof C=="object"?_=kp(C)??Fr:_=C,e(_===Fr?a:N=>{var $,j;return((j=($=c(N))==null?void 0:$.mutations)==null?void 0:j[_])??kT},o)}}function A(C,_){const D=C[t],R=new Set;for(const N of _.filter(K0).map(AS)){const $=D.provided.tags[N.type];if(!$)continue;let j=(N.id!==void 0?$[N.id]:CT(Object.values($)))??[];for(const H of j)R.add(H)}return CT(Array.from(R.values()).map(N=>{const $=D.queries[N];return $?[{queryCacheKey:N,endpointName:$.endpointName,originalArgs:$.originalArgs}]:[]}))}function E(C,_){return Object.values(u(C)).filter(D=>(D==null?void 0:D.endpointName)===_&&D.status!=="uninitialized").map(D=>D.originalArgs)}function x(C,_){return _?ES(C,_)!=null:!1}function M(C,_){return!_||!C.getPreviousPageParam?!1:CM(C,_)!=null}}var td=WeakMap?new WeakMap:void 0,J0=({endpointName:i,queryArgs:t})=>{let e="";const n=td==null?void 0:td.get(t);if(typeof n=="string")e=n;else{const a=JSON.stringify(t,(o,c)=>(c=typeof c=="bigint"?{$bigint:c.toString()}:c,c=fl(c)?Object.keys(c).sort().reduce((u,d)=>(u[d]=c[d],u),{}):c,c));fl(t)&&(td==null||td.set(t,a)),e=a}return`${i}(${e})`};function MM(...i){return function(e){const n=Dp(p=>{var g;return(g=e.extractRehydrationInfo)==null?void 0:g.call(e,p,{reducerPath:e.reducerPath??"api"})}),a={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...e,extractRehydrationInfo:n,serializeQueryArgs(p){let g=J0;if("serializeQueryArgs"in p.endpointDefinition){const y=p.endpointDefinition.serializeQueryArgs;g=b=>{const v=y(b);return typeof v=="string"?v:J0({...b,queryArgs:v})}}else e.serializeQueryArgs&&(g=e.serializeQueryArgs);return g(p)},tagTypes:[...e.tagTypes||[]]},o={endpointDefinitions:{},batch(p){p()},apiUid:dx(),extractRehydrationInfo:n,hasRehydrationInfo:Dp(p=>n(p)!=null)},c={injectEndpoints:d,enhanceEndpoints({addTagTypes:p,endpoints:g}){if(p)for(const y of p)a.tagTypes.includes(y)||a.tagTypes.push(y);if(g)for(const[y,b]of Object.entries(g))typeof b=="function"?b(o.endpointDefinitions[y]):Object.assign(o.endpointDefinitions[y]||{},b);return c}},u=i.map(p=>p.init(c,a,o));function d(p){const g=p.endpoints({query:y=>({...y,type:"query"}),mutation:y=>({...y,type:"mutation"}),infiniteQuery:y=>({...y,type:"infinitequery"})});for(const[y,b]of Object.entries(g)){if(p.overrideExisting!==!0&&y in o.endpointDefinitions){if(p.overrideExisting==="throw")throw new Error(ns(39));continue}o.endpointDefinitions[y]=b;for(const v of u)v.injectEndpoint(y,b)}return c}return c.injectEndpoints({endpoints:e.endpoints})}}function oa(i,...t){return Object.assign(i,...t)}var BN=({api:i,queryThunk:t,internalState:e})=>{const n=`${i.reducerPath}/subscriptions`;let a=null,o=null;const{updateSubscriptionOptions:c,unsubscribeQueryResult:u}=i.internalActions,d=(v,S)=>{var E,x,M;if(c.match(S)){const{queryCacheKey:C,requestId:_,options:D}=S.payload;return(E=v==null?void 0:v[C])!=null&&E[_]&&(v[C][_]=D),!0}if(u.match(S)){const{queryCacheKey:C,requestId:_}=S.payload;return v[C]&&delete v[C][_],!0}if(i.internalActions.removeQueryResult.match(S))return delete v[S.payload.queryCacheKey],!0;if(t.pending.match(S)){const{meta:{arg:C,requestId:_}}=S,D=v[x=C.queryCacheKey]??(v[x]={});return D[`${_}_running`]={},C.subscribe&&(D[_]=C.subscriptionOptions??D[_]??{}),!0}let A=!1;if(t.fulfilled.match(S)||t.rejected.match(S)){const C=v[S.meta.arg.queryCacheKey]||{},_=`${S.meta.requestId}_running`;A||(A=!!C[_]),delete C[_]}if(t.rejected.match(S)){const{meta:{condition:C,arg:_,requestId:D}}=S;if(C&&_.subscribe){const R=v[M=_.queryCacheKey]??(v[M]={});R[D]=_.subscriptionOptions??R[D]??{},A=!0}}return A},p=()=>e.currentSubscriptions,b={getSubscriptions:p,getSubscriptionCount:v=>{const A=p()[v]??{};return bd(A)},isRequestSubscribed:(v,S)=>{var E;const A=p();return!!((E=A==null?void 0:A[v])!=null&&E[S])}};return(v,S)=>{if(a||(a=JSON.parse(JSON.stringify(e.currentSubscriptions))),i.util.resetApiState.match(v))return a=e.currentSubscriptions={},o=null,[!0,!1];if(i.internalActions.internal_getRTKQSubscriptions.match(v))return[!1,b];const A=d(e.currentSubscriptions,v);let E=!0;if(A){o||(o=setTimeout(()=>{const C=JSON.parse(JSON.stringify(e.currentSubscriptions)),[,_]=dM(a,()=>C);S.next(i.internalActions.subscriptionsUpdated(_)),a=C,o=null},500));const x=typeof v.type=="string"&&!!v.type.startsWith(n),M=t.rejected.match(v)&&v.meta.condition&&!!v.meta.arg.subscribe;E=!x&&!M}return[E,!1]}};function zN(i){for(const t in i)return!1;return!0}var FN=2147483647/1e3-1,HN=({reducerPath:i,api:t,queryThunk:e,context:n,internalState:a,selectors:{selectQueryEntry:o,selectConfig:c}})=>{const{removeQueryResult:u,unsubscribeQueryResult:d,cacheEntriesUpserted:p}=t.internalActions,g=Va(d.match,e.fulfilled,e.rejected,p.match);function y(E){const x=a.currentSubscriptions[E];return!!x&&!zN(x)}const b={},v=(E,x,M)=>{const C=x.getState(),_=c(C);if(g(E)){let D;if(p.match(E))D=E.payload.map(R=>R.queryDescription.queryCacheKey);else{const{queryCacheKey:R}=d.match(E)?E.payload:E.meta.arg;D=[R]}S(D,x,_)}if(t.util.resetApiState.match(E))for(const[D,R]of Object.entries(b))R&&clearTimeout(R),delete b[D];if(n.hasRehydrationInfo(E)){const{queries:D}=n.extractRehydrationInfo(E);S(Object.keys(D),x,_)}};function S(E,x,M){const C=x.getState();for(const _ of E){const D=o(C,_);A(_,D==null?void 0:D.endpointName,x,M)}}function A(E,x,M,C){const _=n.endpointDefinitions[x],D=(_==null?void 0:_.keepUnusedDataFor)??C.keepUnusedDataFor;if(D===1/0)return;const R=Math.max(0,Math.min(D,FN));if(!y(E)){const N=b[E];N&&clearTimeout(N),b[E]=setTimeout(()=>{y(E)||M.dispatch(u({queryCacheKey:E})),delete b[E]},R*1e3)}}return v},LT=new Error("Promise never resolved before cacheEntryRemoved."),UN=({api:i,reducerPath:t,context:e,queryThunk:n,mutationThunk:a,internalState:o,selectors:{selectQueryEntry:c,selectApiState:u}})=>{const d=vS(n),p=vS(a),g=pl(n,a),y={};function b(x,M,C){const _=y[x];_!=null&&_.valueResolved&&(_.valueResolved({data:M,meta:C}),delete _.valueResolved)}function v(x){const M=y[x];M&&(delete y[x],M.cacheEntryRemoved())}const S=(x,M,C)=>{const _=A(x);function D(R,N,$,j){const H=c(C,N),F=c(M.getState(),N);!H&&F&&E(R,j,N,M,$)}if(n.pending.match(x))D(x.meta.arg.endpointName,_,x.meta.requestId,x.meta.arg.originalArgs);else if(i.internalActions.cacheEntriesUpserted.match(x))for(const{queryDescription:R,value:N}of x.payload){const{endpointName:$,originalArgs:j,queryCacheKey:H}=R;D($,H,x.meta.requestId,j),b(H,N,{})}else if(a.pending.match(x))M.getState()[t].mutations[_]&&E(x.meta.arg.endpointName,x.meta.arg.originalArgs,_,M,x.meta.requestId);else if(g(x))b(_,x.payload,x.meta.baseQueryMeta);else if(i.internalActions.removeQueryResult.match(x)||i.internalActions.removeMutationResult.match(x))v(_);else if(i.util.resetApiState.match(x))for(const R of Object.keys(y))v(R)};function A(x){return d(x)?x.meta.arg.queryCacheKey:p(x)?x.meta.arg.fixedCacheKey??x.meta.requestId:i.internalActions.removeQueryResult.match(x)?x.payload.queryCacheKey:i.internalActions.removeMutationResult.match(x)?kp(x.payload):""}function E(x,M,C,_,D){const R=e.endpointDefinitions[x],N=R==null?void 0:R.onCacheEntryAdded;if(!N)return;const $={},j=new Promise(ut=>{$.cacheEntryRemoved=ut}),H=Promise.race([new Promise(ut=>{$.valueResolved=ut}),j.then(()=>{throw LT})]);H.catch(()=>{}),y[C]=$;const F=i.endpoints[x].select(Z0(R)?M:C),G=_.dispatch((ut,B,V)=>V),Q={..._,getCacheEntry:()=>F(_.getState()),requestId:D,extra:G,updateCachedData:Z0(R)?ut=>_.dispatch(i.util.updateQueryData(x,M,ut)):void 0,cacheDataLoaded:H,cacheEntryRemoved:j},X=N(M,Q);Promise.resolve(X).catch(ut=>{if(ut!==LT)throw ut})}return S},$N=({api:i,context:{apiUid:t},reducerPath:e})=>(n,a)=>{i.util.resetApiState.match(n)&&a.dispatch(i.internalActions.middlewareRegistered(t))},qN=({reducerPath:i,context:t,context:{endpointDefinitions:e},mutationThunk:n,queryThunk:a,api:o,assertTagType:c,refetchQuery:u,internalState:d})=>{const{removeQueryResult:p}=o.internalActions,g=Va(pl(n),Yb(n)),y=Va(pl(n,a),Mh(n,a));let b=[];const v=(E,x)=>{g(E)?A(TM(E,"invalidatesTags",e,c),x):y(E)?A([],x):o.util.invalidateTags.match(E)&&A(Sx(E.payload,void 0,void 0,void 0,void 0,c),x)};function S(E){var C;const{queries:x,mutations:M}=E;for(const _ of[x,M])for(const D in _)if(((C=_[D])==null?void 0:C.status)==="pending")return!0;return!1}function A(E,x){const M=x.getState(),C=M[i];if(b.push(...E),C.config.invalidationBehavior==="delayed"&&S(C))return;const _=b;if(b=[],_.length===0)return;const D=o.util.selectInvalidatedBy(M,_);t.batch(()=>{const R=Array.from(D.values());for(const{queryCacheKey:N}of R){const $=C.queries[N],j=d.currentSubscriptions[N]??{};$&&(bd(j)===0?x.dispatch(p({queryCacheKey:N})):$.status!=="uninitialized"&&x.dispatch(u($)))}})}return v},GN=({reducerPath:i,queryThunk:t,api:e,refetchQuery:n,internalState:a})=>{const o={},c=(b,v)=>{(e.internalActions.updateSubscriptionOptions.match(b)||e.internalActions.unsubscribeQueryResult.match(b))&&d(b.payload,v),(t.pending.match(b)||t.rejected.match(b)&&b.meta.condition)&&d(b.meta.arg,v),(t.fulfilled.match(b)||t.rejected.match(b)&&!b.meta.condition)&&u(b.meta.arg,v),e.util.resetApiState.match(b)&&g()};function u({queryCacheKey:b},v){const S=v.getState()[i],A=S.queries[b],E=a.currentSubscriptions[b];if(!A||A.status==="uninitialized")return;const{lowestPollingInterval:x,skipPollingIfUnfocused:M}=y(E);if(!Number.isFinite(x))return;const C=o[b];C!=null&&C.timeout&&(clearTimeout(C.timeout),C.timeout=void 0);const _=Date.now()+x;o[b]={nextPollTimestamp:_,pollingInterval:x,timeout:setTimeout(()=>{(S.config.focused||!M)&&v.dispatch(n(A)),u({queryCacheKey:b},v)},x)}}function d({queryCacheKey:b},v){const A=v.getState()[i].queries[b],E=a.currentSubscriptions[b];if(!A||A.status==="uninitialized")return;const{lowestPollingInterval:x}=y(E);if(!Number.isFinite(x)){p(b);return}const M=o[b],C=Date.now()+x;(!M||C<M.nextPollTimestamp)&&u({queryCacheKey:b},v)}function p(b){const v=o[b];v!=null&&v.timeout&&clearTimeout(v.timeout),delete o[b]}function g(){for(const b of Object.keys(o))p(b)}function y(b={}){let v=!1,S=Number.POSITIVE_INFINITY;for(let A in b)b[A].pollingInterval&&(S=Math.min(b[A].pollingInterval,S),v=b[A].skipPollingIfUnfocused||v);return{lowestPollingInterval:S,skipPollingIfUnfocused:v}}return c},VN=({api:i,context:t,queryThunk:e,mutationThunk:n})=>{const a=ux(e,n),o=Mh(e,n),c=pl(e,n),u={};return(p,g)=>{var y,b;if(a(p)){const{requestId:v,arg:{endpointName:S,originalArgs:A}}=p.meta,E=t.endpointDefinitions[S],x=E==null?void 0:E.onQueryStarted;if(x){const M={},C=new Promise((N,$)=>{M.resolve=N,M.reject=$});C.catch(()=>{}),u[v]=M;const _=i.endpoints[S].select(Z0(E)?A:v),D=g.dispatch((N,$,j)=>j),R={...g,getCacheEntry:()=>_(g.getState()),requestId:v,extra:D,updateCachedData:Z0(E)?N=>g.dispatch(i.util.updateQueryData(S,A,N)):void 0,queryFulfilled:C};x(A,R)}}else if(c(p)){const{requestId:v,baseQueryMeta:S}=p.meta;(y=u[v])==null||y.resolve({data:p.payload,meta:S}),delete u[v]}else if(o(p)){const{requestId:v,rejectedWithValue:S,baseQueryMeta:A}=p.meta;(b=u[v])==null||b.reject({error:p.payload??p.error,isUnhandledError:!S,meta:A}),delete u[v]}}},YN=({reducerPath:i,context:t,api:e,refetchQuery:n,internalState:a})=>{const{removeQueryResult:o}=e.internalActions,c=(d,p)=>{vx.match(d)&&u(p,"refetchOnFocus"),wx.match(d)&&u(p,"refetchOnReconnect")};function u(d,p){const g=d.getState()[i],y=g.queries,b=a.currentSubscriptions;t.batch(()=>{for(const v of Object.keys(b)){const S=y[v],A=b[v];if(!A||!S)continue;(Object.values(A).some(x=>x[p]===!0)||Object.values(A).every(x=>x[p]===void 0)&&g.config[p])&&(bd(A)===0?d.dispatch(o({queryCacheKey:v})):S.status!=="uninitialized"&&d.dispatch(n(S)))}})}return c};function XN(i){const{reducerPath:t,queryThunk:e,api:n,context:a}=i,{apiUid:o}=a,c={invalidateTags:es(`${t}/invalidateTags`)},u=y=>y.type.startsWith(`${t}/`),d=[$N,HN,qN,GN,UN,VN];return{middleware:y=>{let b=!1;const S={...i,internalState:{currentSubscriptions:{}},refetchQuery:g,isThisApiSliceAction:u},A=d.map(M=>M(S)),E=BN(S),x=YN(S);return M=>C=>{if(!sx(C))return M(C);b||(b=!0,y.dispatch(n.internalActions.middlewareRegistered(o)));const _={...y,next:M},D=y.getState(),[R,N]=E(C,_,D);let $;if(R?$=M(C):$=N,y.getState()[t]&&(x(C,_,D),u(C)||a.hasRehydrationInfo(C)))for(const j of A)j(C,_,D);return $}},actions:c};function g(y){return i.api.endpoints[y.endpointName].initiate(y.originalArgs,{subscribe:!1,forceRefetch:!0})}}var PT=Symbol(),DM=({createSelector:i=jh}={})=>({name:PT,init(t,{baseQuery:e,tagTypes:n,reducerPath:a,serializeQueryArgs:o,keepUnusedDataFor:c,refetchOnMountOrArgChange:u,refetchOnFocus:d,refetchOnReconnect:p,invalidationBehavior:g,onSchemaFailure:y,catchSchemaFailure:b,skipSchemaValidation:v},S){nP();const A=pt=>pt;Object.assign(t,{reducerPath:a,endpoints:{},internalActions:{onOnline:wx,onOffline:EM,onFocus:vx,onFocusLost:xM},util:{}});const E=jN({serializeQueryArgs:o,reducerPath:a,createSelector:i}),{selectInvalidatedBy:x,selectCachedArgsForQuery:M,buildQuerySelector:C,buildInfiniteQuerySelector:_,buildMutationSelector:D}=E;oa(t.util,{selectInvalidatedBy:x,selectCachedArgsForQuery:M});const{queryThunk:R,infiniteQueryThunk:N,mutationThunk:$,patchQueryData:j,updateQueryData:H,upsertQueryData:F,prefetch:G,buildMatchThunkActions:Q}=NN({baseQuery:e,reducerPath:a,context:S,api:t,serializeQueryArgs:o,assertTagType:A,selectors:E,onSchemaFailure:y,catchSchemaFailure:b,skipSchemaValidation:v}),{reducer:X,actions:ut}=IN({context:S,queryThunk:R,mutationThunk:$,serializeQueryArgs:o,reducerPath:a,assertTagType:A,config:{refetchOnFocus:d,refetchOnReconnect:p,refetchOnMountOrArgChange:u,keepUnusedDataFor:c,reducerPath:a,invalidationBehavior:g}});oa(t.util,{patchQueryData:j,updateQueryData:H,upsertQueryData:F,prefetch:G,resetApiState:ut.resetApiState,upsertQueryEntries:ut.cacheEntriesUpserted}),oa(t.internalActions,ut);const{middleware:B,actions:V}=XN({reducerPath:a,context:S,queryThunk:R,mutationThunk:$,infiniteQueryThunk:N,api:t,assertTagType:A,selectors:E});oa(t.util,V),oa(t,{reducer:X,middleware:B});const{buildInitiateQuery:at,buildInitiateInfiniteQuery:ct,buildInitiateMutation:z,getRunningMutationThunk:Z,getRunningMutationsThunk:ot,getRunningQueriesThunk:lt,getRunningQueryThunk:mt}=LN({queryThunk:R,mutationThunk:$,infiniteQueryThunk:N,api:t,serializeQueryArgs:o,context:S});return oa(t.util,{getRunningMutationThunk:Z,getRunningMutationsThunk:ot,getRunningQueryThunk:mt,getRunningQueriesThunk:lt}),{name:PT,injectEndpoint(pt,yt){var me;const Pt=(me=t.endpoints)[pt]??(me[pt]={});Qb(yt)&&oa(Pt,{name:pt,select:C(pt,yt),initiate:at(pt,yt)},Q(R,pt)),DN(yt)&&oa(Pt,{name:pt,select:D(),initiate:z(pt)},Q($,pt)),Wb(yt)&&oa(Pt,{name:pt,select:_(pt,yt),initiate:ct(pt,yt)},Q(R,pt))}}}});DM();function Hy(i){return i.replace(i[0],i[0].toUpperCase())}function QN(i){return i.type==="query"}function WN(i){return i.type==="mutation"}function OM(i){return i.type==="infinitequery"}function Gf(i,...t){return Object.assign(i,...t)}var Iw=Symbol();function jw(i,t,e,n){const a=U.useMemo(()=>({queryArgs:i,serialized:typeof i=="object"?t({queryArgs:i,endpointDefinition:e,endpointName:n}):i}),[i,t,e,n]),o=U.useRef(a);return U.useEffect(()=>{o.current.serialized!==a.serialized&&(o.current=a)},[a]),o.current.serialized===a.serialized?o.current.queryArgs:i}function Uy(i){const t=U.useRef(i);return U.useEffect(()=>{Ap(t.current,i)||(t.current=i)},[i]),Ap(t.current,i)?t.current:i}var KN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZN=KN(),JN=()=>typeof navigator<"u"&&navigator.product==="ReactNative",t4=JN(),e4=()=>ZN||t4?U.useLayoutEffect:U.useEffect,n4=e4(),NT=i=>i.isUninitialized?{...i,isUninitialized:!1,isFetching:!0,isLoading:i.data===void 0,status:wM.pending}:i;function Bw(i,...t){const e={};return t.forEach(n=>{e[n]=i[n]}),e}var zw=["data","status","isLoading","isSuccess","isError","error"];function i4({api:i,moduleOptions:{batch:t,hooks:{useDispatch:e,useSelector:n,useStore:a},unstable__sideEffectsInRender:o,createSelector:c},serializeQueryArgs:u,context:d}){const p=o?_=>_():U.useEffect;return{buildQueryHooks:x,buildInfiniteQueryHooks:M,buildMutationHook:C,usePrefetch:b};function g(_,D,R){if(D!=null&&D.endpointName&&_.isUninitialized){const{endpointName:G}=D,Q=d.endpointDefinitions[G];R!==Fr&&u({queryArgs:D.originalArgs,endpointDefinition:Q,endpointName:G})===u({queryArgs:R,endpointDefinition:Q,endpointName:G})&&(D=void 0)}let N=_.isSuccess?_.data:D==null?void 0:D.data;N===void 0&&(N=_.data);const $=N!==void 0,j=_.isLoading,H=(!D||D.isLoading||D.isUninitialized)&&!$&&j,F=_.isSuccess||$&&(j&&!(D!=null&&D.isError)||_.isUninitialized);return{..._,data:N,currentData:_.data,isFetching:j,isLoading:H,isSuccess:F}}function y(_,D,R){if(D!=null&&D.endpointName&&_.isUninitialized){const{endpointName:G}=D,Q=d.endpointDefinitions[G];R!==Fr&&u({queryArgs:D.originalArgs,endpointDefinition:Q,endpointName:G})===u({queryArgs:R,endpointDefinition:Q,endpointName:G})&&(D=void 0)}let N=_.isSuccess?_.data:D==null?void 0:D.data;N===void 0&&(N=_.data);const $=N!==void 0,j=_.isLoading,H=(!D||D.isLoading||D.isUninitialized)&&!$&&j,F=_.isSuccess||j&&$;return{..._,data:N,currentData:_.data,isFetching:j,isLoading:H,isSuccess:F}}function b(_,D){const R=e(),N=Uy(D);return U.useCallback(($,j)=>R(i.util.prefetch(_,$,{...N,...j})),[_,R,N])}function v(_,D,{refetchOnReconnect:R,refetchOnFocus:N,refetchOnMountOrArgChange:$,skip:j=!1,pollingInterval:H=0,skipPollingIfUnfocused:F=!1,...G}={}){const{initiate:Q}=i.endpoints[_],X=e(),ut=U.useRef(void 0);if(!ut.current){const pt=X(i.internalActions.internal_getRTKQSubscriptions());ut.current=pt}const B=jw(j?Fr:D,J0,d.endpointDefinitions[_],_),V=Uy({refetchOnReconnect:R,refetchOnFocus:N,pollingInterval:H,skipPollingIfUnfocused:F}),at=G.initialPageParam,ct=Uy(at),z=U.useRef(void 0);let{queryCacheKey:Z,requestId:ot}=z.current||{},lt=!1;Z&&ot&&(lt=ut.current.isRequestSubscribed(Z,ot));const mt=!lt&&z.current!==void 0;return p(()=>{mt&&(z.current=void 0)},[mt]),p(()=>{var St;const pt=z.current;if(B===Fr){pt==null||pt.unsubscribe(),z.current=void 0;return}const yt=(St=z.current)==null?void 0:St.subscriptionOptions;if(!pt||pt.arg!==B){pt==null||pt.unsubscribe();const Pt=X(Q(B,{subscriptionOptions:V,forceRefetch:$,...OM(d.endpointDefinitions[_])?{initialPageParam:ct}:{}}));z.current=Pt}else V!==yt&&pt.updateSubscriptionOptions(V)},[X,Q,$,B,V,mt,ct,_]),[z,X,Q,V]}function S(_,D){return(N,{skip:$=!1,selectFromResult:j}={})=>{const{select:H}=i.endpoints[_],F=jw($?Fr:N,u,d.endpointDefinitions[_],_),G=U.useRef(void 0),Q=U.useMemo(()=>c([H(F),(at,ct)=>ct,at=>F],D,{memoizeOptions:{resultEqualityCheck:Ap}}),[H,F]),X=U.useMemo(()=>j?c([Q],j,{devModeChecks:{identityFunctionCheck:"never"}}):Q,[Q,j]),ut=n(at=>X(at,G.current),Ap),B=a(),V=Q(B.getState(),G.current);return n4(()=>{G.current=V},[V]),ut}}function A(_){U.useEffect(()=>()=>{var D,R;(R=(D=_.current)==null?void 0:D.unsubscribe)==null||R.call(D),_.current=void 0},[_])}function E(_){if(!_.current)throw new Error(ns(38));return _.current.refetch()}function x(_){const D=($,j={})=>{const[H]=v(_,$,j);return A(H),U.useMemo(()=>({refetch:()=>E(H)}),[H])},R=({refetchOnReconnect:$,refetchOnFocus:j,pollingInterval:H=0,skipPollingIfUnfocused:F=!1}={})=>{const{initiate:G}=i.endpoints[_],Q=e(),[X,ut]=U.useState(Iw),B=U.useRef(void 0),V=Uy({refetchOnReconnect:$,refetchOnFocus:j,pollingInterval:H,skipPollingIfUnfocused:F});p(()=>{var ot,lt;const Z=(ot=B.current)==null?void 0:ot.subscriptionOptions;V!==Z&&((lt=B.current)==null||lt.updateSubscriptionOptions(V))},[V]);const at=U.useRef(V);p(()=>{at.current=V},[V]);const ct=U.useCallback(function(Z,ot=!1){let lt;return t(()=>{var mt;(mt=B.current)==null||mt.unsubscribe(),B.current=lt=Q(G(Z,{subscriptionOptions:at.current,forceRefetch:!ot})),ut(Z)}),lt},[Q,G]),z=U.useCallback(()=>{var Z,ot;(Z=B.current)!=null&&Z.queryCacheKey&&Q(i.internalActions.removeQueryResult({queryCacheKey:(ot=B.current)==null?void 0:ot.queryCacheKey}))},[Q]);return U.useEffect(()=>()=>{var Z;(Z=B==null?void 0:B.current)==null||Z.unsubscribe()},[]),U.useEffect(()=>{X!==Iw&&!B.current&&ct(X,!0)},[X,ct]),U.useMemo(()=>[ct,X,{reset:z}],[ct,X,z])},N=S(_,g);return{useQueryState:N,useQuerySubscription:D,useLazyQuerySubscription:R,useLazyQuery($){const[j,H,{reset:F}]=R($),G=N(H,{...$,skip:H===Iw}),Q=U.useMemo(()=>({lastArg:H}),[H]);return U.useMemo(()=>[j,{...G,reset:F},Q],[j,G,F,Q])},useQuery($,j){const H=D($,j),F=N($,{selectFromResult:$===Fr||j!=null&&j.skip?void 0:NT,...j}),G=Bw(F,...zw);return U.useDebugValue(G),U.useMemo(()=>({...F,...H}),[F,H])}}}function M(_){const D=(N,$={})=>{const[j,H,F,G]=v(_,N,$),Q=U.useRef(G);p(()=>{Q.current=G},[G]);const X=U.useCallback(function(V,at){let ct;return t(()=>{var z;(z=j.current)==null||z.unsubscribe(),j.current=ct=H(F(V,{subscriptionOptions:Q.current,direction:at}))}),ct},[j,H,F]);A(j);const ut=jw($.skip?Fr:N,J0,d.endpointDefinitions[_],_),B=U.useCallback(()=>E(j),[j]);return U.useMemo(()=>({trigger:X,refetch:B,fetchNextPage:()=>X(ut,"forward"),fetchPreviousPage:()=>X(ut,"backward")}),[B,X,ut])},R=S(_,y);return{useInfiniteQueryState:R,useInfiniteQuerySubscription:D,useInfiniteQuery(N,$){const{refetch:j,fetchNextPage:H,fetchPreviousPage:F}=D(N,$),G=R(N,{selectFromResult:N===Fr||$!=null&&$.skip?void 0:NT,...$}),Q=Bw(G,...zw,"hasNextPage","hasPreviousPage");return U.useDebugValue(Q),U.useMemo(()=>({...G,fetchNextPage:H,fetchPreviousPage:F,refetch:j}),[G,H,F,j])}}}function C(_){return({selectFromResult:D,fixedCacheKey:R}={})=>{const{select:N,initiate:$}=i.endpoints[_],j=e(),[H,F]=U.useState();U.useEffect(()=>()=>{H!=null&&H.arg.fixedCacheKey||H==null||H.reset()},[H]);const G=U.useCallback(function(Z){const ot=j($(Z,{fixedCacheKey:R}));return F(ot),ot},[j,$,R]),{requestId:Q}=H||{},X=U.useMemo(()=>N({fixedCacheKey:R,requestId:H==null?void 0:H.requestId}),[R,H,N]),ut=U.useMemo(()=>D?c([X],D):X,[D,X]),B=n(ut,Ap),V=R==null?H==null?void 0:H.arg.originalArgs:void 0,at=U.useCallback(()=>{t(()=>{H&&F(void 0),R&&j(i.internalActions.removeMutationResult({requestId:Q,fixedCacheKey:R}))})},[j,R,H,Q]),ct=Bw(B,...zw,"endpointName");U.useDebugValue(ct);const z=U.useMemo(()=>({...B,originalArgs:V,reset:at}),[B,V,at]);return U.useMemo(()=>[G,z],[G,z])}}}var r4=Symbol(),s4=({batch:i=I5,hooks:t={useDispatch:or,useSelector:Vt,useStore:rM},createSelector:e=jh,unstable__sideEffectsInRender:n=!1,...a}={})=>({name:r4,init(o,{serializeQueryArgs:c},u){const d=o,{buildQueryHooks:p,buildInfiniteQueryHooks:g,buildMutationHook:y,usePrefetch:b}=i4({api:o,moduleOptions:{batch:i,hooks:t,unstable__sideEffectsInRender:n,createSelector:e},serializeQueryArgs:c,context:u});return Gf(d,{usePrefetch:b}),Gf(u,{batch:i}),{injectEndpoint(v,S){if(QN(S)){const{useQuery:A,useLazyQuery:E,useLazyQuerySubscription:x,useQueryState:M,useQuerySubscription:C}=p(v);Gf(d.endpoints[v],{useQuery:A,useLazyQuery:E,useLazyQuerySubscription:x,useQueryState:M,useQuerySubscription:C}),o[`use${Hy(v)}Query`]=A,o[`useLazy${Hy(v)}Query`]=E}if(WN(S)){const A=y(v);Gf(d.endpoints[v],{useMutation:A}),o[`use${Hy(v)}Mutation`]=A}else if(OM(S)){const{useInfiniteQuery:A,useInfiniteQuerySubscription:E,useInfiniteQueryState:x}=g(v);Gf(d.endpoints[v],{useInfiniteQuery:A,useInfiniteQuerySubscription:E,useInfiniteQueryState:x}),o[`use${Hy(v)}InfiniteQuery`]=A}}}}}),kM=MM(DM(),s4());const tb=QP({selectId:i=>i._id}),uu=kM({reducerPath:"booksApi",baseQuery:AM({baseUrl:"https://reader-pane-backend.onrender.com/api/books",credentials:"include"}),tagTypes:["Books","Progress","Live"],endpoints:i=>({getBooksStatic:i.query({query:()=>"/static",keepUnusedDataFor:86400,transformResponse:t=>tb.setAll(tb.getInitialState(),t)}),getBookLive:i.query({query:t=>`/${t}/live`,providesTags:(t,e,n)=>[{type:"Live",id:n}]}),updateBookLive:i.mutation({query:({id:t,changes:e})=>({url:`/${t}/live`,method:"PATCH",body:e}),invalidatesTags:(t,e,{id:n})=>[{type:"Live",id:n}]}),getBooks:i.query({query:()=>"/",providesTags:t=>t?[{type:"Books",id:"LIST"},...t.map(e=>({type:"Books",id:e._id}))]:[{type:"Books",id:"LIST"}]}),getBook:i.query({query:t=>`/${t}`,providesTags:(t,e,n)=>[{type:"Books",id:n}]}),getBookCache:i.query({query:t=>`/${t}/cache`,providesTags:(t,e,n)=>[{type:"Books",id:n}]}),getBookFileUrl:i.query({query:t=>`/${t}/file-url`,keepUnusedDataFor:600,refetchOnMountOrArgChange:!1,transformResponse:t=>t.fileUrl}),archiveBook:i.mutation({query:t=>({url:`/${t}/archive`,method:"PATCH"}),invalidatesTags:(t,e,n)=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),restoreBook:i.mutation({query:t=>({url:`/${t}/restore`,method:"PATCH"}),invalidatesTags:(t,e,n)=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),favoriteBook:i.mutation({query:t=>({url:`/${t}/favorite`,method:"PATCH"}),invalidatesTags:(t,e,n)=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),unfavoriteBook:i.mutation({query:t=>({url:`/${t}/unfavorite`,method:"PATCH"}),invalidatesTags:(t,e,n)=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),deleteBook:i.mutation({query:t=>({url:`/${t}`,method:"DELETE"}),invalidatesTags:(t,e,n)=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),updateBook:i.mutation({query:({id:t,changes:e})=>({url:`/${t}`,method:"PATCH",body:e}),invalidatesTags:(t,e,{id:n})=>[{type:"Books",id:n},{type:"Books",id:"LIST"},{type:"Progress",id:n}]}),addNote:i.mutation({query:({id:t,note:e})=>({url:`/${t}/notes`,method:"PATCH",body:e}),invalidatesTags:(t,e,{id:n})=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),deleteNote:i.mutation({query:({id:t,index:e})=>({url:`/${t}/notes/${e}`,method:"DELETE"}),invalidatesTags:(t,e,{id:n})=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),addBookmark:i.mutation({query:({id:t,bookmark:e})=>({url:`/${t}/bookmarks`,method:"PATCH",body:e}),invalidatesTags:(t,e,{id:n})=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),deleteBookmark:i.mutation({query:({id:t,index:e})=>({url:`/${t}/bookmarks/${e}`,method:"DELETE"}),invalidatesTags:(t,e,{id:n})=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]}),uploadBook:i.mutation({query:t=>({url:"/upload",method:"POST",body:t}),invalidatesTags:[{type:"Books",id:"LIST"}]}),getProgress:i.query({query:t=>`/${t}/progress`,providesTags:(t,e,n)=>[{type:"Progress",id:n}]}),updateProgress:i.mutation({query:({id:t,currentPage:e})=>({url:`/${t}/progress`,method:"PATCH",body:{currentPage:e}}),invalidatesTags:(t,e,{id:n})=>[{type:"Progress",id:n}]}),updateProgressAuto:i.mutation({query:({id:t,currentPage:e})=>({url:`/${t}/progress/auto`,method:"PATCH",body:{changes:{stats:{currentPage:e}}}}),async onQueryStarted({id:t,currentPage:e},{dispatch:n,queryFulfilled:a}){const o=n(uu.util.updateQueryData("getBooks",void 0,c=>{const u=c.find(d=>d._id===t);u&&(u.stats.currentPage=e,u.stats.maxVisitedPage=Math.max(e,u.stats.maxVisitedPage||1))}));try{await a}catch{o.undo()}}}),updateLastOpened:i.mutation({query:t=>({url:`/${t}/last-opened`,method:"PATCH"}),invalidatesTags:(t,e,n)=>[{type:"Books",id:n},{type:"Books",id:"LIST"}]})})}),{useGetBooksStaticQuery:DU,useGetBooksQuery:Ax,useGetBookQuery:a4,useGetBookFileUrlQuery:o4,useArchiveBookMutation:l4,useRestoreBookMutation:c4,useFavoriteBookMutation:u4,useUnfavoriteBookMutation:d4,useDeleteBookMutation:Kb,useUpdateBookMutation:Bh,useUploadBookMutation:LM,useGetProgressQuery:h4,useUpdateLastOpenedMutation:OU}=uu,eb=kM({reducerPath:"externalApi",baseQuery:AM({baseUrl:"https://reader-pane-backend.onrender.com/api/books"}),endpoints:i=>({getWolneLektury:i.query({query:()=>"/wolneLektury"})})}),{useGetWolneLekturyQuery:f4}=eb;function Vf(i,t){i.byId||(i.byId={}),i.byId[t]||(i.byId[t]={meta:{},stats:{},flags:{},preload:{}})}const p4={byId:{},activeBookId:null,previewBookId:null,isManageMode:!1,selectedIds:[],libraryViewMode:"grid",sortMode:"title-asc",progressMode:"current",lastOpenedBookId:null},PM=Is({name:"book",initialState:p4,reducers:{setActiveBookId(i,t){i.activeBookId=t.payload},clearActiveBook(i){i.activeBookId=null},updateBookLocally(i,t){const{id:e,changes:n}=t.payload;!e||!n||(Vf(i,e),n.meta&&(i.byId[e].meta={...i.byId[e].meta,...n.meta}),n.stats&&(i.byId[e].stats={...i.byId[e].stats,...n.stats}),n.flags&&(i.byId[e].flags={...i.byId[e].flags,...n.flags}),n.preload&&(i.byId[e].preload={...i.byId[e].preload,...n.preload}))},setBookData(i,t){const{id:e,data:n}=t.payload;e&&(Vf(i,e),i.byId[e]={...i.byId[e],...n})},setBookStats(i,t){const{id:e,stats:n}=t.payload;e&&(Vf(i,e),i.byId[e].stats={...i.byId[e].stats,...n})},setBookFlags(i,t){const{id:e,flags:n}=t.payload;e&&(Vf(i,e),i.byId[e].flags={...i.byId[e].flags,...n})},setBookPreload(i,t){const{id:e,preload:n}=t.payload;e&&(Vf(i,e),i.byId[e].preload={...i.byId[e].preload,...n})},setManageMode(i,t){i.isManageMode=t.payload,t.payload||(i.selectedIds=[])},toggleManageMode(i){i.isManageMode=!i.isManageMode,i.isManageMode||(i.selectedIds=[])},toggleSelect(i,t){const e=t.payload;i.selectedIds=i.selectedIds.includes(e)?i.selectedIds.filter(n=>n!==e):[...i.selectedIds,e]},clearSelected(i){i.selectedIds=[]},setLibraryViewMode(i,t){i.libraryViewMode=t.payload},setSortMode(i,t){i.sortMode=t.payload},setProgressMode(i,t){i.progressMode=t.payload},setPreviewBookId(i,t){i.previewBookId=t.payload},clearPreviewBook(i){i.previewBookId=null},setLastOpenedBookId(i,t){i.lastOpenedBookId=t.payload}}}),{setActiveBookId:NM,clearActiveBook:kU,updateBookLocally:nb,setBookData:LU,setBookStats:IT,setBookFlags:PU,setBookPreload:NU,setManageMode:g4,toggleManageMode:m4,toggleSelect:IM,clearSelected:jM,setLibraryViewMode:Fw,setSortMode:y4,setProgressMode:IU,setPreviewBookId:b4,clearPreviewBook:jU,setLastOpenedBookId:BU}=PM.actions,v4=PM.reducer,w4={scaleIndex:2,currentScale:1,fitScaleFactor:1,fullPageFitScale:null,pageViewMode:"single",pageTurnRate:null},BM=Is({name:"reader",initialState:w4,reducers:{setScaleIndex(i,t){i.scaleIndex=t.payload},setScale(i,t){i.currentScale=t.payload},setFitScaleFactor(i,t){i.fitScaleFactor=t.payload},setFullPageFitScale(i,t){i.fullPageFitScale=t.payload},setPageViewMode(i,t){i.pageViewMode=t.payload},setPageTurnRate(i,t){i.pageTurnRate=t.payload}}}),{setScaleIndex:zU,setScale:Hw,setFitScaleFactor:FU,setFullPageFitScale:HU,setPageViewMode:zM,setPageTurnRate:UU}=BM.actions,S4=BM.reducer,jT=3,A4={},FM=Is({name:"pdfCache",initialState:A4,reducers:{setRenderedPages(i,{payload:{bookId:t,scale:e=1,pages:n}}){i[t]||(i[t]={}),i[t][e]||(i[t][e]={pages:{},ranges:[]}),Object.assign(i[t][e].pages,n)},setRenderedRanges(i,{payload:{bookId:t,scale:e=1,range:n}}){i[t]||(i[t]={}),i[t][e]||(i[t][e]={pages:{},ranges:[]});const a=i[t][e].ranges;(Array.isArray(n[0])?n:[n]).forEach(([c,u])=>{a.some(([d,p])=>d===c&&p===u)||a.push([c,u])}),a.length>jT&&a.splice(0,a.length-jT)},clearCache(i,{payload:t}){delete i[t]}}}),{setRenderedPages:x4,setRenderedRanges:E4,clearCache:$U}=FM.actions,_4=FM.reducer,C4={theme:"light",sidebarOpen:!1,activeItem:null},HM=Is({name:"mainUi",initialState:C4,reducers:{toggleTheme(i){i.theme=i.theme==="light"?"dark":"light"},toggleSidebar(i){i.sidebarOpen=!i.sidebarOpen},setSidebar(i,t){i.sidebarOpen=t.payload},setActiveItem(i,t){i.activeItem=t.payload},clearActiveItem(i){i.activeItem=null}}}),{toggleTheme:T4,toggleSidebar:qU,setSidebar:GU,setActiveItem:R4,clearActiveItem:BT}=HM.actions,M4=HM.reducer,UM=uu.endpoints.getBooksStatic.select();jh(UM,i=>i.data?tb.getSelectors().selectAll(i.data):[]);const xx=i=>jh(UM,t=>t.data?tb.getSelectors().selectById(t.data,i):void 0),Ex=i=>i.book.activeBookId,pu=i=>i.book.isManageMode,VU=i=>i.book.previewBookId,YU=i=>!!i.book.previewBookId,_x=i=>i.book.selectedIds,zh=i=>i.book.libraryViewMode,$M=i=>i.book.sortMode,qM=i=>i.book.progressMode,Cx=(i,t)=>{var e,n,a;return((a=(n=(e=i.book.byId)==null?void 0:e[t])==null?void 0:n.stats)==null?void 0:a.currentPage)??1},D4=(i,t)=>{var e,n,a;return((a=(n=(e=i.book.byId)==null?void 0:e[t])==null?void 0:n.stats)==null?void 0:a.maxVisitedPage)??1},O4=i=>i.reader.currentScale,GM=i=>i.reader.pageViewMode;jh(qM,(i,t)=>Cx(i,t),(i,t)=>D4(i,t),(i,t,e)=>i==="max"?e:t);const k4={key:"book",storage:bx,whitelist:["byId","activeBookId","previewBookId","libraryViewMode","sortMode","selectedIds","progressMode"]},L4={key:"reader",storage:bx,whitelist:["scaleIndex","pageViewMode"]},P4=rx({ui:M4,book:wS(k4,v4),reader:wS(L4,S4),pdfCache:_4,[uu.reducerPath]:uu.reducer,[eb.reducerPath]:eb.reducer}),N4={key:"root",storage:bx,whitelist:["book","reader"]},I4=wS(N4,P4),j4=i=>i({serializableCheck:{ignoredActions:[fx,Xb,px,gx,mx,yx]}}).concat(uu.middleware,eb.middleware),VM=EP({reducer:I4,middleware:j4,devTools:!1}),B4=gN(VM);var ni=function(){return ni=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ni.apply(this,arguments)};function Dh(i,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return i.concat(o||Array.prototype.slice.call(t))}var Pe="-ms-",_p="-moz-",ye="-webkit-",YM="comm",Zb="rule",Tx="decl",z4="@import",XM="@keyframes",F4="@layer",QM=Math.abs,Rx=String.fromCharCode,_S=Object.assign;function H4(i,t){return On(i,0)^45?(((t<<2^On(i,0))<<2^On(i,1))<<2^On(i,2))<<2^On(i,3):0}function WM(i){return i.trim()}function da(i,t){return(i=t.exec(i))?i[0]:i}function Wt(i,t,e){return i.replace(t,e)}function l0(i,t,e){return i.indexOf(t,e)}function On(i,t){return i.charCodeAt(t)|0}function Oh(i,t,e){return i.slice(t,e)}function js(i){return i.length}function KM(i){return i.length}function np(i,t){return t.push(i),i}function U4(i,t){return i.map(t).join("")}function zT(i,t){return i.filter(function(e){return!da(e,t)})}var Jb=1,kh=1,ZM=0,Dr=0,un=0,Fh="";function tv(i,t,e,n,a,o,c,u){return{value:i,root:t,parent:e,type:n,props:a,children:o,line:Jb,column:kh,length:c,return:"",siblings:u}}function Eo(i,t){return _S(tv("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function ed(i){for(;i.root;)i=Eo(i.root,{children:[i]});np(i,i.siblings)}function $4(){return un}function q4(){return un=Dr>0?On(Fh,--Dr):0,kh--,un===10&&(kh=1,Jb--),un}function is(){return un=Dr<ZM?On(Fh,Dr++):0,kh++,un===10&&(kh=1,Jb++),un}function au(){return On(Fh,Dr)}function c0(){return Dr}function ev(i,t){return Oh(Fh,i,t)}function CS(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function G4(i){return Jb=kh=1,ZM=js(Fh=i),Dr=0,[]}function V4(i){return Fh="",i}function Uw(i){return WM(ev(Dr-1,TS(i===91?i+2:i===40?i+1:i)))}function Y4(i){for(;(un=au())&&un<33;)is();return CS(i)>2||CS(un)>3?"":" "}function X4(i,t){for(;--t&&is()&&!(un<48||un>102||un>57&&un<65||un>70&&un<97););return ev(i,c0()+(t<6&&au()==32&&is()==32))}function TS(i){for(;is();)switch(un){case i:return Dr;case 34:case 39:i!==34&&i!==39&&TS(un);break;case 40:i===41&&TS(i);break;case 92:is();break}return Dr}function Q4(i,t){for(;is()&&i+un!==57;)if(i+un===84&&au()===47)break;return"/*"+ev(t,Dr-1)+"*"+Rx(i===47?i:is())}function W4(i){for(;!CS(au());)is();return ev(i,Dr)}function K4(i){return V4(u0("",null,null,null,[""],i=G4(i),0,[0],i))}function u0(i,t,e,n,a,o,c,u,d){for(var p=0,g=0,y=c,b=0,v=0,S=0,A=1,E=1,x=1,M=0,C="",_=a,D=o,R=n,N=C;E;)switch(S=M,M=is()){case 40:if(S!=108&&On(N,y-1)==58){l0(N+=Wt(Uw(M),"&","&\f"),"&\f",QM(p?u[p-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:N+=Uw(M);break;case 9:case 10:case 13:case 32:N+=Y4(S);break;case 92:N+=X4(c0()-1,7);continue;case 47:switch(au()){case 42:case 47:np(Z4(Q4(is(),c0()),t,e,d),d);break;default:N+="/"}break;case 123*A:u[p++]=js(N)*x;case 125*A:case 59:case 0:switch(M){case 0:case 125:E=0;case 59+g:x==-1&&(N=Wt(N,/\f/g,"")),v>0&&js(N)-y&&np(v>32?HT(N+";",n,e,y-1,d):HT(Wt(N," ","")+";",n,e,y-2,d),d);break;case 59:N+=";";default:if(np(R=FT(N,t,e,p,g,a,u,C,_=[],D=[],y,o),o),M===123)if(g===0)u0(N,t,R,R,_,o,y,u,D);else switch(b===99&&On(N,3)===110?100:b){case 100:case 108:case 109:case 115:u0(i,R,R,n&&np(FT(i,R,R,0,0,a,u,C,a,_=[],y,D),D),a,D,y,u,n?_:D);break;default:u0(N,R,R,R,[""],D,0,u,D)}}p=g=v=0,A=x=1,C=N="",y=c;break;case 58:y=1+js(N),v=S;default:if(A<1){if(M==123)--A;else if(M==125&&A++==0&&q4()==125)continue}switch(N+=Rx(M),M*A){case 38:x=g>0?1:(N+="\f",-1);break;case 44:u[p++]=(js(N)-1)*x,x=1;break;case 64:au()===45&&(N+=Uw(is())),b=au(),g=y=js(C=N+=W4(c0())),M++;break;case 45:S===45&&js(N)==2&&(A=0)}}return o}function FT(i,t,e,n,a,o,c,u,d,p,g,y){for(var b=a-1,v=a===0?o:[""],S=KM(v),A=0,E=0,x=0;A<n;++A)for(var M=0,C=Oh(i,b+1,b=QM(E=c[A])),_=i;M<S;++M)(_=WM(E>0?v[M]+" "+C:Wt(C,/&\f/g,v[M])))&&(d[x++]=_);return tv(i,t,e,a===0?Zb:u,d,p,g,y)}function Z4(i,t,e,n){return tv(i,t,e,YM,Rx($4()),Oh(i,2,-2),0,n)}function HT(i,t,e,n,a){return tv(i,t,e,Tx,Oh(i,0,n),Oh(i,n+1,-1),n,a)}function JM(i,t,e){switch(H4(i,t)){case 5103:return ye+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ye+i+i;case 4789:return _p+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return ye+i+_p+i+Pe+i+i;case 5936:switch(On(i,t+11)){case 114:return ye+i+Pe+Wt(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return ye+i+Pe+Wt(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return ye+i+Pe+Wt(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return ye+i+Pe+i+i;case 6165:return ye+i+Pe+"flex-"+i+i;case 5187:return ye+i+Wt(i,/(\w+).+(:[^]+)/,ye+"box-$1$2"+Pe+"flex-$1$2")+i;case 5443:return ye+i+Pe+"flex-item-"+Wt(i,/flex-|-self/g,"")+(da(i,/flex-|baseline/)?"":Pe+"grid-row-"+Wt(i,/flex-|-self/g,""))+i;case 4675:return ye+i+Pe+"flex-line-pack"+Wt(i,/align-content|flex-|-self/g,"")+i;case 5548:return ye+i+Pe+Wt(i,"shrink","negative")+i;case 5292:return ye+i+Pe+Wt(i,"basis","preferred-size")+i;case 6060:return ye+"box-"+Wt(i,"-grow","")+ye+i+Pe+Wt(i,"grow","positive")+i;case 4554:return ye+Wt(i,/([^-])(transform)/g,"$1"+ye+"$2")+i;case 6187:return Wt(Wt(Wt(i,/(zoom-|grab)/,ye+"$1"),/(image-set)/,ye+"$1"),i,"")+i;case 5495:case 3959:return Wt(i,/(image-set\([^]*)/,ye+"$1$`$1");case 4968:return Wt(Wt(i,/(.+:)(flex-)?(.*)/,ye+"box-pack:$3"+Pe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ye+i+i;case 4200:if(!da(i,/flex-|baseline/))return Pe+"grid-column-align"+Oh(i,t)+i;break;case 2592:case 3360:return Pe+Wt(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,a){return t=a,da(n.props,/grid-\w+-end/)})?~l0(i+(e=e[t].value),"span",0)?i:Pe+Wt(i,"-start","")+i+Pe+"grid-row-span:"+(~l0(e,"span",0)?da(e,/\d+/):+da(e,/\d+/)-+da(i,/\d+/))+";":Pe+Wt(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return da(n.props,/grid-\w+-start/)})?i:Pe+Wt(Wt(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return Wt(i,/(.+)-inline(.+)/,ye+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(js(i)-1-t>6)switch(On(i,t+1)){case 109:if(On(i,t+4)!==45)break;case 102:return Wt(i,/(.+:)(.+)-([^]+)/,"$1"+ye+"$2-$3$1"+_p+(On(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~l0(i,"stretch",0)?JM(Wt(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return Wt(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,a,o,c,u,d,p){return Pe+a+":"+o+p+(c?Pe+a+"-span:"+(u?d:+d-+o)+p:"")+i});case 4949:if(On(i,t+6)===121)return Wt(i,":",":"+ye)+i;break;case 6444:switch(On(i,On(i,14)===45?18:11)){case 120:return Wt(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ye+(On(i,14)===45?"inline-":"")+"box$3$1"+ye+"$2$3$1"+Pe+"$2box$3")+i;case 100:return Wt(i,":",":"+Pe)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Wt(i,"scroll-","scroll-snap-")+i}return i}function ib(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function J4(i,t,e,n){switch(i.type){case F4:if(i.children.length)break;case z4:case Tx:return i.return=i.return||i.value;case YM:return"";case XM:return i.return=i.value+"{"+ib(i.children,n)+"}";case Zb:if(!js(i.value=i.props.join(",")))return""}return js(e=ib(i.children,n))?i.return=i.value+"{"+e+"}":""}function t6(i){var t=KM(i);return function(e,n,a,o){for(var c="",u=0;u<t;u++)c+=i[u](e,n,a,o)||"";return c}}function e6(i){return function(t){t.root||(t=t.return)&&i(t)}}function n6(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case Tx:i.return=JM(i.value,i.length,e);return;case XM:return ib([Eo(i,{value:Wt(i.value,"@","@"+ye)})],n);case Zb:if(i.length)return U4(e=i.props,function(a){switch(da(a,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ed(Eo(i,{props:[Wt(a,/:(read-\w+)/,":"+_p+"$1")]})),ed(Eo(i,{props:[a]})),_S(i,{props:zT(e,n)});break;case"::placeholder":ed(Eo(i,{props:[Wt(a,/:(plac\w+)/,":"+ye+"input-$1")]})),ed(Eo(i,{props:[Wt(a,/:(plac\w+)/,":"+_p+"$1")]})),ed(Eo(i,{props:[Wt(a,/:(plac\w+)/,Pe+"input-$1")]})),ed(Eo(i,{props:[a]})),_S(i,{props:zT(e,n)});break}return""})}}var i6={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Bi={},Lh=typeof process<"u"&&Bi!==void 0&&(Bi.REACT_APP_SC_ATTR||Bi.SC_ATTR)||"data-styled",tD="active",eD="data-styled-version",nv="6.1.17",Mx=`/*!sc*/
`,rb=typeof window<"u"&&"HTMLElement"in window,r6=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Bi!==void 0&&Bi.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Bi.REACT_APP_SC_DISABLE_SPEEDY!==""?Bi.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Bi.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Bi!==void 0&&Bi.SC_DISABLE_SPEEDY!==void 0&&Bi.SC_DISABLE_SPEEDY!==""&&Bi.SC_DISABLE_SPEEDY!=="false"&&Bi.SC_DISABLE_SPEEDY),s6={},iv=Object.freeze([]),Ph=Object.freeze({});function nD(i,t,e){return e===void 0&&(e=Ph),i.theme!==e.theme&&i.theme||t||e.theme}var iD=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),a6=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,o6=/(^-|-$)/g;function UT(i){return i.replace(a6,"-").replace(o6,"")}var l6=/(a)(d)/gi,$y=52,$T=function(i){return String.fromCharCode(i+(i>25?39:97))};function RS(i){var t,e="";for(t=Math.abs(i);t>$y;t=t/$y|0)e=$T(t%$y)+e;return($T(t%$y)+e).replace(l6,"$1-$2")}var $w,rD=5381,pd=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},sD=function(i){return pd(rD,i)};function Dx(i){return RS(sD(i)>>>0)}function c6(i){return i.displayName||i.name||"Component"}function qw(i){return typeof i=="string"&&!0}var aD=typeof Symbol=="function"&&Symbol.for,oD=aD?Symbol.for("react.memo"):60115,u6=aD?Symbol.for("react.forward_ref"):60112,d6={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},h6={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},f6=(($w={})[u6]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$w[oD]=lD,$w);function qT(i){return("type"in(t=i)&&t.type.$$typeof)===oD?lD:"$$typeof"in i?f6[i.$$typeof]:d6;var t}var p6=Object.defineProperty,g6=Object.getOwnPropertyNames,GT=Object.getOwnPropertySymbols,m6=Object.getOwnPropertyDescriptor,y6=Object.getPrototypeOf,VT=Object.prototype;function cD(i,t,e){if(typeof t!="string"){if(VT){var n=y6(t);n&&n!==VT&&cD(i,n,e)}var a=g6(t);GT&&(a=a.concat(GT(t)));for(var o=qT(i),c=qT(t),u=0;u<a.length;++u){var d=a[u];if(!(d in h6||e&&e[d]||c&&d in c||o&&d in o)){var p=m6(t,d);try{p6(i,d,p)}catch{}}}}return i}function Nh(i){return typeof i=="function"}function Ox(i){return typeof i=="object"&&"styledComponentId"in i}function Jl(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function sb(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function Lp(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function MS(i,t,e){if(e===void 0&&(e=!1),!e&&!Lp(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=MS(i[n],t[n]);else if(Lp(t))for(var n in t)i[n]=MS(i[n],t[n]);return i}function kx(i,t){Object.defineProperty(i,"toString",{value:t})}function um(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var b6=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,a=n.length,o=a;t>=o;)if((o<<=1)<0)throw um(16,"".concat(t));this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var c=a;c<o;c++)this.groupSizes[c]=0}for(var u=this.indexOfGroup(t+1),d=(c=0,e.length);c<d;c++)this.tag.insertRule(u,e[c])&&(this.groupSizes[t]++,u++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),a=n+e;this.groupSizes[t]=0;for(var o=n;o<a;o++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],a=this.indexOfGroup(t),o=a+n,c=a;c<o;c++)e+="".concat(this.tag.getRule(c)).concat(Mx);return e},i}(),d0=new Map,ab=new Map,h0=1,qy=function(i){if(d0.has(i))return d0.get(i);for(;ab.has(h0);)h0++;var t=h0++;return d0.set(i,t),ab.set(t,i),t},v6=function(i,t){h0=t+1,d0.set(i,t),ab.set(t,i)},w6="style[".concat(Lh,"][").concat(eD,'="').concat(nv,'"]'),S6=new RegExp("^".concat(Lh,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),A6=function(i,t,e){for(var n,a=e.split(","),o=0,c=a.length;o<c;o++)(n=a[o])&&i.registerName(t,n)},x6=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(Mx),a=[],o=0,c=n.length;o<c;o++){var u=n[o].trim();if(u){var d=u.match(S6);if(d){var p=0|parseInt(d[1],10),g=d[2];p!==0&&(v6(g,p),A6(i,g,d[3]),i.getTag().insertRules(p,a)),a.length=0}else a.push(u)}}},YT=function(i){for(var t=document.querySelectorAll(w6),e=0,n=t.length;e<n;e++){var a=t[e];a&&a.getAttribute(Lh)!==tD&&(x6(i,a),a.parentNode&&a.parentNode.removeChild(a))}};function E6(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var uD=function(i){var t=document.head,e=i||t,n=document.createElement("style"),a=function(u){var d=Array.from(u.querySelectorAll("style[".concat(Lh,"]")));return d[d.length-1]}(e),o=a!==void 0?a.nextSibling:null;n.setAttribute(Lh,tD),n.setAttribute(eD,nv);var c=E6();return c&&n.setAttribute("nonce",c),e.insertBefore(n,o),n},_6=function(){function i(t){this.element=uD(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,a=0,o=n.length;a<o;a++){var c=n[a];if(c.ownerNode===e)return c}throw um(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),C6=function(){function i(t){this.element=uD(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),T6=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),XT=rb,R6={isServer:!rb,useCSSOMInjection:!r6},ob=function(){function i(t,e,n){t===void 0&&(t=Ph),e===void 0&&(e={});var a=this;this.options=ni(ni({},R6),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&rb&&XT&&(XT=!1,YT(this)),kx(this,function(){return function(o){for(var c=o.getTag(),u=c.length,d="",p=function(y){var b=function(x){return ab.get(x)}(y);if(b===void 0)return"continue";var v=o.names.get(b),S=c.getGroup(y);if(v===void 0||!v.size||S.length===0)return"continue";var A="".concat(Lh,".g").concat(y,'[id="').concat(b,'"]'),E="";v!==void 0&&v.forEach(function(x){x.length>0&&(E+="".concat(x,","))}),d+="".concat(S).concat(A,'{content:"').concat(E,'"}').concat(Mx)},g=0;g<u;g++)p(g);return d}(a)})}return i.registerId=function(t){return qy(t)},i.prototype.rehydrate=function(){!this.server&&rb&&YT(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(ni(ni({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,a=e.target;return e.isServer?new T6(a):n?new _6(a):new C6(a)}(this.options),new b6(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(qy(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(qy(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(qy(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),M6=/&/g,D6=/^\s*\/\/.*$/gm;function dD(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=dD(e.children,t)),e})}function O6(i){var t,e,n,a=Ph,o=a.options,c=o===void 0?Ph:o,u=a.plugins,d=u===void 0?iv:u,p=function(b,v,S){return S.startsWith(e)&&S.endsWith(e)&&S.replaceAll(e,"").length>0?".".concat(t):b},g=d.slice();g.push(function(b){b.type===Zb&&b.value.includes("&")&&(b.props[0]=b.props[0].replace(M6,e).replace(n,p))}),c.prefix&&g.push(n6),g.push(J4);var y=function(b,v,S,A){v===void 0&&(v=""),S===void 0&&(S=""),A===void 0&&(A="&"),t=A,e=v,n=new RegExp("\\".concat(e,"\\b"),"g");var E=b.replace(D6,""),x=K4(S||v?"".concat(S," ").concat(v," { ").concat(E," }"):E);c.namespace&&(x=dD(x,c.namespace));var M=[];return ib(x,t6(g.concat(e6(function(C){return M.push(C)})))),M};return y.hash=d.length?d.reduce(function(b,v){return v.name||um(15),pd(b,v.name)},rD).toString():"",y}var k6=new ob,DS=O6(),hD=wn.createContext({shouldForwardProp:void 0,styleSheet:k6,stylis:DS});hD.Consumer;wn.createContext(void 0);function OS(){return U.useContext(hD)}var fD=function(){function i(t,e){var n=this;this.inject=function(a,o){o===void 0&&(o=DS);var c=n.name+o.hash;a.hasNameForId(n.id,c)||a.insertRules(n.id,c,o(n.rules,c,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,kx(this,function(){throw um(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=DS),this.name+t.hash},i}(),L6=function(i){return i>="A"&&i<="Z"};function QT(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;L6(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var pD=function(i){return i==null||i===!1||i===""},gD=function(i){var t,e,n=[];for(var a in i){var o=i[a];i.hasOwnProperty(a)&&!pD(o)&&(Array.isArray(o)&&o.isCss||Nh(o)?n.push("".concat(QT(a),":"),o,";"):Lp(o)?n.push.apply(n,Dh(Dh(["".concat(a," {")],gD(o),!1),["}"],!1)):n.push("".concat(QT(a),": ").concat((t=a,(e=o)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in i6||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function dl(i,t,e,n){if(pD(i))return[];if(Ox(i))return[".".concat(i.styledComponentId)];if(Nh(i)){if(!Nh(o=i)||o.prototype&&o.prototype.isReactComponent||!t)return[i];var a=i(t);return dl(a,t,e,n)}var o;return i instanceof fD?e?(i.inject(e,n),[i.getName(n)]):[i]:Lp(i)?gD(i):Array.isArray(i)?Array.prototype.concat.apply(iv,i.map(function(c){return dl(c,t,e,n)})):[i.toString()]}function mD(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(Nh(e)&&!Ox(e))return!1}return!0}var P6=sD(nv),N6=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&mD(t),this.componentId=e,this.baseHash=pd(P6,e),this.baseStyle=n,ob.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))a=Jl(a,this.staticRulesId);else{var o=sb(dl(this.rules,t,e,n)),c=RS(pd(this.baseHash,o)>>>0);if(!e.hasNameForId(this.componentId,c)){var u=n(o,".".concat(c),void 0,this.componentId);e.insertRules(this.componentId,c,u)}a=Jl(a,c),this.staticRulesId=c}else{for(var d=pd(this.baseHash,n.hash),p="",g=0;g<this.rules.length;g++){var y=this.rules[g];if(typeof y=="string")p+=y;else if(y){var b=sb(dl(y,t,e,n));d=pd(d,b+g),p+=b}}if(p){var v=RS(d>>>0);e.hasNameForId(this.componentId,v)||e.insertRules(this.componentId,v,n(p,".".concat(v),void 0,this.componentId)),a=Jl(a,v)}}return a},i}(),Lx=wn.createContext(void 0);Lx.Consumer;var Gw={};function I6(i,t,e){var n=Ox(i),a=i,o=!qw(i),c=t.attrs,u=c===void 0?iv:c,d=t.componentId,p=d===void 0?function(_,D){var R=typeof _!="string"?"sc":UT(_);Gw[R]=(Gw[R]||0)+1;var N="".concat(R,"-").concat(Dx(nv+R+Gw[R]));return D?"".concat(D,"-").concat(N):N}(t.displayName,t.parentComponentId):d,g=t.displayName,y=g===void 0?function(_){return qw(_)?"styled.".concat(_):"Styled(".concat(c6(_),")")}(i):g,b=t.displayName&&t.componentId?"".concat(UT(t.displayName),"-").concat(t.componentId):t.componentId||p,v=n&&a.attrs?a.attrs.concat(u).filter(Boolean):u,S=t.shouldForwardProp;if(n&&a.shouldForwardProp){var A=a.shouldForwardProp;if(t.shouldForwardProp){var E=t.shouldForwardProp;S=function(_,D){return A(_,D)&&E(_,D)}}else S=A}var x=new N6(e,b,n?a.componentStyle:void 0);function M(_,D){return function(R,N,$){var j=R.attrs,H=R.componentStyle,F=R.defaultProps,G=R.foldedComponentIds,Q=R.styledComponentId,X=R.target,ut=wn.useContext(Lx),B=OS(),V=R.shouldForwardProp||B.shouldForwardProp,at=nD(N,ut,F)||Ph,ct=function(pt,yt,St){for(var Pt,me=ni(ni({},yt),{className:void 0,theme:St}),Nt=0;Nt<pt.length;Nt+=1){var Ut=Nh(Pt=pt[Nt])?Pt(me):Pt;for(var Zt in Ut)me[Zt]=Zt==="className"?Jl(me[Zt],Ut[Zt]):Zt==="style"?ni(ni({},me[Zt]),Ut[Zt]):Ut[Zt]}return yt.className&&(me.className=Jl(me.className,yt.className)),me}(j,N,at),z=ct.as||X,Z={};for(var ot in ct)ct[ot]===void 0||ot[0]==="$"||ot==="as"||ot==="theme"&&ct.theme===at||(ot==="forwardedAs"?Z.as=ct.forwardedAs:V&&!V(ot,z)||(Z[ot]=ct[ot]));var lt=function(pt,yt){var St=OS(),Pt=pt.generateAndInjectStyles(yt,St.styleSheet,St.stylis);return Pt}(H,ct),mt=Jl(G,Q);return lt&&(mt+=" "+lt),ct.className&&(mt+=" "+ct.className),Z[qw(z)&&!iD.has(z)?"class":"className"]=mt,$&&(Z.ref=$),U.createElement(z,Z)}(C,_,D)}M.displayName=y;var C=wn.forwardRef(M);return C.attrs=v,C.componentStyle=x,C.displayName=y,C.shouldForwardProp=S,C.foldedComponentIds=n?Jl(a.foldedComponentIds,a.styledComponentId):"",C.styledComponentId=b,C.target=n?a.target:i,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(_){this._foldedDefaultProps=n?function(D){for(var R=[],N=1;N<arguments.length;N++)R[N-1]=arguments[N];for(var $=0,j=R;$<j.length;$++)MS(D,j[$],!0);return D}({},a.defaultProps,_):_}}),kx(C,function(){return".".concat(C.styledComponentId)}),o&&cD(C,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function WT(i,t){for(var e=[i[0]],n=0,a=t.length;n<a;n+=1)e.push(t[n],i[n+1]);return e}var KT=function(i){return Object.assign(i,{isCss:!0})};function Ji(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Nh(i)||Lp(i))return KT(dl(WT(iv,Dh([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?dl(n):KT(dl(WT(n,t)))}function kS(i,t,e){if(e===void 0&&(e=Ph),!t)throw um(1,t);var n=function(a){for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];return i(t,e,Ji.apply(void 0,Dh([a],o,!1)))};return n.attrs=function(a){return kS(i,t,ni(ni({},e),{attrs:Array.prototype.concat(e.attrs,a).filter(Boolean)}))},n.withConfig=function(a){return kS(i,t,ni(ni({},e),a))},n}var yD=function(i){return kS(I6,i)},st=yD;iD.forEach(function(i){st[i]=yD(i)});var j6=function(){function i(t,e){this.rules=t,this.componentId=e,this.isStatic=mD(t),ob.registerId(this.componentId+1)}return i.prototype.createStyles=function(t,e,n,a){var o=a(sb(dl(this.rules,e,n,a)),""),c=this.componentId+t;n.insertRules(c,c,o)},i.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},i.prototype.renderStyles=function(t,e,n,a){t>2&&ob.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,a)},i}();function B6(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=Ji.apply(void 0,Dh([i],t,!1)),a="sc-global-".concat(Dx(JSON.stringify(n))),o=new j6(n,a),c=function(d){var p=OS(),g=wn.useContext(Lx),y=wn.useRef(p.styleSheet.allocateGSInstance(a)).current;return p.styleSheet.server&&u(y,d,p.styleSheet,g,p.stylis),wn.useLayoutEffect(function(){if(!p.styleSheet.server)return u(y,d,p.styleSheet,g,p.stylis),function(){return o.removeStyles(y,p.styleSheet)}},[y,d,p.styleSheet,g,p.stylis]),null};function u(d,p,g,y,b){if(o.isStatic)o.renderStyles(d,s6,g,b);else{var v=ni(ni({},p),{theme:nD(p,y,c.defaultProps)});o.renderStyles(d,v,g,b)}}return wn.memo(c)}function bD(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=sb(Ji.apply(void 0,Dh([i],t,!1))),a=Dx(n);return new fD(a,n)}const z6=Ji`
  * {
    transition:
      background-color 0.3s,
      border 0.3s,
      color 0.3s;
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    height: 100%;
    overflow: hidden;  
    font-size: 62.5%;
  }

  body {
    min-height: 100vh;
    font-size: 1.6rem;
    line-height: 1.5;
    font-family: 'Poppins', sans-serif;
  }

  input,
  button,
  textarea,
  select {
    outline: none;
    border: none;
    background: none;
    color: inherit;
    font: inherit;
  }

  button {
    cursor: pointer;
    font-family:
      'Segoe UI Emoji', 'Noto Color Emoji', 'Apple Color Emoji', sans-serif;
  }

  *:disabled {
    cursor: not-allowed;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  ul {
    list-style: none;
  }

  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    hyphens: auto;
    overflow-wrap: break-word;
  }

  img {
    display: block;
    max-width: 100%;
  }
`,vD=B6`

:root {
  // ---------------------------------------------------------------------------
  //------BookCard styles
  // ---------------------------------------------------------------------------
      --tile-size: 14rem;  
      --tile-aspect-ratio: 4 / 3;
  //----------------------------------------------------------------------------
  //------ BookPreviewModal styles
  // ---------------------------------------------------------------------------
      --modal-width: 60vw;
      --modal-aspect-ratio: 3/2; 
      --modal-height: calc(var(--modal-width) / (var(--modal-aspect-ratio)));
      --modal-font-size: calc(var(--modal-width) * 0.013); 
        /* Universal 5-level scale (em) */
      --modal-xs: 0.4em;   /* very small (spacing / tiny font) */
      --modal-sm: 0.6em;   /* small */
      --modal-md: 0.8em;   /* standard */
      --modal-lg: 1.0em;   /* moderately large */
      --modal-xl: 1.2em;   /* largest */
      --modal-xxl: 1.4em;
      [data-editable="true"] {
      /* highlight for editable elements */
       box-shadow: 0 0 0 2px var(--color-blue-400) inset;
       }
      // ---------------------------------------------------------------------------
  //------ Basic colors: light and dark shades
  // ---------------------------------------------------------------------------
       --color-light-0:   #ffffff;
       --color-light-100: #f7faff;
       --color-light-200: #eaf3fb;
       --color-dark-900:  #0b1626;



       --color-yellow-400: #ffbb00;
       --color-yellow-300: #ffbb00;
  // ---------------------------------------------------------------------------
  //------ Accent blue shades 
  // ---------------------------------------------------------------------------
        --color-blue-100: #dceaf8;
        --color-blue-200: #b9d3ee;
        --color-blue-300: #8ab5dc;
        --color-blue-400: #609bd0;
        --color-blue-500: #3f83c5;
        --color-blue-600: #2c6aad;
        --color-blue-700: #1f518a;

  // ---------------------------------------------------------------------------
  //------ Icon colors and shadows 
  // ---------------------------------------------------------------------------
        --color-icon-default: var(--color-blue-700);
        --bg-icon-default: rgba(53, 38, 218, 0.194);
        --bg-icon-hover: rgba(255, 255, 255, 0.1);
        --shadow-icon: 0 0 0.8rem rgba(60, 100, 180, 0.25);
        --shadow-icon-hover: 0 0 1.5rem rgba(60, 100, 180, 0.35);

  // ---------------------------------------------------------------------------
  //------ SEE colors – semantic effects 
  // ---------------------------------------------------------------------------
        --see-01: rgba(0, 116, 210, 0.71);
        --see-02: rgba(71, 175, 255, 0.98);
        --see-03: rgba(31, 32, 109, 0.85);
        --see-04: rgba(72, 254, 248, 0.07);
        --see-05: rgb(0, 108, 197);
        --see-06: rgba(207, 229, 255, 0.705);
        --see-07: rgb(133, 175, 209);
        --see-08: rgba(22, 140, 209, 0.151);
        --see-akcent: rgb(194, 249, 255);
        --see-akcent-02: hsl(210 70% 69% / 0.6);
        --see-akcent-03: hsl(206 50% 61%);

  // ---------------------------------------------------------------------------
  //------ Tile background active (MenuTile) 
  // ---------------------------------------------------------------------------
       --tile-bg-active:
         linear-gradient(
           22deg,
           #d2ecff73 0%,
           #9fcff310 27%,
           #68a6dca2 49%,
           #b2d8ff4e 76%,
           #5c9de695 100%
         ),
         linear-gradient(
           115deg,
           rgba(255, 255, 255, 0.2) 0%,
           rgba(136, 168, 208, 0.177) 40%,
           rgba(255, 255, 255, 0.06) 100%
         ),
         repeating-linear-gradient(
           25deg,
           rgba(255, 255, 255, 0.05) 0px,
           rgba(255, 255, 255, 0.05) 1.5px,
           rgba(0, 0, 0, 0.03) 1.5px,
           rgba(0, 0, 0, 0.03) 3px
         );

  // ---------------------------------------------------------------------------
  //------ Tile shadow active (MenuTile) 
  // ---------------------------------------------------------------------------
        --tile-shadow-active:
          0 2rem 5rem rgba(11, 40, 73, 0.55),
          inset 0 0 1.5rem rgba(88, 83, 150, 0.4),
          0 0 1.5rem rgba(255, 255, 255, 0.3);

  // ---------------------------------------------------------------------------
  //------ Gradients: blue clear 
  // ---------------------------------------------------------------------------
       --gradient-blue-clear:
         linear-gradient(
           to top left,
           #f5fbff,
           rgb(80, 138, 192),
           #cde5ff
         );

  // ---------------------------------------------------------------------------
  //------ Gradients: metal deep blue v7 
  // ---------------------------------------------------------------------------
        --gradient-metal-deepblue-v7:
          linear-gradient(
            22deg,
            #d2ecff 0%,
            #9fcff3 27%,
            #68a5dc 49%,
            #b2d8ff 76%,
            #4178b8 100%
          ),
          linear-gradient(
            115deg,
            rgba(255, 255, 255, 0.2) 0%,
            rgba(0, 0, 0, 0.03) 40%,
            rgba(255, 255, 255, 0.06) 100%
          ),
          repeating-linear-gradient(
            25deg,
            rgba(255, 255, 255, 0.05) 0px,
            rgba(255, 255, 255, 0.05) 1.5px,
            rgba(0, 0, 0, 0.03) 1.5px,
            rgba(0, 0, 0, 0.03) 3px
          );

//--------------------------------------------------
//------ gradient-main
//--------------------------------------------------- 

        --gradient-main:
          linear-gradient(
            37deg,
            #2f6eb23a 20%,
            #6fafe642 45%,
            #9bd4ff1c 70%,
            #417cbf2f 100%
          ),
          linear-gradient(
            125deg,
            rgba(64, 172, 255, 0.549) 0%,
            rgba(30, 32, 106, 0.47) 50%,
            rgba(61, 105, 171, 0.08) 100%
          ),
          repeating-linear-gradient(
            70deg,
            rgba(255, 255, 255, 0.04) 0px,
            rgba(8, 75, 88, 0.578) 2px,
            rgba(0, 0, 0, 0.03) 2px,
            rgba(222, 222, 222, 0.03) 4px
          ),
          repeating-linear-gradient(
            -45deg,
            rgba(255, 255, 255, 0.02) 0px,
            rgba(127, 196, 198, 0.441) 20%,
            rgba(0, 0, 0, 0.02) 1px,
            rgba(0, 0, 0, 0.02) 2px
          );

//------------------------------------------------
//------ gradient-main-v2
//--------------------------------------------------

        --gradient-main-v2:
          linear-gradient(
            37deg,
            #3655a994 20%,
            #b1daff95 45%,
            #b2d8ff 70%,
            #438bbcb6 100%
          ),
          linear-gradient(
            125deg,
            rgba(7, 26, 41, 0.549) 0%,
            rgba(24, 24, 40, 0.47) 50%,
            rgba(61, 105, 171, 0.08) 100%
          ),
          repeating-linear-gradient(
            70deg,
            rgba(255, 255, 255, 0.04) 0px,
            rgba(8, 75, 88, 0.578) 2px,
            rgba(255, 255, 255, 0.92) 2px,
            rgba(55, 94, 102, 0.03) 4px
          ),
          repeating-linear-gradient(
            -45deg,
            rgba(255, 255, 255, 0.02) 0px,
            rgba(127, 196, 198, 0.441) 20%,
            rgba(0, 0, 0, 0.02) 1px,
            rgba(0, 0, 0, 0.348) 2px
          );

//--------------------------------------------------     
//------ gradient-main-v3
//--------------------------------------------------   

        --gradient-main-v3:
          linear-gradient(
            138deg,
            #a3d3f1b8 20%,
            #73b2e9d2 45%,
            #3a93ff92 70%,
            #a2daffb6 100%
          ),
          linear-gradient(
            15deg,
            rgba(7, 26, 41, 0.549) 0%,
            rgba(24, 24, 40, 0.47) 50%,
            rgba(61, 105, 171, 0.08) 100%
          ),
          repeating-linear-gradient(
            310deg,
            rgba(255, 255, 255, 0.04) 0px,
            rgba(8, 75, 88, 0.578) 2px,
            rgba(255, 255, 255, 0.33) 2px,
            rgba(55, 94, 102, 0.03) 4px
          ),
          repeating-linear-gradient(
            -45deg,
            rgba(255, 255, 255, 0.02) 0px,
            rgba(127, 196, 198, 0.441) 20%,
            rgba(0, 0, 0, 0.02) 1px,
            rgba(0, 0, 0, 0.348) 2px
          );

//--------------------------------------------------     
//------ gradient-main-v4
//--------------------------------------------------   

         --gradient-main-v4:
           linear-gradient(
             138deg,
             #a3c7f1cf 20%,
             #73b2e9f8 45%,
             #3a93ff92 70%,
             #1d83c7df 100%
           ),
           linear-gradient(
             15deg,
             rgb(7, 26, 41) 0%,
             rgba(19, 61, 80, 0.589) 50%,
             rgba(118, 158, 218, 0.384) 100%
           ),
           repeating-linear-gradient(
             310deg,
             rgba(255, 255, 255, 0.04) 0rem,
             rgba(8, 75, 88, 0.578) 0.2rem,
             rgba(106, 118, 145, 0.33) 0.22rem,
             rgba(55, 94, 102, 0.03) 0.3rem
           ),
           repeating-linear-gradient(
             -45deg,
             rgba(255, 255, 255, 0.02) 0rem,
             rgba(127, 196, 198, 0.441) 0.1rem,
             rgba(0, 0, 0, 0.02) 0.1rem,
             rgba(0, 0, 0, 0.062) 0.1rem
           );
//--------------------------------------------------     
//------ gradient-main-v5
//--------------------------------------------------   

         --gradient-main-v5:
           linear-gradient(
             138deg,
             #a3c7f1cf 20%,
             #73b2e9f8 45%,
             #97c3fad3 70%,
             #66bdf7df 100%
           ),
           linear-gradient(
             15deg,
             rgb(7, 26, 41) 0%,
             rgba(19, 61, 80, 0.589) 50%,
             rgba(118, 158, 218, 0.384) 100%
           ),
           repeating-linear-gradient(
             310deg,
             rgba(255, 255, 255, 0.04) 0rem,
             rgba(8, 75, 88, 0.578) 0.2rem,
             rgba(106, 118, 145, 0.33) 0.22rem,
             rgba(55, 94, 102, 0.03) 0.3rem
           ),
           repeating-linear-gradient(
             -45deg,
             rgba(255, 255, 255, 0.02) 0rem,
             rgba(127, 196, 198, 0.441) 0.1rem,
             rgba(0, 0, 0, 0.02) 0.1rem,
             rgba(0, 0, 0, 0.062) 0.1rem
           );
//--------------------------------------------------     
//------ gradient-main-v6
//--------------------------------------------------   
              
         --gradient-main-v6:
           linear-gradient(
             138deg,
             #9bcaff1a 20%,
             #73b2e92f 45%,
             #97c3fa24 70%,
             #66bdf742 100%
           ),
           linear-gradient(
             15deg,
             rgba(23, 94, 148, 0.479) 0%,
             rgba(79, 174, 218, 0.24) 50%,
             rgba(118, 158, 218, 0.116) 100%
           ),
           repeating-linear-gradient(
             310deg,
             rgba(255, 255, 255, 0.253) 0rem,
             rgba(212, 234, 238, 0.027) 0.2rem,
             rgba(106, 118, 145, 0.33) 0.52rem,
             rgba(55, 94, 102, 0.03) 0.3rem
           ),
           repeating-linear-gradient(
             -45deg,
             rgba(255, 255, 255, 0.02) 0rem,
             rgba(214, 254, 255, 0.185) 0.1rem,
             rgba(170, 255, 248, 0.02) 0.1rem,
             rgba(247, 247, 247, 0.062) 0.1rem
           );
         }
       
 ${z6}
 
   `;function F6({children:i}){return P.jsx(k5,{store:VM,children:P.jsxs(sM,{loading:null,persistor:B4,children:[P.jsx(vD,{}),i]})})}const H6="modulepreload",U6=function(i){return"/"+i},ZT={},rv=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=c(e.map(p=>{if(p=U6(p),p in ZT)return;ZT[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":H6,g||(b.as="script"),b.crossOrigin="",b.href=p,d&&b.setAttribute("nonce",d),document.head.appendChild(b),g)return new Promise((v,S)=>{b.addEventListener("load",v),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};var Yf={},JT;function $6(){if(JT)return Yf;JT=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.parse=c,Yf.serialize=p;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,v){const S=new o,A=b.length;if(A<2)return S;const E=(v==null?void 0:v.decode)||g;let x=0;do{const M=b.indexOf("=",x);if(M===-1)break;const C=b.indexOf(";",x),_=C===-1?A:C;if(M>_){x=b.lastIndexOf(";",M-1)+1;continue}const D=u(b,x,M),R=d(b,M,D),N=b.slice(D,R);if(S[N]===void 0){let $=u(b,M+1,_),j=d(b,_,$);const H=E(b.slice($,j));S[N]=H}x=_+1}while(x<A);return S}function u(b,v,S){do{const A=b.charCodeAt(v);if(A!==32&&A!==9)return v}while(++v<S);return S}function d(b,v,S){for(;v>S;){const A=b.charCodeAt(--v);if(A!==32&&A!==9)return v+1}return S}function p(b,v,S){const A=(S==null?void 0:S.encode)||encodeURIComponent;if(!i.test(b))throw new TypeError(`argument name is invalid: ${b}`);const E=A(v);if(!t.test(E))throw new TypeError(`argument val is invalid: ${v}`);let x=b+"="+E;if(!S)return x;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);x+="; Max-Age="+S.maxAge}if(S.domain){if(!e.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);x+="; Domain="+S.domain}if(S.path){if(!n.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);x+="; Path="+S.path}if(S.expires){if(!y(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);x+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(x+="; HttpOnly"),S.secure&&(x+="; Secure"),S.partitioned&&(x+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return x}function g(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function y(b){return a.call(b)==="[object Date]"}return Yf}$6();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wD=i=>{throw TypeError(i)},q6=(i,t,e)=>t.has(i)||wD("Cannot "+e),Vw=(i,t,e)=>(q6(i,t,"read from private field"),e?e.call(i):t.get(i)),G6=(i,t,e)=>t.has(i)?wD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),tR="popstate";function V6(i={}){function t(n,a){let{pathname:o,search:c,hash:u}=n.location;return Pp("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:gl(a)}return X6(t,e,null,i)}function re(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function hn(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Y6(){return Math.random().toString(36).substring(2,10)}function eR(i,t){return{usr:i.state,key:i.key,idx:t}}function Pp(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Sl(t):t,state:e,key:t&&t.key||n||Y6()}}function gl({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function Sl(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function X6(i,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,u="POP",d=null,p=g();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let E=g(),x=E==null?null:E-p;p=E,d&&d({action:u,location:A.location,delta:x})}function b(E,x){u="PUSH";let M=Pp(A.location,E,x);p=g()+1;let C=eR(M,p),_=A.createHref(M);try{c.pushState(C,"",_)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(_)}o&&d&&d({action:u,location:A.location,delta:1})}function v(E,x){u="REPLACE";let M=Pp(A.location,E,x);p=g();let C=eR(M,p),_=A.createHref(M);c.replaceState(C,"",_),o&&d&&d({action:u,location:A.location,delta:0})}function S(E){let x=a.location.origin!=="null"?a.location.origin:a.location.href,M=typeof E=="string"?E:gl(E);return M=M.replace(/ $/,"%20"),re(x,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,x)}let A={get action(){return u},get location(){return i(a,c)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(tR,y),d=E,()=>{a.removeEventListener(tR,y),d=null}},createHref(E){return t(a,E)},createURL:S,encodeLocation(E){let x=S(E);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:v,go(E){return c.go(E)}};return A}var ip,nR=class{constructor(i){if(G6(this,ip,new Map),i)for(let[t,e]of i)this.set(t,e)}get(i){if(Vw(this,ip).has(i))return Vw(this,ip).get(i);if(i.defaultValue!==void 0)return i.defaultValue;throw new Error("No value found for context")}set(i,t){Vw(this,ip).set(i,t)}};ip=new WeakMap;var Q6=new Set(["lazy","caseSensitive","path","id","index","children"]);function W6(i){return Q6.has(i)}var K6=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function Z6(i){return K6.has(i)}function J6(i){return i.index===!0}function lb(i,t,e=[],n={}){return i.map((a,o)=>{let c=[...e,String(o)],u=typeof a.id=="string"?a.id:c.join("-");if(re(a.index!==!0||!a.children,"Cannot specify children on an index route"),re(!n[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),J6(a)){let d={...a,...t(a),id:u};return n[u]=d,d}else{let d={...a,...t(a),id:u,children:void 0};return n[u]=d,a.children&&(d.children=lb(a.children,t,c,n)),d}})}function To(i,t,e="/"){return f0(i,t,e,!1)}function f0(i,t,e,n){let a=typeof t=="string"?Sl(t):t,o=Or(a.pathname||"/",e);if(o==null)return null;let c=SD(i);eI(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let p=hI(o);u=uI(c[d],p,n)}return u}function tI(i,t){let{route:e,pathname:n,params:a}=i;return{id:e.id,pathname:n,params:a,data:t[e.id],handle:e.handle}}function SD(i,t=[],e=[],n=""){let a=(o,c,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};d.relativePath.startsWith("/")&&(re(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let p=Bs([n,d.relativePath]),g=e.concat(d);o.children&&o.children.length>0&&(re(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),SD(o.children,t,g,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:lI(p,o.index),routesMeta:g})};return i.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let d of AD(o.path))a(o,c,d)}),t}function AD(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=AD(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...c),u.map(d=>i.startsWith("/")&&d===""?"/":d)}function eI(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:cI(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var nI=/^:[\w-]+$/,iI=3,rI=2,sI=1,aI=10,oI=-2,iR=i=>i==="*";function lI(i,t){let e=i.split("/"),n=e.length;return e.some(iR)&&(n+=oI),t&&(n+=rI),e.filter(a=>!iR(a)).reduce((a,o)=>a+(nI.test(o)?iI:o===""?sI:aI),n)}function cI(i,t){return i.length===t.length&&i.slice(0,-1).every((n,a)=>n===t[a])?i[i.length-1]-t[t.length-1]:0}function uI(i,t,e=!1){let{routesMeta:n}=i,a={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],p=u===n.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=cb({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),b=d.route;if(!y&&p&&e&&!n[n.length-1].route.index&&(y=cb({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:Bs([o,y.pathname]),pathnameBase:gI(Bs([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=Bs([o,y.pathnameBase]))}return c}function cb(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=dI(i.path,i.caseSensitive,i.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let S=u[b]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=u[b];return y&&!v?p[g]=void 0:p[g]=(v||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:i}}function dI(i,t=!1,e=!0){hn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function hI(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Or(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function fI(i,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof i=="string"?Sl(i):i;return{pathname:e?e.startsWith("/")?e:pI(e,t):t,search:mI(n),hash:yI(a)}}function pI(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Yw(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xD(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Px(i){let t=xD(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Nx(i,t,e,n=!1){let a;typeof i=="string"?a=Sl(i):(a={...i},re(!a.pathname||!a.pathname.includes("?"),Yw("?","pathname","search",a)),re(!a.pathname||!a.pathname.includes("#"),Yw("#","pathname","hash",a)),re(!a.search||!a.search.includes("#"),Yw("#","search","hash",a)));let o=i===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=fI(a,u),p=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var Bs=i=>i.join("/").replace(/\/\/+/g,"/"),gI=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),mI=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,yI=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ub=class{constructor(i,t,e,n=!1){this.status=i,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function Np(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var ED=["POST","PUT","PATCH","DELETE"],bI=new Set(ED),vI=["GET",...ED],wI=new Set(vI),SI=new Set([301,302,303,307,308]),AI=new Set([307,308]),Xw={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EI=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),_D="remix-router-transitions",CD=Symbol("ResetLoaderData");function _I(i){const t=i.window?i.window:typeof window<"u"?window:void 0,e=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";re(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=i.hydrationRouteProperties||[],a=i.mapRouteProperties||EI,o={},c=lb(i.routes,a,void 0,o),u,d=i.basename||"/",p=i.dataStrategy||DI,g={unstable_middleware:!1,...i.future},y=null,b=new Set,v=null,S=null,A=null,E=i.hydrationData!=null,x=To(c,i.history.location,d),M=!1,C=null;if(x==null&&!i.patchRoutesOnNavigation){let Y=Tr(404,{pathname:i.history.location.pathname}),{matches:J,route:rt}=gR(c);x=J,C={[rt.id]:Y}}x&&!i.hydrationData&&Cl(x,c,i.history.location.pathname).active&&(x=null);let _;if(x)if(x.some(Y=>Y.route.lazy))_=!1;else if(!x.some(Y=>Y.route.loader))_=!0;else{let Y=i.hydrationData?i.hydrationData.loaderData:null,J=i.hydrationData?i.hydrationData.errors:null;if(J){let rt=x.findIndex(gt=>J[gt.route.id]!==void 0);_=x.slice(0,rt+1).every(gt=>!PS(gt.route,Y,J))}else _=x.every(rt=>!PS(rt.route,Y,J))}else{_=!1,x=[];let Y=Cl(null,c,i.history.location.pathname);Y.active&&Y.matches&&(M=!0,x=Y.matches)}let D,R={historyAction:i.history.action,location:i.history.location,matches:x,initialized:_,navigation:Xw,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||C,fetchers:new Map,blockers:new Map},N="POP",$=!1,j,H=!1,F=new Map,G=null,Q=!1,X=!1,ut=new Set,B=new Map,V=0,at=-1,ct=new Map,z=new Set,Z=new Map,ot=new Map,lt=new Set,mt=new Map,pt,yt=null;function St(){if(y=i.history.listen(({action:Y,location:J,delta:rt})=>{if(pt){pt(),pt=void 0;return}hn(mt.size===0||rt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let gt=xm({currentLocation:R.location,nextLocation:J,historyAction:Y});if(gt&&rt!=null){let vt=new Promise(Tt=>{pt=Tt});i.history.go(rt*-1),ds(gt,{state:"blocked",location:J,proceed(){ds(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),vt.then(()=>i.history.go(rt))},reset(){let Tt=new Map(R.blockers);Tt.set(gt,Xf),Nt({blockers:Tt})}});return}return Ie(Y,J)}),e){HI(t,F);let Y=()=>UI(t,F);t.addEventListener("pagehide",Y),G=()=>t.removeEventListener("pagehide",Y)}return R.initialized||Ie("POP",R.location,{initialHydration:!0}),D}function Pt(){y&&y(),G&&G(),b.clear(),j&&j.abort(),R.fetchers.forEach((Y,J)=>kn(J)),R.blockers.forEach((Y,J)=>El(J))}function me(Y){return b.add(Y),()=>b.delete(Y)}function Nt(Y,J={}){R={...R,...Y};let rt=[],gt=[];R.fetchers.forEach((vt,Tt)=>{vt.state==="idle"&&(lt.has(Tt)?rt.push(Tt):gt.push(Tt))}),lt.forEach(vt=>{!R.fetchers.has(vt)&&!B.has(vt)&&rt.push(vt)}),[...b].forEach(vt=>vt(R,{deletedFetchers:rt,viewTransitionOpts:J.viewTransitionOpts,flushSync:J.flushSync===!0})),rt.forEach(vt=>kn(vt)),gt.forEach(vt=>R.fetchers.delete(vt))}function Ut(Y,J,{flushSync:rt}={}){var Lt,Ft;let gt=R.actionData!=null&&R.navigation.formMethod!=null&&er(R.navigation.formMethod)&&R.navigation.state==="loading"&&((Lt=Y.state)==null?void 0:Lt._isRedirect)!==!0,vt;J.actionData?Object.keys(J.actionData).length>0?vt=J.actionData:vt=null:gt?vt=R.actionData:vt=null;let Tt=J.loaderData?fR(R.loaderData,J.loaderData,J.matches||[],J.errors):R.loaderData,It=R.blockers;It.size>0&&(It=new Map(It),It.forEach((Dt,$t)=>It.set($t,Xf)));let Et=$===!0||R.navigation.formMethod!=null&&er(R.navigation.formMethod)&&((Ft=Y.state)==null?void 0:Ft._isRedirect)!==!0;u&&(c=u,u=void 0),Q||N==="POP"||(N==="PUSH"?i.history.push(Y,Y.state):N==="REPLACE"&&i.history.replace(Y,Y.state));let kt;if(N==="POP"){let Dt=F.get(R.location.pathname);Dt&&Dt.has(Y.pathname)?kt={currentLocation:R.location,nextLocation:Y}:F.has(Y.pathname)&&(kt={currentLocation:Y,nextLocation:R.location})}else if(H){let Dt=F.get(R.location.pathname);Dt?Dt.add(Y.pathname):(Dt=new Set([Y.pathname]),F.set(R.location.pathname,Dt)),kt={currentLocation:R.location,nextLocation:Y}}Nt({...J,actionData:vt,loaderData:Tt,historyAction:N,location:Y,initialized:!0,navigation:Xw,revalidation:"idle",restoreScrollPosition:_m(Y,J.matches||R.matches),preventScrollReset:Et,blockers:It},{viewTransitionOpts:kt,flushSync:rt===!0}),N="POP",$=!1,H=!1,Q=!1,X=!1,yt==null||yt.resolve(),yt=null}async function Zt(Y,J){if(typeof Y=="number"){i.history.go(Y);return}let rt=LS(R.location,R.matches,d,Y,J==null?void 0:J.fromRouteId,J==null?void 0:J.relative),{path:gt,submission:vt,error:Tt}=rR(!1,rt,J),It=R.location,Et=Pp(R.location,gt,J&&J.state);Et={...Et,...i.history.encodeLocation(Et)};let kt=J&&J.replace!=null?J.replace:void 0,Lt="PUSH";kt===!0?Lt="REPLACE":kt===!1||vt!=null&&er(vt.formMethod)&&vt.formAction===R.location.pathname+R.location.search&&(Lt="REPLACE");let Ft=J&&"preventScrollReset"in J?J.preventScrollReset===!0:void 0,Dt=(J&&J.flushSync)===!0,$t=xm({currentLocation:It,nextLocation:Et,historyAction:Lt});if($t){ds($t,{state:"blocked",location:Et,proceed(){ds($t,{state:"proceeding",proceed:void 0,reset:void 0,location:Et}),Zt(Y,J)},reset(){let ce=new Map(R.blockers);ce.set($t,Xf),Nt({blockers:ce})}});return}await Ie(Lt,Et,{submission:vt,pendingError:Tt,preventScrollReset:Ft,replace:J&&J.replace,enableViewTransition:J&&J.viewTransition,flushSync:Dt})}function ii(){yt||(yt=$I()),Uh(),Nt({revalidation:"loading"});let Y=yt.promise;return R.navigation.state==="submitting"?Y:R.navigation.state==="idle"?(Ie(R.historyAction,R.location,{startUninterruptedRevalidation:!0}),Y):(Ie(N||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:H===!0}),Y)}async function Ie(Y,J,rt){j&&j.abort(),j=null,N=Y,Q=(rt&&rt.startUninterruptedRevalidation)===!0,_l(R.location,R.matches),$=(rt&&rt.preventScrollReset)===!0,H=(rt&&rt.enableViewTransition)===!0;let gt=u||c,vt=rt&&rt.overrideNavigation,Tt=rt!=null&&rt.initialHydration&&R.matches&&R.matches.length>0&&!M?R.matches:To(gt,J,d),It=(rt&&rt.flushSync)===!0;if(Tt&&R.initialized&&!X&&II(R.location,J)&&!(rt&&rt.submission&&er(rt.submission.formMethod))){Ut(J,{matches:Tt},{flushSync:It});return}let Et=Cl(Tt,gt,J.pathname);if(Et.active&&Et.matches&&(Tt=Et.matches),!Tt){let{error:$e,notFoundMatches:he,route:ae}=vu(J.pathname);Ut(J,{matches:he,loaderData:{},errors:{[ae.id]:$e}},{flushSync:It});return}j=new AbortController;let kt=id(i.history,J,j.signal,rt&&rt.submission),Lt=new nR(i.unstable_getContext?await i.unstable_getContext():void 0),Ft;if(rt&&rt.pendingError)Ft=[Wl(Tt).route.id,{type:"error",error:rt.pendingError}];else if(rt&&rt.submission&&er(rt.submission.formMethod)){let $e=await cs(kt,J,rt.submission,Tt,Lt,Et.active,rt&&rt.initialHydration===!0,{replace:rt.replace,flushSync:It});if($e.shortCircuited)return;if($e.pendingActionResult){let[he,ae]=$e.pendingActionResult;if(tr(ae)&&Np(ae.error)&&ae.error.status===404){j=null,Ut(J,{matches:$e.matches,loaderData:{},errors:{[he]:ae.error}});return}}Tt=$e.matches||Tt,Ft=$e.pendingActionResult,vt=Qw(J,rt.submission),It=!1,Et.active=!1,kt=id(i.history,kt.url,kt.signal)}let{shortCircuited:Dt,matches:$t,loaderData:ce,errors:Le}=await gi(kt,J,Tt,Lt,Et.active,vt,rt&&rt.submission,rt&&rt.fetcherSubmission,rt&&rt.replace,rt&&rt.initialHydration===!0,It,Ft);Dt||(j=null,Ut(J,{matches:$t||Tt,...pR(Ft),loaderData:ce,errors:Le}))}async function cs(Y,J,rt,gt,vt,Tt,It,Et={}){Uh();let kt=zI(J,rt);if(Nt({navigation:kt},{flushSync:Et.flushSync===!0}),Tt){let Dt=await Tl(gt,J.pathname,Y.signal);if(Dt.type==="aborted")return{shortCircuited:!0};if(Dt.type==="error"){let $t=Wl(Dt.partialMatches).route.id;return{matches:Dt.partialMatches,pendingActionResult:[$t,{type:"error",error:Dt.error}]}}else if(Dt.matches)gt=Dt.matches;else{let{notFoundMatches:$t,error:ce,route:Le}=vu(J.pathname);return{matches:$t,pendingActionResult:[Le.id,{type:"error",error:ce}]}}}let Lt,Ft=rp(gt,J);if(!Ft.route.action&&!Ft.route.lazy)Lt={type:"error",error:Tr(405,{method:Y.method,pathname:J.pathname,routeId:Ft.route.id})};else{let Dt=vd(a,o,Y,gt,Ft,It?[]:n,vt),$t=await Wa(Y,Dt,vt,null);if(Lt=$t[Ft.route.id],!Lt){for(let ce of gt)if($t[ce.route.id]){Lt=$t[ce.route.id];break}}if(Y.signal.aborted)return{shortCircuited:!0}}if(tc(Lt)){let Dt;return Et&&Et.replace!=null?Dt=Et.replace:Dt=uR(Lt.response.headers.get("Location"),new URL(Y.url),d)===R.location.pathname+R.location.search,await kr(Y,Lt,!0,{submission:rt,replace:Dt}),{shortCircuited:!0}}if(tr(Lt)){let Dt=Wl(gt,Ft.route.id);return(Et&&Et.replace)!==!0&&(N="PUSH"),{matches:gt,pendingActionResult:[Dt.route.id,Lt,Ft.route.id]}}return{matches:gt,pendingActionResult:[Ft.route.id,Lt]}}async function gi(Y,J,rt,gt,vt,Tt,It,Et,kt,Lt,Ft,Dt){let $t=Tt||Qw(J,It),ce=It||Et||yR($t),Le=!Q&&!Lt;if(vt){if(Le){let Yn=Ye(Dt);Nt({navigation:$t,...Yn!==void 0?{actionData:Yn}:{}},{flushSync:Ft})}let Jt=await Tl(rt,J.pathname,Y.signal);if(Jt.type==="aborted")return{shortCircuited:!0};if(Jt.type==="error"){let Yn=Wl(Jt.partialMatches).route.id;return{matches:Jt.partialMatches,loaderData:{},errors:{[Yn]:Jt.error}}}else if(Jt.matches)rt=Jt.matches;else{let{error:Yn,notFoundMatches:Pr,route:Nr}=vu(J.pathname);return{matches:Pr,loaderData:{},errors:{[Nr.id]:Yn}}}}let $e=u||c,{dsMatches:he,revalidatingFetchers:ae}=sR(Y,gt,a,o,i.history,R,rt,ce,J,Lt?[]:n,Lt===!0,X,ut,lt,Z,z,$e,d,Dt);if(at=++V,!i.dataStrategy&&!he.some(Jt=>Jt.shouldLoad)&&ae.length===0){let Jt=Al();return Ut(J,{matches:rt,loaderData:{},errors:Dt&&tr(Dt[1])?{[Dt[0]]:Dt[1].error}:null,...pR(Dt),...Jt?{fetchers:new Map(R.fetchers)}:{}},{flushSync:Ft}),{shortCircuited:!0}}if(Le){let Jt={};if(!vt){Jt.navigation=$t;let Yn=Ye(Dt);Yn!==void 0&&(Jt.actionData=Yn)}ae.length>0&&(Jt.fetchers=Us(ae)),Nt(Jt,{flushSync:Ft})}ae.forEach(Jt=>{us(Jt.key),Jt.controller&&B.set(Jt.key,Jt.controller)});let Ka=()=>ae.forEach(Jt=>us(Jt.key));j&&j.signal.addEventListener("abort",Ka);let{loaderResults:ri,fetcherResults:lr}=await Sm(he,ae,Y,gt);if(Y.signal.aborted)return{shortCircuited:!0};j&&j.signal.removeEventListener("abort",Ka),ae.forEach(Jt=>B.delete(Jt.key));let yi=Gy(ri);if(yi)return await kr(Y,yi.result,!0,{replace:kt}),{shortCircuited:!0};if(yi=Gy(lr),yi)return z.add(yi.key),await kr(Y,yi.result,!0,{replace:kt}),{shortCircuited:!0};let{loaderData:Za,errors:Ja}=hR(R,rt,ri,Dt,ae,lr);Lt&&R.errors&&(Ja={...R.errors,...Ja});let Gh=Al(),cr=xl(at),Gs=Gh||cr||ae.length>0;return{matches:rt,loaderData:Za,errors:Ja,...Gs?{fetchers:new Map(R.fetchers)}:{}}}function Ye(Y){if(Y&&!tr(Y[1]))return{[Y[0]]:Y[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function Us(Y){return Y.forEach(J=>{let rt=R.fetchers.get(J.key),gt=Qf(void 0,rt?rt.data:void 0);R.fetchers.set(J.key,gt)}),new Map(R.fetchers)}async function Qa(Y,J,rt,gt){us(Y);let vt=(gt&&gt.flushSync)===!0,Tt=u||c,It=LS(R.location,R.matches,d,rt,J,gt==null?void 0:gt.relative),Et=To(Tt,It,d),kt=Cl(Et,Tt,It);if(kt.active&&kt.matches&&(Et=kt.matches),!Et){Ue(Y,J,Tr(404,{pathname:It}),{flushSync:vt});return}let{path:Lt,submission:Ft,error:Dt}=rR(!0,It,gt);if(Dt){Ue(Y,J,Dt,{flushSync:vt});return}let $t=rp(Et,Lt),ce=new nR(i.unstable_getContext?await i.unstable_getContext():void 0),Le=(gt&&gt.preventScrollReset)===!0;if(Ft&&er(Ft.formMethod)){await bu(Y,J,Lt,$t,Et,ce,kt.active,vt,Le,Ft);return}Z.set(Y,{routeId:J,path:Lt}),await $s(Y,J,Lt,$t,Et,ce,kt.active,vt,Le,Ft)}async function bu(Y,J,rt,gt,vt,Tt,It,Et,kt,Lt){Uh(),Z.delete(Y);function Ft(je){if(!je.route.action&&!je.route.lazy){let to=Tr(405,{method:Lt.formMethod,pathname:rt,routeId:J});return Ue(Y,J,to,{flushSync:Et}),!0}return!1}if(!It&&Ft(gt))return;let Dt=R.fetchers.get(Y);mi(Y,FI(Lt,Dt),{flushSync:Et});let $t=new AbortController,ce=id(i.history,rt,$t.signal,Lt);if(It){let je=await Tl(vt,rt,ce.signal,Y);if(je.type==="aborted")return;if(je.type==="error"){Ue(Y,J,je.error,{flushSync:Et});return}else if(je.matches){if(vt=je.matches,gt=rp(vt,rt),Ft(gt))return}else{Ue(Y,J,Tr(404,{pathname:rt}),{flushSync:Et});return}}B.set(Y,$t);let Le=V,$e=vd(a,o,ce,vt,gt,n,Tt),ae=(await Wa(ce,$e,Tt,Y))[gt.route.id];if(ce.signal.aborted){B.get(Y)===$t&&B.delete(Y);return}if(lt.has(Y)){if(tc(ae)||tr(ae)){mi(Y,_o(void 0));return}}else{if(tc(ae))if(B.delete(Y),at>Le){mi(Y,_o(void 0));return}else return z.add(Y),mi(Y,Qf(Lt)),kr(ce,ae,!1,{fetcherSubmission:Lt,preventScrollReset:kt});if(tr(ae)){Ue(Y,J,ae.error);return}}let Ka=R.navigation.location||R.location,ri=id(i.history,Ka,$t.signal),lr=u||c,yi=R.navigation.state!=="idle"?To(lr,R.navigation.location,d):R.matches;re(yi,"Didn't find any matches after fetcher action");let Za=++V;ct.set(Y,Za);let Ja=Qf(Lt,ae.data);R.fetchers.set(Y,Ja);let{dsMatches:Gh,revalidatingFetchers:cr}=sR(ri,Tt,a,o,i.history,R,yi,Lt,Ka,n,!1,X,ut,lt,Z,z,lr,d,[gt.route.id,ae]);cr.filter(je=>je.key!==Y).forEach(je=>{let to=je.key,Vh=R.fetchers.get(to),bi=Qf(void 0,Vh?Vh.data:void 0);R.fetchers.set(to,bi),us(to),je.controller&&B.set(to,je.controller)}),Nt({fetchers:new Map(R.fetchers)});let Gs=()=>cr.forEach(je=>us(je.key));$t.signal.addEventListener("abort",Gs);let{loaderResults:Jt,fetcherResults:Yn}=await Sm(Gh,cr,ri,Tt);if($t.signal.aborted)return;$t.signal.removeEventListener("abort",Gs),ct.delete(Y),B.delete(Y),cr.forEach(je=>B.delete(je.key));let Pr=Gy(Jt);if(Pr)return kr(ri,Pr.result,!1,{preventScrollReset:kt});if(Pr=Gy(Yn),Pr)return z.add(Pr.key),kr(ri,Pr.result,!1,{preventScrollReset:kt});let{loaderData:Nr,errors:Rl}=hR(R,yi,Jt,void 0,cr,Yn);if(R.fetchers.has(Y)){let je=_o(ae.data);R.fetchers.set(Y,je)}xl(Za),R.navigation.state==="loading"&&Za>at?(re(N,"Expected pending action"),j&&j.abort(),Ut(R.navigation.location,{matches:yi,loaderData:Nr,errors:Rl,fetchers:new Map(R.fetchers)})):(Nt({errors:Rl,loaderData:fR(R.loaderData,Nr,yi,Rl),fetchers:new Map(R.fetchers)}),X=!1)}async function $s(Y,J,rt,gt,vt,Tt,It,Et,kt,Lt){let Ft=R.fetchers.get(Y);mi(Y,Qf(Lt,Ft?Ft.data:void 0),{flushSync:Et});let Dt=new AbortController,$t=id(i.history,rt,Dt.signal);if(It){let ae=await Tl(vt,rt,$t.signal,Y);if(ae.type==="aborted")return;if(ae.type==="error"){Ue(Y,J,ae.error,{flushSync:Et});return}else if(ae.matches)vt=ae.matches,gt=rp(vt,rt);else{Ue(Y,J,Tr(404,{pathname:rt}),{flushSync:Et});return}}B.set(Y,Dt);let ce=V,Le=vd(a,o,$t,vt,gt,n,Tt),he=(await Wa($t,Le,Tt,Y))[gt.route.id];if(B.get(Y)===Dt&&B.delete(Y),!$t.signal.aborted){if(lt.has(Y)){mi(Y,_o(void 0));return}if(tc(he))if(at>ce){mi(Y,_o(void 0));return}else{z.add(Y),await kr($t,he,!1,{preventScrollReset:kt});return}if(tr(he)){Ue(Y,J,he.error);return}mi(Y,_o(he.data))}}async function kr(Y,J,rt,{submission:gt,fetcherSubmission:vt,preventScrollReset:Tt,replace:It}={}){J.response.headers.has("X-Remix-Revalidate")&&(X=!0);let Et=J.response.headers.get("Location");re(Et,"Expected a Location header on the redirect Response"),Et=uR(Et,new URL(Y.url),d);let kt=Pp(R.location,Et,{_isRedirect:!0});if(e){let Le=!1;if(J.response.headers.has("X-Remix-Reload-Document"))Le=!0;else if(Ix.test(Et)){const $e=i.history.createURL(Et);Le=$e.origin!==t.location.origin||Or($e.pathname,d)==null}if(Le){It?t.location.replace(Et):t.location.assign(Et);return}}j=null;let Lt=It===!0||J.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ft,formAction:Dt,formEncType:$t}=R.navigation;!gt&&!vt&&Ft&&Dt&&$t&&(gt=yR(R.navigation));let ce=gt||vt;if(AI.has(J.response.status)&&ce&&er(ce.formMethod))await Ie(Lt,kt,{submission:{...ce,formAction:Et},preventScrollReset:Tt||$,enableViewTransition:rt?H:void 0});else{let Le=Qw(kt,gt);await Ie(Lt,kt,{overrideNavigation:Le,fetcherSubmission:vt,preventScrollReset:Tt||$,enableViewTransition:rt?H:void 0})}}async function Wa(Y,J,rt,gt){let vt,Tt={};try{vt=await OI(p,Y,J,gt,rt,!1)}catch(It){return J.filter(Et=>Et.shouldLoad).forEach(Et=>{Tt[Et.route.id]={type:"error",error:It}}),Tt}for(let[It,Et]of Object.entries(vt))if(jI(Et)){let kt=Et.result;Tt[It]={type:"redirect",response:PI(kt,Y,It,J,d)}}else Tt[It]=await LI(Et);return Tt}async function Sm(Y,J,rt,gt){let vt=Wa(rt,Y,gt,null),Tt=Promise.all(J.map(async kt=>{if(kt.matches&&kt.match&&kt.request&&kt.controller){let Ft=(await Wa(kt.request,kt.matches,gt,kt.key))[kt.match.route.id];return{[kt.key]:Ft}}else return Promise.resolve({[kt.key]:{type:"error",error:Tr(404,{pathname:kt.path})}})})),It=await vt,Et=(await Tt).reduce((kt,Lt)=>Object.assign(kt,Lt),{});return{loaderResults:It,fetcherResults:Et}}function Uh(){X=!0,Z.forEach((Y,J)=>{B.has(J)&&ut.add(J),us(J)})}function mi(Y,J,rt={}){R.fetchers.set(Y,J),Nt({fetchers:new Map(R.fetchers)},{flushSync:(rt&&rt.flushSync)===!0})}function Ue(Y,J,rt,gt={}){let vt=Wl(R.matches,J);kn(Y),Nt({errors:{[vt.route.id]:rt},fetchers:new Map(R.fetchers)},{flushSync:(gt&&gt.flushSync)===!0})}function Lr(Y){return ot.set(Y,(ot.get(Y)||0)+1),lt.has(Y)&&lt.delete(Y),R.fetchers.get(Y)||xI}function kn(Y){let J=R.fetchers.get(Y);B.has(Y)&&!(J&&J.state==="loading"&&ct.has(Y))&&us(Y),Z.delete(Y),ct.delete(Y),z.delete(Y),lt.delete(Y),ut.delete(Y),R.fetchers.delete(Y)}function mv(Y){let J=(ot.get(Y)||0)-1;J<=0?(ot.delete(Y),lt.add(Y)):ot.set(Y,J),Nt({fetchers:new Map(R.fetchers)})}function us(Y){let J=B.get(Y);J&&(J.abort(),B.delete(Y))}function Am(Y){for(let J of Y){let rt=Lr(J),gt=_o(rt.data);R.fetchers.set(J,gt)}}function Al(){let Y=[],J=!1;for(let rt of z){let gt=R.fetchers.get(rt);re(gt,`Expected fetcher: ${rt}`),gt.state==="loading"&&(z.delete(rt),Y.push(rt),J=!0)}return Am(Y),J}function xl(Y){let J=[];for(let[rt,gt]of ct)if(gt<Y){let vt=R.fetchers.get(rt);re(vt,`Expected fetcher: ${rt}`),vt.state==="loading"&&(us(rt),ct.delete(rt),J.push(rt))}return Am(J),J.length>0}function qs(Y,J){let rt=R.blockers.get(Y)||Xf;return mt.get(Y)!==J&&mt.set(Y,J),rt}function El(Y){R.blockers.delete(Y),mt.delete(Y)}function ds(Y,J){let rt=R.blockers.get(Y)||Xf;re(rt.state==="unblocked"&&J.state==="blocked"||rt.state==="blocked"&&J.state==="blocked"||rt.state==="blocked"&&J.state==="proceeding"||rt.state==="blocked"&&J.state==="unblocked"||rt.state==="proceeding"&&J.state==="unblocked",`Invalid blocker state transition: ${rt.state} -> ${J.state}`);let gt=new Map(R.blockers);gt.set(Y,J),Nt({blockers:gt})}function xm({currentLocation:Y,nextLocation:J,historyAction:rt}){if(mt.size===0)return;mt.size>1&&hn(!1,"A router only supports one blocker at a time");let gt=Array.from(mt.entries()),[vt,Tt]=gt[gt.length-1],It=R.blockers.get(vt);if(!(It&&It.state==="proceeding")&&Tt({currentLocation:Y,nextLocation:J,historyAction:rt}))return vt}function vu(Y){let J=Tr(404,{pathname:Y}),rt=u||c,{matches:gt,route:vt}=gR(rt);return{notFoundMatches:gt,route:vt,error:J}}function Em(Y,J,rt){if(v=Y,A=J,S=rt||null,!E&&R.navigation===Xw){E=!0;let gt=_m(R.location,R.matches);gt!=null&&Nt({restoreScrollPosition:gt})}return()=>{v=null,A=null,S=null}}function wu(Y,J){return S&&S(Y,J.map(gt=>tI(gt,R.loaderData)))||Y.key}function _l(Y,J){if(v&&A){let rt=wu(Y,J);v[rt]=A()}}function _m(Y,J){if(v){let rt=wu(Y,J),gt=v[rt];if(typeof gt=="number")return gt}return null}function Cl(Y,J,rt){if(i.patchRoutesOnNavigation)if(Y){if(Object.keys(Y[0].params).length>0)return{active:!0,matches:f0(J,rt,d,!0)}}else return{active:!0,matches:f0(J,rt,d,!0)||[]};return{active:!1,matches:null}}async function Tl(Y,J,rt,gt){if(!i.patchRoutesOnNavigation)return{type:"success",matches:Y};let vt=Y;for(;;){let Tt=u==null,It=u||c,Et=o;try{await i.patchRoutesOnNavigation({signal:rt,path:J,matches:vt,fetcherKey:gt,patch:(Ft,Dt)=>{rt.aborted||aR(Ft,Dt,It,Et,a)}})}catch(Ft){return{type:"error",error:Ft,partialMatches:vt}}finally{Tt&&!rt.aborted&&(c=[...c])}if(rt.aborted)return{type:"aborted"};let kt=To(It,J,d);if(kt)return{type:"success",matches:kt};let Lt=f0(It,J,d,!0);if(!Lt||vt.length===Lt.length&&vt.every((Ft,Dt)=>Ft.route.id===Lt[Dt].route.id))return{type:"success",matches:null};vt=Lt}}function $h(Y){o={},u=lb(Y,a,void 0,o)}function qh(Y,J){let rt=u==null;aR(Y,J,u||c,o,a),rt&&(c=[...c],Nt({}))}return D={get basename(){return d},get future(){return g},get state(){return R},get routes(){return c},get window(){return t},initialize:St,subscribe:me,enableScrollRestoration:Em,navigate:Zt,fetch:Qa,revalidate:ii,createHref:Y=>i.history.createHref(Y),encodeLocation:Y=>i.history.encodeLocation(Y),getFetcher:Lr,deleteFetcher:mv,dispose:Pt,getBlocker:qs,deleteBlocker:El,patchRoutes:qh,_internalFetchControllers:B,_internalSetRoutes:$h},D}function CI(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function LS(i,t,e,n,a,o){let c,u;if(a){c=[];for(let p of t)if(c.push(p),p.route.id===a){u=p;break}}else c=t,u=t[t.length-1];let d=Nx(n||".",Px(c),Or(i.pathname,e)||i.pathname,o==="path");if(n==null&&(d.search=i.search,d.hash=i.hash),(n==null||n===""||n===".")&&u){let p=jx(d.search);if(u.route.index&&!p)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&p){let g=new URLSearchParams(d.search),y=g.getAll("index");g.delete("index"),y.filter(v=>v).forEach(v=>g.append("index",v));let b=g.toString();d.search=b?`?${b}`:""}}return e!=="/"&&(d.pathname=d.pathname==="/"?e:Bs([e,d.pathname])),gl(d)}function rR(i,t,e){if(!e||!CI(e))return{path:t};if(e.formMethod&&!BI(e.formMethod))return{path:t,error:Tr(405,{method:e.formMethod})};let n=()=>({path:t,error:Tr(400,{type:"invalid-body"})}),o=(e.formMethod||"get").toUpperCase(),c=kD(t);if(e.body!==void 0){if(e.formEncType==="text/plain"){if(!er(o))return n();let y=typeof e.body=="string"?e.body:e.body instanceof FormData||e.body instanceof URLSearchParams?Array.from(e.body.entries()).reduce((b,[v,S])=>`${b}${v}=${S}
`,""):String(e.body);return{path:t,submission:{formMethod:o,formAction:c,formEncType:e.formEncType,formData:void 0,json:void 0,text:y}}}else if(e.formEncType==="application/json"){if(!er(o))return n();try{let y=typeof e.body=="string"?JSON.parse(e.body):e.body;return{path:t,submission:{formMethod:o,formAction:c,formEncType:e.formEncType,formData:void 0,json:y,text:void 0}}}catch{return n()}}}re(typeof FormData=="function","FormData is not available in this environment");let u,d;if(e.formData)u=IS(e.formData),d=e.formData;else if(e.body instanceof FormData)u=IS(e.body),d=e.body;else if(e.body instanceof URLSearchParams)u=e.body,d=dR(u);else if(e.body==null)u=new URLSearchParams,d=new FormData;else try{u=new URLSearchParams(e.body),d=dR(u)}catch{return n()}let p={formMethod:o,formAction:c,formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(er(p.formMethod))return{path:t,submission:p};let g=Sl(t);return i&&g.search&&jx(g.search)&&u.append("index",""),g.search=`?${u}`,{path:gl(g),submission:p}}function sR(i,t,e,n,a,o,c,u,d,p,g,y,b,v,S,A,E,x,M){var G;let C=M?tr(M[1])?M[1].error:M[1].data:void 0,_=a.createURL(o.location),D=a.createURL(d),R;if(g&&o.errors){let Q=Object.keys(o.errors)[0];R=c.findIndex(X=>X.route.id===Q)}else if(M&&tr(M[1])){let Q=M[0];R=c.findIndex(X=>X.route.id===Q)-1}let N=M?M[1].statusCode:void 0,$=N&&N>=400,j={currentUrl:_,currentParams:((G=o.matches[0])==null?void 0:G.params)||{},nextUrl:D,nextParams:c[0].params,...u,actionResult:C,actionStatus:N},H=c.map((Q,X)=>{let{route:ut}=Q,B=null;if(R!=null&&X>R?B=!1:ut.lazy?B=!0:ut.loader==null?B=!1:g?B=PS(ut,o.loaderData,o.errors):TI(o.loaderData,o.matches[X],Q)&&(B=!0),B!==null)return NS(e,n,i,Q,p,t,B);let V=$?!1:y||_.pathname+_.search===D.pathname+D.search||_.search!==D.search||RI(o.matches[X],Q),at={...j,defaultShouldRevalidate:V},ct=db(Q,at);return NS(e,n,i,Q,p,t,ct,at)}),F=[];return S.forEach((Q,X)=>{if(g||!c.some(Z=>Z.route.id===Q.routeId)||v.has(X))return;let ut=To(E,Q.path,x);if(!ut){F.push({key:X,routeId:Q.routeId,path:Q.path,matches:null,match:null,request:null,controller:null});return}if(A.has(X))return;let B=o.fetchers.get(X),V=rp(ut,Q.path),at=new AbortController,ct=id(a,Q.path,at.signal),z=null;if(b.has(X))b.delete(X),z=vd(e,n,ct,ut,V,p,t);else if(B&&B.state!=="idle"&&B.data===void 0)y&&(z=vd(e,n,ct,ut,V,p,t));else{let Z={...j,defaultShouldRevalidate:$?!1:y};db(V,Z)&&(z=vd(e,n,ct,ut,V,p,t,Z))}z&&F.push({key:X,routeId:Q.routeId,path:Q.path,matches:z,match:V,request:ct,controller:at})}),{dsMatches:H,revalidatingFetchers:F}}function PS(i,t,e){if(i.lazy)return!0;if(!i.loader)return!1;let n=t!=null&&t[i.id]!==void 0,a=e!=null&&e[i.id]!==void 0;return!n&&a?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!a}function TI(i,t,e){let n=!t||e.route.id!==t.route.id,a=!i.hasOwnProperty(e.route.id);return n||a}function RI(i,t){let e=i.route.path;return i.pathname!==t.pathname||e!=null&&e.endsWith("*")&&i.params["*"]!==t.params["*"]}function db(i,t){if(i.route.shouldRevalidate){let e=i.route.shouldRevalidate(t);if(typeof e=="boolean")return e}return t.defaultShouldRevalidate}function aR(i,t,e,n,a){let o;if(i){let d=n[i];re(d,`No route found to patch children into: routeId = ${i}`),d.children||(d.children=[]),o=d.children}else o=e;let c=t.filter(d=>!o.some(p=>TD(d,p))),u=lb(c,a,[i||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...u)}function TD(i,t){return"id"in i&&"id"in t&&i.id===t.id?!0:i.index===t.index&&i.path===t.path&&i.caseSensitive===t.caseSensitive?(!i.children||i.children.length===0)&&(!t.children||t.children.length===0)?!0:i.children.every((e,n)=>{var a;return(a=t.children)==null?void 0:a.some(o=>TD(e,o))}):!1}var oR=new WeakMap,RD=({key:i,route:t,manifest:e,mapRouteProperties:n})=>{let a=e[t.id];if(re(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let o=a.lazy[i];if(!o)return;let c=oR.get(a);c||(c={},oR.set(a,c));let u=c[i];if(u)return u;let d=(async()=>{let p=W6(i),y=a[i]!==void 0&&i!=="hasErrorBoundary";if(p)hn(!p,"Route property "+i+" is not a supported lazy route property. This property will be ignored."),c[i]=Promise.resolve();else if(y)hn(!1,`Route "${a.id}" has a static property "${i}" defined. The lazy property will be ignored.`);else{let b=await o();b!=null&&(Object.assign(a,{[i]:b}),Object.assign(a,n(a)))}typeof a.lazy=="object"&&(a.lazy[i]=void 0,Object.values(a.lazy).every(b=>b===void 0)&&(a.lazy=void 0))})();return c[i]=d,d},lR=new WeakMap;function MI(i,t,e,n,a){let o=e[i.id];if(re(o,"No route found in manifest"),!i.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof i.lazy=="function"){let g=lR.get(o);if(g)return{lazyRoutePromise:g,lazyHandlerPromise:g};let y=(async()=>{re(typeof i.lazy=="function","No lazy route function found");let b=await i.lazy(),v={};for(let S in b){let A=b[S];if(A===void 0)continue;let E=Z6(S),M=o[S]!==void 0&&S!=="hasErrorBoundary";E?hn(!E,"Route property "+S+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?hn(!M,`Route "${o.id}" has a static property "${S}" defined but its lazy function is also returning a value for this property. The lazy route property "${S}" will be ignored.`):v[S]=A}Object.assign(o,v),Object.assign(o,{...n(o),lazy:void 0})})();return lR.set(o,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let c=Object.keys(i.lazy),u=[],d;for(let g of c){if(a&&a.includes(g))continue;let y=RD({key:g,route:i,manifest:e,mapRouteProperties:n});y&&(u.push(y),g===t&&(d=y))}let p=u.length>0?Promise.all(u).then(()=>{}):void 0;return p==null||p.catch(()=>{}),d==null||d.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:d}}async function cR(i){let t=i.matches.filter(a=>a.shouldLoad),e={};return(await Promise.all(t.map(a=>a.resolve()))).forEach((a,o)=>{e[t[o].route.id]=a}),e}async function DI(i){return i.matches.some(t=>t.route.unstable_middleware)?MD(i,!1,()=>cR(i),(t,e)=>({[e]:{type:"error",result:t}})):cR(i)}async function MD(i,t,e,n){let{matches:a,request:o,params:c,context:u}=i,d={handlerResult:void 0};try{let p=a.flatMap(y=>y.route.unstable_middleware?y.route.unstable_middleware.map(b=>[y.route.id,b]):[]),g=await DD({request:o,params:c,context:u},p,t,d,e);return t?g:d.handlerResult}catch(p){if(!d.middlewareError)throw p;let g=await n(d.middlewareError.error,d.middlewareError.routeId);return d.handlerResult?Object.assign(d.handlerResult,g):g}}async function DD(i,t,e,n,a,o=0){let{request:c}=i;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let u=t[o];if(!u)return n.handlerResult=await a(),n.handlerResult;let[d,p]=u,g=!1,y,b=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");g=!0,await DD(i,t,e,n,a,o+1)};try{let v=await p({request:i.request,params:i.params,context:i.context},b);return g?v===void 0?y:v:b()}catch(v){throw n.middlewareError?n.middlewareError.error!==v&&(n.middlewareError={routeId:d,error:v}):n.middlewareError={routeId:d,error:v},v}}function OD(i,t,e,n,a){let o=RD({key:"unstable_middleware",route:n.route,manifest:t,mapRouteProperties:i}),c=MI(n.route,er(e.method)?"action":"loader",t,i,a);return{middleware:o,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function NS(i,t,e,n,a,o,c,u=null){let d=!1,p=OD(i,t,e,n,a);return{...n,_lazyPromises:p,shouldLoad:c,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(g){return d=!0,u?typeof g=="boolean"?db(n,{...u,defaultShouldRevalidate:g}):db(n,u):c},resolve(g){return d||c||g&&e.method==="GET"&&(n.route.lazy||n.route.loader)?kI({request:e,match:n,lazyHandlerPromise:p==null?void 0:p.handler,lazyRoutePromise:p==null?void 0:p.route,handlerOverride:g,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function vd(i,t,e,n,a,o,c,u=null){return n.map(d=>d.route.id!==a.route.id?{...d,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:OD(i,t,e,d,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:NS(i,t,e,d,o,c,!0,u))}async function OI(i,t,e,n,a,o){e.some(p=>{var g;return(g=p._lazyPromises)==null?void 0:g.middleware})&&await Promise.all(e.map(p=>{var g;return(g=p._lazyPromises)==null?void 0:g.middleware}));let c={request:t,params:e[0].params,context:a,matches:e},d=await i({...c,fetcherKey:n,unstable_runClientMiddleware:p=>{let g=c;return MD(g,!1,()=>p({...g,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(y,b)=>({[b]:{type:"error",result:y}}))}});try{await Promise.all(e.flatMap(p=>{var g,y;return[(g=p._lazyPromises)==null?void 0:g.handler,(y=p._lazyPromises)==null?void 0:y.route]}))}catch{}return d}async function kI({request:i,match:t,lazyHandlerPromise:e,lazyRoutePromise:n,handlerOverride:a,scopedContext:o}){let c,u,d=er(i.method),p=d?"action":"loader",g=y=>{let b,v=new Promise((E,x)=>b=x);u=()=>b(),i.signal.addEventListener("abort",u);let S=E=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${t.route.id}]`)):y({request:i,params:t.params,context:o},...E!==void 0?[E]:[]),A=(async()=>{try{return{type:"data",result:await(a?a(x=>S(x)):S())}}catch(E){return{type:"error",result:E}}})();return Promise.race([A,v])};try{let y=d?t.route.action:t.route.loader;if(e||n)if(y){let b,[v]=await Promise.all([g(y).catch(S=>{b=S}),e,n]);if(b!==void 0)throw b;c=v}else{await e;let b=d?t.route.action:t.route.loader;if(b)[c]=await Promise.all([g(b),n]);else if(p==="action"){let v=new URL(i.url),S=v.pathname+v.search;throw Tr(405,{method:i.method,pathname:S,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(y)c=await g(y);else{let b=new URL(i.url),v=b.pathname+b.search;throw Tr(404,{pathname:v})}}catch(y){return{type:"error",result:y}}finally{u&&i.signal.removeEventListener("abort",u)}return c}async function LI(i){var n,a,o,c,u,d;let{result:t,type:e}=i;if(LD(t)){let p;try{let g=t.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?t.body==null?p=null:p=await t.json():p=await t.text()}catch(g){return{type:"error",error:g}}return e==="error"?{type:"error",error:new ub(t.status,t.statusText,p),statusCode:t.status,headers:t.headers}:{type:"data",data:p,statusCode:t.status,headers:t.headers}}return e==="error"?mR(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new ub(((o=t.init)==null?void 0:o.status)||500,void 0,t.data),statusCode:Np(t)?t.status:void 0,headers:(c=t.init)!=null&&c.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:Np(t)?t.status:void 0}:mR(t)?{type:"data",data:t.data,statusCode:(u=t.init)==null?void 0:u.status,headers:(d=t.init)!=null&&d.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function PI(i,t,e,n,a){let o=i.headers.get("Location");if(re(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ix.test(o)){let c=n.slice(0,n.findIndex(u=>u.route.id===e)+1);o=LS(new URL(t.url),c,a,o),i.headers.set("Location",o)}return i}function uR(i,t,e){if(Ix.test(i)){let n=i,a=n.startsWith("//")?new URL(t.protocol+n):new URL(n),o=Or(a.pathname,e)!=null;if(a.origin===t.origin&&o)return a.pathname+a.search+a.hash}return i}function id(i,t,e,n){let a=i.createURL(kD(t)).toString(),o={signal:e};if(n&&er(n.formMethod)){let{formMethod:c,formEncType:u}=n;o.method=c.toUpperCase(),u==="application/json"?(o.headers=new Headers({"Content-Type":u}),o.body=JSON.stringify(n.json)):u==="text/plain"?o.body=n.text:u==="application/x-www-form-urlencoded"&&n.formData?o.body=IS(n.formData):o.body=n.formData}return new Request(a,o)}function IS(i){let t=new URLSearchParams;for(let[e,n]of i.entries())t.append(e,typeof n=="string"?n:n.name);return t}function dR(i){let t=new FormData;for(let[e,n]of i.entries())t.append(e,n);return t}function NI(i,t,e,n=!1,a=!1){let o={},c=null,u,d=!1,p={},g=e&&tr(e[1])?e[1].error:void 0;return i.forEach(y=>{if(!(y.route.id in t))return;let b=y.route.id,v=t[b];if(re(!tc(v),"Cannot handle redirect results in processLoaderData"),tr(v)){let S=v.error;if(g!==void 0&&(S=g,g=void 0),c=c||{},a)c[b]=S;else{let A=Wl(i,b);c[A.route.id]==null&&(c[A.route.id]=S)}n||(o[b]=CD),d||(d=!0,u=Np(v.error)?v.error.status:500),v.headers&&(p[b]=v.headers)}else o[b]=v.data,v.statusCode&&v.statusCode!==200&&!d&&(u=v.statusCode),v.headers&&(p[b]=v.headers)}),g!==void 0&&e&&(c={[e[0]]:g},e[2]&&(o[e[2]]=void 0)),{loaderData:o,errors:c,statusCode:u||200,loaderHeaders:p}}function hR(i,t,e,n,a,o){let{loaderData:c,errors:u}=NI(t,e,n);return a.filter(d=>!d.matches||d.matches.some(p=>p.shouldLoad)).forEach(d=>{let{key:p,match:g,controller:y}=d,b=o[p];if(re(b,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(tr(b)){let v=Wl(i.matches,g==null?void 0:g.route.id);u&&u[v.route.id]||(u={...u,[v.route.id]:b.error}),i.fetchers.delete(p)}else if(tc(b))re(!1,"Unhandled fetcher revalidation redirect");else{let v=_o(b.data);i.fetchers.set(p,v)}}),{loaderData:c,errors:u}}function fR(i,t,e,n){let a=Object.entries(t).filter(([,o])=>o!==CD).reduce((o,[c,u])=>(o[c]=u,o),{});for(let o of e){let c=o.route.id;if(!t.hasOwnProperty(c)&&i.hasOwnProperty(c)&&o.route.loader&&(a[c]=i[c]),n&&n.hasOwnProperty(c))break}return a}function pR(i){return i?tr(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Wl(i,t){return(t?i.slice(0,i.findIndex(n=>n.route.id===t)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function gR(i){let t=i.length===1?i[0]:i.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Tr(i,{pathname:t,routeId:e,method:n,type:a,message:o}={}){let c="Unknown Server Error",u="Unknown @remix-run/router error";return i===400?(c="Bad Request",n&&t&&e?u=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${e}", so there is no way to handle the request.`:a==="invalid-body"&&(u="Unable to encode submission body")):i===403?(c="Forbidden",u=`Route "${e}" does not match URL "${t}"`):i===404?(c="Not Found",u=`No route matches URL "${t}"`):i===405&&(c="Method Not Allowed",n&&t&&e?u=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${e}", so there is no way to handle the request.`:n&&(u=`Invalid request method "${n.toUpperCase()}"`)),new ub(i||500,c,new Error(u),!0)}function Gy(i){let t=Object.entries(i);for(let e=t.length-1;e>=0;e--){let[n,a]=t[e];if(tc(a))return{key:n,result:a}}}function kD(i){let t=typeof i=="string"?Sl(i):i;return gl({...t,hash:""})}function II(i,t){return i.pathname!==t.pathname||i.search!==t.search?!1:i.hash===""?t.hash!=="":i.hash===t.hash?!0:t.hash!==""}function jI(i){return LD(i.result)&&SI.has(i.result.status)}function tr(i){return i.type==="error"}function tc(i){return(i&&i.type)==="redirect"}function mR(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function LD(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function BI(i){return wI.has(i.toUpperCase())}function er(i){return bI.has(i.toUpperCase())}function jx(i){return new URLSearchParams(i).getAll("index").some(t=>t==="")}function rp(i,t){let e=typeof t=="string"?Sl(t).search:t.search;if(i[i.length-1].route.index&&jx(e||""))return i[i.length-1];let n=xD(i);return n[n.length-1]}function yR(i){let{formMethod:t,formAction:e,formEncType:n,text:a,formData:o,json:c}=i;if(!(!t||!e||!n)){if(a!=null)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:t,formAction:e,formEncType:n,formData:o,json:void 0,text:void 0};if(c!==void 0)return{formMethod:t,formAction:e,formEncType:n,formData:void 0,json:c,text:void 0}}}function Qw(i,t){return t?{state:"loading",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function zI(i,t){return{state:"submitting",location:i,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Qf(i,t){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function FI(i,t){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:t?t.data:void 0}}function _o(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function HI(i,t){try{let e=i.sessionStorage.getItem(_D);if(e){let n=JSON.parse(e);for(let[a,o]of Object.entries(n||{}))o&&Array.isArray(o)&&t.set(a,new Set(o||[]))}}catch{}}function UI(i,t){if(t.size>0){let e={};for(let[n,a]of t)e[n]=[...a];try{i.sessionStorage.setItem(_D,JSON.stringify(e))}catch(n){hn(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function $I(){let i,t,e=new Promise((n,a)=>{i=async o=>{n(o);try{await e}catch{}},t=async o=>{a(o);try{await e}catch{}}});return{promise:e,resolve:i,reject:t}}var gu=U.createContext(null);gu.displayName="DataRouter";var dm=U.createContext(null);dm.displayName="DataRouterState";var Bx=U.createContext({isTransitioning:!1});Bx.displayName="ViewTransition";var PD=U.createContext(new Map);PD.displayName="Fetchers";var qI=U.createContext(null);qI.displayName="Await";var Fs=U.createContext(null);Fs.displayName="Navigation";var sv=U.createContext(null);sv.displayName="Location";var ls=U.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var zx=U.createContext(null);zx.displayName="RouteError";function GI(i,{relative:t}={}){re(hm(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=U.useContext(Fs),{hash:a,pathname:o,search:c}=fm(i,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:Bs([e,o])),n.createHref({pathname:u,search:c,hash:a})}function hm(){return U.useContext(sv)!=null}function Hs(){return re(hm(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(sv).location}var ND="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ID(i){U.useContext(Fs).static||U.useLayoutEffect(i)}function Hh(){let{isDataRoute:i}=U.useContext(ls);return i?aj():VI()}function VI(){re(hm(),"useNavigate() may be used only in the context of a <Router> component.");let i=U.useContext(gu),{basename:t,navigator:e}=U.useContext(Fs),{matches:n}=U.useContext(ls),{pathname:a}=Hs(),o=JSON.stringify(Px(n)),c=U.useRef(!1);return ID(()=>{c.current=!0}),U.useCallback((d,p={})=>{if(hn(c.current,ND),!c.current)return;if(typeof d=="number"){e.go(d);return}let g=Nx(d,JSON.parse(o),a,p.relative==="path");i==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Bs([t,g.pathname])),(p.replace?e.replace:e.push)(g,p.state,p)},[t,e,o,a,i])}var YI=U.createContext(null);function XI(i){let t=U.useContext(ls).outlet;return t&&U.createElement(YI.Provider,{value:i},t)}function XU(){let{matches:i}=U.useContext(ls),t=i[i.length-1];return t?t.params:{}}function fm(i,{relative:t}={}){let{matches:e}=U.useContext(ls),{pathname:n}=Hs(),a=JSON.stringify(Px(e));return U.useMemo(()=>Nx(i,JSON.parse(a),n,t==="path"),[i,a,n,t])}function QI(i,t,e,n){re(hm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=U.useContext(Fs),{matches:c}=U.useContext(ls),u=c[c.length-1],d=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let M=y&&y.path||"";jD(p,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let b=Hs(),v;v=b;let S=v.pathname||"/",A=S;if(g!=="/"){let M=g.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(M.length).join("/")}let E=!o&&e&&e.matches&&e.matches.length>0?e.matches:To(i,{pathname:A});return hn(y||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),hn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),tj(E&&E.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:Bs([g,a.encodeLocation?a.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:Bs([g,a.encodeLocation?a.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),c,e,n)}function WI(){let i=sj(),t=Np(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=U.createElement(U.Fragment,null,U.createElement("p",null,"💿 Hey developer 👋"),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:o},"ErrorBoundary")," or"," ",U.createElement("code",{style:o},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),e?U.createElement("pre",{style:a},e):null,c)}var KI=U.createElement(WI,null),ZI=class extends U.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){console.error("React Router caught the following error during render",i,t)}render(){return this.state.error!==void 0?U.createElement(ls.Provider,{value:this.props.routeContext},U.createElement(zx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JI({routeContext:i,match:t,children:e}){let n=U.useContext(gu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(ls.Provider,{value:i},e)}function tj(i,t=[],e=null,n=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let a=i,o=e==null?void 0:e.errors;if(o!=null){let d=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);re(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(e)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:g,errors:y}=e,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,p,g)=>{let y,b=!1,v=null,S=null;e&&(y=o&&p.route.id?o[p.route.id]:void 0,v=p.route.errorElement||KI,c&&(u<0&&g===0?(jD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):u===g&&(b=!0,S=p.route.hydrateFallbackElement||null)));let A=t.concat(a.slice(0,g+1)),E=()=>{let x;return y?x=v:b?x=S:p.route.Component?x=U.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=d,U.createElement(JI,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:e!=null},children:x})};return e&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?U.createElement(ZI,{location:e.location,revalidation:e.revalidation,component:v,error:y,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):E()},null)}function Fx(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ej(i){let t=U.useContext(gu);return re(t,Fx(i)),t}function nj(i){let t=U.useContext(dm);return re(t,Fx(i)),t}function ij(i){let t=U.useContext(ls);return re(t,Fx(i)),t}function Hx(i){let t=ij(i),e=t.matches[t.matches.length-1];return re(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function rj(){return Hx("useRouteId")}function sj(){var n;let i=U.useContext(zx),t=nj("useRouteError"),e=Hx("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function aj(){let{router:i}=ej("useNavigate"),t=Hx("useNavigate"),e=U.useRef(!1);return ID(()=>{e.current=!0}),U.useCallback(async(a,o={})=>{hn(e.current,ND),e.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:t,...o}))},[i,t])}var bR={};function jD(i,t,e){!t&&!bR[i]&&(bR[i]=!0,hn(!1,e))}var vR={};function wR(i,t){!i&&!vR[t]&&(vR[t]=!0,console.warn(t))}function oj(i){let t={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&hn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:U.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&hn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:U.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&hn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:U.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),t}var lj=["HydrateFallback","hydrateFallbackElement"],cj=class{constructor(){this.status="pending",this.promise=new Promise((i,t)=>{this.resolve=e=>{this.status==="pending"&&(this.status="resolved",i(e))},this.reject=e=>{this.status==="pending"&&(this.status="rejected",t(e))}})}};function uj({router:i,flushSync:t}){let[e,n]=U.useState(i.state),[a,o]=U.useState(),[c,u]=U.useState({isTransitioning:!1}),[d,p]=U.useState(),[g,y]=U.useState(),[b,v]=U.useState(),S=U.useRef(new Map),A=U.useCallback((C,{deletedFetchers:_,flushSync:D,viewTransitionOpts:R})=>{C.fetchers.forEach(($,j)=>{$.data!==void 0&&S.current.set(j,$.data)}),_.forEach($=>S.current.delete($)),wR(D===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(wR(R==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!R||!N){t&&D?t(()=>n(C)):U.startTransition(()=>n(C));return}if(t&&D){t(()=>{g&&(d&&d.resolve(),g.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let $=i.window.document.startViewTransition(()=>{t(()=>n(C))});$.finished.finally(()=>{t(()=>{p(void 0),y(void 0),o(void 0),u({isTransitioning:!1})})}),t(()=>y($));return}g?(d&&d.resolve(),g.skipTransition(),v({state:C,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(o(C),u({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[i.window,t,g,d]);U.useLayoutEffect(()=>i.subscribe(A),[i,A]),U.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new cj)},[c]),U.useEffect(()=>{if(d&&a&&i.window){let C=a,_=d.promise,D=i.window.document.startViewTransition(async()=>{U.startTransition(()=>n(C)),await _});D.finished.finally(()=>{p(void 0),y(void 0),o(void 0),u({isTransitioning:!1})}),y(D)}},[a,d,i.window]),U.useEffect(()=>{d&&a&&e.location.key===a.location.key&&d.resolve()},[d,g,e.location,a]),U.useEffect(()=>{!c.isTransitioning&&b&&(o(b.state),u({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),v(void 0))},[c.isTransitioning,b]);let E=U.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:C=>i.navigate(C),push:(C,_,D)=>i.navigate(C,{state:_,preventScrollReset:D==null?void 0:D.preventScrollReset}),replace:(C,_,D)=>i.navigate(C,{replace:!0,state:_,preventScrollReset:D==null?void 0:D.preventScrollReset})}),[i]),x=i.basename||"/",M=U.useMemo(()=>({router:i,navigator:E,static:!1,basename:x}),[i,E,x]);return U.createElement(U.Fragment,null,U.createElement(gu.Provider,{value:M},U.createElement(dm.Provider,{value:e},U.createElement(PD.Provider,{value:S.current},U.createElement(Bx.Provider,{value:c},U.createElement(fj,{basename:x,location:e.location,navigationType:e.historyAction,navigator:E},U.createElement(dj,{routes:i.routes,future:i.future,state:e})))))),null)}var dj=U.memo(hj);function hj({routes:i,future:t,state:e}){return QI(i,void 0,e,t)}function QU(i){return XI(i.context)}function fj({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1}){re(!hm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),u=U.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof e=="string"&&(e=Sl(e));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:b="default"}=e,v=U.useMemo(()=>{let S=Or(d,c);return S==null?null:{location:{pathname:S,search:p,hash:g,state:y,key:b},navigationType:n}},[c,d,p,g,y,b,n]);return hn(v!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:U.createElement(Fs.Provider,{value:u},U.createElement(sv.Provider,{children:t,value:v}))}var p0="get",g0="application/x-www-form-urlencoded";function av(i){return i!=null&&typeof i.tagName=="string"}function pj(i){return av(i)&&i.tagName.toLowerCase()==="button"}function gj(i){return av(i)&&i.tagName.toLowerCase()==="form"}function mj(i){return av(i)&&i.tagName.toLowerCase()==="input"}function yj(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function bj(i,t){return i.button===0&&(!t||t==="_self")&&!yj(i)}var Vy=null;function vj(){if(Vy===null)try{new FormData(document.createElement("form"),0),Vy=!1}catch{Vy=!0}return Vy}var wj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ww(i){return i!=null&&!wj.has(i)?(hn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${g0}"`),null):i}function Sj(i,t){let e,n,a,o,c;if(gj(i)){let u=i.getAttribute("action");n=u?Or(u,t):null,e=i.getAttribute("method")||p0,a=Ww(i.getAttribute("enctype"))||g0,o=new FormData(i)}else if(pj(i)||mj(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=i.getAttribute("formaction")||u.getAttribute("action");if(n=d?Or(d,t):null,e=i.getAttribute("formmethod")||u.getAttribute("method")||p0,a=Ww(i.getAttribute("formenctype"))||Ww(u.getAttribute("enctype"))||g0,o=new FormData(u,i),!vj()){let{name:p,type:g,value:y}=i;if(g==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,y)}}else{if(av(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=p0,n=null,a=g0,c=i}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:c}}function Ux(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}async function Aj(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xj(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Ej(i,t,e){let n=await Promise.all(i.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await Aj(o,e);return c.links?c.links():[]}return[]}));return Rj(n.flat(1).filter(xj).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function SR(i,t,e,n,a,o){let c=(d,p)=>e[p]?d.route.id!==e[p].route.id:!0,u=(d,p)=>{var g;return e[p].pathname!==d.pathname||((g=e[p].route.path)==null?void 0:g.endsWith("*"))&&e[p].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,p)=>c(d,p)||u(d,p)):o==="data"?t.filter((d,p)=>{var y;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((y=e[0])==null?void 0:y.params)||{},nextUrl:new URL(i,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function _j(i,t,{includeHydrateFallback:e}={}){return Cj(i.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function Cj(i){return[...new Set(i)]}function Tj(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function Rj(i,t){let e=new Set;return new Set(t),i.reduce((n,a)=>{let o=JSON.stringify(Tj(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}var Mj=new Set([100,101,204,205]);function Dj(i,t){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":t&&Or(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function BD(){let i=U.useContext(gu);return Ux(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Oj(){let i=U.useContext(dm);return Ux(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var $x=U.createContext(void 0);$x.displayName="FrameworkContext";function zD(){let i=U.useContext($x);return Ux(i,"You must render this element inside a <HydratedRouter> element"),i}function kj(i,t){let e=U.useContext($x),[n,a]=U.useState(!1),[o,c]=U.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=U.useRef(null);U.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let A=x=>{x.forEach(M=>{c(M.isIntersecting)})},E=new IntersectionObserver(A,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[i]),U.useEffect(()=>{if(n){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[n]);let v=()=>{a(!0)},S=()=>{a(!1),c(!1)};return e?i!=="intent"?[o,b,{}]:[o,b,{onFocus:Wf(u,v),onBlur:Wf(d,S),onMouseEnter:Wf(p,v),onMouseLeave:Wf(g,S),onTouchStart:Wf(y,v)}]:[!1,b,{}]}function Wf(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function Lj({page:i,...t}){let{router:e}=BD(),n=U.useMemo(()=>To(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?U.createElement(Nj,{page:i,matches:n,...t}):null}function Pj(i){let{manifest:t,routeModules:e}=zD(),[n,a]=U.useState([]);return U.useEffect(()=>{let o=!1;return Ej(i,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[i,t,e]),n}function Nj({page:i,matches:t,...e}){let n=Hs(),{manifest:a,routeModules:o}=zD(),{basename:c}=BD(),{loaderData:u,matches:d}=Oj(),p=U.useMemo(()=>SR(i,t,d,a,n,"data"),[i,t,d,a,n]),g=U.useMemo(()=>SR(i,t,d,a,n,"assets"),[i,t,d,a,n]),y=U.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let S=new Set,A=!1;if(t.forEach(x=>{var C;let M=a.routes[x.route.id];!M||!M.hasLoader||(!p.some(_=>_.route.id===x.route.id)&&x.route.id in u&&((C=o[x.route.id])!=null&&C.shouldRevalidate)||M.hasClientLoader?A=!0:S.add(x.route.id))}),S.size===0)return[];let E=Dj(i,c);return A&&S.size>0&&E.searchParams.set("_routes",t.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[E.pathname+E.search]},[c,u,n,a,p,t,i,o]),b=U.useMemo(()=>_j(g,a),[g,a]),v=Pj(g);return U.createElement(U.Fragment,null,y.map(S=>U.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),b.map(S=>U.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),v.map(({key:S,link:A})=>U.createElement("link",{key:S,...A})))}function Ij(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var FD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FD&&(window.__reactRouterVersion="7.5.3")}catch{}function jj(i,t){return _I({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:V6({window:t==null?void 0:t.window}),hydrationData:Bj(),routes:i,mapRouteProperties:oj,hydrationRouteProperties:lj,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function Bj(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:zj(i.errors)}),i}function zj(i){if(!i)return null;let t=Object.entries(i),e={};for(let[n,a]of t)if(a&&a.__type==="RouteErrorResponse")e[n]=new ub(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let c=new o(a.message);c.stack="",e[n]=c}catch{}}if(e[n]==null){let o=new Error(a.message);o.stack="",e[n]=o}}else e[n]=a;return e}var HD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UD=U.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:u,target:d,to:p,preventScrollReset:g,viewTransition:y,...b},v){let{basename:S}=U.useContext(Fs),A=typeof p=="string"&&HD.test(p),E,x=!1;if(typeof p=="string"&&A&&(E=p,FD))try{let j=new URL(window.location.href),H=p.startsWith("//")?new URL(j.protocol+p):new URL(p),F=Or(H.pathname,S);H.origin===j.origin&&F!=null?p=F+H.search+H.hash:x=!0}catch{hn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=GI(p,{relative:a}),[C,_,D]=kj(n,b),R=$j(p,{replace:c,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y});function N(j){t&&t(j),j.defaultPrevented||R(j)}let $=U.createElement("a",{...b,...D,href:E||M,onClick:x||o?t:N,ref:Ij(v,_),target:d,"data-discover":!A&&e==="render"?"true":void 0});return C&&!A?U.createElement(U.Fragment,null,$,U.createElement(Lj,{page:M})):$});UD.displayName="Link";var Fj=U.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:u,children:d,...p},g){let y=fm(c,{relative:p.relative}),b=Hs(),v=U.useContext(dm),{navigator:S,basename:A}=U.useContext(Fs),E=v!=null&&Xj(y)&&u===!0,x=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,M=b.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;e||(M=M.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&A&&(C=Or(C,A)||C);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=M===x||!a&&M.startsWith(x)&&M.charAt(_)==="/",R=C!=null&&(C===x||!a&&C.startsWith(x)&&C.charAt(x.length)==="/"),N={isActive:D,isPending:R,isTransitioning:E},$=D?t:void 0,j;typeof n=="function"?j=n(N):j=[n,D?"active":null,R?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let H=typeof o=="function"?o(N):o;return U.createElement(UD,{...p,"aria-current":$,className:j,ref:g,style:H,to:c,viewTransition:u},typeof d=="function"?d(N):d)});Fj.displayName="NavLink";var Hj=U.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:c=p0,action:u,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...b},v)=>{let S=Vj(),A=Yj(u,{relative:p}),E=c.toLowerCase()==="get"?"get":"post",x=typeof u=="string"&&HD.test(u),M=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let _=C.nativeEvent.submitter,D=(_==null?void 0:_.getAttribute("formmethod"))||c;S(_||C.currentTarget,{fetcherKey:t,method:D,navigate:e,replace:a,state:o,relative:p,preventScrollReset:g,viewTransition:y})};return U.createElement("form",{ref:v,method:E,action:A,onSubmit:n?d:M,...b,"data-discover":!x&&i==="render"?"true":void 0})});Hj.displayName="Form";function Uj(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $D(i){let t=U.useContext(gu);return re(t,Uj(i)),t}function $j(i,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:c}={}){let u=Hh(),d=Hs(),p=fm(i,{relative:o});return U.useCallback(g=>{if(bj(g,t)){g.preventDefault();let y=e!==void 0?e:gl(d)===gl(p);u(i,{replace:y,state:n,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,p,e,n,t,i,a,o,c])}var qj=0,Gj=()=>`__${String(++qj)}__`;function Vj(){let{router:i}=$D("useSubmit"),{basename:t}=U.useContext(Fs),e=rj();return U.useCallback(async(n,a={})=>{let{action:o,method:c,encType:u,formData:d,body:p}=Sj(n,t);if(a.navigate===!1){let g=a.fetcherKey||Gj();await i.fetch(g,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await i.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,t,e])}function Yj(i,{relative:t}={}){let{basename:e}=U.useContext(Fs),n=U.useContext(ls);re(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...fm(i||".",{relative:t})},c=Hs();if(i==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!i||i===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Bs([e,o.pathname])),gl(o)}function Xj(i,t={}){let e=U.useContext(Bx);re(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$D("useViewTransitionState"),a=fm(i,{relative:t.relative});if(!e.isTransitioning)return!1;let o=Or(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=Or(e.nextLocation.pathname,n)||e.nextLocation.pathname;return cb(a.pathname,c)!=null||cb(a.pathname,o)!=null}new TextEncoder;[...Mj];var qD=tM();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qj(i){return U.createElement(uj,{flushSync:qD.flushSync,...i})}const Wj=()=>localStorage.getItem("lastOpenedBookId"),Kj=i=>{try{localStorage.setItem("ebooker:archivedBooks",JSON.stringify(i))}catch(t){console.error("[storage] Error saving archived books:",t)}},Zj=()=>{try{const i=localStorage.getItem("ebooker:archivedBooks");return i?JSON.parse(i):[]}catch(i){return console.error("[storage] Error fetching archived books:",i),[]}},Jj=i=>{const t=Zj();if(t.some(n=>n.id===i._id))return;const e={id:i._id,title:i.title,archivedAt:new Date().toISOString()};Kj([...t,e])},t8=st.div`
  position: relative;
  top: 100%;
  left: 50%;
  transform: translate(-50%, -50%) scale(1);
  grid-column: 2;
  grid-row: 2;
  width: 30vh;
  height: 30vh;
  display: flex;
  gap: 0px;
`,e8=()=>{const t=Vt(n=>n.ui.activeItem)!==null,e=Wj();return P.jsxs(t8,{children:[P.jsx(Kw,{name:"library",route:"/library",color:"var(--color-metal-blue-light)",position:{x:"0%",y:"0%"},label:"Library",isAnyTileActive:t,buttonLabel:"Go to library"}),P.jsx(Kw,{name:"reader",route:e?`/read/${e}`:"/read",color:"var(--color-metal-blue-dark)",position:{x:"0%",y:"-105%"},label:"Reader",isAnyTileActive:t,buttonLabel:"Start reading"}),P.jsx(Kw,{name:"settings",route:"/settings",color:"var(--color-metal-blue-deep)",position:{x:"-105%",y:"0%"},label:"Settings",isAnyTileActive:t,buttonLabel:"Settings"})]})};var GD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},AR=wn.createContext&&wn.createContext(GD),n8=["attr","size","title"];function i8(i,t){if(i==null)return{};var e=r8(i,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function r8(i,t){if(i==null)return{};var e={};for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(t.indexOf(n)>=0)continue;e[n]=i[n]}return e}function hb(){return hb=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},hb.apply(this,arguments)}function xR(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function fb(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(e),!0).forEach(function(n){s8(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):xR(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function s8(i,t,e){return t=a8(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function a8(i){var t=o8(i,"string");return typeof t=="symbol"?t:t+""}function o8(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function VD(i){return i&&i.map((t,e)=>wn.createElement(t.tag,fb({key:e},t.attr),VD(t.child)))}function rn(i){return t=>wn.createElement(l8,hb({attr:fb({},i.attr)},t),VD(i.child))}function l8(i){var t=e=>{var{attr:n,size:a,title:o}=i,c=i8(i,n8),u=a||e.size||"1em",d;return e.className&&(d=e.className),i.className&&(d=(d?d+" ":"")+i.className),wn.createElement("svg",hb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,c,{className:d,style:fb(fb({color:i.color||e.color},e.style),i.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&wn.createElement("title",null,o),i.children)};return AR!==void 0?wn.createElement(AR.Consumer,null,e=>t(e)):t(GD)}function c8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"},child:[]}]})(i)}function u8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M244 400 100 256l144-144M120 256h292"},child:[]}]})(i)}function d8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M328 112 184 256l144 144"},child:[]}]})(i)}function h8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m184 112 144 144-144 144"},child:[]}]})(i)}function ov(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368 144 144m224 0L144 368"},child:[]}]})(i)}function f8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M204 240H68a36 36 0 0 1-36-36V68a36 36 0 0 1 36-36h136a36 36 0 0 1 36 36v136a36 36 0 0 1-36 36zm240 0H308a36 36 0 0 1-36-36V68a36 36 0 0 1 36-36h136a36 36 0 0 1 36 36v136a36 36 0 0 1-36 36zM204 480H68a36 36 0 0 1-36-36V308a36 36 0 0 1 36-36h136a36 36 0 0 1 36 36v136a36 36 0 0 1-36 36zm240 0H308a36 36 0 0 1-36-36V308a36 36 0 0 1 36-36h136a36 36 0 0 1 36 36v136a36 36 0 0 1-36 36z"},child:[]}]})(i)}function p8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M160 144h288M160 256h288M160 368h288"},child:[]},{tag:"circle",attr:{cx:"80",cy:"144",r:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"80",cy:"256",r:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"80",cy:"368",r:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(i)}function g8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m256 58 80 80-80 80"},child:[]}]})(i)}function m8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M400 256H112"},child:[]}]})(i)}function y8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"44",d:"M102 256h308m-308-80h308M102 336h308"},child:[]}]})(i)}function b8(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z"},child:[]},{tag:"path",attr:{d:"M432 96h-96V72a40 40 0 0 0-40-40h-80a40 40 0 0 0-40 40v24H80a16 16 0 0 0 0 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 0 0 0-32zM192.57 416H192a16 16 0 0 1-16-15.43l-8-224a16 16 0 1 1 32-1.14l8 224A16 16 0 0 1 192.57 416zM272 400a16 16 0 0 1-32 0V176a16 16 0 0 1 32 0zm32-304h-96V72a7.91 7.91 0 0 1 8-8h80a7.91 7.91 0 0 1 8 8zm32 304.57A16 16 0 0 1 320 416h-.58A16 16 0 0 1 304 399.43l8-224a16 16 0 1 1 32 1.14z"},child:[]}]})(i)}const v8=(i,t)=>{const e=Hh(),n=Hs(),a=or(),o=Vt(g=>g.ui.activeItem),c=o===i,u=()=>{o&&!c||c||a(R4(i))},d=g=>{g.stopPropagation(),e(t)},p=g=>{g==null||g.stopPropagation(),a(BT())};return U.useEffect(()=>{n.pathname==="/"&&a(BT())},[n.pathname,a]),{$isActive:c,handleClick:u,handleNavigate:d,handleClose:p}},w8=st.span`
  font-size: clamp(0.8em, 2.5vh, 1.6em);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3rem; 
  color: white;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  transform: rotate(-45deg);
  z-index: 1000;
  display: flex;
  align-items: center;
`,S8=st.div`
  position: absolute;
  width: ${({$isActive:i})=>i?"40vh":"30vh"};
  height: ${({$isActive:i})=>i?"40vh":"30vh"};
  display: flex;
  justify-content: center;
  align-items: center;
  transform: ${({$isActive:i,$position:t})=>i?"translate(0%, -20%)":`translate(${(t==null?void 0:t.x)||"0%"}, ${(t==null?void 0:t.y)||"0%"})`};
  rotate: ${({$isActive:i})=>i?"-45deg":"45deg"};
  scale: ${({$isActive:i})=>i?1.5:1};
  z-index: ${({$isActive:i})=>i?1e3:100};
  pointer-events: ${({$isActive:i})=>i?"auto":"all"};
  cursor: pointer;
  transition: all 0.6s ease;
  background: ${({$isActive:i,$inactiveColor:t})=>i?"var(--tile-bg-active)":t||`linear-gradient(
          37deg,
          #2f6eb23a 20%,
          #6fafe642 45%,
          #9bd4ff1c 70%,
          #417cbf2f 100%
        ),
        linear-gradient(
          125deg,
          rgba(64, 172, 255, 0.549) 0%,
          rgba(30, 32, 106, 0.47) 50%,
          rgba(61, 105, 171, 0.08) 100%
        ),
        repeating-linear-gradient(
          70deg,
          rgba(255, 255, 255, 0.04) 0px,
          rgba(8, 75, 88, 0.578) 2px,
          rgba(0, 0, 0, 0.03) 2px,
          rgba(222, 222, 222, 0.03) 4px
        ),
        repeating-linear-gradient(
          -45deg,
          rgba(255, 255, 255, 0.02) 0px,
          rgba(127, 196, 198, 0.441) 20%,
          rgba(0, 0, 0, 0.02) 1px,
          rgba(0, 0, 0, 0.02) 2px
        )`};
  border: ${({$isActive:i})=>i?"0.6px solid rgba(143, 236, 246, 0.46)":"3px solid rgba(194, 249, 255, 0.996)"};
  border-radius: ${({$isActive:i})=>i?"1.2rem":"1rem"};
  box-shadow: ${({$isActive:i})=>i?"var(--tile-shadow-active)":"var(--tile-shadow-inactive)"};
  backdrop-filter: ${({$isActive:i})=>i?"var(--tile-blur-active)":"var(--tile-blur-inactive)"};
`,A8=st.button`
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 2rem;
  cursor: pointer;
  color: var(--color-dark-900);
  text-shadow: var(--glass-text-shadow);
  pointer-events: auto;
  z-index: 999;

  &:hover {
    transform: scale(1.2);
  }
`,Kw=({name:i,route:t,color:e,position:n,label:a,isAnyTileActive:o,buttonLabel:c})=>{const{$isActive:u,handleClick:d,handleClose:p}=v8(i,t),g=y=>{u||(y.stopPropagation(),d())};return P.jsxs(S8,{$isActive:u,onClick:u?void 0:g,color:e,$position:n,children:[!u&&!o&&P.jsx(w8,{children:a}),u&&P.jsxs(P.Fragment,{children:[P.jsx(A8,{onClick:y=>{y.stopPropagation(),p()},children:P.jsx(ov,{size:30,color:"white"})}),P.jsx(_8,{label:c||`Go to ${a.toLowerCase()}`,route:t})]})]})},x8=st.div`
  position: relative;
  rotate: 45deg;
  z-index: 2000;
  width: 80%;
`,E8=st.span`
  font-size: clamp(1rem, 2.5vh, 1.4rem);
  font-weight: 400;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: white;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  align-items: center;
  z-index: 2100;
`,_8=({label:i,route:t})=>{const e=Hh(),n=a=>{a.stopPropagation(),t&&e(t)};return P.jsx(x8,{children:P.jsx(ha,{$variant:"menu_tile_btn",onClick:n,children:P.jsx(E8,{children:i})})})};st.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
  z-index: 999;
`;st.div`
  background: var(--modal-bg, #028850);
  border-radius: var(--border-radius, 8px);
  padding: 1.5rem;
  max-width: 90%;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
`;const C8=bD`
  to {
    transform: rotate(360deg);
  }
`,T8=st.div`
  width: 48px;
  height: 48px;
  border: 5px solid rgba(255, 255, 255, 0.3);
  border-top-color: var(--color-accent);
  border-radius: 50%;
  animation: ${C8} 1s linear infinite;
`,R8=st.div`
  width: 100%;
  height: 100%;
  min-height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
`,jS=()=>P.jsx(R8,{children:P.jsx(T8,{})});st.button`
  padding: 0.4rem 1rem;
  border-radius: 6px;
  background-color: ${({$active:i})=>i?"var(--color-accent)":"transparent"};
  color: white;
  border: 1px solid white;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s ease;

  &:hover {
    background-color: var(--color-accent-hover);
  }
`;st.div`
  display: inline-flex;
  gap: 0.15rem;
  cursor: ${({editable:i})=>i?"pointer":"default"};
`;st.span`
  font-size: 1.25rem;
  color: ${({$filled:i})=>i?"gold":"rgba(255,255,255,0.3)"};
`;const M8={sidebar_btn:Ji`
    width: 14rem;
    background: var(--gradient-main-v3, #a1f1ff82);
    color: white;
    backdrop-filter: blur(6px);
    border: 2px solid rgba(194, 249, 255, 0.996);
    box-shadow: 0 0.4rem 1rem rgba(2, 12, 59, 0.513);
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.2rem;
    font-weight: 400;
    transition: transform all 0.3s ease;

    &:hover {
      box-shadow: 0 0.4rem 1rem rgba(17, 46, 132, 0.513);
      background: var(--gradient-main);
    }

    &:active {
      transform: scale(0.98);
      box-shadow: none;
    }
  `,circle_icon_btn:Ji`
    width: 4.8rem;
    height: 4.8rem;
    padding: 0;
    border-radius: 50%;
    background: var(--bg-icon-default);
    font-size: 2rem;
    display: flex;
    color: white;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    background-blend-mode: overlay;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 0.2rem 1rem rgba(0, 64, 128, 0.3);
    transition: all 0.3s ease;

    &:hover {
      transform: scale(1.1);
      box-shadow: 0 0.4rem 1.2rem rgba(0, 80, 160, 0.45);
      background: var(--shadow-icon-hover);
    }

    &:active {
      transform: scale(0.95);
      box-shadow: 0 0 0.5rem rgba(0, 80, 160, 0.3);
    }
  `,theme_switch_btn:Ji`
    width: 8rem;
    height: 4rem;
    padding: 0;
    border-radius: 999px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    background: var(--bg-icon-default);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    background-blend-mode: overlay;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 0.3rem 1rem rgba(0, 64, 128, 0.3);
    transition: all 0.3s ease;

    &:hover {
      box-shadow: 0 0.5rem 1.5rem rgba(0, 80, 160, 0.4);
      background: var(--bg-icon-hover);
    }

    &:active {
      transform: scale(0.95);
      box-shadow: 0 0 0.5rem rgba(0, 80, 160, 0.3);
    }
  `,close_icon_btn:Ji`
    position: absolute;
    top: 0.6rem;
    right: 0.6rem;
    background: none;
    border: none;
    padding: 0;
    font-size: 1.6rem;
    color: white;
    cursor: pointer;
    z-index: 2;
    text-shadow: -1px 1px 3px #2a2a80;
    display: flex;
    align-items: center;
    justify-content: center;

    &:hover {
      transform: scale(1.15);
    }

    &:active {
      transform: scale(0.95);
    }
  `,menu_btn:Ji`
    font-size: 1.5rem;
    padding: 1.2rem 2.4rem;
    border-radius: 2% 50%;
    min-width: 18rem;
    max-width: 18rem;
    background: var(--gradient-metal-violet-mystic);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    color: var(--color-dark-900);

    &:hover {
      transform: scale(1.05);
      background: var(--gradient-metal-violet-midnight);
    }

    &:active {
      transform: scale(0.97);
    }
  `,menu_tile_btn:Ji`
    padding: 1.2rem;
    font-size: clamp(1rem, 2.2vh, 1.6rem);
    font-weight: 600;
    text-align: center;
    letter-spacing: 1px;
    text-transform: uppercase;
    background: var(--gradient-main-v4);
    color: white;
    border-radius: 0.6rem;
    border: 1px solid var(--see-akcent);
    backdrop-filter: blur(30px);
    box-shadow: 0 0.2rem 1rem rgba(0, 64, 128, 0.3);
    white-space: normal;
    word-break: break-word;

    &:hover {
      box-shadow: var(--shadow-icon-hover);
    }

    &:active {
      transform: scale(0.97);
      box-shadow: none;
    }
  `,modal_primary:Ji`
    background: var(--color-accent);
    color: white;
    padding: 0.8rem 1.6rem;
    font-weight: 600;
    border-radius: var(--border-radius-sm);
    box-shadow: var(--glass-shadow);
    backdrop-filter: blur(6px);

    &:hover {
      background: var(--color-accent-dark);
    }

    &:active {
      transform: scale(0.97);
    }
  `,modal_secondary:Ji`
    background: var(--glass-bg);
    color: var(--text-primary);
    padding: 0.8rem 1.6rem;
    font-weight: 500;
    border-radius: var(--border-radius-sm);
    box-shadow: var(--glass-shadow);
    backdrop-filter: blur(6px);

    &:hover {
      background: var(--glass-bg-hover);
    }

    &:active {
      transform: scale(0.97);
    }
  `},D8=Ji`
  padding: 1rem 2rem;
  font-size: 1.4rem;
  font-weight: 600;
  text-transform: uppercase;
  border: none;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: all 0.3s ease;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  box-shadow: var(--glass-shadow);
  color: var(--color-dark-900);
  text-align: center;
  letter-spacing: 0.5px;
  text-shadow: var(--glass-text-shadow);

  svg {
    width: 1.6rem;
    height: 1.6rem;
    stroke-width: 1.5;
    flex-shrink: 0;
    stroke: currentColor;
    fill: currentColor;
  }

  &:hover {
    transform: scale(1.03);
  }

  &:active {
    transform: scale(0.97);
  }

  &:disabled {
    cursor: not-allowed;
    background-color: var(--color-light-200);
    color: var(--color-blue-300);
  }
`,O8=st.button`
  ${D8}
  ${({$variant:i})=>M8[i]||""}
`,ha=({children:i,onClick:t,$variant:e="",disabled:n,type:a="button",ariaLabel:o})=>P.jsx(O8,{type:a,onClick:t,$variant:e,disabled:n,"aria-label":o,children:i});function k8(i){return rn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"},child:[]}]})(i)}function L8(i){return rn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"4"},child:[]},{tag:"path",attr:{d:"M12 2v2"},child:[]},{tag:"path",attr:{d:"M12 20v2"},child:[]},{tag:"path",attr:{d:"m4.93 4.93 1.41 1.41"},child:[]},{tag:"path",attr:{d:"m17.66 17.66 1.41 1.41"},child:[]},{tag:"path",attr:{d:"M2 12h2"},child:[]},{tag:"path",attr:{d:"M20 12h2"},child:[]},{tag:"path",attr:{d:"m6.34 17.66-1.41 1.41"},child:[]},{tag:"path",attr:{d:"m19.07 4.93-1.41 1.41"},child:[]}]})(i)}function YD(i){return rn({attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M4.2 1H4.17741H4.1774C3.86936 0.999988 3.60368 0.999978 3.38609 1.02067C3.15576 1.04257 2.92825 1.09113 2.71625 1.22104C2.51442 1.34472 2.34473 1.51442 2.22104 1.71625C2.09113 1.92825 2.04257 2.15576 2.02067 2.38609C1.99998 2.60367 1.99999 2.86935 2 3.17738V3.1774V3.2V11.8V11.8226V11.8226C1.99999 12.1307 1.99998 12.3963 2.02067 12.6139C2.04257 12.8442 2.09113 13.0717 2.22104 13.2837C2.34473 13.4856 2.51442 13.6553 2.71625 13.779C2.92825 13.9089 3.15576 13.9574 3.38609 13.9793C3.60368 14 3.86937 14 4.17741 14H4.2H10.8H10.8226C11.1306 14 11.3963 14 11.6139 13.9793C11.8442 13.9574 12.0717 13.9089 12.2837 13.779C12.4856 13.6553 12.6553 13.4856 12.779 13.2837C12.9089 13.0717 12.9574 12.8442 12.9793 12.6139C13 12.3963 13 12.1306 13 11.8226V11.8V3.2V3.17741C13 2.86936 13 2.60368 12.9793 2.38609C12.9574 2.15576 12.9089 1.92825 12.779 1.71625C12.6553 1.51442 12.4856 1.34472 12.2837 1.22104C12.0717 1.09113 11.8442 1.04257 11.6139 1.02067C11.3963 0.999978 11.1306 0.999988 10.8226 1H10.8H4.2ZM3.23875 2.07368C3.26722 2.05623 3.32362 2.03112 3.48075 2.01618C3.64532 2.00053 3.86298 2 4.2 2H10.8C11.137 2 11.3547 2.00053 11.5193 2.01618C11.6764 2.03112 11.7328 2.05623 11.7613 2.07368C11.8285 2.11491 11.8851 2.17147 11.9263 2.23875C11.9438 2.26722 11.9689 2.32362 11.9838 2.48075C11.9995 2.64532 12 2.86298 12 3.2V11.8C12 12.137 11.9995 12.3547 11.9838 12.5193C11.9689 12.6764 11.9438 12.7328 11.9263 12.7613C11.8851 12.8285 11.8285 12.8851 11.7613 12.9263C11.7328 12.9438 11.6764 12.9689 11.5193 12.9838C11.3547 12.9995 11.137 13 10.8 13H4.2C3.86298 13 3.64532 12.9995 3.48075 12.9838C3.32362 12.9689 3.26722 12.9438 3.23875 12.9263C3.17147 12.8851 3.11491 12.8285 3.07368 12.7613C3.05624 12.7328 3.03112 12.6764 3.01618 12.5193C3.00053 12.3547 3 12.137 3 11.8V3.2C3 2.86298 3.00053 2.64532 3.01618 2.48075C3.03112 2.32362 3.05624 2.26722 3.07368 2.23875C3.11491 2.17147 3.17147 2.11491 3.23875 2.07368ZM5 10C4.72386 10 4.5 10.2239 4.5 10.5C4.5 10.7761 4.72386 11 5 11H8C8.27614 11 8.5 10.7761 8.5 10.5C8.5 10.2239 8.27614 10 8 10H5ZM4.5 7.5C4.5 7.22386 4.72386 7 5 7H10C10.2761 7 10.5 7.22386 10.5 7.5C10.5 7.77614 10.2761 8 10 8H5C4.72386 8 4.5 7.77614 4.5 7.5ZM5 4C4.72386 4 4.5 4.22386 4.5 4.5C4.5 4.77614 4.72386 5 5 5H10C10.2761 5 10.5 4.77614 10.5 4.5C10.5 4.22386 10.2761 4 10 4H5Z",fill:"currentColor"},child:[]}]})(i)}function XD(i){return rn({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M16 7C15.4477 7 15 7.44772 15 8C15 8.55228 15.4477 9 16 9H19C19.5523 9 20 8.55228 20 8C20 7.44772 19.5523 7 19 7H16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M15 12C15 11.4477 15.4477 11 16 11H19C19.5523 11 20 11.4477 20 12C20 12.5523 19.5523 13 19 13H16C15.4477 13 15 12.5523 15 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 15C15.4477 15 15 15.4477 15 16C15 16.5523 15.4477 17 16 17H19C19.5523 17 20 16.5523 20 16C20 15.4477 19.5523 15 19 15H16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M3 3C1.34315 3 0 4.34315 0 6V18C0 19.6569 1.34315 21 3 21H21C22.6569 21 24 19.6569 24 18V6C24 4.34315 22.6569 3 21 3H3ZM21 5H13V19H21C21.5523 19 22 18.5523 22 18V6C22 5.44772 21.5523 5 21 5ZM3 5H11V19H3C2.44772 19 2 18.5523 2 18V6C2 5.44772 2.44772 5 3 5Z",fill:"currentColor"},child:[]}]})(i)}const P8=st.div`
  display: flex;
  justify-content: space-between;
  width: 100%;
  padding: 0 0.8rem;
  font-size: 1.4rem;
  color: var(--color-brand-100);
  position: relative;
  z-index: 2;
`,N8=st.div`
  position: absolute;
  top: 0.3rem;
  left: ${({$position:i})=>i};
  width: 3.2rem;
  height: 3.2rem;
  border-radius: 50%;
  background: ${({$color:i})=>i};
  box-shadow: 0 0 0.6rem rgba(255, 255, 255, 0.4);
  transition: all 0.35s ease;
  z-index: 1;
`,WU=({variant:i="theme"})=>{const t=or(),e=Vt(g=>g.ui.theme),n=Vt(g=>g.reader.pageViewMode),a=i==="theme",o=i==="reader",c=()=>{a?t(T4()):o&&t(zM(n==="single"?"double":"single"))},u=a?[P.jsx(L8,{},"sun"),P.jsx(k8,{},"moon")]:[n==="single"?P.jsx(YD,{},"single"):P.jsx(XD,{},"double")],d=a?e==="light"?"0.3rem":"calc(100% - 3.3rem)":n==="single"?"0.3rem":"calc(100% - 3.3rem)",p=a?e==="light"?"#ffffffcc":"#aad0ff":n==="single"?"#ffffffcc":"#aad0ff";return P.jsxs(ha,{$variant:`${i}_switch_btn`,onClick:c,"aria-label":`Switch ${a?"theme":"view mode"}`,children:[P.jsx(N8,{$position:d,$color:p}),P.jsx(P8,{children:u})]})},I8=st.div`
  position: fixed;
  inset: 0;
  background: var(--backdrop-color); 
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(6px);
  z-index: 9999;
`,j8=st.div`
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  color: var(--color-dark-900);
  padding: 2.4rem;
  border-radius: var(--border-radius);
  box-shadow: var(--glass-shadow);
  max-width: 420px;
  width: 90%;
  text-align: center;
`,B8=st.h3`
  margin-bottom: 1.6rem;
  font-size: 1.8rem;
  text-shadow: var(--glass-text-shadow);
`,z8=st.div`
  display: flex;
  justify-content: center;
  margin-top: 2rem;
  gap: 1.2rem;
  flex-wrap: wrap;
`,QD=({bookId:i,bookTitle:t,onCancel:e,variant:n="library",onTrash:a,onConfirm:o})=>{const[c]=Bh(),[u]=Kb(),d=Vt(A=>{var E;return(E=uu.endpoints.getBook.select(i)(A))==null?void 0:E.data});U.useEffect(()=>{var A;(A=d==null?void 0:d.flags)!=null&&A.isArchived&&Jj(d)},[d]);const p=n==="library",g=n==="permanent-delete",y=n==="restore",b=async()=>{await u(i),o==null||o(),e()},v=async()=>{a?a():await c({id:i,changes:{flags:{isArchived:!0}}}).unwrap(),e()},S=async()=>{o?o():await c({id:i,changes:{flags:{isArchived:!1}}}).unwrap(),e()};return P.jsx(I8,{onClick:e,children:P.jsxs(j8,{onClick:A=>A.stopPropagation(),children:[P.jsxs(B8,{children:[p&&`What do you want to do with “${t}”?`,g&&`Permanently delete “${t}”?`,y&&`Restore “${t}” to library?`]}),P.jsxs(z8,{children:[p&&P.jsxs(P.Fragment,{children:[P.jsx(ha,{$variant:"button_secondary",onClick:v,children:"Archive"}),P.jsx(ha,{$variant:"button_primary",onClick:b,children:"Delete"})]}),g&&P.jsxs(P.Fragment,{children:[P.jsx(ha,{$variant:"button_primary",onClick:b,children:"Yes"}),P.jsx(ha,{$variant:"button_secondary",onClick:e,children:"Cancel"})]}),y&&P.jsxs(P.Fragment,{children:[P.jsx(ha,{$variant:"button_primary",onClick:S,children:"Yes"}),P.jsx(ha,{$variant:"button_secondary",onClick:e,children:"Cancel"})]})]}),p&&P.jsx(ha,{$variant:"button_link",onClick:e,style:{marginTop:"1.4rem"},children:"Cancel"})]})})};QD.displayName="ConfirmModal";const WD=wn.memo(QD),F8=st.div`
  position: relative;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  grid-template-rows: 1fr auto 1fr;
  justify-content: center;
  align-items: center;
  width: 100vw;
  height: 100%;
  background: var(--gradient-metal-deepblue-v7);
  color: var(--color-light-0);

  ${({$blurred:i})=>i&&`
    transition: backdrop-filter 0.6s ease, background 0.6s ease;
  `}
`,H8=()=>{const t=Vt(e=>e.ui.activeItem)!==null;return P.jsx(F8,{$blurred:t,children:P.jsx(e8,{})})},U8=st.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 3rem;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  background: var(--gradient-blue-clear); 
  box-shadow: var(--shadow-lg);
`,$8=st.h2`
  color: var(--color-dark-900);
  font-size: 2rem;
  margin-bottom: 2rem;
  text-shadow: var(--glass-text-shadow);
`,Yy=st.div`
  background-color: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  padding: 1rem 2rem;
  margin-bottom: 1rem;
  width: 100%;
  max-width: 500px;
  color: var(--color-dark-900);
  box-shadow: var(--glass-shadow);
  transition: background-color 0.3s ease, color 0.3s ease;
`,q8=()=>P.jsxs(U8,{children:[P.jsx($8,{children:"Settings"}),P.jsx(Yy,{children:"Light / Dark Mode"}),P.jsx(Yy,{children:"Application Language"}),P.jsx(Yy,{children:"Privacy & Security"}),P.jsx(Yy,{children:"Data Management"})]}),ER=()=>P.jsx("div",{children:P.jsx("h1",{children:"Page Not Found"})}),hi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),BS=[.001,0,0,.001,0,0],Zw=1.35,Zi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ro={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},G8="pdfjs_internal_editor_",qt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},V8={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Wn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},m0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ln={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},rd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},lv={ERRORS:0,WARNINGS:1,INFOS:5},pb={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Xy={moveTo:0,lineTo:1,curveTo:2,closePath:3},Y8={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let cv=lv.WARNINGS;function X8(i){Number.isInteger(i)&&(cv=i)}function Q8(){return cv}function uv(i){cv>=lv.INFOS&&console.log(`Info: ${i}`)}function Gt(i){cv>=lv.WARNINGS&&console.log(`Warning: ${i}`)}function Te(i){throw new Error(i)}function dn(i,t){i||Te(t)}function W8(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function KD(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const a=i.match(/\./g);(a==null?void 0:a.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=eB(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return W8(n)?n:null}function ZD(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&KD(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function se(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const mu=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class _R extends mu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Jw extends mu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class zS extends mu{constructor(t){super(t,"InvalidPDFException")}}class gb extends mu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class K8 extends mu{constructor(t){super(t,"FormatError")}}class ml extends mu{constructor(t){super(t,"AbortException")}}function JD(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Te("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=i.subarray(a,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function pm(i){typeof i!="string"&&Te("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function Z8(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function J8(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function tB(){try{return new Function(""),!0}catch{return!1}}class Vn{static get isLittleEndian(){return se(this,"isLittleEndian",J8())}static get isEvalSupported(){return se(this,"isEvalSupported",tB())}static get isOffscreenCanvasSupported(){return se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return se(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return se(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return se(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return se(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const tS=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var qa,y0,FS;class Rt{static makeHexColor(t,e,n){return`#${tS[t]}${tS[e]}${tS[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const a=t[n],o=t[n+1];t[n]=a*e[0]+o*e[2]+e[4],t[n+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],o=e[1],c=e[2],u=e[3],d=e[4],p=e[5];for(let g=0;g<6;g+=2){const y=t[n+g],b=t[n+g+1];t[n+g]=y*a+b*c+d,t[n+g+1]=y*o+b*u+p}}static applyInverseTransform(t,e){const n=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const a=e[0],o=e[1],c=e[2],u=e[3],d=e[4],p=e[5],g=t[0],y=t[1],b=t[2],v=t[3];let S=a*g+d,A=S,E=a*b+d,x=E,M=u*y+p,C=M,_=u*v+p,D=_;if(o!==0||c!==0){const R=o*g,N=o*b,$=c*y,j=c*v;S+=$,x+=$,E+=j,A+=j,M+=R,D+=R,_+=N,C+=N}n[0]=Math.min(n[0],S,E,A,x),n[1]=Math.min(n[1],M,_,C,D),n[2]=Math.max(n[2],S,E,A,x),n[3]=Math.max(n[3],M,_,C,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],o=t[2],c=t[3],u=n**2+a**2,d=n*o+a*c,p=o**2+c**2,g=(u+p)/2,y=Math.sqrt(g**2-(u*p-d**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,a,c]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,a)}static bezierBoundingBox(t,e,n,a,o,c,u,d,p){p[0]=Math.min(p[0],t,u),p[1]=Math.min(p[1],e,d),p[2]=Math.max(p[2],t,u),p[3]=Math.max(p[3],e,d),L(this,qa,FS).call(this,t,n,o,u,e,a,c,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),p),L(this,qa,FS).call(this,t,n,o,u,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),p)}}qa=new WeakSet,y0=function(t,e,n,a,o,c,u,d,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,v=b*p,S=y*(y*(y*t+3*p*e)+3*b*n)+v*a,A=y*(y*(y*o+3*p*c)+3*b*u)+v*d;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],A),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],A)},FS=function(t,e,n,a,o,c,u,d,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&L(this,qa,y0).call(this,t,e,n,a,o,c,u,d,-y/g,b);return}const v=g**2-4*y*p;if(v<0)return;const S=Math.sqrt(v),A=2*p;L(this,qa,y0).call(this,t,e,n,a,o,c,u,d,(-g+S)/A,b),L(this,qa,y0).call(this,t,e,n,a,o,c,u,d,(-g-S)/A,b)},k(Rt,qa);function eB(i){return decodeURIComponent(escape(i))}let eS=null,CR=null;function nB(i){return eS||(eS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,CR=new Map([["ﬅ","ſt"]])),i.replaceAll(eS,(t,e,n)=>e?e.normalize("NFKC"):CR.get(n))}function tO(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),JD(i)}const qx="pdfjs_internal_id_";function iB(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...o]=e;if(!i(n)&&!Number.isInteger(n)||!t(a))return!1;const c=o.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function fi(i,t,e){return Math.min(Math.max(i,t),e)}function eO(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(JD(i))}function rB(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):pm(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const la="http://www.w3.org/2000/svg",Kl=class Kl{};bt(Kl,"CSS",96),bt(Kl,"PDF",72),bt(Kl,"PDF_TO_CSS_UNITS",Kl.CSS/Kl.PDF);let yl=Kl;async function gm(i,t="text"){if(sd(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",i,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class mm{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=o,this.offsetY=c,n*=e;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,v;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,v=1;break;case 90:g=0,y=1,b=1,v=0;break;case 270:g=0,y=-1,b=-1,v=0;break;case 0:g=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let S,A,E,x;g===0?(S=Math.abs(p-t[1])*n+o,A=Math.abs(d-t[0])*n+c,E=(t[3]-t[1])*n,x=(t[2]-t[0])*n):(S=Math.abs(d-t[0])*n+o,A=Math.abs(p-t[1])*n+c,E=(t[2]-t[0])*n,x=(t[3]-t[1])*n),this.transform=[g*n,y*n,b*n,v*n,S-g*n*d-b*n*p,A-y*n*d-v*n*p],this.width=E,this.height=x}get rawDims(){const t=this.viewBox;return se(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new mm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return Rt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Rt.applyTransform(e,this.transform);const n=[t[2],t[3]];return Rt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Rt.applyInverseTransform(n,this.transform),n}}class Gx extends mu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function dv(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Vx(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function sB(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function aB(i,t="document.pdf"){if(typeof i!="string")return t;if(dv(i))return Gt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(i);let o=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class TR{constructor(){bt(this,"started",Object.create(null));bt(this,"times",[])}time(t){t in this.started&&Gt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Gt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function sd(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ss(i){i.preventDefault()}function cn(i){i.preventDefault(),i.stopPropagation()}var Bp;class Yx{static toDateObject(t){if(!t||typeof t!="string")return null;f(this,Bp)||T(this,Bp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=f(this,Bp).exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=g,u+=y):p==="+"&&(c-=g,u-=y),new Date(Date.UTC(n,a,o,c,u,d))}}Bp=new WeakMap,k(Yx,Bp);function oB(i,{scale:t=1,rotation:e=0}){const{width:n,height:a}=i.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new mm({viewBox:o,userUnit:1,scale:t,rotation:e})}function Xx(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Gt(`Not a valid color format: "${i}"`),[0,0,0])}function lB(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Xx(n))}t.remove()}function Ve(i){const{a:t,b:e,c:n,d:a,e:o,f:c}=i.getTransform();return[t,e,n,a,o,c]}function ys(i){const{a:t,b:e,c:n,d:a,e:o,f:c}=i.getTransform().invertSelf();return[t,e,n,a,o,c]}function du(i,t,e=!1,n=!0){if(t instanceof mm){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=i,u=Vn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Ya{constructor(){const{pixelRatio:t}=Ya;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a){let o=1/0,c=1/0,u=1/0;n>0&&(o=Math.sqrt(n/(t*e))),a!==-1&&(c=a/t,u=a/e);const d=Math.min(o,c,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const HS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Mo,ec,vr,Do,zp,Ad,Fp,Eb,nO,Gn,iO,rO,sp,sO,b0;const fa=class fa{constructor(t){k(this,Gn);k(this,Mo,null);k(this,ec,null);k(this,vr);k(this,Do,null);k(this,zp,null);k(this,Ad,null);T(this,vr,t),f(fa,Fp)||T(fa,Fp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=T(this,Mo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=f(this,vr)._uiManager._signal;t.addEventListener("contextmenu",ss,{signal:e}),t.addEventListener("pointerdown",L(fa,Eb,nO),{signal:e});const n=T(this,Do,document.createElement("div"));n.className="buttons",t.append(n);const a=f(this,vr).toolbarPosition;if(a){const{style:o}=t,c=f(this,vr)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return L(this,Gn,sO).call(this),t}get div(){return f(this,Mo)}hide(){var t;f(this,Mo).classList.add("hidden"),(t=f(this,ec))==null||t.hideDropdown()}show(){var t;f(this,Mo).classList.remove("hidden"),(t=f(this,zp))==null||t.shown()}async addAltText(t){const e=await t.render();L(this,Gn,sp).call(this,e),f(this,Do).prepend(e,f(this,Gn,b0)),T(this,zp,t)}addColorPicker(t){T(this,ec,t);const e=t.renderButton();L(this,Gn,sp).call(this,e),f(this,Do).prepend(e,f(this,Gn,b0))}async addEditSignatureButton(t){const e=T(this,Ad,await t.renderEditButton(f(this,vr)));L(this,Gn,sp).call(this,e),f(this,Do).prepend(e,f(this,Gn,b0))}updateEditSignatureButton(t){f(this,Ad)&&(f(this,Ad).title=t)}remove(){var t;f(this,Mo).remove(),(t=f(this,ec))==null||t.destroy(),T(this,ec,null)}};Mo=new WeakMap,ec=new WeakMap,vr=new WeakMap,Do=new WeakMap,zp=new WeakMap,Ad=new WeakMap,Fp=new WeakMap,Eb=new WeakSet,nO=function(t){t.stopPropagation()},Gn=new WeakSet,iO=function(t){f(this,vr)._focusEventsAllowed=!1,cn(t)},rO=function(t){f(this,vr)._focusEventsAllowed=!0,cn(t)},sp=function(t){const e=f(this,vr)._uiManager._signal;t.addEventListener("focusin",L(this,Gn,iO).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",L(this,Gn,rO).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ss,{signal:e})},sO=function(){const{editorType:t,_uiManager:e}=f(this,vr),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",f(fa,Fp)[t]),L(this,Gn,sp).call(this,n),n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),f(this,Do).append(n)},b0=function(){const t=document.createElement("div");return t.className="divider",t},k(fa,Eb),k(fa,Fp,null);let US=fa;var Hp,nc,ic,bl,aO,oO,lO;class cB{constructor(t){k(this,bl);k(this,Hp,null);k(this,nc,null);k(this,ic);T(this,ic,t)}show(t,e,n){const[a,o]=L(this,bl,oO).call(this,e,n),{style:c}=f(this,nc)||T(this,nc,L(this,bl,aO).call(this));t.append(f(this,nc)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,nc).remove()}}Hp=new WeakMap,nc=new WeakMap,ic=new WeakMap,bl=new WeakSet,aO=function(){const t=T(this,nc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ss,{signal:f(this,ic)._signal});const e=T(this,Hp,document.createElement("div"));return e.className="buttons",t.append(e),L(this,bl,lO).call(this),t},oO=function(t,e){let n=0,a=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(e?o.width:0);if(c>n){a=u,n=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,n]},lO=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=f(this,ic)._signal;t.addEventListener("contextmenu",ss,{signal:n}),t.addEventListener("click",()=>{f(this,ic).highlightSelection("floating_button")},{signal:n}),f(this,Hp).append(t)};function Qx(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var _b;class uB{constructor(){k(this,_b,0)}get id(){return`${G8}${ai(this,_b)._++}`}}_b=new WeakMap;var xd,Up,Zn,Ed,v0;const oE=class oE{constructor(){k(this,Ed);k(this,xd,tO());k(this,Up,0);k(this,Zn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return se(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return L(this,Ed,v0).call(this,`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return L(this,Ed,v0).call(this,t,t)}async getFromBlob(t,e){const n=await e;return L(this,Ed,v0).call(this,t,n)}async getFromId(t){f(this,Zn)||T(this,Zn,new Map);const e=f(this,Zn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){f(this,Zn)||T(this,Zn,new Map);let n=f(this,Zn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${f(this,xd)}_${ai(this,Up)._++}`,refCounter:1,isSvg:!1},f(this,Zn).set(t,n),f(this,Zn).set(n.id,n),n}getSvgUrl(t){const e=f(this,Zn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;f(this,Zn)||T(this,Zn,new Map);const e=f(this,Zn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(a=n.close)==null||a.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${f(this,xd)}_`)}};xd=new WeakMap,Up=new WeakMap,Zn=new WeakMap,Ed=new WeakSet,v0=async function(t,e){f(this,Zn)||T(this,Zn,new Map);let n=f(this,Zn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${f(this,xd)}_${ai(this,Up)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await gm(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=oE._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((p,g)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,p()},c.onload=async()=>{const y=n.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){Gt(a),n=null}return f(this,Zn).set(t,n),n&&f(this,Zn).set(n.id,n),n};let $S=oE;var Je,Oo,$p,Ge;class dB{constructor(t=128){k(this,Je,[]);k(this,Oo,!1);k(this,$p);k(this,Ge,-1);T(this,$p,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),f(this,Oo))return;const d={cmd:t,undo:e,post:n,type:o};if(f(this,Ge)===-1){f(this,Je).length>0&&(f(this,Je).length=0),T(this,Ge,0),f(this,Je).push(d);return}if(c&&f(this,Je)[f(this,Ge)].type===o){u&&(d.undo=f(this,Je)[f(this,Ge)].undo),f(this,Je)[f(this,Ge)]=d;return}const p=f(this,Ge)+1;p===f(this,$p)?f(this,Je).splice(0,1):(T(this,Ge,p),p<f(this,Je).length&&f(this,Je).splice(p)),f(this,Je).push(d)}undo(){if(f(this,Ge)===-1)return;T(this,Oo,!0);const{undo:t,post:e}=f(this,Je)[f(this,Ge)];t(),e==null||e(),T(this,Oo,!1),T(this,Ge,f(this,Ge)-1)}redo(){if(f(this,Ge)<f(this,Je).length-1){T(this,Ge,f(this,Ge)+1),T(this,Oo,!0);const{cmd:t,post:e}=f(this,Je)[f(this,Ge)];t(),e==null||e(),T(this,Oo,!1)}}hasSomethingToUndo(){return f(this,Ge)!==-1}hasSomethingToRedo(){return f(this,Ge)<f(this,Je).length-1}cleanType(t){if(f(this,Ge)!==-1){for(let e=f(this,Ge);e>=0;e--)if(f(this,Je)[e].type!==t){f(this,Je).splice(e+1,f(this,Ge)-e),T(this,Ge,e);return}f(this,Je).length=0,T(this,Ge,-1)}}destroy(){T(this,Je,null)}}Je=new WeakMap,Oo=new WeakMap,$p=new WeakMap,Ge=new WeakMap;var Cb,cO;class ym{constructor(t){k(this,Cb);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Vn.platform;for(const[n,a,o={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(L(this,Cb,cO).call(this,e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(a.bind(t,...c,e)(),o||cn(e))}}Cb=new WeakSet,cO=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Tb=class Tb{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return lB(t),se(this,"_colors",t)}convert(t){const e=Xx(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,c)=>o===e[c]))return Tb._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Rt.makeHexColor(...e):t}};bt(Tb,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let qS=Tb;var _d,zi,bn,In,Cd,ga,Td,wr,ko,Lo,Rd,rc,ws,Hr,sc,qp,Gp,Md,Vp,Ss,Po,Dd,No,As,Rb,Io,Yp,jo,ac,oc,Bo,Xp,_n,Se,ma,zo,lc,Qp,Wp,Fo,xs,ya,Kp,Sr,wt,w0,GS,uO,dO,S0,hO,fO,pO,VS,gO,YS,XS,mO,oi,ca,yO,bO,QS,vO,ap,WS;const md=class md{constructor(t,e,n,a,o,c,u,d,p,g,y,b,v,S){k(this,wt);k(this,_d,new AbortController);k(this,zi,null);k(this,bn,new Map);k(this,In,new Map);k(this,Cd,null);k(this,ga,null);k(this,Td,null);k(this,wr,new dB);k(this,ko,null);k(this,Lo,null);k(this,Rd,0);k(this,rc,new Set);k(this,ws,null);k(this,Hr,null);k(this,sc,new Set);bt(this,"_editorUndoBar",null);k(this,qp,!1);k(this,Gp,!1);k(this,Md,!1);k(this,Vp,null);k(this,Ss,null);k(this,Po,null);k(this,Dd,null);k(this,No,!1);k(this,As,null);k(this,Rb,new uB);k(this,Io,!1);k(this,Yp,!1);k(this,jo,null);k(this,ac,null);k(this,oc,null);k(this,Bo,null);k(this,Xp,null);k(this,_n,qt.NONE);k(this,Se,new Set);k(this,ma,null);k(this,zo,null);k(this,lc,null);k(this,Qp,null);k(this,Wp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Fo,[0,0]);k(this,xs,null);k(this,ya,null);k(this,Kp,null);k(this,Sr,null);const A=this._signal=f(this,_d).signal;T(this,ya,t),T(this,Kp,e),T(this,Cd,n),T(this,zo,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:A}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),o._on("setpreference",this.onSetPreference.bind(this),{signal:A}),o._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:A}),L(this,wt,hO).call(this),L(this,wt,mO).call(this),L(this,wt,VS).call(this),T(this,ga,c.annotationStorage),T(this,Vp,c.filterFactory),T(this,lc,u),T(this,Dd,d||null),T(this,qp,p),T(this,Gp,g),T(this,Md,y),T(this,Xp,b||null),this.viewParameters={realScale:yl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const t=md.prototype,e=c=>f(c,ya).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return se(this,"_keyboardManager",new ym([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&f(c,ya).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&f(c,ya).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,a,o,c,u,d;(t=f(this,Sr))==null||t.resolve(),T(this,Sr,null),(e=f(this,_d))==null||e.abort(),T(this,_d,null),this._signal=null;for(const p of f(this,In).values())p.destroy();f(this,In).clear(),f(this,bn).clear(),f(this,sc).clear(),(n=f(this,Bo))==null||n.clear(),T(this,zi,null),f(this,Se).clear(),f(this,wr).destroy(),(a=f(this,Cd))==null||a.destroy(),(o=f(this,zo))==null||o.destroy(),(c=f(this,As))==null||c.hide(),T(this,As,null),(u=f(this,oc))==null||u.destroy(),T(this,oc,null),f(this,Ss)&&(clearTimeout(f(this,Ss)),T(this,Ss,null)),f(this,xs)&&(clearTimeout(f(this,xs)),T(this,xs,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return f(this,Xp)}get useNewAltTextFlow(){return f(this,Gp)}get useNewAltTextWhenAddingImage(){return f(this,Md)}get hcmFilter(){return se(this,"hcmFilter",f(this,lc)?f(this,Vp).addHCMFilter(f(this,lc).foreground,f(this,lc).background):"none")}get direction(){return se(this,"direction",getComputedStyle(f(this,ya)).direction)}get highlightColors(){return se(this,"highlightColors",f(this,Dd)?new Map(f(this,Dd).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),T(this,Lo,t)}setMainHighlightColorPicker(t){T(this,oc,t)}editAltText(t,e=!1){var n;(n=f(this,Cd))==null||n.editAltText(this,t,e)}getSignature(t){var e;(e=f(this,zo))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return f(this,zo)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":T(this,Md,e);break}}onPageChanging({pageNumber:t}){T(this,Rd,t-1)}focusMainContainer(){f(this,ya).focus()}findParent(t,e){for(const n of f(this,In).values()){const{x:a,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){f(this,Kp).classList.toggle("noUserSelect",t)}addShouldRescale(t){f(this,sc).add(t)}removeShouldRescale(t){f(this,sc).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*yl.PDF_TO_CSS_UNITS;for(const n of f(this,sc))n.onScaleChanging();(e=f(this,Lo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c}=e,u=e.toString(),p=L(this,wt,w0).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;e.empty();const y=L(this,wt,GS).call(this,p),b=f(this,_n)===qt.NONE,v=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c,text:u}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(qt.HIGHLIGHT,v);return}v()}addToAnnotationStorage(t){!t.isEmpty()&&f(this,ga)&&!f(this,ga).has(t.id)&&f(this,ga).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,f(this,No)&&(T(this,No,!1),L(this,wt,S0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of f(this,Se))if(e.div.contains(t)){T(this,ac,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!f(this,ac))return;const[t,e]=f(this,ac);T(this,ac,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){L(this,wt,VS).call(this),L(this,wt,YS).call(this)}removeEditListeners(){L(this,wt,gO).call(this),L(this,wt,XS).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of f(this,Hr))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of f(this,Hr))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=f(this,zi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of f(this,Se)){const o=a.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of f(this,Hr))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Gt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const p=await a.deserialize(d);if(!p)return;o.push(p)}const c=()=>{for(const d of o)L(this,wt,QS).call(this,d);L(this,wt,WS).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){Gt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,_n)!==qt.NONE&&!this.isEditorHandlingKeyboard&&md._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,No)&&(T(this,No,!1),L(this,wt,S0).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(L(this,wt,fO).call(this),L(this,wt,YS).call(this),L(this,wt,oi).call(this,{isEditing:f(this,_n)!==qt.NONE,isEmpty:L(this,wt,ap).call(this),hasSomethingToUndo:f(this,wr).hasSomethingToUndo(),hasSomethingToRedo:f(this,wr).hasSomethingToRedo(),hasSelectedEditor:!1})):(L(this,wt,pO).call(this),L(this,wt,XS).call(this),L(this,wt,oi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!f(this,Hr)){T(this,Hr,t);for(const e of f(this,Hr))L(this,wt,ca).call(this,e.defaultPropertiesToUpdate)}}getId(){return f(this,Rb).id}get currentLayer(){return f(this,In).get(f(this,Rd))}getLayer(t){return f(this,In).get(t)}get currentPageIndex(){return f(this,Rd)}addLayer(t){f(this,In).set(t.pageIndex,t),f(this,Io)?t.enable():t.disable()}removeLayer(t){f(this,In).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var a,o,c;if(f(this,_n)!==t&&!(f(this,Sr)&&(await f(this,Sr).promise,!f(this,Sr)))){if(T(this,Sr,Promise.withResolvers()),(a=f(this,Lo))==null||a.commitOrRemove(),T(this,_n,t),t===qt.NONE){this.setEditingState(!1),L(this,wt,bO).call(this),(o=this._editorUndoBar)==null||o.hide(),f(this,Sr).resolve();return}t===qt.SIGNATURE&&await((c=f(this,zo))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await L(this,wt,yO).call(this),this.unselectAll();for(const u of f(this,In).values())u.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),f(this,Sr).resolve();return}for(const u of f(this,bn).values())u.annotationElementId===e?(this.setSelected(u),u.enterInEditMode()):u.unselect();f(this,Sr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==f(this,_n)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(f(this,Hr)){switch(t){case oe.CREATE:this.currentLayer.addNewEditor(e);return;case oe.HIGHLIGHT_DEFAULT_COLOR:(n=f(this,oc))==null||n.updateColor(e);break;case oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,Qp)||T(this,Qp,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of f(this,Se))a.updateParams(t,e);for(const a of f(this,Hr))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of f(this,bn).values())c.editorType===t&&c.show(e);(((o=f(this,Qp))==null?void 0:o.get(oe.HIGHLIGHT_SHOW_ALL))??!0)!==e&&L(this,wt,ca).call(this,[[oe.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(f(this,Yp)!==t){T(this,Yp,t);for(const e of f(this,In).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of f(this,bn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return f(this,bn).get(t)}addEditor(t){f(this,bn).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(f(this,Ss)&&clearTimeout(f(this,Ss)),T(this,Ss,setTimeout(()=>{this.focusMainContainer(),T(this,Ss,null)},0))),f(this,bn).delete(t.id),t.annotationElementId&&((e=f(this,Bo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!f(this,rc).has(t.annotationElementId))&&((n=f(this,ga))==null||n.remove(t.id))}addDeletedAnnotationElement(t){f(this,rc).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return f(this,rc).has(t)}removeDeletedAnnotationElement(t){f(this,rc).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){f(this,zi)!==t&&(T(this,zi,t),t&&L(this,wt,ca).call(this,t.propertiesToUpdate))}updateUI(t){f(this,wt,vO)===t&&L(this,wt,ca).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){L(this,wt,ca).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(f(this,Se).has(t)){f(this,Se).delete(t),t.unselect(),L(this,wt,oi).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,Se).add(t),t.select(),L(this,wt,ca).call(this,t.propertiesToUpdate),L(this,wt,oi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=f(this,Lo))==null||e.commitOrRemove();for(const n of f(this,Se))n!==t&&n.unselect();f(this,Se).clear(),f(this,Se).add(t),t.select(),L(this,wt,ca).call(this,t.propertiesToUpdate),L(this,wt,oi).call(this,{hasSelectedEditor:!0})}isSelected(t){return f(this,Se).has(t)}get firstSelectedEditor(){return f(this,Se).values().next().value}unselect(t){t.unselect(),f(this,Se).delete(t),L(this,wt,oi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,Se).size!==0}get isEnterHandled(){return f(this,Se).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;f(this,wr).undo(),L(this,wt,oi).call(this,{hasSomethingToUndo:f(this,wr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:L(this,wt,ap).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){f(this,wr).redo(),L(this,wt,oi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,wr).hasSomethingToRedo(),isEmpty:L(this,wt,ap).call(this)})}addCommands(t){f(this,wr).add(t),L(this,wt,oi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:L(this,wt,ap).call(this)})}cleanUndoStack(t){f(this,wr).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...f(this,Se)],n=()=>{var c;(c=this._editorUndoBar)==null||c.show(a,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},a=()=>{for(const c of e)L(this,wt,QS).call(this,c)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=f(this,zi))==null||t.commitOrRemove()}hasSomethingToControl(){return f(this,zi)||this.hasSelection}selectAll(){for(const t of f(this,Se))t.commit();L(this,wt,WS).call(this,f(this,bn).values())}unselectAll(){var t;if(!(f(this,zi)&&(f(this,zi).commitOrRemove(),f(this,_n)!==qt.NONE))&&!((t=f(this,Lo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of f(this,Se))e.unselect();f(this,Se).clear(),L(this,wt,oi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;f(this,Fo)[0]+=t,f(this,Fo)[1]+=e;const[a,o]=f(this,Fo),c=[...f(this,Se)],u=1e3;f(this,xs)&&clearTimeout(f(this,xs)),T(this,xs,setTimeout(()=>{T(this,xs,null),f(this,Fo)[0]=f(this,Fo)[1]=0,this.addCommands({cmd:()=>{for(const d of c)f(this,bn).has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of c)f(this,bn).has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u));for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,ws,new Map);for(const t of f(this,Se))f(this,ws).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,ws))return!1;this.disableUserSelect(!1);const t=f(this,ws);T(this,ws,null);let e=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,e||(e=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const n=(a,o,c,u)=>{if(f(this,bn).has(a.id)){const d=f(this,In).get(u);d?a._setParentAndPosition(d,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)n(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(f(this,ws))for(const n of f(this,ws).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||f(this,Se).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return f(this,zi)===t}getActive(){return f(this,zi)}getMode(){return f(this,_n)}get imageManager(){return se(this,"imageManager",new $S)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(p,g,y,b)=>({x:(g-a)/c,y:1-(p+y-n)/o,width:b/c,height:y/o});break;case"180":u=(p,g,y,b)=>({x:1-(p+y-n)/o,y:1-(g+b-a)/c,width:y/o,height:b/c});break;case"270":u=(p,g,y,b)=>({x:1-(g+b-a)/c,y:(p-n)/o,width:b/c,height:y/o});break;default:u=(p,g,y,b)=>({x:(p-n)/o,y:(g-a)/c,width:y/o,height:b/c});break}const d=[];for(let p=0,g=e.rangeCount;p<g;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:v,width:S,height:A}of y.getClientRects())S===0||A===0||d.push(u(b,v,S,A))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(f(this,Td)||T(this,Td,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=f(this,Td))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=f(this,Td))==null?void 0:a.get(t.data.id);if(!e)return;const n=f(this,ga).getRawValue(e);n&&(f(this,_n)===qt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const a=(o=f(this,Bo))==null?void 0:o.get(t);a&&(a.setCanvas(e,n),f(this,Bo).delete(t))}addMissingCanvas(t,e){(f(this,Bo)||T(this,Bo,new Map)).set(t,e)}};_d=new WeakMap,zi=new WeakMap,bn=new WeakMap,In=new WeakMap,Cd=new WeakMap,ga=new WeakMap,Td=new WeakMap,wr=new WeakMap,ko=new WeakMap,Lo=new WeakMap,Rd=new WeakMap,rc=new WeakMap,ws=new WeakMap,Hr=new WeakMap,sc=new WeakMap,qp=new WeakMap,Gp=new WeakMap,Md=new WeakMap,Vp=new WeakMap,Ss=new WeakMap,Po=new WeakMap,Dd=new WeakMap,No=new WeakMap,As=new WeakMap,Rb=new WeakMap,Io=new WeakMap,Yp=new WeakMap,jo=new WeakMap,ac=new WeakMap,oc=new WeakMap,Bo=new WeakMap,Xp=new WeakMap,_n=new WeakMap,Se=new WeakMap,ma=new WeakMap,zo=new WeakMap,lc=new WeakMap,Qp=new WeakMap,Wp=new WeakMap,Fo=new WeakMap,xs=new WeakMap,ya=new WeakMap,Kp=new WeakMap,Sr=new WeakMap,wt=new WeakSet,w0=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},GS=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of f(this,In).values())if(n.hasTextLayer(t))return n;return null},uO=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=L(this,wt,w0).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(f(this,As)||T(this,As,new cB(this)),f(this,As).show(n,a,this.direction==="ltr"))},dO=function(){var o,c,u;const t=document.getSelection();if(!t||t.isCollapsed){f(this,ma)&&((o=f(this,As))==null||o.hide(),T(this,ma,null),L(this,wt,oi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===f(this,ma))return;const a=L(this,wt,w0).call(this,t).closest(".textLayer");if(!a){f(this,ma)&&((c=f(this,As))==null||c.hide(),T(this,ma,null),L(this,wt,oi).call(this,{hasSelectedText:!1}));return}if((u=f(this,As))==null||u.hide(),T(this,ma,e),L(this,wt,oi).call(this,{hasSelectedText:!0}),!(f(this,_n)!==qt.HIGHLIGHT&&f(this,_n)!==qt.NONE)&&(f(this,_n)===qt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,No,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=f(this,_n)===qt.HIGHLIGHT?L(this,wt,GS).call(this,a):null;d==null||d.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=b=>{b.type==="pointerup"&&b.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),b.type==="pointerup"&&L(this,wt,S0).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},S0=function(t=""){f(this,_n)===qt.HIGHLIGHT?this.highlightSelection(t):f(this,qp)&&L(this,wt,uO).call(this)},hO=function(){document.addEventListener("selectionchange",L(this,wt,dO).bind(this),{signal:this._signal})},fO=function(){if(f(this,Po))return;T(this,Po,new AbortController);const t=this.combinedSignal(f(this,Po));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},pO=function(){var t;(t=f(this,Po))==null||t.abort(),T(this,Po,null)},VS=function(){if(f(this,jo))return;T(this,jo,new AbortController);const t=this.combinedSignal(f(this,jo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},gO=function(){var t;(t=f(this,jo))==null||t.abort(),T(this,jo,null)},YS=function(){if(f(this,ko))return;T(this,ko,new AbortController);const t=this.combinedSignal(f(this,ko));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},XS=function(){var t;(t=f(this,ko))==null||t.abort(),T(this,ko,null)},mO=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},oi=function(t){Object.entries(t).some(([n,a])=>f(this,Wp)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,Wp),t)}),f(this,_n)===qt.HIGHLIGHT&&t.hasSelectedEditor===!1&&L(this,wt,ca).call(this,[[oe.HIGHLIGHT_FREE,!0]]))},ca=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},yO=async function(){if(!f(this,Io)){T(this,Io,!0);const t=[];for(const e of f(this,In).values())t.push(e.enable());await Promise.all(t);for(const e of f(this,bn).values())e.enable()}},bO=function(){if(this.unselectAll(),f(this,Io)){T(this,Io,!1);for(const t of f(this,In).values())t.disable();for(const t of f(this,bn).values())t.disable()}},QS=function(t){const e=f(this,In).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},vO=function(){let t=null;for(t of f(this,Se));return t},ap=function(){if(f(this,bn).size===0)return!0;if(f(this,bn).size===1)for(const t of f(this,bn).values())return t.isEmpty();return!1},WS=function(t){for(const e of f(this,Se))e.unselect();f(this,Se).clear();for(const e of t)e.isEmpty()||(f(this,Se).add(e),e.select());L(this,wt,oi).call(this,{hasSelectedEditor:this.hasSelection})},bt(md,"TRANSLATE_SMALL",1),bt(md,"TRANSLATE_BIG",10);let hu=md;var Cn,Es,Ur,Od,_s,Fi,kd,Cs,_i,ba,cc,Ts,Ho,ts,op,A0;const li=class li{constructor(t){k(this,ts);k(this,Cn,null);k(this,Es,!1);k(this,Ur,null);k(this,Od,null);k(this,_s,null);k(this,Fi,null);k(this,kd,!1);k(this,Cs,null);k(this,_i,null);k(this,ba,null);k(this,cc,null);k(this,Ts,!1);T(this,_i,t),T(this,Ts,t._uiManager.useNewAltTextFlow),f(li,Ho)||T(li,Ho,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){li._l10n??(li._l10n=t)}async render(){const t=T(this,Ur,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=T(this,Od,document.createElement("span"));t.append(e),f(this,Ts)?(t.classList.add("new"),t.setAttribute("data-l10n-id",f(li,Ho).missing),e.setAttribute("data-l10n-id",f(li,Ho)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=f(this,_i)._uiManager._signal;t.addEventListener("contextmenu",ss,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),f(this,_i)._uiManager.editAltText(f(this,_i)),f(this,Ts)&&f(this,_i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,ts,op)}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(T(this,kd,!0),a(o))},{signal:n}),await L(this,ts,A0).call(this),t}finish(){f(this,Ur)&&(f(this,Ur).focus({focusVisible:f(this,kd)}),T(this,kd,!1))}isEmpty(){return f(this,Ts)?f(this,Cn)===null:!f(this,Cn)&&!f(this,Es)}hasData(){return f(this,Ts)?f(this,Cn)!==null||!!f(this,ba):this.isEmpty()}get guessedText(){return f(this,ba)}async setGuessedText(t){f(this,Cn)===null&&(T(this,ba,t),T(this,cc,await li._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),L(this,ts,A0).call(this))}toggleAltTextBadge(t=!1){var e;if(!f(this,Ts)||f(this,Cn)){(e=f(this,Cs))==null||e.remove(),T(this,Cs,null);return}if(!f(this,Cs)){const n=T(this,Cs,document.createElement("div"));n.className="noAltTextBadge",f(this,_i).div.append(n)}f(this,Cs).classList.toggle("hidden",!t)}serialize(t){let e=f(this,Cn);return!t&&f(this,ba)===e&&(e=f(this,cc)),{altText:e,decorative:f(this,Es),guessedText:f(this,ba),textWithDisclaimer:f(this,cc)}}get data(){return{altText:f(this,Cn),decorative:f(this,Es)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:o=!1}){n&&(T(this,ba,n),T(this,cc,a)),!(f(this,Cn)===t&&f(this,Es)===e)&&(o||(T(this,Cn,t),T(this,Es,e)),L(this,ts,A0).call(this))}toggle(t=!1){f(this,Ur)&&(!t&&f(this,Fi)&&(clearTimeout(f(this,Fi)),T(this,Fi,null)),f(this,Ur).disabled=!t)}shown(){f(this,_i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,ts,op)}})}destroy(){var t,e;(t=f(this,Ur))==null||t.remove(),T(this,Ur,null),T(this,Od,null),T(this,_s,null),(e=f(this,Cs))==null||e.remove(),T(this,Cs,null)}};Cn=new WeakMap,Es=new WeakMap,Ur=new WeakMap,Od=new WeakMap,_s=new WeakMap,Fi=new WeakMap,kd=new WeakMap,Cs=new WeakMap,_i=new WeakMap,ba=new WeakMap,cc=new WeakMap,Ts=new WeakMap,Ho=new WeakMap,ts=new WeakSet,op=function(){return f(this,Cn)&&"added"||f(this,Cn)===null&&this.guessedText&&"review"||"missing"},A0=async function(){var a,o,c;const t=f(this,Ur);if(!t)return;if(f(this,Ts)){if(t.classList.toggle("done",!!f(this,Cn)),t.setAttribute("data-l10n-id",f(li,Ho)[f(this,ts,op)]),(a=f(this,Od))==null||a.setAttribute("data-l10n-id",f(li,Ho)[`${f(this,ts,op)}-label`]),!f(this,Cn)){(o=f(this,_s))==null||o.remove();return}}else{if(!f(this,Cn)&&!f(this,Es)){t.classList.remove("done"),(c=f(this,_s))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=f(this,_s);if(!e){T(this,_s,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${f(this,_i).id}`;const u=100,d=f(this,_i)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(f(this,Fi)),T(this,Fi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{T(this,Fi,setTimeout(()=>{T(this,Fi,null),f(this,_s).classList.add("show"),f(this,_i)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),t.addEventListener("mouseleave",()=>{var p;f(this,Fi)&&(clearTimeout(f(this,Fi)),T(this,Fi,null)),(p=f(this,_s))==null||p.classList.remove("show")},{signal:d})}f(this,Es)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=f(this,Cn)),e.parentNode||t.append(e);const n=f(this,_i).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},k(li,Ho,null),bt(li,"_l10n",null);let mb=li;var Ld,uc,Zp,Jp,tg,eg,ng,va,dc,wa,hc,Sa,vl,wO,SO,AO;const lE=class lE{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){k(this,vl);k(this,Ld);k(this,uc,!1);k(this,Zp,null);k(this,Jp);k(this,tg);k(this,eg);k(this,ng);k(this,va,null);k(this,dc);k(this,wa,null);k(this,hc);k(this,Sa,null);T(this,Ld,t),T(this,Zp,n),T(this,Jp,e),T(this,tg,a),T(this,eg,o),T(this,ng,c),T(this,hc,new AbortController),T(this,dc,AbortSignal.any([u,f(this,hc).signal])),t.addEventListener("touchstart",L(this,vl,wO).bind(this),{passive:!1,signal:f(this,dc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ya.pixelRatio}destroy(){var t,e;(t=f(this,hc))==null||t.abort(),T(this,hc,null),(e=f(this,va))==null||e.abort(),T(this,va,null)}};Ld=new WeakMap,uc=new WeakMap,Zp=new WeakMap,Jp=new WeakMap,tg=new WeakMap,eg=new WeakMap,ng=new WeakMap,va=new WeakMap,dc=new WeakMap,wa=new WeakMap,hc=new WeakMap,Sa=new WeakMap,vl=new WeakSet,wO=function(t){var a,o,c;if((a=f(this,Jp))!=null&&a.call(this))return;if(t.touches.length===1){if(f(this,va))return;const u=T(this,va,new AbortController),d=AbortSignal.any([f(this,dc),u.signal]),p=f(this,Ld),g={capture:!0,signal:d,passive:!1},y=b=>{var v;b.pointerType==="touch"&&((v=f(this,va))==null||v.abort(),T(this,va,null))};p.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(cn(b),y(b))},g),p.addEventListener("pointerup",y,g),p.addEventListener("pointercancel",y,g);return}if(!f(this,Sa)){T(this,Sa,new AbortController);const u=AbortSignal.any([f(this,dc),f(this,Sa).signal]),d=f(this,Ld),p={signal:u,capture:!1,passive:!1};d.addEventListener("touchmove",L(this,vl,SO).bind(this),p);const g=L(this,vl,AO).bind(this);d.addEventListener("touchend",g,p),d.addEventListener("touchcancel",g,p),p.capture=!0,d.addEventListener("pointerdown",cn,p),d.addEventListener("pointermove",cn,p),d.addEventListener("pointercancel",cn,p),d.addEventListener("pointerup",cn,p),(o=f(this,tg))==null||o.call(this)}if(cn(t),t.touches.length!==2||(c=f(this,Zp))!=null&&c.call(this)){T(this,wa,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),T(this,wa,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},SO=function(t){var _;if(!f(this,wa)||t.touches.length!==2)return;cn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:o}=e,{screenX:c,screenY:u}=n,d=f(this,wa),{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=d,v=y-p,S=b-g,A=c-a,E=u-o,x=Math.hypot(A,E)||1,M=Math.hypot(v,S)||1;if(!f(this,uc)&&Math.abs(M-x)<=lE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!f(this,uc)){T(this,uc,!0);return}const C=[(a+c)/2,(o+u)/2];(_=f(this,eg))==null||_.call(this,C,M,x)},AO=function(t){var e;t.touches.length>=2||(f(this,Sa)&&(f(this,Sa).abort(),T(this,Sa,null),(e=f(this,ng))==null||e.call(this)),f(this,wa)&&(cn(t),T(this,wa,null),T(this,uc,!1)))};let yb=lE;var fc,$r,Ne,Pd,Uo,ig,pc,jn,gc,Aa,$o,rg,mc,Hi,sg,yc,xa,Rs,Nd,Id,Ar,bc,ag,Mb,Bt,KS,og,ZS,x0,xO,EO,JS,E0,tA,_O,CO,TO,eA,RO,nA,MO,DO,OO,iA,lp;const Qt=class Qt{constructor(t){k(this,Bt);k(this,fc,null);k(this,$r,null);k(this,Ne,null);k(this,Pd,!1);k(this,Uo,null);k(this,ig,"");k(this,pc,!1);k(this,jn,null);k(this,gc,null);k(this,Aa,null);k(this,$o,null);k(this,rg,"");k(this,mc,!1);k(this,Hi,null);k(this,sg,!1);k(this,yc,!1);k(this,xa,!1);k(this,Rs,null);k(this,Nd,0);k(this,Id,0);k(this,Ar,null);k(this,bc,null);bt(this,"_isCopy",!1);bt(this,"_editToolbar",null);bt(this,"_initialOptions",Object.create(null));bt(this,"_initialData",null);bt(this,"_isVisible",!0);bt(this,"_uiManager",null);bt(this,"_focusEventsAllowed",!0);k(this,ag,!1);k(this,Mb,Qt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Qt.prototype._resizeWithKeyboard,e=hu.TRANSLATE_SMALL,n=hu.TRANSLATE_BIG;return se(this,"_resizerKeyboardManager",new ym([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Qt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new hB({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Qt._l10n??(Qt._l10n=t),Qt._l10nResizer||(Qt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Qt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Qt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,ag)}set _isDraggable(t){var e;T(this,ag,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,Mb)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):L(this,Bt,lp).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(f(this,mc)?T(this,mc,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}translate(t,e){L(this,Bt,KS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){f(this,Hi)||T(this,Hi,[this.x,this.y,this.width,this.height]),L(this,Bt,KS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){f(this,Hi)||T(this,Hi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,p]=this.getBaseTranslation();c+=d,u+=p;const{style:g}=n;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!f(this,Hi)&&(f(this,Hi)[0]!==this.x||f(this,Hi)[1]!==this.y)}get _hasBeenResized(){return!!f(this,Hi)&&(f(this,Hi)[2]!==this.width||f(this,Hi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Qt,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=n,d*=a,o*=n,c*=a,this._mustFixPosition)switch(t){case 0:o=fi(o,0,n-u),c=fi(c,0,a-d);break;case 90:o=fi(o,0,n-d),c=fi(c,u,a);break;case 180:o=fi(o,u,n),c=fi(c,d,a);break;case 270:o=fi(o,d,n),c=fi(c,0,a-u);break}this.x=o/=n,this.y=c/=a;const[p,g]=this.getBaseTranslation();o+=p,c+=g,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return L(n=Qt,og,ZS).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return L(n=Qt,og,ZS).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,a]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/n).toFixed(2)}%`,f(this,pc)||(o.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),o=!f(this,pc)&&e.endsWith("%");if(a&&o)return;const[c,u]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!f(this,pc)&&!o&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=f(this,Ne))==null||t.finish()}async addEditToolbar(){return this._editToolbar||f(this,yc)?this._editToolbar:(this._editToolbar=new US(this),this.div.append(this._editToolbar.render()),f(this,Ne)&&await this._editToolbar.addAltText(f(this,Ne)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=f(this,Ne))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){f(this,Ne)||(mb.initialize(Qt._l10n),T(this,Ne,new mb(this)),f(this,fc)&&(f(this,Ne).data=f(this,fc),T(this,fc,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=f(this,Ne))==null?void 0:t.data}set altTextData(t){f(this,Ne)&&(f(this,Ne).data=t)}get guessedAltText(){var t;return(t=f(this,Ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=f(this,Ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=f(this,Ne))==null?void 0:e.serialize(t)}hasAltText(){return!!f(this,Ne)&&!f(this,Ne).isEmpty()}hasAltTextData(){var t;return((t=f(this,Ne))==null?void 0:t.hasData())??!1}render(){var c;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=f(this,Pd)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),L(this,Bt,nA).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Qx(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(f(this,bc)||T(this,bc,new yb({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:L(this,Bt,_O).bind(this),onPinching:L(this,Bt,CO).bind(this),onPinchEnd:L(this,Bt,TO).bind(this),signal:this._uiManager._signal}))),(c=this._uiManager._editorUndoBar)==null||c.hide(),t}pointerdown(t){const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(T(this,mc,!0),this._isDraggable){L(this,Bt,RO).call(this,t);return}L(this,Bt,eA).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){f(this,Rs)&&clearTimeout(f(this,Rs)),T(this,Rs,setTimeout(()=>{var t;T(this,Rs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,p=t/a,g=e/a,y=this.x*o,b=this.y*c,v=this.width*o,S=this.height*c;switch(n){case 0:return[y+p+u,c-b-g-S+d,y+p+v+u,c-b-g+d];case 90:return[y+g+u,c-b+p+d,y+g+S+u,c-b+p+v+d];case 180:return[y-p-v+u,c-b+g+d,y-p+u,c-b+g+S+d];case 270:return[y-g-S+u,c-b-p-v+d,y-g+u,c-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,c]=t,u=o-n,d=c-a;switch(this.rotation){case 0:return[n,e-c,u,d];case 90:return[n,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){T(this,yc,!0)}disableEditMode(){T(this,yc,!1)}isInEditMode(){return f(this,yc)}shouldGetKeyboardEvents(){return f(this,xa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return e<c&&a>0&&t<o&&n>0}rebuild(){L(this,Bt,nA).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Te("An editor must be serializable")}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,T(a,fc,t.accessibilityData),a._isCopy=t.isCopy||!1;const[o,c]=a.pageDimensions,[u,d,p,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=d/c,a.width=p/o,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=f(this,$o))==null||t.abort(),T(this,$o,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,Rs)&&(clearTimeout(f(this,Rs)),T(this,Rs,null)),L(this,Bt,lp).call(this),this.removeEditToolbar(),f(this,Ar)){for(const n of f(this,Ar).values())clearTimeout(n);T(this,Ar,null)}this.parent=null,(e=f(this,bc))==null||e.destroy(),T(this,bc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(L(this,Bt,xO).call(this),f(this,jn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),T(this,Aa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=f(this,jn).children;if(!f(this,$r)){T(this,$r,Array.from(e));const c=L(this,Bt,MO).bind(this),u=L(this,Bt,DO).bind(this),d=this._uiManager._signal;for(const p of f(this,$r)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:d}),p.addEventListener("blur",u,{signal:d}),p.addEventListener("focus",L(this,Bt,OO).bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",Qt._l10nResizer[g])}}const n=f(this,$r)[0];let a=0;for(const c of e){if(c===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(f(this,$r).length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)f(this,jn).append(f(this,jn).firstChild);else if(o>a)for(let u=0;u<o-a;u++)f(this,jn).firstChild.before(f(this,jn).lastChild);let c=0;for(const u of e){const p=f(this,$r)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Qt._l10nResizer[p])}}L(this,Bt,iA).call(this,0),T(this,xa,!0),f(this,jn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){f(this,xa)&&L(this,Bt,tA).call(this,f(this,rg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){L(this,Bt,lp).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,o;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=f(this,Ne))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,a,o;(t=f(this,jn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(o=f(this,Ne))==null||o.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return f(this,sg)}set isEditing(t){T(this,sg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){T(this,pc,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){f(this,Ar)||T(this,Ar,new Map);const{action:n}=t;let a=f(this,Ar).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),f(this,Ar).delete(n),f(this,Ar).size===0&&T(this,Ar,null)},Qt._telemetryTimeout),f(this,Ar).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),T(this,Pd,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,Pd,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};fc=new WeakMap,$r=new WeakMap,Ne=new WeakMap,Pd=new WeakMap,Uo=new WeakMap,ig=new WeakMap,pc=new WeakMap,jn=new WeakMap,gc=new WeakMap,Aa=new WeakMap,$o=new WeakMap,rg=new WeakMap,mc=new WeakMap,Hi=new WeakMap,sg=new WeakMap,yc=new WeakMap,xa=new WeakMap,Rs=new WeakMap,Nd=new WeakMap,Id=new WeakMap,Ar=new WeakMap,bc=new WeakMap,ag=new WeakMap,Mb=new WeakMap,Bt=new WeakSet,KS=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},og=new WeakSet,ZS=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},x0=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},xO=function(){if(f(this,jn))return;T(this,jn,document.createElement("div")),f(this,jn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");f(this,jn).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",L(this,Bt,EO).bind(this,n),{signal:e}),a.addEventListener("contextmenu",ss,{signal:e}),a.tabIndex=-1}this.div.prepend(f(this,jn))},EO=function(t,e){var g;e.preventDefault();const{isMac:n}=Vn.platform;if(e.button!==0||e.ctrlKey&&n)return;(g=f(this,Ne))==null||g.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,T(this,gc,[e.screenX,e.screenY]);const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",L(this,Bt,tA).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",cn,{passive:!1,signal:c}),window.addEventListener("contextmenu",ss,{signal:c}),T(this,Aa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=f(this,Ne))==null||y.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,L(this,Bt,E0).call(this)};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})},JS=function(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e;const[o,c]=this.parentDimensions;this.setDims(o*n,c*a),this.fixAndSetPosition(),this._onResized()},E0=function(){if(!f(this,Aa))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=f(this,Aa);T(this,Aa,null);const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===e&&u===n&&d===a||this.addCommands({cmd:L(this,Bt,JS).bind(this,o,c,u,d),undo:L(this,Bt,JS).bind(this,t,e,n,a),mustExec:!0})},tA=function(t,e){const[n,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,p=Qt.MIN_SIZE/n,g=Qt.MIN_SIZE/a,y=L(this,Bt,x0).call(this,this.rotation),b=(B,V)=>[y[0]*B+y[2]*V,y[1]*B+y[3]*V],v=L(this,Bt,x0).call(this,360-this.rotation),S=(B,V)=>[v[0]*B+v[2]*V,v[1]*B+v[3]*V];let A,E,x=!1,M=!1;switch(t){case"topLeft":x=!0,A=(B,V)=>[0,0],E=(B,V)=>[B,V];break;case"topMiddle":A=(B,V)=>[B/2,0],E=(B,V)=>[B/2,V];break;case"topRight":x=!0,A=(B,V)=>[B,0],E=(B,V)=>[0,V];break;case"middleRight":M=!0,A=(B,V)=>[B,V/2],E=(B,V)=>[0,V/2];break;case"bottomRight":x=!0,A=(B,V)=>[B,V],E=(B,V)=>[0,0];break;case"bottomMiddle":A=(B,V)=>[B/2,V],E=(B,V)=>[B/2,0];break;case"bottomLeft":x=!0,A=(B,V)=>[0,V],E=(B,V)=>[B,0];break;case"middleLeft":M=!0,A=(B,V)=>[0,V/2],E=(B,V)=>[B,V/2];break}const C=A(u,d),_=E(u,d);let D=b(..._);const R=Qt._round(o+D[0]),N=Qt._round(c+D[1]);let $=1,j=1,H,F;if(e.fromKeyboard)({deltaX:H,deltaY:F}=e);else{const{screenX:B,screenY:V}=e,[at,ct]=f(this,gc);[H,F]=this.screenToPageTranslation(B-at,V-ct),f(this,gc)[0]=B,f(this,gc)[1]=V}if([H,F]=S(H/n,F/a),x){const B=Math.hypot(u,d);$=j=Math.max(Math.min(Math.hypot(_[0]-C[0]-H,_[1]-C[1]-F)/B,1/u,1/d),p/u,g/d)}else M?$=fi(Math.abs(_[0]-C[0]-H),p,1)/u:j=fi(Math.abs(_[1]-C[1]-F),g,1)/d;const G=Qt._round(u*$),Q=Qt._round(d*j);D=b(...E(G,Q));const X=R-D[0],ut=N-D[1];f(this,Hi)||T(this,Hi,[this.x,this.y,this.width,this.height]),this.width=G,this.height=Q,this.x=X,this.y=ut,this.setDims(n*G,a*Q),this.fixAndSetPosition(),this._onResizing()},_O=function(){var t;T(this,Aa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=f(this,Ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},CO=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const c=L(this,Bt,x0).call(this,this.rotation),u=(R,N)=>[c[0]*R+c[2]*N,c[1]*R+c[3]*N],[d,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,v=this.height,S=Qt.MIN_SIZE/d,A=Qt.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/v),S/b,A/v);const E=Qt._round(b*o),x=Qt._round(v*o);if(E===b&&x===v)return;f(this,Hi)||T(this,Hi,[g,y,b,v]);const M=u(b/2,v/2),C=Qt._round(g+M[0]),_=Qt._round(y+M[1]),D=u(E/2,x/2);this.x=C-D[0],this.y=_-D[1],this.width=E,this.height=x,this.setDims(d*E,p*x),this.fixAndSetPosition(),this._onResizing()},TO=function(){var t;(t=f(this,Ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),L(this,Bt,E0).call(this)},eA=function(t){const{isMac:e}=Vn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},RO=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},u=p=>{a.abort(),T(this,Uo,null),T(this,mc,!1),this._uiManager.endDragSession()||L(this,Bt,eA).call(this,p),n&&this._onStopDragging()};e&&(T(this,Nd,t.clientX),T(this,Id,t.clientY),T(this,Uo,t.pointerId),T(this,ig,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==f(this,Uo)){cn(p);return}const[v,S]=this.screenToPageTranslation(g-f(this,Nd),y-f(this,Id));T(this,Nd,g),T(this,Id,y),this._uiManager.dragSelectedEditors(v,S)},c),window.addEventListener("touchmove",cn,c),window.addEventListener("pointerdown",p=>{p.pointerType===f(this,ig)&&(f(this,bc)||p.isPrimary)&&u(p),cn(p)},c));const d=p=>{if(!f(this,Uo)||f(this,Uo)===p.pointerId){u(p);return}cn(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},nA=function(){if(f(this,$o)||!this.div)return;T(this,$o,new AbortController);const t=this._uiManager.combinedSignal(f(this,$o));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},MO=function(t){Qt._resizerKeyboardManager.exec(this,t)},DO=function(t){var e;f(this,xa)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==f(this,jn)&&L(this,Bt,lp).call(this)},OO=function(t){T(this,rg,f(this,xa)?t:"")},iA=function(t){if(f(this,$r))for(const e of f(this,$r))e.tabIndex=t},lp=function(){T(this,xa,!1),L(this,Bt,iA).call(this,-1),L(this,Bt,E0).call(this)},k(Qt,og),bt(Qt,"_l10n",null),bt(Qt,"_l10nResizer",null),bt(Qt,"_borderLineWidth",-1),bt(Qt,"_colorManager",new qS),bt(Qt,"_zIndex",1),bt(Qt,"_telemetryTimeout",1e3);let ke=Qt;class hB extends ke{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const RR=3285377520,br=4294901760,bs=65535;class kO{constructor(t){this.h1=t?t&4294967295:RR,this.h2=t?t&4294967295:RR}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let A=0,E=t.length;A<E;A++){const x=t.charCodeAt(A);x<=255?e[n++]=x:(e[n++]=x>>>8,e[n++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,d=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,v=y&bs,S=b&bs;for(let A=0;A<a;A++)A&1?(u=c[A],u=u*y&br|u*v&bs,u=u<<15|u>>>17,u=u*b&br|u*S&bs,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(d=c[A],d=d*y&br|d*v&bs,d=d<<15|d>>>17,d=d*b&br|d*S&bs,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&br|u*v&bs,u=u<<15|u>>>17,u=u*b&br|u*S&bs,a&1?p^=u:g^=u}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&br|t*36045&bs,e=e*4283543511&br|((e<<16|t>>>16)*2950163797&br)>>>16,t^=e>>>1,t=t*444984403&br|t*60499&bs,e=e*3301882366&br|((e<<16|t>>>16)*3120437893&br)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const rA=Object.freeze({map:null,hash:"",transfer:void 0});var vc,wc,Bn,Db,LO;class Wx{constructor(){k(this,Db);k(this,vc,!1);k(this,wc,null);k(this,Bn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=f(this,Bn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return f(this,Bn).get(t)}remove(t){if(f(this,Bn).delete(t),f(this,Bn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of f(this,Bn).values())if(e instanceof ke)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=f(this,Bn).get(t);let a=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(a=!0,n[o]=c);else a=!0,f(this,Bn).set(t,e);a&&L(this,Db,LO).call(this),e instanceof ke&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return f(this,Bn).has(t)}get size(){return f(this,Bn).size}resetModified(){f(this,vc)&&(T(this,vc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PO(this)}get serializable(){if(f(this,Bn).size===0)return rA;const t=new Map,e=new kO,n=[],a=Object.create(null);let o=!1;for(const[c,u]of f(this,Bn)){const d=u instanceof ke?u.serialize(!1,a):u;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:rA}get editorStats(){let t=null;const e=new Map;for(const n of f(this,Bn).values()){if(!(n instanceof ke))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const c=t[o]||(t[o]=new Map);for(const[u,d]of Object.entries(a)){if(u==="type")continue;let p=c.get(u);p||(p=new Map,c.set(u,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){T(this,wc,null)}get modifiedIds(){if(f(this,wc))return f(this,wc);const t=[];for(const e of f(this,Bn).values())!(e instanceof ke)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return T(this,wc,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return f(this,Bn).entries()}}vc=new WeakMap,wc=new WeakMap,Bn=new WeakMap,Db=new WeakSet,LO=function(){f(this,vc)||(T(this,vc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lg;class PO extends Wx{constructor(e){super();k(this,lg);const{map:n,hash:a,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);T(this,lg,{map:c,hash:a,transfer:o})}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,lg)}get modifiedIds(){return se(this,"modifiedIds",{ids:new Set,hash:""})}}lg=new WeakMap;var jd;class fB{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){k(this,jd,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),f(this,jd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||f(this,jd).has(t.loadedName))){if(dn(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=t,u=new FontFace(a,o,c);this.addNativeFontFace(u);try{await u.load(),f(this,jd).add(a),n==null||n(t)}catch{Gt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Gt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return se(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return se(this,"isSyncFontLoadingSupported",hi||Vn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(dn(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return se(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(_,D){return _.charCodeAt(D)<<24|_.charCodeAt(D+1)<<16|_.charCodeAt(D+2)<<8|_.charCodeAt(D+3)&255}function a(_,D,R,N){const $=_.substring(0,D),j=_.substring(D+R);return $+N+j}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let p=0;function g(_,D){if(++p>30){Gt("Load test font never loaded."),D();return}if(d.font="30px "+_,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(g.bind(null,_,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const S=16,A=1482184792;let E=n(b,S);for(o=0,c=y.length-3;o<c;o+=4)E=E-A+n(y,o)|0;o<y.length&&(E=E-A+n(y+"XXX",o)|0),b=a(b,S,4,Z8(E));const x=`url(data:font/opentype;base64,${btoa(b)});`,M=`@font-face {font-family:"${y}";src:${x}}`;this.insertRule(M);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const _ of[t.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=_,C.append(D)}this._document.body.append(C),g(y,()=>{C.remove(),e.complete()})}}jd=new WeakMap;class pB{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${eO(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(c){Gt(`getPathGenerator - ignoring character: "${c}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}}const Qy={DATA:1,ERROR:2},on={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function MR(){}function xi(i){if(i instanceof ml||i instanceof zS||i instanceof _R||i instanceof gb||i instanceof Jw)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new ml(i.message);case"InvalidPDFException":return new zS(i.message);case"PasswordException":return new _R(i.message,i.code);case"ResponseException":return new gb(i.message,i.status,i.missing);case"UnknownErrorException":return new Jw(i.message,i.details)}return new Jw(i.message,i.toString())}var Bd,Mr,NO,IO,jO,_0;class cp{constructor(t,e,n){k(this,Mr);k(this,Bd,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",L(this,Mr,NO).bind(this),{signal:f(this,Bd).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:p.desiredSize},a),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:c,targetName:u,stream:on.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{dn(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:on.CANCEL,streamId:o,reason:xi(p)}),g.promise}},n)}destroy(){var t;(t=f(this,Bd))==null||t.abort(),T(this,Bd,null)}}Bd=new WeakMap,Mr=new WeakSet,NO=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){L(this,Mr,jO).call(this,t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Qy.DATA)a.resolve(t.data);else if(t.callback===Qy.ERROR)a.reject(xi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(c){o.postMessage({sourceName:n,targetName:a,callback:Qy.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:a,callback:Qy.ERROR,callbackId:t.callbackId,reason:xi(c)})});return}if(t.streamId){L(this,Mr,IO).call(this,t);return}e(t.data)},IO=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:on.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:on.CLOSE,streamId:e}),delete c.streamSinks[e])},error(p){dn(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:on.ERROR,streamId:e,reason:xi(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:on.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:a,stream:on.START_COMPLETE,streamId:e,reason:xi(p)})})},jO=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case on.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(xi(t.reason));break;case on.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(xi(t.reason));break;case on.PULL:if(!u){o.postMessage({sourceName:n,targetName:a,stream:on.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||MR).then(function(){o.postMessage({sourceName:n,targetName:a,stream:on.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:a,stream:on.PULL_COMPLETE,streamId:e,reason:xi(p)})});break;case on.ENQUEUE:if(dn(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case on.CLOSE:if(dn(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),L(this,Mr,_0).call(this,c,e);break;case on.ERROR:dn(c,"error should have stream controller"),c.controller.error(xi(t.reason)),L(this,Mr,_0).call(this,c,e);break;case on.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(xi(t.reason)),L(this,Mr,_0).call(this,c,e);break;case on.CANCEL:if(!u)break;const d=xi(t.reason);Promise.try(u.onCancel||MR,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:on.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:a,stream:on.CANCEL_COMPLETE,streamId:e,reason:xi(p)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},_0=async function(t,e){var n,a,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var cg;class BO{constructor({enableHWA:t=!1}){k(this,cg,!1);T(this,cg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!f(this,cg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Te("Abstract method `_createCanvas` called.")}}cg=new WeakMap;class gB extends BO{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class zO{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class DR extends zO{async _fetch(t){const e=await gm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):pm(e)}}class FO{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}var Sc,zd,Ea,_a,Jn,Ac,xc,At,Kn,up,ad,C0,od,HO,sA,ld,dp,hp,aA,fp;class mB extends FO{constructor({docId:e,ownerDocument:n=globalThis.document}){super();k(this,At);k(this,Sc);k(this,zd);k(this,Ea);k(this,_a);k(this,Jn);k(this,Ac);k(this,xc,0);T(this,_a,e),T(this,Jn,n)}addFilter(e){if(!e)return"none";let n=f(this,At,Kn).get(e);if(n)return n;const[a,o,c]=L(this,At,C0).call(this,e),u=e.length===1?a:`${a}${o}${c}`;if(n=f(this,At,Kn).get(u),n)return f(this,At,Kn).set(e,n),n;const d=`g_${f(this,_a)}_transfer_map_${ai(this,xc)._++}`,p=L(this,At,od).call(this,d);f(this,At,Kn).set(e,p),f(this,At,Kn).set(u,p);const g=L(this,At,ld).call(this,d);return L(this,At,hp).call(this,a,o,c,g),p}addHCMFilter(e,n){var S;const a=`${e}-${n}`,o="base";let c=f(this,At,up).get(o);if((c==null?void 0:c.key)===a||(c?((S=c.filter)==null||S.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},f(this,At,up).set(o,c)),!e||!n))return c.url;const u=L(this,At,fp).call(this,e);e=Rt.makeHexColor(...u);const d=L(this,At,fp).call(this,n);if(n=Rt.makeHexColor(...d),f(this,At,ad).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const p=new Array(256);for(let A=0;A<=255;A++){const E=A/255;p[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const g=p.join(","),y=`g_${f(this,_a)}_hcm_filter`,b=c.filter=L(this,At,ld).call(this,y);L(this,At,hp).call(this,g,g,g,b),L(this,At,sA).call(this,b);const v=(A,E)=>{const x=u[A]/255,M=d[A]/255,C=new Array(E+1);for(let _=0;_<=E;_++)C[_]=x+_/E*(M-x);return C.join(",")};return L(this,At,hp).call(this,v(0,5),v(1,5),v(2,5),b),c.url=L(this,At,od).call(this,y),c.url}addAlphaFilter(e){let n=f(this,At,Kn).get(e);if(n)return n;const[a]=L(this,At,C0).call(this,[e]),o=`alpha_${a}`;if(n=f(this,At,Kn).get(o),n)return f(this,At,Kn).set(e,n),n;const c=`g_${f(this,_a)}_alpha_map_${ai(this,xc)._++}`,u=L(this,At,od).call(this,c);f(this,At,Kn).set(e,u),f(this,At,Kn).set(o,u);const d=L(this,At,ld).call(this,c);return L(this,At,aA).call(this,a,d),u}addLuminosityFilter(e){let n=f(this,At,Kn).get(e||"luminosity");if(n)return n;let a,o;if(e?([a]=L(this,At,C0).call(this,[e]),o=`luminosity_${a}`):o="luminosity",n=f(this,At,Kn).get(o),n)return f(this,At,Kn).set(e,n),n;const c=`g_${f(this,_a)}_luminosity_map_${ai(this,xc)._++}`,u=L(this,At,od).call(this,c);f(this,At,Kn).set(e,u),f(this,At,Kn).set(o,u);const d=L(this,At,ld).call(this,c);return L(this,At,HO).call(this,d),e&&L(this,At,aA).call(this,a,d),u}addHighlightHCMFilter(e,n,a,o,c){var M;const u=`${n}-${a}-${o}-${c}`;let d=f(this,At,up).get(e);if((d==null?void 0:d.key)===u||(d?((M=d.filter)==null||M.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},f(this,At,up).set(e,d)),!n||!a))return d.url;const[p,g]=[n,a].map(L(this,At,fp).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),b=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[v,S]=[o,c].map(L(this,At,fp).bind(this));b<y&&([y,b,v,S]=[b,y,S,v]),f(this,At,ad).style.color="";const A=(C,_,D)=>{const R=new Array(256),N=(b-y)/D,$=C/255,j=(_-C)/(255*D);let H=0;for(let F=0;F<=D;F++){const G=Math.round(y+F*N),Q=$+F*j;for(let X=H;X<=G;X++)R[X]=Q;H=G+1}for(let F=H;F<256;F++)R[F]=R[H-1];return R.join(",")},E=`g_${f(this,_a)}_hcm_${e}_filter`,x=d.filter=L(this,At,ld).call(this,E);return L(this,At,sA).call(this,x),L(this,At,hp).call(this,A(v[0],S[0],5),A(v[1],S[1],5),A(v[2],S[2],5),x),d.url=L(this,At,od).call(this,E),d.url}destroy(e=!1){var n,a,o,c;e&&((n=f(this,Ac))!=null&&n.size)||((a=f(this,Ea))==null||a.parentNode.parentNode.remove(),T(this,Ea,null),(o=f(this,zd))==null||o.clear(),T(this,zd,null),(c=f(this,Ac))==null||c.clear(),T(this,Ac,null),T(this,xc,0))}}Sc=new WeakMap,zd=new WeakMap,Ea=new WeakMap,_a=new WeakMap,Jn=new WeakMap,Ac=new WeakMap,xc=new WeakMap,At=new WeakSet,Kn=function(){return f(this,zd)||T(this,zd,new Map)},up=function(){return f(this,Ac)||T(this,Ac,new Map)},ad=function(){if(!f(this,Ea)){const e=f(this,Jn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=f(this,Jn).createElementNS(la,"svg");a.setAttribute("width",0),a.setAttribute("height",0),T(this,Ea,f(this,Jn).createElementNS(la,"defs")),e.append(a),a.append(f(this,Ea)),f(this,Jn).body.append(e)}return f(this,Ea)},C0=function(e){if(e.length===1){const p=e[0],g=new Array(256);for(let b=0;b<256;b++)g[b]=p[b]/255;const y=g.join(",");return[y,y,y]}const[n,a,o]=e,c=new Array(256),u=new Array(256),d=new Array(256);for(let p=0;p<256;p++)c[p]=n[p]/255,u[p]=a[p]/255,d[p]=o[p]/255;return[c.join(","),u.join(","),d.join(",")]},od=function(e){if(f(this,Sc)===void 0){T(this,Sc,"");const n=f(this,Jn).URL;n!==f(this,Jn).baseURI&&(dv(n)?Gt('#createUrl: ignore "data:"-URL for performance reasons.'):T(this,Sc,ZD(n,"")))}return`url(${f(this,Sc)}#${e})`},HO=function(e){const n=f(this,Jn).createElementNS(la,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},sA=function(e){const n=f(this,Jn).createElementNS(la,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},ld=function(e){const n=f(this,Jn).createElementNS(la,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),f(this,At,ad).append(n),n},dp=function(e,n,a){const o=f(this,Jn).createElementNS(la,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),e.append(o)},hp=function(e,n,a,o){const c=f(this,Jn).createElementNS(la,"feComponentTransfer");o.append(c),L(this,At,dp).call(this,c,"feFuncR",e),L(this,At,dp).call(this,c,"feFuncG",n),L(this,At,dp).call(this,c,"feFuncB",a)},aA=function(e,n){const a=f(this,Jn).createElementNS(la,"feComponentTransfer");n.append(a),L(this,At,dp).call(this,a,"feFuncA",e)},fp=function(e){return f(this,At,ad).style.color=e,Xx(getComputedStyle(f(this,At,ad)).getPropertyValue("color"))};class UO{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class OR extends UO{async _fetch(t){const e=await gm(t,"arraybuffer");return new Uint8Array(e)}}class $O{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class kR extends $O{async _fetch(t){const e=await gm(t,"arraybuffer");return new Uint8Array(e)}}hi&&Gt("Please use the `legacy` build in Node.js environments.");async function Kx(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class yB extends FO{}class bB extends BO{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class vB extends zO{async _fetch(t){return Kx(t)}}class wB extends UO{async _fetch(t){return Kx(t)}}class SB extends $O{async _fetch(t){return Kx(t)}}const Un={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function oA(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),i.clip(a)}class Zx{isModifyingCurrentTransform(){return!1}getPattern(){Te("Abstract method `getPattern` called.")}}class AB extends Zx{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===Un.STROKE||a===Un.FILL){const c=e.current.getClippedPathBoundingBox(a,Ve(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,p=e.cachedCanvases.getCanvas("pattern",u,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),n=Rt.transform(n,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),oA(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else oA(t,this._bbox),o=this._createGradient(t);return o}}function nS(i,t,e,n,a,o,c,u){const d=t.coords,p=t.colors,g=i.data,y=i.width*4;let b;d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b),d[n+1]>d[a+1]&&(b=n,n=a,a=b,b=c,c=u,u=b),d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b);const v=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,A=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,x=(d[a]+t.offsetX)*t.scaleX,M=(d[a+1]+t.offsetY)*t.scaleY;if(S>=M)return;const C=p[o],_=p[o+1],D=p[o+2],R=p[c],N=p[c+1],$=p[c+2],j=p[u],H=p[u+1],F=p[u+2],G=Math.round(S),Q=Math.round(M);let X,ut,B,V,at,ct,z,Z;for(let ot=G;ot<=Q;ot++){if(ot<E){const St=ot<S?0:(S-ot)/(S-E);X=v-(v-A)*St,ut=C-(C-R)*St,B=_-(_-N)*St,V=D-(D-$)*St}else{let St;ot>M?St=1:E===M?St=0:St=(E-ot)/(E-M),X=A-(A-x)*St,ut=R-(R-j)*St,B=N-(N-H)*St,V=$-($-F)*St}let lt;ot<S?lt=0:ot>M?lt=1:lt=(S-ot)/(S-M),at=v-(v-x)*lt,ct=C-(C-j)*lt,z=_-(_-H)*lt,Z=D-(D-F)*lt;const mt=Math.round(Math.min(X,at)),pt=Math.round(Math.max(X,at));let yt=y*ot+mt*4;for(let St=mt;St<=pt;St++)lt=(X-St)/(X-at),lt<0?lt=0:lt>1&&(lt=1),g[yt++]=ut-(ut-ct)*lt|0,g[yt++]=B-(B-z)*lt|0,g[yt++]=V-(V-Z)*lt|0,g[yt++]=255}}function xB(i,t,e){const n=t.coords,a=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,p=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<p;y++,g++)nS(i,e,n[g],n[g+1],n[g+u],a[g],a[g+1],a[g+u]),nS(i,e,n[g+u+1],n[g+1],n[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)nS(i,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class EB extends Zx{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),v=p/y,S=g/b,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/S},E=y+2*2,x=b+2*2,M=n.getCanvas("mesh",E,x),C=M.context,_=C.createImageData(y,b);if(e){const R=_.data;for(let N=0,$=R.length;N<$;N+=4)R[N]=e[0],R[N+1]=e[1],R[N+2]=e[2],R[N+3]=255}for(const R of this._figures)xB(_,R,A);return C.putImageData(_,2,2),{canvas:M.canvas,offsetX:u-2*v,offsetY:d-2*S,scaleX:v,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){oA(t,this._bbox);const o=new Float32Array(2);if(a===Un.SHADING)Rt.singularValueDecompose2dScale(Ve(t),o);else if(this.matrix){Rt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;Rt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else Rt.singularValueDecompose2dScale(e.baseTransform,o);const c=this._createMeshCanvas(o,a===Un.SHADING?null:this._background,e.cachedCanvases);return a!==Un.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class _B extends Zx{getPattern(){return"hotpink"}}function CB(i){switch(i[0]){case"RadialAxial":return new AB(i);case"Mesh":return new EB(i);case"Dummy":return new _B}throw new Error(`Unknown IR type: ${i[0]}`)}const LR={COLORED:1,UNCOLORED:2},Ob=class Ob{constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:a,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),uv("TilingType: "+o);const g=e[0],y=e[1],b=e[2],v=e[3],S=b-g,A=v-y,E=new Float32Array(2);Rt.singularValueDecompose2dScale(this.matrix,E);const[x,M]=E;Rt.singularValueDecompose2dScale(this.baseTransform,E);const C=x*E[0],_=M*E[1];let D=S,R=A,N=!1,$=!1;const j=Math.ceil(d*C),H=Math.ceil(p*_),F=Math.ceil(S*C),G=Math.ceil(A*_);j>=F?D=d:N=!0,H>=G?R=p:$=!0;const Q=this.getSizeAndScale(D,this.ctx.canvas.width,C),X=this.getSizeAndScale(R,this.ctx.canvas.height,_),ut=t.cachedCanvases.getCanvas("pattern",Q.size,X.size),B=ut.context,V=u.createCanvasGraphics(B);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,a,c),B.translate(-Q.scale*g,-X.scale*y),V.transform(Q.scale,0,0,X.scale,0,0),B.save(),this.clipBbox(V,g,y,b,v),V.baseTransform=Ve(V.ctx),V.executeOperatorList(n),V.endDrawing(),B.restore(),N||$){const at=ut.canvas;N&&(D=d),$&&(R=p);const ct=this.getSizeAndScale(D,this.ctx.canvas.width,C),z=this.getSizeAndScale(R,this.ctx.canvas.height,_),Z=ct.size,ot=z.size,lt=t.cachedCanvases.getCanvas("pattern-workaround",Z,ot),mt=lt.context,pt=N?Math.floor(S/d):0,yt=$?Math.floor(A/p):0;for(let St=0;St<=pt;St++)for(let Pt=0;Pt<=yt;Pt++)mt.drawImage(at,Z*St,ot*Pt,Z,ot,0,0,Z,ot);return{canvas:lt.canvas,scaleX:ct.scale,scaleY:z.scale,offsetX:g,offsetY:y}}return{canvas:ut.canvas,scaleX:Q.scale,scaleY:X.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,n){const a=Math.max(Ob.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const c=a-e,u=o-n;t.ctx.rect(e,n,c,u),Rt.axialAlignedBoundingBox([e,n,a,o],Ve(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case LR.COLORED:const c=this.ctx;a.fillStyle=c.fillStyle,a.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case LR.UNCOLORED:const u=Rt.makeHexColor(n[0],n[1],n[2]);a.fillStyle=u,a.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new K8(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a){let o=n;a!==Un.SHADING&&(o=Rt.transform(o,e.baseTransform),this.matrix&&(o=Rt.transform(o,this.matrix)));const c=this.createPatternCanvas(e);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};bt(Ob,"MAX_PATTERN_SIZE",3e3);let lA=Ob;function TB({src:i,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Vn.isLittleEndian?4278190080:255,[d,p]=c?[o,u]:[u,o],g=n>>3,y=n&7,b=i.length;e=new Uint32Array(e.buffer);let v=0;for(let S=0;S<a;S++){for(const E=t+g;t<E;t++){const x=t<b?i[t]:255;e[v++]=x&128?p:d,e[v++]=x&64?p:d,e[v++]=x&32?p:d,e[v++]=x&16?p:d,e[v++]=x&8?p:d,e[v++]=x&4?p:d,e[v++]=x&2?p:d,e[v++]=x&1?p:d}if(y===0)continue;const A=t<b?i[t++]:255;for(let E=0;E<y;E++)e[v++]=A&1<<7-E?p:d}return{srcPos:t,destPos:v}}const PR=16,NR=100,RB=15,IR=10,Ri=16,iS=new DOMMatrix,nr=new Float32Array(2),gd=new Float32Array([1/0,1/0,-1/0,-1/0]);function MB(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,a,o,c,u){t.transform(e,n,a,o,c,u),this.__originalTransform(e,n,a,o,c,u)},i.setTransform=function(e,n,a,o,c,u){t.setTransform(e,n,a,o,c,u),this.__originalSetTransform(e,n,a,o,c,u)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,a,o,c,u){t.bezierCurveTo(e,n,a,o,c,u),this.__originalBezierCurveTo(e,n,a,o,c,u)},i.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class DB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Wy(i,t,e,n,a,o,c,u,d,p){const[g,y,b,v,S,A]=Ve(i);if(y===0&&b===0){const M=c*g+S,C=Math.round(M),_=u*v+A,D=Math.round(_),R=(c+d)*g+S,N=Math.abs(Math.round(R)-C)||1,$=(u+p)*v+A,j=Math.abs(Math.round($)-D)||1;return i.setTransform(Math.sign(g),0,0,Math.sign(v),C,D),i.drawImage(t,e,n,a,o,0,0,N,j),i.setTransform(g,y,b,v,S,A),[N,j]}if(g===0&&v===0){const M=u*b+S,C=Math.round(M),_=c*y+A,D=Math.round(_),R=(u+p)*b+S,N=Math.abs(Math.round(R)-C)||1,$=(c+d)*y+A,j=Math.abs(Math.round($)-D)||1;return i.setTransform(0,Math.sign(y),Math.sign(b),0,C,D),i.drawImage(t,e,n,a,o,0,0,j,N),i.setTransform(g,y,b,v,S,A),[j,N]}i.drawImage(t,e,n,a,o,c,u,d,p);const E=Math.hypot(g,y),x=Math.hypot(b,v);return[E*d,x*p]}class jR{constructor(t,e){bt(this,"alphaIsShape",!1);bt(this,"fontSize",0);bt(this,"fontSizeScale",1);bt(this,"textMatrix",null);bt(this,"textMatrixScale",1);bt(this,"fontMatrix",BS);bt(this,"leading",0);bt(this,"x",0);bt(this,"y",0);bt(this,"lineX",0);bt(this,"lineY",0);bt(this,"charSpacing",0);bt(this,"wordSpacing",0);bt(this,"textHScale",1);bt(this,"textRenderingMode",Wn.FILL);bt(this,"textRise",0);bt(this,"fillColor","#000000");bt(this,"strokeColor","#000000");bt(this,"patternFill",!1);bt(this,"patternStroke",!1);bt(this,"fillAlpha",1);bt(this,"strokeAlpha",1);bt(this,"lineWidth",1);bt(this,"activeSMask",null);bt(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=gd.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Un.FILL,e=null){const n=this.minMax.slice();if(t===Un.STROKE){e||Te("Stroke bounding box must include transform."),Rt.singularValueDecompose2dScale(e,nr);const a=nr[0]*this.lineWidth/2,o=nr[1]*this.lineWidth/2;n[0]-=a,n[1]-=o,n[2]+=a,n[3]+=o}return n}updateClipFromPath(){const t=Rt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(gd,0)}getClippedPathBoundingBox(t=Un.FILL,e=null){return Rt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function BR(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%Ri,o=(e-a)/Ri,c=a===0?o:o+1,u=i.createImageData(n,Ri);let d=0,p;const g=t.data,y=u.data;let b,v,S,A;if(t.kind===m0.GRAYSCALE_1BPP){const E=g.byteLength,x=new Uint32Array(y.buffer,0,y.byteLength>>2),M=x.length,C=n+7>>3,_=4294967295,D=Vn.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(S=b<o?Ri:a,p=0,v=0;v<S;v++){const R=E-d;let N=0;const $=R>C?n:R*8-7,j=$&-8;let H=0,F=0;for(;N<j;N+=8)F=g[d++],x[p++]=F&128?_:D,x[p++]=F&64?_:D,x[p++]=F&32?_:D,x[p++]=F&16?_:D,x[p++]=F&8?_:D,x[p++]=F&4?_:D,x[p++]=F&2?_:D,x[p++]=F&1?_:D;for(;N<$;N++)H===0&&(F=g[d++],H=128),x[p++]=F&H?_:D,H>>=1}for(;p<M;)x[p++]=0;i.putImageData(u,0,b*Ri)}}else if(t.kind===m0.RGBA_32BPP){for(v=0,A=n*Ri*4,b=0;b<o;b++)y.set(g.subarray(d,d+A)),d+=A,i.putImageData(u,0,v),v+=Ri;b<c&&(A=n*a*4,y.set(g.subarray(d,d+A)),i.putImageData(u,0,v))}else if(t.kind===m0.RGB_24BPP)for(S=Ri,A=n*S,b=0;b<c;b++){for(b>=o&&(S=a,A=n*S),p=0,v=A;v--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;i.putImageData(u,0,b*Ri)}else throw new Error(`bad image kind: ${t.kind}`)}function zR(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%Ri,o=(e-a)/Ri,c=a===0?o:o+1,u=i.createImageData(n,Ri);let d=0;const p=t.data,g=u.data;for(let y=0;y<c;y++){const b=y<o?Ri:a;({srcPos:d}=TB({src:p,srcPos:d,dest:g,width:n,height:b,nonBlackColor:0})),i.putImageData(u,0,y*Ri)}}function Kf(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Ky(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function FR(i,t){if(t)return!0;Rt.singularValueDecompose2dScale(i,nr);const e=Math.fround(Ya.pixelRatio*yl.PDF_TO_CSS_UNITS);return nr[0]<=e&&nr[1]<=e}const OB=["butt","round","square"],kB=["miter","round","bevel"],LB={},HR={};var os,cA,uA,dA;const cE=class cE{constructor(t,e,n,a,o,{optionalContentConfig:c,markedContentStack:u=null},d,p){k(this,os);this.ctx=t,this.current=new jR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new DB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Ve(this.compositeCtx))}this.ctx.save(),Ky(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ve(this.ctx)}executeOperatorList(t,e,n,a){const o=t.argsArray,c=t.fnArray;let u=e||0;const d=o.length;if(d===u)return u;const p=d-u>IR&&typeof n=="function",g=p?Date.now()+RB:0;let y=0;const b=this.commonObjs,v=this.objs;let S;for(;;){if(a!==void 0&&u===a.nextBreakPoint)return a.breakIt(u,n),u;if(S=c[u],S!==pb.dependency)this[S].apply(this,o[u]);else for(const A of o[u]){const E=A.startsWith("g_")?b:v;if(!E.has(A))return E.get(A,n),u}if(u++,u===d)return u;if(p&&++y>IR){if(Date.now()>g)return n(),u;y=0}}}endDrawing(){L(this,os,cA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),L(this,os,uA).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=a,p="prescale1",g,y;for(;o>2&&u>1||c>2&&d>1;){let b=u,v=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/v),g=this.cachedCanvases.getCanvas(p,b,v),y=g.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,u,d,0,0,b,v),t=g.canvas,u=b,d=v,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,u=Ve(e);let d,p,g,y;if((t.bitmap||t.data)&&t.count>1){const j=t.bitmap||t.data.buffer;p=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(j),d||(d=new Map,this._cachedBitmapsMap.set(j,d));const H=d.get(p);if(H&&!c){const F=Math.round(Math.min(u[0],u[2])+u[4]),G=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:H,offsetX:F,offsetY:G}}g=H}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,a),zR(y.context,t));let b=Rt.transform(u,[1/n,0,0,-1/a,0,0]);b=Rt.transform(b,[1,0,0,1,0,-a]);const v=gd.slice();Rt.axialAlignedBoundingBox([0,0,n,a],b,v);const[S,A,E,x]=v,M=Math.round(E-S)||1,C=Math.round(x-A)||1,_=this.cachedCanvases.getCanvas("fillCanvas",M,C),D=_.context,R=S,N=A;D.translate(-R,-N),D.transform(...b),g||(g=this._scaleImage(y.canvas,ys(D)),g=g.img,d&&c&&d.set(p,g)),D.imageSmoothingEnabled=FR(Ve(D),t.interpolate),Wy(D,g,0,0,g.width,g.height,0,0,n,a),D.globalCompositeOperation="source-in";const $=Rt.transform(ys(D),[1,0,0,1,-R,-N]);return D.fillStyle=c?o.getPattern(e,this,$,Un.FILL):o,D.fillRect(0,0,n,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,_.canvas)),{canvas:_.canvas,offsetX:Math.round(R),offsetY:Math.round(N)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=OB[t]}setLineJoin(t){this.ctx.lineJoin=kB[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),Kf(this.suspendedCtx,o),MB(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],c=a[1],u=a[2]-o,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,c,u,d,p,g,y){let b=t.canvas,v=d-g,S=p-y;if(c){const E=Rt.makeHexColor(...c);if(v<0||S<0||v+n>b.width||S+a>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,a),M=x.context;M.drawImage(b,-v,-S),M.globalCompositeOperation="destination-atop",M.fillStyle=E,M.fillRect(0,0,n,a),M.globalCompositeOperation="source-over",b=x.canvas,v=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(v,S,n,a),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=E,t.fillRect(v,S,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(d,p,n,a),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(b,v,S,n,a,d,p,n,a),e.restore()}save(){this.inSMaskMode&&Kf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Kf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,o,c){this.ctx.transform(t,e,n,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[a]=e;if(!n){a||(a=e[0]=new Path2D),this[t](a);return}if(!(a instanceof Path2D)){const o=e[0]=new Path2D;for(let c=0,u=a.length;c<u;)switch(a[c++]){case Xy.moveTo:o.moveTo(a[c++],a[c++]);break;case Xy.lineTo:o.lineTo(a[c++],a[c++]);break;case Xy.curveTo:o.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);break;case Xy.closePath:o.closePath();break;default:Gt(`Unrecognized drawing path operator: ${a[c-1]}`);break}a=o}Rt.axialAlignedBoundingBox(n,Ve(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,a=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const o=a.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=a.getPattern(n,this,ys(n),Un.STROKE),o){const c=new Path2D;c.addPath(t,n.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Un.STROKE,Ve(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const d=a.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=a.getPattern(n,this,ys(n),Un.FILL),d){const p=new Path2D;p.addPath(t,n.getTransform().invertSelf().multiplySelf(d)),t=p}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),c&&n.restore(),e&&this.consumePath(t,u)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=LB}eoClip(){this.pendingClip=HR}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,a=e.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:d,path:p}of t)n.addPath(p,new DOMMatrix(o).preMultiplySelf(a).translate(c,u).scale(d,-d));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||BS,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Gt("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let p=e;e<PR?p=PR:e>NR&&(p=NR),this.current.fontSizeScale=e/p,this.ctx.font=`${d} ${u} ${p}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a,o){const c=this.ctx,u=this.current,d=u.font,p=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,y=p&Wn.FILL_STROKE_MASK,b=!!(p&Wn.ADD_TO_PATH_FLAG),v=u.patternFill&&!d.missingFile,S=u.patternStroke&&!d.missingFile;let A;if((d.disableFontFace||b||v||S)&&(A=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||v||S){c.save(),c.translate(e,n),c.scale(g,-g);let E;if((y===Wn.FILL||y===Wn.FILL_STROKE)&&(a?(E=c.getTransform(),c.setTransform(...a),c.fill(L(this,os,dA).call(this,A,E,a))):c.fill(A)),y===Wn.STROKE||y===Wn.FILL_STROKE)if(o){E||(E=c.getTransform()),c.setTransform(...o);const{a:x,b:M,c:C,d:_}=E,D=Rt.inverseTransform(o),R=Rt.transform([x,M,C,_,0,0],D);Rt.singularValueDecompose2dScale(R,nr),c.lineWidth*=Math.max(nr[0],nr[1])/g,c.stroke(L(this,os,dA).call(this,A,E,o))}else c.lineWidth/=g,c.stroke(A);c.restore()}else(y===Wn.FILL||y===Wn.FILL_STROKE)&&c.fillText(t,e,n),(y===Wn.STROKE||y===Wn.FILL_STROKE)&&c.strokeText(t,e,n);b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ve(c),x:e,y:n,fontSize:g,path:A})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return se(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const o=this.ctx,c=e.fontSizeScale,u=e.charSpacing,d=e.wordSpacing,p=e.fontDirection,g=e.textHScale*p,y=t.length,b=n.vertical,v=b?1:-1,S=n.defaultVMetrics,A=a*e.fontMatrix[0],E=e.textRenderingMode===Wn.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),e.textMatrix&&o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(g,-1):o.scale(g,1);let x,M;if(e.patternFill){o.save();const N=e.fillColor.getPattern(o,this,ys(o),Un.FILL);x=Ve(o),o.restore(),o.fillStyle=N}if(e.patternStroke){o.save();const N=e.strokeColor.getPattern(o,this,ys(o),Un.STROKE);M=Ve(o),o.restore(),o.strokeStyle=N}let C=e.lineWidth;const _=e.textMatrixScale;if(_===0||C===0){const N=e.textRenderingMode&Wn.FILL_STROKE_MASK;(N===Wn.STROKE||N===Wn.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=_;if(c!==1&&(o.scale(c,c),C/=c),o.lineWidth=C,n.isInvalidPDFjsFont){const N=[];let $=0;for(const j of t)N.push(j.unicode),$+=j.width;o.fillText(N.join(""),0,0),e.x+=$*A*g,o.restore(),this.compose();return}let D=0,R;for(R=0;R<y;++R){const N=t[R];if(typeof N=="number"){D+=v*N*a/1e3;continue}let $=!1;const j=(N.isSpace?d:0)+u,H=N.fontChar,F=N.accent;let G,Q,X=N.width;if(b){const B=N.vmetric||S,V=-(N.vmetric?B[1]:X*.5)*A,at=B[2]*A;X=B?-B[0]:X,G=V/c,Q=(D+at)/c}else G=D/c,Q=0;if(n.remeasure&&X>0){const B=o.measureText(H).width*1e3/a*c;if(X<B&&this.isFontSubpixelAAEnabled){const V=X/B;$=!0,o.save(),o.scale(V,1),G/=V}else X!==B&&(G+=(X-B)/2e3*a/c)}if(this.contentVisible&&(N.isInFont||n.missingFile)){if(E&&!F)o.fillText(H,G,Q);else if(this.paintChar(H,G,Q,x,M),F){const B=G+a*F.offset.x/c,V=Q-a*F.offset.y/c;this.paintChar(F.fontChar,B,V,x,M)}}const ut=b?X*A-j*p:X*A+j*p;D+=ut,$&&o.restore()}b?e.y-=D:e.x+=D*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,o=n.fontSize,c=n.fontDirection,u=a.vertical?1:-1,d=n.charSpacing,p=n.wordSpacing,g=n.textHScale*c,y=n.fontMatrix||BS,b=t.length,v=n.textRenderingMode===Wn.INVISIBLE;let S,A,E,x;if(!(v||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(g,c),S=0;S<b;++S){if(A=t[S],typeof A=="number"){x=u*A*o/1e3,this.ctx.translate(x,0),n.x+=x*g;continue}const M=(A.isSpace?p:0)+d,C=a.charProcOperatorList[A.operatorListId];C?this.contentVisible&&(this.save(),e.scale(o,o),e.transform(...y),this.executeOperatorList(C),this.restore()):Gt(`Type3 character "${A.operatorListId}" is not available.`);const _=[A.width,0];Rt.applyTransform(_,y),E=_[0]*o+M,e.translate(E,0),n.x+=E*g}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,o,c){const u=new Path2D;u.rect(n,a,o-n,c-a),this.ctx.clip(u),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Ve(this.ctx),a={createCanvasGraphics:o=>new cE(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new lA(t,this.ctx,a,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Rt.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Rt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=CB(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,ys(e),Un.SHADING);const a=ys(e);if(a){const{width:o,height:c}=e.canvas,u=gd.slice();Rt.axialAlignedBoundingBox([0,0,o,c],a,u);const[d,p,g,y]=u;this.ctx.fillRect(d,p,g-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ve(this.ctx),e)){Rt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,a,o,c]=e,u=new Path2D;u.rect(n,a,o-n,c-a),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||uv("TODO: Support non-isolated groups."),t.knockout&&Gt("Knockout groups not supported.");const n=Ve(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=gd.slice();Rt.axialAlignedBoundingBox(t.bbox,Ve(e),a);const o=[0,0,e.canvas.width,e.canvas.height];a=Rt.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),p=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),b=y.context;b.translate(-c,-u),b.transform(...n);let v=new Path2D;const[S,A,E,x]=t.bbox;if(v.rect(S,A,E-S,x-A),t.matrix){const M=new Path2D;M.addPath(v,new DOMMatrix(t.matrix)),v=M}b.clip(v),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,u),e.save()),Kf(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Ve(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=gd.slice();Rt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a,o),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,a,o){if(L(this,os,cA).call(this),Ky(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],u=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=u,Rt.singularValueDecompose2dScale(Ve(this.ctx),nr);const{viewportScale:d}=this,p=Math.ceil(c*this.outputScaleX*d),g=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(nr[0],0,0,-nr[1],0,u*nr[1]),Ky(this.ctx)}else{Ky(this.ctx),this.endPath();const d=new Path2D;d.rect(e[0],e[1],c,u),this.ctx.clip(d)}}this.current=new jR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),L(this,os,uA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this._createMaskCanvas(t),o=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Ve(u);u.transform(e,n,a,o,0,0);const p=this._createMaskCanvas(t);u.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,y=c.length;g<y;g+=2){const b=Rt.transform(d,[e,n,a,o,c[g],c[g+1]]);u.drawImage(p.canvas,b[4],b[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=g.context;y.save();const b=this.getObject(c,o);zR(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?n.getPattern(y,this,ys(e),Un.FILL):n,y.fillRect(0,0,u,d),y.restore(),e.save(),e.transform(...p),e.scale(1,-1),Wy(e,g.canvas,0,0,u,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Gt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Gt("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let p=0,g=a.length;p<g;p+=2)d.push({transform:[e,0,0,n,a[p],a[p+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;this.save();const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/e,-1/n);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,n).context;BR(p,t),c=this.applyTransferMapsToCanvas(p)}const u=this._scaleImage(c,ys(a));a.imageSmoothingEnabled=FR(Ve(a),t.interpolate),Wy(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;BR(d,t),a=this.applyTransferMapsToCanvas(d)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),Wy(n,a,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(n||(this.pendingClip===HR?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ve(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let c,u;if(n===0&&a===0){const d=Math.abs(e),p=Math.abs(o);if(d===p)if(t===0)c=u=1/d;else{const g=d*t;c=u=g<1?1/g:1}else if(t===0)c=1/d,u=1/p;else{const g=d*t,y=p*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-n*a),p=Math.hypot(e,n),g=Math.hypot(a,o);if(t===0)c=g/d,u=p/d;else{const y=t*d;c=g>y?g/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){n.lineWidth=(a||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,c),iS.a=1/o,iS.d=1/c;const d=new Path2D;if(d.addPath(t,iS),u.length>0){const p=Math.max(o,c);n.setLineDash(u.map(g=>g/p)),n.lineDashOffset/=p}n.lineWidth=a||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};os=new WeakSet,cA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},uA=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},dA=function(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a};let wd=cE;for(const i in pb)wd.prototype[i]!==void 0&&(wd.prototype[pb[i]]=wd.prototype[i]);var ug,dg;class Jr{static get workerPort(){return f(this,ug)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");T(this,ug,t)}static get workerSrc(){return f(this,dg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");T(this,dg,t)}}ug=new WeakMap,dg=new WeakMap,k(Jr,ug,null),k(Jr,dg,"");var Fd,hg;class PB{constructor({parsedData:t,rawData:e}){k(this,Fd);k(this,hg);T(this,Fd,t),T(this,hg,e)}getRaw(){return f(this,hg)}get(t){return f(this,Fd).get(t)??null}[Symbol.iterator](){return f(this,Fd).entries()}}Fd=new WeakMap,hg=new WeakMap;const cd=Symbol("INTERNAL");var fg,pg,gg,Hd;class NB{constructor(t,{name:e,intent:n,usage:a,rbGroups:o}){k(this,fg,!1);k(this,pg,!1);k(this,gg,!1);k(this,Hd,!0);T(this,fg,!!(t&Zi.DISPLAY)),T(this,pg,!!(t&Zi.PRINT)),this.name=e,this.intent=n,this.usage=a,this.rbGroups=o}get visible(){if(f(this,gg))return f(this,Hd);if(!f(this,Hd))return!1;const{print:t,view:e}=this.usage;return f(this,fg)?(e==null?void 0:e.viewState)!=="OFF":f(this,pg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==cd&&Te("Internal method `_setVisible` called."),T(this,gg,n),T(this,Hd,e)}}fg=new WeakMap,pg=new WeakMap,gg=new WeakMap,Hd=new WeakMap;var qo,_e,Ud,$d,mg,hA;class IB{constructor(t,e=Zi.DISPLAY){k(this,mg);k(this,qo,null);k(this,_e,new Map);k(this,Ud,null);k(this,$d,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,T(this,$d,t.order);for(const n of t.groups)f(this,_e).set(n.id,new NB(e,n));if(t.baseState==="OFF")for(const n of f(this,_e).values())n._setVisible(cd,!1);for(const n of t.on)f(this,_e).get(n)._setVisible(cd,!0);for(const n of t.off)f(this,_e).get(n)._setVisible(cd,!1);T(this,Ud,this.getHash())}}isVisible(t){if(f(this,_e).size===0)return!0;if(!t)return uv("Optional content group not defined."),!0;if(t.type==="OCG")return f(this,_e).has(t.id)?f(this,_e).get(t.id).visible:(Gt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return L(this,mg,hA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!f(this,_e).has(e))return Gt(`Optional content group not found: ${e}`),!0;if(f(this,_e).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!f(this,_e).has(e))return Gt(`Optional content group not found: ${e}`),!0;if(!f(this,_e).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!f(this,_e).has(e))return Gt(`Optional content group not found: ${e}`),!0;if(!f(this,_e).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!f(this,_e).has(e))return Gt(`Optional content group not found: ${e}`),!0;if(f(this,_e).get(e).visible)return!1}return!0}return Gt(`Unknown optional content policy ${t.policy}.`),!0}return Gt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const a=f(this,_e).get(t);if(!a){Gt(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const c of a.rbGroups)for(const u of c)u!==t&&((o=f(this,_e).get(u))==null||o._setVisible(cd,!1,!0));a._setVisible(cd,!!e,!0),T(this,qo,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=f(this,_e).get(a);if(o)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}T(this,qo,null)}get hasInitialVisibility(){return f(this,Ud)===null||this.getHash()===f(this,Ud)}getOrder(){return f(this,_e).size?f(this,$d)?f(this,$d).slice():[...f(this,_e).keys()]:null}getGroup(t){return f(this,_e).get(t)||null}getHash(){if(f(this,qo)!==null)return f(this,qo);const t=new kO;for(const[e,n]of f(this,_e))t.update(`${e}:${n.visible}`);return T(this,qo,t.hexdigest())}[Symbol.iterator](){return f(this,_e).entries()}}qo=new WeakMap,_e=new WeakMap,Ud=new WeakMap,$d=new WeakMap,mg=new WeakSet,hA=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=L(this,mg,hA).call(this,o);else if(f(this,_e).has(o))c=f(this,_e).get(o).visible;else return Gt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class jB{constructor(t,{disableRange:e=!1,disableStream:n=!1}){dn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});dn(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){dn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new BB(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new zB(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class BB{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=Vx(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class zB{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function FB(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let g=u(e);return g=unescape(g),g=d(g),g=p(g),o(g)}if(e=c(i),e){const g=p(e);return o(g)}if(e=n("filename","i").exec(i),e){e=e[1];let g=u(e);return g=p(g),o(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),v=pm(y);y=b.decode(v),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let b;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(g))!==null;){let[,A,E,x]=b;if(A=parseInt(A,10),A in y){if(A===0)break;continue}y[A]=[E,x]}const S=[];for(let A=0;A<y.length&&A in y;++A){let[E,x]=y[A];x=u(x),E&&(x=unescape(x),A===0&&(x=d(x))),S.push(x)}return S.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),S=g.slice(y+1).replace(/^[^']*'/,"");return a(b,S)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,S){if(v==="q"||v==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,E){return String.fromCharCode(parseInt(E,16))}),a(b,S);try{S=atob(S)}catch{}return a(b,S)})}return""}function qO(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function hv(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function GO({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(i.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function VO(i){const t=i.get("Content-Disposition");if(t){let e=FB(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Vx(e))return e}return null}function bm(i,t){return new gb(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function YO(i){return i===200||i===206}function XO(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function QO(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Gt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class UR{constructor(t){bt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=qO(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return dn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new HB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new UB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class HB{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,XO(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=hv(o.url),!YO(o.status))throw bm(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=GO({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=VO(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ml("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:QO(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class UB{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const c=a.url;fetch(c,XO(o,this._withCredentials,this._abortController)).then(u=>{const d=hv(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!YO(u.status))throw bm(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:QO(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const rS=200,sS=206;function $B(i){const t=i.response;return typeof t!="string"?t:pm(t).buffer}class qB{constructor({url:t,httpHeaders:e,withCredentials:n}){bt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=qO(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,c]of this.headers)e.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=sS):a.expectedStatus=rS,e.responseType="arraybuffer",dn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const o=a.status||rS;if(!(o===rS&&n.expectedStatus===sS)&&o!==n.expectedStatus){n.onError(a.status);return}const u=$B(a);if(o===sS){const d=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?n.onDone({begin:parseInt(p[1],10),chunk:u}):(Gt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class GB{constructor(t){this._source=t,this._manager=new qB(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return dn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new VB(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new YB(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class VB{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=hv(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...p]=u.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=GO({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=VO(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=bm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class YB{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=hv((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=bm(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const XB=/^[a-z][a-z0-9\-+.]+:/i;function QB(i){if(XB.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class WB{constructor(t){this.source=t,this.url=QB(t.url),dn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return dn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new KB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new ZB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class KB{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=bm(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ml("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ZB{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const JB=1e5,$R=30;var ZR,Go,Ci,yg,bg,Ec,Ca,vg,wg,_c,qd,Gd,Vo,Vd,Sg,Yd,Cc,Ag,xg,Xd,Tc,Eg,Yo,Qd,Xa,WO,KO,fA,rr,T0,pA,ZO,JO;const mn=class mn{constructor({textContentSource:t,container:e,viewport:n}){k(this,Xa);k(this,Go,Promise.withResolvers());k(this,Ci,null);k(this,yg,!1);k(this,bg,!!((ZR=globalThis.FontInspector)!=null&&ZR.enabled));k(this,Ec,null);k(this,Ca,null);k(this,vg,0);k(this,wg,0);k(this,_c,null);k(this,qd,null);k(this,Gd,0);k(this,Vo,0);k(this,Vd,Object.create(null));k(this,Sg,[]);k(this,Yd,null);k(this,Cc,[]);k(this,Ag,new WeakMap);k(this,xg,null);var d;if(t instanceof ReadableStream)T(this,Yd,t);else if(typeof t=="object")T(this,Yd,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,Ci,T(this,qd,e)),T(this,Vo,n.scale*Ya.pixelRatio),T(this,Gd,n.rotation),T(this,Ca,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=n.rawDims;T(this,xg,[1,0,0,-1,-c,u+o]),T(this,wg,a),T(this,vg,o),L(d=mn,rr,ZO).call(d),du(e,n),f(this,Go).promise.finally(()=>{f(mn,Qd).delete(this),T(this,Ca,null),T(this,Vd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Vn.platform;return se(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{f(this,_c).read().then(({value:e,done:n})=>{if(n){f(this,Go).resolve();return}f(this,Ec)??T(this,Ec,e.lang),Object.assign(f(this,Vd),e.styles),L(this,Xa,WO).call(this,e.items),t()},f(this,Go).reject)};return T(this,_c,f(this,Yd).getReader()),f(mn,Qd).add(this),t(),f(this,Go).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*Ya.pixelRatio,a=t.rotation;if(a!==f(this,Gd)&&(e==null||e(),T(this,Gd,a),du(f(this,qd),{rotation:a})),n!==f(this,Vo)){e==null||e(),T(this,Vo,n);const c={div:null,properties:null,ctx:L(o=mn,rr,T0).call(o,f(this,Ec))};for(const u of f(this,Cc))c.properties=f(this,Ag).get(u),c.div=u,L(this,Xa,fA).call(this,c)}}cancel(){var e;const t=new ml("TextLayer task cancelled.");(e=f(this,_c))==null||e.cancel(t).catch(()=>{}),T(this,_c,null),f(this,Go).reject(t)}get textDivs(){return f(this,Cc)}get textContentItemsStr(){return f(this,Sg)}static cleanup(){if(!(f(this,Qd).size>0)){f(this,Xd).clear();for(const{canvas:t}of f(this,Tc).values())t.remove();f(this,Tc).clear()}}};Go=new WeakMap,Ci=new WeakMap,yg=new WeakMap,bg=new WeakMap,Ec=new WeakMap,Ca=new WeakMap,vg=new WeakMap,wg=new WeakMap,_c=new WeakMap,qd=new WeakMap,Gd=new WeakMap,Vo=new WeakMap,Vd=new WeakMap,Sg=new WeakMap,Yd=new WeakMap,Cc=new WeakMap,Ag=new WeakMap,xg=new WeakMap,Xd=new WeakMap,Tc=new WeakMap,Eg=new WeakMap,Yo=new WeakMap,Qd=new WeakMap,Xa=new WeakSet,WO=function(t){var a,o;if(f(this,yg))return;(o=f(this,Ca)).ctx??(o.ctx=L(a=mn,rr,T0).call(a,f(this,Ec)));const e=f(this,Cc),n=f(this,Sg);for(const c of t){if(e.length>JB){Gt("Ignoring additional textDivs for performance reasons."),T(this,yg,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=f(this,Ci);T(this,Ci,document.createElement("span")),f(this,Ci).classList.add("markedContent"),c.id!==null&&f(this,Ci).setAttribute("id",`${c.id}`),u.append(f(this,Ci))}else c.type==="endMarkedContent"&&T(this,Ci,f(this,Ci).parentNode);continue}n.push(c.str),L(this,Xa,KO).call(this,c)}},KO=function(t){var A;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};f(this,Cc).push(e);const a=Rt.transform(f(this,xg),t.transform);let o=Math.atan2(a[1],a[0]);const c=f(this,Vd)[t.fontName];c.vertical&&(o+=Math.PI/2);let u=f(this,bg)&&c.fontSubstitution||c.fontFamily;u=mn.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),p=d*L(A=mn,rr,JO).call(A,u,c,f(this,Ec));let g,y;o===0?(g=a[4],y=a[5]-p):(g=a[4]+p*Math.sin(o),y=a[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",v=e.style;f(this,Ci)===f(this,qd)?(v.left=`${(100*g/f(this,wg)).toFixed(2)}%`,v.top=`${(100*y/f(this,vg)).toFixed(2)}%`):(v.left=`${b}${g.toFixed(2)}px)`,v.top=`${b}${y.toFixed(2)}px)`),v.fontSize=`${b}${(f(mn,Yo)*d).toFixed(2)}px)`,v.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,f(this,bg)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);E!==x&&Math.max(E,x)/Math.min(E,x)>1.5&&(S=!0)}if(S&&(n.canvasWidth=c.vertical?t.height:t.width),f(this,Ag).set(e,n),f(this,Ca).div=e,f(this,Ca).properties=n,L(this,Xa,fA).call(this,f(this,Ca)),n.hasText&&f(this,Ci).append(e),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),f(this,Ci).append(E)}},fA=function(t){var u;const{div:e,properties:n,ctx:a}=t,{style:o}=e;let c="";if(f(mn,Yo)>1&&(c=`scale(${1/f(mn,Yo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=o,{canvasWidth:p,fontSize:g}=n;L(u=mn,rr,pA).call(u,a,g*f(this,Vo),d);const{width:y}=a.measureText(e.textContent);y>0&&(c=`scaleX(${p*f(this,Vo)/y}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(o.transform=c)},rr=new WeakSet,T0=function(t=null){let e=f(this,Tc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,Tc).set(t,e),f(this,Eg).set(e,{size:0,family:""})}return e},pA=function(t,e,n){const a=f(this,Eg).get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)},ZO=function(){if(f(this,Yo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),T(this,Yo,t.getBoundingClientRect().height),t.remove()},JO=function(t,e,n){const a=f(this,Xd).get(t);if(a)return a;const o=L(this,rr,T0).call(this,n);o.canvas.width=o.canvas.height=$R,L(this,rr,pA).call(this,o,$R,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+d):(Vn.platform.isFirefox&&Gt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),f(this,Xd).set(t,p),p},k(mn,rr),k(mn,Xd,new Map),k(mn,Tc,new Map),k(mn,Eg,new WeakMap),k(mn,Yo,null),k(mn,Qd,new Set);let Ip=mn;class jp{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){var d;if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(jp.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const p of o.children)a(p)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const tz=65536,ez=100;function fv(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new mA,{docId:e}=t,n=i.url?nz(i.url):null,a=i.data?iz(i.data):null,o=i.httpHeaders||null,c=i.withCredentials===!0,u=i.password??null,d=i.range instanceof tk?i.range:null,p=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:tz;let g=i.worker instanceof Sd?i.worker:null;const y=i.verbosity,b=typeof i.docBaseUrl=="string"&&!dv(i.docBaseUrl)?i.docBaseUrl:null,v=Zy(i.cMapUrl),S=i.cMapPacked!==!1,A=i.CMapReaderFactory||(hi?vB:DR),E=Zy(i.iccUrl),x=Zy(i.standardFontDataUrl),M=i.StandardFontDataFactory||(hi?wB:OR),C=Zy(i.wasmUrl),_=i.WasmFactory||(hi?SB:kR),D=i.stopAtErrors!==!0,R=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,N=i.isEvalSupported!==!1,$=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!hi,j=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!hi&&(Vn.platform.isFirefox||!globalThis.chrome),H=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,F=typeof i.disableFontFace=="boolean"?i.disableFontFace:hi,G=i.fontExtraProperties===!0,Q=i.enableXfa===!0,X=i.ownerDocument||globalThis.document,ut=i.disableRange===!0,B=i.disableStream===!0,V=i.disableAutoFetch===!0,at=i.pdfBug===!0,ct=i.CanvasFactory||(hi?bB:gB),z=i.FilterFactory||(hi?yB:mB),Z=i.enableHWA===!0,ot=i.useWasm!==!1,lt=d?d.length:i.length??NaN,mt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!hi&&!F,pt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(A===DR&&M===OR&&_===kR&&v&&x&&C&&sd(v,document.baseURI)&&sd(x,document.baseURI)&&sd(C,document.baseURI)),yt=null;X8(y);const St={canvasFactory:new ct({ownerDocument:X,enableHWA:Z}),filterFactory:new z({docId:e,ownerDocument:X}),cMapReaderFactory:pt?null:new A({baseUrl:v,isCompressed:S}),standardFontDataFactory:pt?null:new M({baseUrl:x}),wasmFactory:pt?null:new _({baseUrl:C})};if(!g){const Nt={verbosity:y,port:Jr.workerPort};g=Nt.port?Sd.fromPort(Nt):new Sd(Nt),t._worker=g}const Pt={docId:e,apiVersion:"5.2.133",data:a,password:u,disableAutoFetch:V,rangeChunkSize:p,length:lt,docBaseUrl:b,enableXfa:Q,evaluatorOptions:{maxImageSize:R,disableFontFace:F,ignoreErrors:D,isEvalSupported:N,isOffscreenCanvasSupported:$,isImageDecoderSupported:j,canvasMaxAreaInBytes:H,fontExtraProperties:G,useSystemFonts:mt,useWasm:ot,useWorkerFetch:pt,cMapUrl:v,iccUrl:E,standardFontDataUrl:x,wasmUrl:C}},me={ownerDocument:X,pdfBug:at,styleElement:yt,loadingParams:{disableAutoFetch:V,enableXfa:Q}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Nt=g.messageHandler.sendWithPromise("GetDocRequest",Pt,a?[a.buffer]:null);let Ut;if(d)Ut=new jB(d,{disableRange:ut,disableStream:B});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Zt;if(hi)if(sd(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Zt=UR}else Zt=WB;else Zt=sd(n)?UR:GB;Ut=new Zt({url:n,length:lt,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:ut,disableStream:B})}return Nt.then(Zt=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ii=new cp(e,Zt,g.port),Ie=new cz(ii,t,Ut,me,St);t._transport=Ie,ii.send("Ready",null)})}).catch(t._capability.reject),t}function nz(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(hi)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function iz(i){if(hi&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return pm(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Zy(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const gA=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,rz=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",sz=iB.bind(null,gA,rz);var kb;const Lb=class Lb{constructor(){bt(this,"_capability",Promise.withResolvers());bt(this,"_transport",null);bt(this,"_worker",null);bt(this,"docId",`d${ai(Lb,kb)._++}`);bt(this,"destroyed",!1);bt(this,"onPassword",null);bt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};kb=new WeakMap,k(Lb,kb,0);let mA=Lb;class tk{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class az{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ta,Rc,pp;class oz{constructor(t,e,n,a=!1){k(this,Rc);k(this,Ta,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new TR:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new ek,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new mm({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=Ro.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var _,D;(_=this._stats)==null||_.time("Overall");const b=this._transport.getRenderingIntent(n,a,g,y),{renderingIntent:v,cacheKey:S}=b;T(this,Ta,!1),u||(u=this._transport.getOptionalContentConfig(v));let A=this._intentStates.get(S);A||(A=Object.create(null),this._intentStates.set(S,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const E=!!(v&Zi.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(b));const x=R=>{var N;A.renderTasks.delete(M),E&&T(this,Ta,!0),L(this,Rc,pp).call(this),R?(M.capability.reject(R),this._abortOperatorList({intentState:A,reason:R instanceof Error?R:new Error(R)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new bA({callback:x,params:{canvasContext:t,viewport:e,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:p});(A.renderTasks||(A.renderTasks=new Set)).add(M);const C=M.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([R,N])=>{var $;if(this.destroyed){x();return}if(($=this._stats)==null||$.time("Rendering"),!(N.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:R,optionalContentConfig:N}),M.operatorListChanged()}).catch(x),C}getOperatorList({intent:t="display",annotationMode:e=Ro.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){var p;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,n,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>jp.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){c.read().then(function({value:d,done:p}){if(p){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),T(this,Ta,!1),Promise.all(t)}cleanup(t=!1){T(this,Ta,!0);const e=L(this,Rc,pp).call(this);return t&&e&&this._stats&&(this._stats=new TR),e}_startRenderPage(t,e){var a,o;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&L(this,Rc,pp).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:o,transfer:c}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},c).getReader(),p=this._intentStates.get(e);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();L(this,Rc,pp).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Gx){let a=ez;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new ml(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}Ta=new WeakMap,Rc=new WeakSet,pp=function(){if(!f(this,Ta)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Ta,!1),!0};var Ra,Pb;class lz{constructor(){k(this,Ra,new Map);k(this,Pb,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};f(this,Pb).then(()=>{for(const[a]of f(this,Ra))a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Gt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}f(this,Ra).set(e,a)}removeEventListener(t,e){const n=f(this,Ra).get(e);n==null||n(),f(this,Ra).delete(e)}terminate(){for(const[,t]of f(this,Ra))t==null||t();f(this,Ra).clear()}}Ra=new WeakMap,Pb=new WeakMap;var Nb,Mc,Dc,Wd,R0,Kd,M0;const ze=class ze{constructor({name:t=null,port:e=null,verbosity:n=Q8()}={}){k(this,Wd);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=f(ze,Dc))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(f(ze,Dc)||T(ze,Dc,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new cp("main","worker",t),this._messageHandler.on("ready",function(){}),L(this,Wd,R0).call(this)}_initialize(){if(f(ze,Mc)||f(ze,Kd,M0)){this._setupFakeWorker();return}let{workerSrc:t}=ze;try{ze._isSameOrigin(window.location,t)||(t=ze._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new cp("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,L(this,Wd,R0).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{uv("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){f(ze,Mc)||(Gt("Setting up fake worker."),T(ze,Mc,!0)),ze._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new lz;this._port=e;const n=`fake${ai(ze,Nb)._++}`,a=new cp(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new cp(n,n+"_worker",e),L(this,Wd,R0).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=f(ze,Dc))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=f(this,Dc))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ze(t)}static get workerSrc(){if(Jr.workerSrc)return Jr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return se(this,"_setupFakeWorkerGlobal",(async()=>f(this,Kd,M0)?f(this,Kd,M0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Nb=new WeakMap,Mc=new WeakMap,Dc=new WeakMap,Wd=new WeakSet,R0=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Kd=new WeakSet,M0=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},k(ze,Kd),k(ze,Nb,0),k(ze,Mc,!1),k(ze,Dc),hi&&(T(ze,Mc,!0),Jr.workerSrc||(Jr.workerSrc="./pdf.worker.mjs")),ze._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},ze._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Sd=ze;var Ma,Ms,Zd,Jd,Da,Oc,gp;class cz{constructor(t,e,n,a,o){k(this,Oc);k(this,Ma,new Map);k(this,Ms,new Map);k(this,Zd,new Map);k(this,Jd,new Map);k(this,Da,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new ek,this.fontLoader=new fB({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return se(this,"annotationStorage",new Wx)}getRenderingIntent(t,e=Ro.ENABLE,n=null,a=!1,o=!1){let c=Zi.DISPLAY,u=rA;switch(t){case"any":c=Zi.ANY;break;case"display":break;case"print":c=Zi.PRINT;break;default:Gt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&Zi.PRINT&&n instanceof PO?n:this.annotationStorage;switch(e){case Ro.DISABLE:c+=Zi.ANNOTATIONS_DISABLE;break;case Ro.ENABLE:break;case Ro.ENABLE_FORMS:c+=Zi.ANNOTATIONS_FORMS;break;case Ro.ENABLE_STORAGE:c+=Zi.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Gt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=Zi.IS_EDITING),o&&(c+=Zi.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[c,u.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=f(this,Da))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of f(this,Ms).values())t.push(a._destroy());f(this,Ms).clear(),f(this,Zd).clear(),f(this,Jd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,o;this.commonObjs.clear(),this.fontLoader.clear(),f(this,Ma).clear(),this.filterFactory.destroy(),Ip.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new ml("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{dn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}dn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this._fullReader;return(!a||!o)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(n,a)=>{dn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}dn(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new az(n,this))}),t.on("DocException",n=>{e._capability.reject(xi(n))}),t.on("PasswordRequest",n=>{T(this,Da,Promise.withResolvers());try{if(!e.onPassword)throw xi(n);const a=o=>{o instanceof Error?f(this,Da).reject(o):f(this,Da).resolve({password:o})};e.onPassword(a,n.code)}catch(a){f(this,Da).reject(a)}return f(this,Da).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;f(this,Ms).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in o){const g=o.error;Gt(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const u=this._params.pdfBug&&((c=globalThis.FontInspector)!=null&&c.enabled)?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new pB(o,u);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:p}=o;dn(p,"The imageRef must be defined.");for(const g of f(this,Ms).values())for(const[,y]of g.objs)if((y==null?void 0:y.ref)===p)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,c])=>{var d;if(this.destroyed)return;const u=f(this,Ms).get(a);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Gt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=f(this,Zd).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&f(this,Jd).set(o.refStr,t);const c=new oz(e,o,this,this._params.pdfBug);return f(this,Ms).set(e,c),c});return f(this,Zd).set(e,a),a}getPageIndex(t){return gA(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return L(this,Oc,gp).call(this,"GetFieldObjects")}hasJSActions(){return L(this,Oc,gp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return L(this,Oc,gp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return L(this,Oc,gp).call(this,"GetOptionalContentConfig").then(e=>new IB(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=f(this,Ma).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,c;return{info:a[0],metadata:a[1]?new PB(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return f(this,Ma).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of f(this,Ms).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),f(this,Ma).clear(),this.filterFactory.destroy(!0),Ip.cleanup()}}cachedPageNumber(t){if(!gA(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return f(this,Jd).get(e)??null}}Ma=new WeakMap,Ms=new WeakMap,Zd=new WeakMap,Jd=new WeakMap,Da=new WeakMap,Oc=new WeakSet,gp=function(t,e=null){const n=f(this,Ma).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return f(this,Ma).set(t,a),a};const Zf=Symbol("INITIAL_DATA");var Ui,_g,yA;class ek{constructor(){k(this,_g);k(this,Ui,Object.create(null))}get(t,e=null){if(e){const a=L(this,_g,yA).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=f(this,Ui)[t];if(!n||n.data===Zf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=f(this,Ui)[t];return!!e&&e.data!==Zf}delete(t){const e=f(this,Ui)[t];return!e||e.data===Zf?!1:(delete f(this,Ui)[t],!0)}resolve(t,e=null){const n=L(this,_g,yA).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in f(this,Ui)){const{data:n}=f(this,Ui)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}T(this,Ui,Object.create(null))}*[Symbol.iterator](){for(const t in f(this,Ui)){const{data:e}=f(this,Ui)[t];e!==Zf&&(yield[t,e])}}}Ui=new WeakMap,_g=new WeakSet,yA=function(t){var e;return(e=f(this,Ui))[t]||(e[t]={...Promise.withResolvers(),data:Zf})};var Xo;class uz{constructor(t){k(this,Xo,null);bt(this,"onContinue",null);bt(this,"onError",null);T(this,Xo,t)}get promise(){return f(this,Xo).capability.promise}cancel(t=0){f(this,Xo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=f(this,Xo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=f(this,Xo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Xo=new WeakMap;var Qo,kc;const Zl=class Zl{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){k(this,Qo,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,d;if(this.cancelled)return;if(this._canvas){if(f(Zl,kc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(Zl,kc).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:o,background:c}=this.params;this.gfx=new wd(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n,a,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),f(this,Qo)&&(window.cancelAnimationFrame(f(this,Qo)),T(this,Qo,null)),f(Zl,kc).delete(this._canvas),t||(t=new Gx(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(a=this.task).onError)==null||o.call(a,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?T(this,Qo,window.requestAnimationFrame(()=>{T(this,Qo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(Zl,kc).delete(this._canvas),this.callback())))}};Qo=new WeakMap,kc=new WeakMap,k(Zl,kc,new WeakSet);let bA=Zl;const dz="5.2.133",hz="4f7761353";function qR(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Jf(i){return Math.max(0,Math.min(255,255*i))}class GR{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Jf(t),[t,t,t]}static G_HTML([t]){const e=qR(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Jf)}static RGB_HTML(t){return`#${t.map(qR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Jf(1-Math.min(1,t+a)),Jf(1-Math.min(1,n+a)),Jf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,c=1-n,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class fz{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Te("Abstract method `_createSVG` called.")}}class bb extends fz{_createSVG(t){return document.createElementNS(la,t)}}class nk{static setupStorage(t,e,n,a,o){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,p]of Object.entries(c))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const v=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=v}u&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const v=document.createTextNode(a.value);c.append(v),u&&jp.shouldBuildText(a.name)&&p.push(v)}return{textDivs:p}}const g=[[a,-1,c]];for(;g.length>0;){const[v,S,A]=g.at(-1);if(S+1===v.children.length){g.pop();continue}const E=v.children[++g.at(-1)[1]];if(E===null)continue;const{name:x}=E;if(x==="#text"){const C=document.createTextNode(E.value);p.push(C),A.append(C);continue}const M=(y=E==null?void 0:E.attributes)!=null&&y.xmlns?document.createElementNS(E.attributes.xmlns,x):document.createElement(x);if(A.append(M),E.attributes&&this.setAttributes({html:M,element:E,storage:e,intent:o,linkService:n}),((b=E.children)==null?void 0:b.length)>0)g.push([E,-1,M]);else if(E.value){const C=document.createTextNode(E.value);u&&jp.shouldBuildText(x)&&p.push(C),M.append(C)}}for(const v of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const vm=1e3,pz=9,fu=new WeakSet;class VR{static create(t){switch(t.data.annotationType){case ln.LINK:return new ik(t);case ln.TEXT:return new gz(t);case ln.WIDGET:switch(t.data.fieldType){case"Tx":return new mz(t);case"Btn":return t.data.radioButton?new ak(t):t.data.checkBox?new bz(t):new vz(t);case"Ch":return new wz(t);case"Sig":return new yz(t)}return new yu(t);case ln.POPUP:return new wA(t);case ln.FREETEXT:return new dk(t);case ln.LINE:return new Az(t);case ln.SQUARE:return new xz(t);case ln.CIRCLE:return new Ez(t);case ln.POLYLINE:return new hk(t);case ln.CARET:return new Cz(t);case ln.INK:return new Jx(t);case ln.POLYGON:return new _z(t);case ln.HIGHLIGHT:return new fk(t);case ln.UNDERLINE:return new Tz(t);case ln.SQUIGGLY:return new Rz(t);case ln.STRIKEOUT:return new Mz(t);case ln.STAMP:return new pk(t);case ln.FILEATTACHMENT:return new Dz(t);default:return new nn(t)}}}var Lc,th,eh,Cg,vA;const uE=class uE{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){k(this,Cg);k(this,Lc,null);k(this,th,!1);k(this,eh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return uE._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;f(this,Lc)||T(this,Lc,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&L(this,Cg,vA).call(this,e),(n=f(this,eh))==null||n.popup.updateEdited(t)}resetEdited(){var t;f(this,Lc)&&(L(this,Cg,vA).call(this,f(this,Lc).rect),(t=f(this,eh))==null||t.popup.resetEdited(),T(this,Lc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof yu||(o.tabIndex=vm);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof wA){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(A>0||E>0){const M=`calc(${A}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;c.borderRadius=M}else if(this instanceof ak){const M=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=M}switch(e.borderStyle.style){case rd.SOLID:c.borderStyle="solid";break;case rd.DASHED:c.borderStyle="dashed";break;case rd.BEVELED:Gt("Unimplemented border style: beveled");break;case rd.INSET:Gt("Unimplemented border style: inset");break;case rd.UNDERLINE:c.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(T(this,th,!0),c.borderColor=Rt.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):c.borderWidth=0}const p=Rt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:v}=a.rawDims;c.left=`${100*(p[0]-b)/g}%`,c.top=`${100*(p[1]-v)/y}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(c.width=`${100*u/g}%`,c.height=`${100*d/y}%`):this.setRotation(S,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],c=o[0],u=o.slice(1);a.target.style[n]=GR[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:GR[`${c}_rgb`](u)})};return se(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const o=t[a]||n[a];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const c=n[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,E,x,M]=t.subarray(2,6);if(a===A&&o===E&&e===x&&n===M)return}const{style:c}=this.container;let u;if(f(this,th)){const{borderColor:A,borderWidth:E}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=a-e,p=o-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const v=g.createElement("clipPath"),S=`clippath_${this.data.id}`;v.setAttribute("id",S),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let A=2,E=t.length;A<E;A+=8){const x=t[A],M=t[A+1],C=t[A+2],_=t[A+3],D=g.createElement("rect"),R=(C-e)/d,N=(o-M)/p,$=(x-C)/d,j=(M-_)/p;D.setAttribute("x",R),D.setAttribute("y",N),D.setAttribute("width",$),D.setAttribute("height",j),v.append(D),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${N}" width="${$}" height="${j}"/>`)}f(this,th)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,e=T(this,eh,new wA({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===e)continue;const d=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!fu.has(p)){Gt(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:p})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&fu.has(a)&&n.push({id:c,exportValue:o,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Lc=new WeakMap,th=new WeakMap,eh=new WeakMap,Cg=new WeakSet,vA=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)};let nn=uE;var ir,Yl,rk,sk;class ik extends nn{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});k(this,ir);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(a,e.action),o=!0):e.attachment?(L(this,ir,rk).call(this,a,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(L(this,ir,sk).call(this,a,e.setOCGState),o=!0):e.dest?(this._bindLink(a,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),o=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&L(this,ir,Yl).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),L(this,ir,Yl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=a.get(o);c&&(e[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),L(this,ir,Yl).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),L(this,ir,Yl).call(this),!this._fieldObjects){Gt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var y;a==null||a();const{fields:o,refs:c,include:u}=n,d=[];if(o.length!==0||c.length!==0){const b=new Set(c);for(const v of o){const S=this._fieldObjects[v]||[];for(const{id:A}of S)b.add(A)}for(const v of Object.values(this._fieldObjects))for(const S of v)b.has(S.id)===u&&d.push(S)}else for(const b of Object.values(this._fieldObjects))d.push(...b);const p=this.annotationStorage,g=[];for(const b of d){const{id:v}=b;switch(g.push(v),b.type){case"text":{const A=b.defaultValue||"";p.setValue(v,{value:A});break}case"checkbox":case"radiobutton":{const A=b.defaultValue===b.exportValues;p.setValue(v,{value:A});break}case"combobox":case"listbox":{const A=b.defaultValue||"";p.setValue(v,{value:A});break}default:continue}const S=document.querySelector(`[data-element-id="${v}"]`);if(S){if(!fu.has(S)){Gt(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ir=new WeakSet,Yl=function(){this.container.setAttribute("data-internal-link","")},rk=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,a),!1},L(this,ir,Yl).call(this)},sk=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),L(this,ir,Yl).call(this)};class gz extends nn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class yu extends nn{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Vn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var u;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}}))})}_setEventListeners(t,e,n,a){var o,c,u;for(const[d,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,p,a),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Rt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||pz,o=t.style;let c;const u=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(p/(Zw*a))||1,y=p/g;c=Math.min(a,d(y/Zw))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(p/Zw))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=Rt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class mz extends yu{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[a]:n})}render(){var a,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let u=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let p=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:u,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),fu.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=vm,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";n.value=g.userValue=v,g.formattedValue=null});let y=b=>{const{formattedValue:v}=g;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var A;if(g.focused)return;const{target:S}=v;g.userValue&&(S.value=g.userValue),g.lastCommittedValue=S.value,g.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const S={value(A){g.userValue=A.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),A.target.value=g.userValue},formattedValue(A){const{formattedValue:E}=A.detail;g.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E),t.setValue(e,{formattedValue:E})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var C;const{charLimit:E}=A.detail,{target:x}=A;if(E===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",E);let M=g.userValue;!M||M.length<=E||(M=M.slice(0,E),x.value=g.userValue=M,t.setValue(e,{value:M}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(S,v)}),n.addEventListener("keydown",v=>{var E;g.commitKey=1;let S=-1;if(v.key==="Escape"?S=0:v.key==="Enter"&&!this.data.multiLine?S=2:v.key==="Tab"&&(g.commitKey=3),S===-1)return;const{value:A}=v.target;g.lastCommittedValue!==A&&(g.lastCommittedValue=A,g.userValue=A,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:S,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=y;y=null,n.addEventListener("blur",v=>{var A,E;if(!g.focused||!v.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(g.focused=!1);const{value:S}=v.target;g.userValue=S,g.lastCommittedValue!==S&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:g.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",v=>{var D;g.lastCommittedValue=null;const{data:S,target:A}=v,{value:E,selectionStart:x,selectionEnd:M}=A;let C=x,_=M;switch(v.inputType){case"deleteWordBackward":{const R=E.substring(0,x).match(/\w*[^\w]*$/);R&&(C-=R[0].length);break}case"deleteWordForward":{const R=E.substring(x).match(/^[^\w]*\w*/);R&&(_+=R[0].length);break}case"deleteContentBackward":x===M&&(C-=1);break;case"deleteContentForward":x===M&&(_+=1);break}v.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:S||"",willCommit:!1,selStart:C,selEnd:_}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class yz extends yu{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class bz extends yu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return fu.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=vm,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const p of this._getElementsByName(u,n)){const g=d&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class ak extends yu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(fu.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=vm,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const p of this._getElementsByName(u,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:p=>{const g=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class vz extends ik{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class wz extends yu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");fu.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=vm;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:v}=a;return v?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){c==null||c();const v=b.detail.value,S=new Set(Array.isArray(v)?v:[v]);for(const A of a.options)A.selected=S.has(A.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const v=a.options,S=b.detail.remove;v[S].selected=!1,a.remove(S),v.length>0&&Array.prototype.findIndex.call(v,E=>E.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:p(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:v,displayValue:S,exportValue:A}=b.detail.insert,E=a.children[v],x=document.createElement("option");x.textContent=S,x.value=A,E?E.before(x):a.append(x),t.setValue(e,{value:u(!0),items:p(b)}),d=u(!1)},items(b){const{items:v}=b.detail;for(;a.length!==0;)a.remove(0);for(const S of v){const{displayValue:A,exportValue:E}=S,x=document.createElement("option");x.textContent=A,x.value=E,a.append(x)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:p(b)}),d=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const S of b.target.options)S.selected=v.has(S.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{var v;const y=u(!0),b=u(!1);t.setValue(e,{value:y}),g.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class wA extends nn{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:nn._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Sz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${qx}${n}`).join(",")),this.container}}var nh,Ib,jb,ih,rh,We,Oa,sh,Tg,Rg,ah,ka,qr,La,Mg,Pa,Dg,Pc,Nc,Re,D0,SA,ok,lk,ck,uk,O0,k0,AA;class Sz{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:p,parentRect:g,open:y}){k(this,Re);k(this,nh,L(this,Re,ck).bind(this));k(this,Ib,L(this,Re,AA).bind(this));k(this,jb,L(this,Re,k0).bind(this));k(this,ih,L(this,Re,O0).bind(this));k(this,rh,null);k(this,We,null);k(this,Oa,null);k(this,sh,null);k(this,Tg,null);k(this,Rg,null);k(this,ah,null);k(this,ka,!1);k(this,qr,null);k(this,La,null);k(this,Mg,null);k(this,Pa,null);k(this,Dg,null);k(this,Pc,null);k(this,Nc,!1);var b;T(this,We,t),T(this,Dg,a),T(this,Oa,c),T(this,Pa,u),T(this,Rg,d),T(this,rh,e),T(this,Mg,p),T(this,ah,g),T(this,Tg,n),T(this,sh,Yx.toDateObject(o)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",f(this,ih)),v.addEventListener("mouseenter",f(this,jb)),v.addEventListener("mouseleave",f(this,Ib)),v.classList.add("popupTriggerArea");for(const v of n)(b=v.container)==null||b.addEventListener("keydown",f(this,nh));f(this,We).hidden=!0,y&&L(this,Re,O0).call(this)}render(){if(f(this,qr))return;const t=T(this,qr,document.createElement("div"));if(t.className="popup",f(this,rh)){const o=t.style.outlineColor=Rt.makeHexColor(...f(this,rh));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=f(this,Dg),t.append(e),f(this,sh)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,sh).valueOf()})),e.append(o)}const a=f(this,Re,D0);if(a)nk.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(f(this,Oa));t.append(o)}f(this,We).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const u=a[o];n.append(document.createTextNode(u)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;f(this,Pc)||T(this,Pc,{contentsObj:f(this,Oa),richText:f(this,Pa)}),t&&T(this,La,null),e&&(T(this,Pa,L(this,Re,lk).call(this,e)),T(this,Oa,null)),(n=f(this,qr))==null||n.remove(),T(this,qr,null)}resetEdited(){var t;f(this,Pc)&&({contentsObj:ai(this,Oa)._,richText:ai(this,Pa)._}=f(this,Pc),T(this,Pc,null),(t=f(this,qr))==null||t.remove(),T(this,qr,null),T(this,La,null))}forceHide(){T(this,Nc,this.isVisible),f(this,Nc)&&(f(this,We).hidden=!0)}maybeShow(){f(this,Nc)&&(f(this,qr)||L(this,Re,k0).call(this),T(this,Nc,!1),f(this,We).hidden=!1)}get isVisible(){return f(this,We).hidden===!1}}nh=new WeakMap,Ib=new WeakMap,jb=new WeakMap,ih=new WeakMap,rh=new WeakMap,We=new WeakMap,Oa=new WeakMap,sh=new WeakMap,Tg=new WeakMap,Rg=new WeakMap,ah=new WeakMap,ka=new WeakMap,qr=new WeakMap,La=new WeakMap,Mg=new WeakMap,Pa=new WeakMap,Dg=new WeakMap,Pc=new WeakMap,Nc=new WeakMap,Re=new WeakSet,D0=function(){const t=f(this,Pa),e=f(this,Oa);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&f(this,Pa).html||null},SA=function(){var t,e,n;return((n=(e=(t=f(this,Re,D0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},ok=function(){var t,e,n;return((n=(e=(t=f(this,Re,D0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},lk=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:f(this,Re,ok),fontSize:f(this,Re,SA)?`calc(${f(this,Re,SA)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n},ck=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&f(this,ka))&&L(this,Re,O0).call(this)},uk=function(){if(f(this,La)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=f(this,Rg);let c=!!f(this,ah),u=c?f(this,ah):f(this,Mg);for(const S of f(this,Tg))if(!u||Rt.intersect(S.data.rect,u)!==null){u=S.data.rect,c=!0;break}const d=Rt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];T(this,La,[100*(y-a)/e,100*(b-o)/n]);const{style:v}=f(this,We);v.left=`${f(this,La)[0]}%`,v.top=`${f(this,La)[1]}%`},O0=function(){T(this,ka,!f(this,ka)),f(this,ka)?(L(this,Re,k0).call(this),f(this,We).addEventListener("click",f(this,ih)),f(this,We).addEventListener("keydown",f(this,nh))):(L(this,Re,AA).call(this),f(this,We).removeEventListener("click",f(this,ih)),f(this,We).removeEventListener("keydown",f(this,nh)))},k0=function(){f(this,qr)||this.render(),this.isVisible?f(this,ka)&&f(this,We).classList.add("focused"):(L(this,Re,uk).call(this),f(this,We).hidden=!1,f(this,We).style.zIndex=parseInt(f(this,We).style.zIndex)+1e3)},AA=function(){f(this,We).classList.remove("focused"),!(f(this,ka)||!this.isVisible)&&(f(this,We).hidden=!0,f(this,We).style.zIndex=parseInt(f(this,We).style.zIndex)-1e3)};class dk extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=qt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Og;class Az extends nn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Og,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:a}=this,o=this.svgFactory.create(n,a,!0),c=T(this,Og,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Og)}addHighlightArea(){this.container.classList.add("highlightArea")}}Og=new WeakMap;var kg;class xz extends nn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,kg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:a}=this,o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=T(this,kg,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",a-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}kg=new WeakMap;var Lg;class Ez extends nn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Lg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:a}=this,o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=T(this,Lg,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",a/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",a/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap;var Pg;class hk extends nn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Pg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:o},width:c,height:u}=this;if(!n)return this.container;const d=this.svgFactory.create(c,u,!0);let p=[];for(let y=0,b=n.length;y<b;y+=2){const v=n[y]-e[0],S=e[3]-n[y+1];p.push(`${v},${S}`)}p=p.join(" ");const g=T(this,Pg,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pg=new WeakMap;class _z extends hk{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Cz extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ng,Ic,Ig,xA;class Jx extends nn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Ig);k(this,Ng,null);k(this,Ic,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?qt.HIGHLIGHT:qt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:a,borderStyle:o,popupRef:c}}=this,{transform:u,width:d,height:p}=L(this,Ig,xA).call(this,n,e),g=this.svgFactory.create(d,p,!0),y=T(this,Ng,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",u);for(let b=0,v=a.length;b<v;b++){const S=this.svgFactory.createElement(this.svgElementName);f(this,Ic).push(S),S.setAttribute("points",a[b].join(",")),y.append(S)}return!c&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:a,rect:o}=e,c=f(this,Ng);if(n>=0&&c.setAttribute("stroke-width",n||1),a)for(let u=0,d=f(this,Ic).length;u<d;u++)f(this,Ic)[u].setAttribute("points",a[u].join(","));if(o){const{transform:u,width:d,height:p}=L(this,Ig,xA).call(this,this.data.rotation,o);c.parentElement.setAttribute("viewBox",`0 0 ${d} ${p}`),c.setAttribute("transform",u)}}getElementsToTriggerPopup(){return f(this,Ic)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ng=new WeakMap,Ic=new WeakMap,Ig=new WeakSet,xA=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class fk extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=qt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Tz extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Rz extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Mz extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class pk extends nn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=qt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var jg,Bg,EA;class Dz extends nn{constructor(e){var a;super(e,{isRenderable:!0});k(this,Bg);k(this,jg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",L(this,Bg,EA).bind(this)),T(this,jg,a);const{isMac:o}=Vn.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&L(this,Bg,EA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return f(this,jg)}addHighlightArea(){this.container.classList.add("highlightArea")}}jg=new WeakMap,Bg=new WeakSet,EA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var zg,jc,Wo,Fg,wl,CA,TA;const dE=class dE{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:u}){k(this,wl);k(this,zg,null);k(this,jc,null);k(this,Wo,new Map);k(this,Fg,null);this.div=t,T(this,zg,e),T(this,jc,n),T(this,Fg,u||null),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return f(this,Wo).size>0}async render(t){var c;const{annotations:e}=t,n=this.div;du(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new bb,annotationStorage:t.annotationStorage||new Wx,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===ln.POPUP;if(d){const y=a.get(u.id);if(!y)continue;o.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;o.data=u;const p=VR.create(o);if(!p.isRenderable)continue;if(!d&&u.popupRef){const y=a.get(u.popupRef);y?y.push(p):a.set(u.popupRef,[p])}const g=p.render();u.hidden&&(g.style.visibility="hidden"),await L(this,wl,CA).call(this,g,u.id),p._isEditable&&(f(this,Wo).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}L(this,wl,TA).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new bb,parent:this};for(const a of t){a.borderStyle||(a.borderStyle=dE._defaultBorderStyle),n.data=a;const o=VR.create(n);if(!o.isRenderable)continue;const c=o.render();await L(this,wl,CA).call(this,c,a.id)}}update({viewport:t}){const e=this.div;this.viewport=t,du(e,{rotation:t.rotation}),L(this,wl,TA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(f(this,Wo).values())}getEditableAnnotation(t){return f(this,Wo).get(t)}static get _defaultBorderStyle(){return se(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:rd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};zg=new WeakMap,jc=new WeakMap,Wo=new WeakMap,Fg=new WeakMap,wl=new WeakSet,CA=async function(t,e){var c,u;const n=t.firstChild||t,a=n.id=`${qx}${e}`,o=await((c=f(this,Fg))==null?void 0:c.getAriaAttributes(a));if(o)for(const[d,p]of o)n.setAttribute(d,p);this.div.append(t),(u=f(this,zg))==null||u.moveElementInDOM(this.div,t,n,!1)},TA=function(){var e;if(!f(this,jc))return;const t=this.div;for(const[n,a]of f(this,jc)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;a.className="annotationContent";const{firstChild:c}=o;c?c.nodeName==="CANVAS"?c.replaceWith(a):c.classList.contains("annotationContent")?c.after(a):c.before(a):o.append(a);const u=f(this,Wo).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,a),u._hasNoCanvas=!1):u.canvas=a)}f(this,jc).clear()};let _A=dE;const Jy=/\r\n?|\n/g;var Gr,$i,Hg,Bc,qi,fn,gk,mk,yk,L0,Ga,P0,N0,bk,MA,vk;const Oe=class Oe extends ke{constructor(e){super({...e,name:"freeTextEditor"});k(this,fn);k(this,Gr);k(this,$i,"");k(this,Hg,`${this.id}-editor`);k(this,Bc,null);k(this,qi);T(this,Gr,e.color||Oe._defaultColor||ke._defaultLineColor),T(this,qi,e.fontSize||Oe._defaultFontSize)}static get _keyboardManager(){const e=Oe.prototype,n=c=>c.isEmpty(),a=hu.TRANSLATE_SMALL,o=hu.TRANSLATE_BIG;return se(this,"_keyboardManager",new ym([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){ke.initialize(e,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case oe.FREETEXT_SIZE:Oe._defaultFontSize=n;break;case oe.FREETEXT_COLOR:Oe._defaultColor=n;break}}updateParams(e,n){switch(e){case oe.FREETEXT_SIZE:L(this,fn,gk).call(this,n);break;case oe.FREETEXT_COLOR:L(this,fn,mk).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[oe.FREETEXT_SIZE,Oe._defaultFontSize],[oe.FREETEXT_COLOR,Oe._defaultColor||ke._defaultLineColor]]}get propertiesToUpdate(){return[[oe.FREETEXT_SIZE,f(this,qi)],[oe.FREETEXT_COLOR,f(this,Gr)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Oe._internalPadding*e,-(Oe._internalPadding+f(this,qi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(qt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),T(this,Bc,new AbortController);const e=this._uiManager.combinedSignal(f(this,Bc));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,Hg)),this._isDraggable=!0,(e=f(this,Bc))==null||e.abort(),T(this,Bc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=f(this,$i),n=T(this,$i,L(this,fn,yk).call(this).trimEnd());if(e===n)return;const a=o=>{if(T(this,$i,o),!o){this.remove();return}L(this,fn,N0).call(this),this._uiManager.rebuild(this),L(this,fn,L0).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),L(this,fn,L0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Oe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,Hg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${f(this,qi)}px * var(--total-scale-factor))`,a.color=f(this,Gr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Qx(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[g,y]=this.pageDimensions,[b,v]=this.pageTranslation;let S,A;switch(this.rotation){case 0:S=e+(u[0]-b)/g,A=n+this.height-(u[1]-v)/y;break;case 90:S=e+(u[0]-b)/g,A=n-(u[1]-v)/y,[d,p]=[p,-d];break;case 180:S=e-this.width+(u[0]-b)/g,A=n-(u[1]-v)/y,[d,p]=[-d,-p];break;case 270:S=e+(u[0]-b-this.height*y)/g,A=n+(u[1]-v-this.width*g)/y,[d,p]=[-p,d];break}this.setAt(S*o,A*c,d,p)}else this._moveAfterPaste(e,n);L(this,fn,N0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,A,E;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=L(S=Oe,Ga,MA).call(S,n.getData("text")||"").replaceAll(Jy,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:p}=u,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const x=d.parentElement;if(y.push(d.nodeValue.slice(p).replaceAll(Jy,"")),x!==this.editorDiv){let M=g;for(const C of this.editorDiv.childNodes){if(C===x){M=y;continue}M.push(L(A=Oe,Ga,P0).call(A,C))}}g.push(d.nodeValue.slice(0,p).replaceAll(Jy,""))}else if(d===this.editorDiv){let x=g,M=0;for(const C of this.editorDiv.childNodes)M++===p&&(x=y),x.push(L(E=Oe,Ga,P0).call(E,C))}T(this,$i,`${g.join(`
`)}${o}${y.join(`
`)}`),L(this,fn,N0).call(this);const b=new Range;let v=Math.sumPrecise(g.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const M=x.nodeValue.length;if(v<=M){b.setStart(x,v),b.setEnd(x,v);break}v-=M}c.removeAllRanges(),c.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,a){var u;let o=null;if(e instanceof dk){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:g,rotation:y,id:b,popupRef:v},textContent:S,textPosition:A,parent:{page:{pageNumber:E}}}=e;if(!S||S.length===0)return null;o=e={annotationType:qt.FREETEXT,color:Array.from(p),fontSize:d,value:S.join(`
`),position:A,pageIndex:E-1,rect:g.slice(0),rotation:y,id:b,deleted:!1,popupRef:v}}const c=await super.deserialize(e,n,a);return T(c,qi,e.fontSize),T(c,Gr,Rt.makeHexColor(...e.color)),T(c,$i,L(u=Oe,Ga,MA).call(u,e.value)),c.annotationElementId=e.id||null,c._initialData=o,c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Oe._internalPadding*this.parentScale,a=this.getRect(n,n),o=ke._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,Gr)),c={annotationType:qt.FREETEXT,color:o,fontSize:f(this,qi),value:L(this,fn,bk).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(c.isCopy=!0,c):this.annotationElementId&&!L(this,fn,vk).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${f(this,qi)}px * var(--total-scale-factor))`,a.color=f(this,Gr),n.replaceChildren();for(const c of f(this,$i).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),n.append(u)}const o=Oe._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:f(this,$i)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Gr=new WeakMap,$i=new WeakMap,Hg=new WeakMap,Bc=new WeakMap,qi=new WeakMap,fn=new WeakSet,gk=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-f(this,qi))*this.parentScale),T(this,qi,o),L(this,fn,L0).call(this)},a=f(this,qi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},mk=function(e){const n=o=>{T(this,Gr,this.editorDiv.style.color=o)},a=f(this,Gr);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yk=function(){var a;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(L(a=Oe,Ga,P0).call(a,o)),n=o);return e.join(`
`)},L0=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},Ga=new WeakSet,P0=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Jy,"")},N0=function(){if(this.editorDiv.replaceChildren(),!!f(this,$i))for(const e of f(this,$i).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},bk=function(){return f(this,$i).replaceAll(" "," ")},MA=function(e){return e.replaceAll(" "," ")},vk=function(e){const{value:n,fontSize:a,color:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((u,d)=>u!==o[d])||e.pageIndex!==c},k(Oe,Ga),bt(Oe,"_freeTextDefaultContent",""),bt(Oe,"_internalPadding",0),bt(Oe,"_defaultColor",null),bt(Oe,"_defaultFontSize",10),bt(Oe,"_type","freetext"),bt(Oe,"_editorType",qt.FREETEXT);let RA=Oe;class xt{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(t,e){Te("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,o,c){c||(c=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u]*a,c[u+1]=n+t[u+1]*o;return c}static _rescaleAndSwap(t,e,n,a,o,c){c||(c=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u+1]*a,c[u+1]=n+t[u]*o;return c}static _translate(t,e,n,a){a||(a=new Float32Array(t.length));for(let o=0,c=t.length;o<c;o+=2)a[o]=e+t[o],a[o+1]=n+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,o){switch(o){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,o,c){return[(t+5*n)/6,(e+5*a)/6,(5*n+o)/6,(5*a+c)/6,(n+o)/2,(a+c)/2]}}bt(xt,"PRECISION",1e-4);var Gi,Vr,oh,lh,Ds,ee,zc,Fc,Ug,$g,ch,uh,Ko,qg,Bb,zb,Sn,mp,wk,Sk,Ak,xk,Ek,_k;const pa=class pa{constructor({x:t,y:e},n,a,o,c,u=0){k(this,Sn);k(this,Gi);k(this,Vr,[]);k(this,oh);k(this,lh);k(this,Ds,[]);k(this,ee,new Float32Array(18));k(this,zc);k(this,Fc);k(this,Ug);k(this,$g);k(this,ch);k(this,uh);k(this,Ko,[]);T(this,Gi,n),T(this,uh,o*a),T(this,lh,c),f(this,ee).set([NaN,NaN,NaN,NaN,t,e],6),T(this,oh,u),T(this,$g,f(pa,qg)*a),T(this,Ug,f(pa,zb)*a),T(this,ch,a),f(this,Ko).push(t,e)}isEmpty(){return isNaN(f(this,ee)[8])}add({x:t,y:e}){var j;T(this,zc,t),T(this,Fc,e);const[n,a,o,c]=f(this,Gi);let[u,d,p,g]=f(this,ee).subarray(8,12);const y=t-p,b=e-g,v=Math.hypot(y,b);if(v<f(this,Ug))return!1;const S=v-f(this,$g),A=S/v,E=A*y,x=A*b;let M=u,C=d;u=p,d=g,p+=E,g+=x,(j=f(this,Ko))==null||j.push(t,e);const _=-x/S,D=E/S,R=_*f(this,uh),N=D*f(this,uh);return f(this,ee).set(f(this,ee).subarray(2,8),0),f(this,ee).set([p+R,g+N],4),f(this,ee).set(f(this,ee).subarray(14,18),12),f(this,ee).set([p-R,g-N],16),isNaN(f(this,ee)[6])?(f(this,Ds).length===0&&(f(this,ee).set([u+R,d+N],2),f(this,Ds).push(NaN,NaN,NaN,NaN,(u+R-n)/o,(d+N-a)/c),f(this,ee).set([u-R,d-N],14),f(this,Vr).push(NaN,NaN,NaN,NaN,(u-R-n)/o,(d-N-a)/c)),f(this,ee).set([M,C,u,d,p,g],6),!this.isEmpty()):(f(this,ee).set([M,C,u,d,p,g],6),Math.abs(Math.atan2(C-d,M-u)-Math.atan2(x,E))<Math.PI/2?([u,d,p,g]=f(this,ee).subarray(2,6),f(this,Ds).push(NaN,NaN,NaN,NaN,((u+p)/2-n)/o,((d+g)/2-a)/c),[u,d,M,C]=f(this,ee).subarray(14,18),f(this,Vr).push(NaN,NaN,NaN,NaN,((M+u)/2-n)/o,((C+d)/2-a)/c),!0):([M,C,u,d,p,g]=f(this,ee).subarray(0,6),f(this,Ds).push(((M+5*u)/6-n)/o,((C+5*d)/6-a)/c,((5*u+p)/6-n)/o,((5*d+g)/6-a)/c,((u+p)/2-n)/o,((d+g)/2-a)/c),[p,g,u,d,M,C]=f(this,ee).subarray(12,18),f(this,Vr).push(((M+5*u)/6-n)/o,((C+5*d)/6-a)/c,((5*u+p)/6-n)/o,((5*d+g)/6-a)/c,((u+p)/2-n)/o,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=f(this,Ds),e=f(this,Vr);if(isNaN(f(this,ee)[6])&&!this.isEmpty())return L(this,Sn,wk).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);L(this,Sn,Ak).call(this,n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return L(this,Sn,Sk).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,a,o,c){return new Ck(t,e,n,a,o,c)}getOutlines(){var y;const t=f(this,Ds),e=f(this,Vr),n=f(this,ee),[a,o,c,u]=f(this,Gi),d=new Float32Array((((y=f(this,Ko))==null?void 0:y.length)??0)+2);for(let b=0,v=d.length-2;b<v;b+=2)d[b]=(f(this,Ko)[b]-a)/c,d[b+1]=(f(this,Ko)[b+1]-o)/u;if(d[d.length-2]=(f(this,zc)-a)/c,d[d.length-1]=(f(this,Fc)-o)/u,isNaN(n[6])&&!this.isEmpty())return L(this,Sn,xk).call(this,d);const p=new Float32Array(f(this,Ds).length+24+f(this,Vr).length);let g=t.length;for(let b=0;b<g;b+=2){if(isNaN(t[b])){p[b]=p[b+1]=NaN;continue}p[b]=t[b],p[b+1]=t[b+1]}g=L(this,Sn,_k).call(this,p,g);for(let b=e.length-6;b>=6;b-=6)for(let v=0;v<6;v+=2){if(isNaN(e[b+v])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=e[b+v],p[g+1]=e[b+v+1],g+=2}return L(this,Sn,Ek).call(this,p,g),this.newFreeDrawOutline(p,d,f(this,Gi),f(this,ch),f(this,oh),f(this,lh))}};Gi=new WeakMap,Vr=new WeakMap,oh=new WeakMap,lh=new WeakMap,Ds=new WeakMap,ee=new WeakMap,zc=new WeakMap,Fc=new WeakMap,Ug=new WeakMap,$g=new WeakMap,ch=new WeakMap,uh=new WeakMap,Ko=new WeakMap,qg=new WeakMap,Bb=new WeakMap,zb=new WeakMap,Sn=new WeakSet,mp=function(){const t=f(this,ee).subarray(4,6),e=f(this,ee).subarray(16,18),[n,a,o,c]=f(this,Gi);return[(f(this,zc)+(t[0]-e[0])/2-n)/o,(f(this,Fc)+(t[1]-e[1])/2-a)/c,(f(this,zc)+(e[0]-t[0])/2-n)/o,(f(this,Fc)+(e[1]-t[1])/2-a)/c]},wk=function(){const[t,e,n,a]=f(this,Gi),[o,c,u,d]=L(this,Sn,mp).call(this);return`M${(f(this,ee)[2]-t)/n} ${(f(this,ee)[3]-e)/a} L${(f(this,ee)[4]-t)/n} ${(f(this,ee)[5]-e)/a} L${o} ${c} L${u} ${d} L${(f(this,ee)[16]-t)/n} ${(f(this,ee)[17]-e)/a} L${(f(this,ee)[14]-t)/n} ${(f(this,ee)[15]-e)/a} Z`},Sk=function(t){const e=f(this,Vr);t.push(`L${e[4]} ${e[5]} Z`)},Ak=function(t){const[e,n,a,o]=f(this,Gi),c=f(this,ee).subarray(4,6),u=f(this,ee).subarray(16,18),[d,p,g,y]=L(this,Sn,mp).call(this);t.push(`L${(c[0]-e)/a} ${(c[1]-n)/o} L${d} ${p} L${g} ${y} L${(u[0]-e)/a} ${(u[1]-n)/o}`)},xk=function(t){const e=f(this,ee),[n,a,o,c]=f(this,Gi),[u,d,p,g]=L(this,Sn,mp).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-a)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,f(this,Gi),f(this,ch),f(this,oh),f(this,lh))},Ek=function(t,e){const n=f(this,Vr);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},_k=function(t,e){const n=f(this,ee).subarray(4,6),a=f(this,ee).subarray(16,18),[o,c,u,d]=f(this,Gi),[p,g,y,b]=L(this,Sn,mp).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-c)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/d],e),e+=24},k(pa,qg,8),k(pa,Bb,2),k(pa,zb,f(pa,qg)+f(pa,Bb));let vb=pa;var dh,Hc,Na,Gg,Vi,Vg,tn,Fb,Tk;class Ck extends xt{constructor(e,n,a,o,c,u){super();k(this,Fb);k(this,dh);k(this,Hc,new Float32Array(4));k(this,Na);k(this,Gg);k(this,Vi);k(this,Vg);k(this,tn);T(this,tn,e),T(this,Vi,n),T(this,dh,a),T(this,Vg,o),T(this,Na,c),T(this,Gg,u),this.lastPoint=[NaN,NaN],L(this,Fb,Tk).call(this,u);const[d,p,g,y]=f(this,Hc);for(let b=0,v=e.length;b<v;b+=2)e[b]=(e[b]-d)/g,e[b+1]=(e[b+1]-p)/y;for(let b=0,v=n.length;b<v;b+=2)n[b]=(n[b]-d)/g,n[b+1]=(n[b+1]-p)/y}toSVGPath(){const e=[`M${f(this,tn)[4]} ${f(this,tn)[5]}`];for(let n=6,a=f(this,tn).length;n<a;n+=6){if(isNaN(f(this,tn)[n])){e.push(`L${f(this,tn)[n+4]} ${f(this,tn)[n+5]}`);continue}e.push(`C${f(this,tn)[n]} ${f(this,tn)[n+1]} ${f(this,tn)[n+2]} ${f(this,tn)[n+3]} ${f(this,tn)[n+4]} ${f(this,tn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,o],c){const u=a-e,d=o-n;let p,g;switch(c){case 0:p=xt._rescale(f(this,tn),e,o,u,-d),g=xt._rescale(f(this,Vi),e,o,u,-d);break;case 90:p=xt._rescaleAndSwap(f(this,tn),e,n,u,d),g=xt._rescaleAndSwap(f(this,Vi),e,n,u,d);break;case 180:p=xt._rescale(f(this,tn),a,n,-u,d),g=xt._rescale(f(this,Vi),a,n,-u,d);break;case 270:p=xt._rescaleAndSwap(f(this,tn),a,o,-u,-d),g=xt._rescaleAndSwap(f(this,Vi),a,o,-u,-d);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return f(this,Hc)}newOutliner(e,n,a,o,c,u=0){return new vb(e,n,a,o,c,u)}getNewOutline(e,n){const[a,o,c,u]=f(this,Hc),[d,p,g,y]=f(this,dh),b=c*g,v=u*y,S=a*g+d,A=o*y+p,E=this.newOutliner({x:f(this,Vi)[0]*b+S,y:f(this,Vi)[1]*v+A},f(this,dh),f(this,Vg),e,f(this,Gg),n??f(this,Na));for(let x=2;x<f(this,Vi).length;x+=2)E.add({x:f(this,Vi)[x]*b+S,y:f(this,Vi)[x+1]*v+A});return E.getOutlines()}}dh=new WeakMap,Hc=new WeakMap,Na=new WeakMap,Gg=new WeakMap,Vi=new WeakMap,Vg=new WeakMap,tn=new WeakMap,Fb=new WeakSet,Tk=function(e){const n=f(this,tn);let a=n[4],o=n[5];const c=[a,o,a,o];let u=a,d=o;const p=e?Math.max:Math.min;for(let y=6,b=n.length;y<b;y+=6){const v=n[y+4],S=n[y+5];if(isNaN(n[y]))Rt.pointBoundingBox(v,S,c),d<S?(u=v,d=S):d===S&&(u=p(u,v));else{const A=[1/0,1/0,-1/0,-1/0];Rt.bezierBoundingBox(a,o,...n.slice(y,y+6),A),Rt.rectBoundingBox(...A,c),d<A[3]?(u=A[2],d=A[3]):d===A[3]&&(u=p(u,A[2]))}a=v,o=S}const g=f(this,Hc);g[0]=c[0]-f(this,Na),g[1]=c[1]-f(this,Na),g[2]=c[2]-c[0]+2*f(this,Na),g[3]=c[3]-c[1]+2*f(this,Na),this.lastPoint=[u,d]};var Yg,Xg,Zo,Yr,pi,Rk,I0,Mk,Dk,OA;class DA{constructor(t,e=0,n=0,a=!0){k(this,pi);k(this,Yg);k(this,Xg);k(this,Zo,[]);k(this,Yr,[]);const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:v,y:S,width:A,height:E}of t){const x=Math.floor((v-e)/c)*c,M=Math.ceil((v+A+e)/c)*c,C=Math.floor((S-e)/c)*c,_=Math.ceil((S+E+e)/c)*c,D=[x,C,_,!0],R=[M,C,_,!1];f(this,Zo).push(D,R),Rt.rectBoundingBox(x,C,M,_,o)}const u=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,p=o[0]-n,g=o[1]-n,y=f(this,Zo).at(a?-1:-2),b=[y[0],y[2]];for(const v of f(this,Zo)){const[S,A,E]=v;v[0]=(S-p)/u,v[1]=(A-g)/d,v[2]=(E-g)/d}T(this,Yg,new Float32Array([p,g,u,d])),T(this,Xg,b)}getOutlines(){f(this,Zo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of f(this,Zo))e[3]?(t.push(...L(this,pi,OA).call(this,e)),L(this,pi,Mk).call(this,e)):(L(this,pi,Dk).call(this,e),t.push(...L(this,pi,OA).call(this,e)));return L(this,pi,Rk).call(this,t)}}Yg=new WeakMap,Xg=new WeakMap,Zo=new WeakMap,Yr=new WeakMap,pi=new WeakSet,Rk=function(t){const e=[],n=new Set;for(const c of t){const[u,d,p]=c;e.push([u,d,c],[u,p,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],p=e[c+1][2];d.push(p),p.push(d),n.add(d),n.add(p)}const a=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,d,p,g,y]=c;n.delete(c);let b=u,v=d;for(o=[u,p],a.push(o);;){let S;if(n.has(g))S=g;else if(n.has(y))S=y;else break;n.delete(S),[u,d,p,g,y]=S,b!==u&&(o.push(b,v,u,v===d?d:p),b=u),v=v===d?p:d}o.push(b,v)}return new Oz(a,f(this,Yg),f(this,Xg))},I0=function(t){const e=f(this,Yr);let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:a=o-1}return a+1},Mk=function([,t,e]){const n=L(this,pi,I0).call(this,t);f(this,Yr).splice(n,0,[t,e])},Dk=function([,t,e]){const n=L(this,pi,I0).call(this,t);for(let a=n;a<f(this,Yr).length;a++){const[o,c]=f(this,Yr)[a];if(o!==t)break;if(o===t&&c===e){f(this,Yr).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,c]=f(this,Yr)[a];if(o!==t)break;if(o===t&&c===e){f(this,Yr).splice(a,1);return}}},OA=function(t){const[e,n,a]=t,o=[[e,n,a]],c=L(this,pi,I0).call(this,a);for(let u=0;u<c;u++){const[d,p]=f(this,Yr)[u];for(let g=0,y=o.length;g<y;g++){const[,b,v]=o[g];if(!(p<=b||v<=d)){if(b>=d){if(v>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,v>p&&o.push([e,p,v])}}}return o};var Qg,hh;class Oz extends xt{constructor(e,n,a){super();k(this,Qg);k(this,hh);T(this,hh,e),T(this,Qg,n),this.lastPoint=a}toSVGPath(){const e=[];for(const n of f(this,hh)){let[a,o]=n;e.push(`M${a} ${o}`);for(let c=2;c<n.length;c+=2){const u=n[c],d=n[c+1];u===a?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${u}`),a=u)}e.push("Z")}return e.join(" ")}serialize([e,n,a,o],c){const u=[],d=a-e,p=o-n;for(const g of f(this,hh)){const y=new Array(g.length);for(let b=0;b<g.length;b+=2)y[b]=e+g[b]*d,y[b+1]=o-g[b+1]*p;u.push(y)}return u}get box(){return f(this,Qg)}get classNamesForOutlining(){return["highlightOutline"]}}Qg=new WeakMap,hh=new WeakMap;class kA extends vb{newFreeDrawOutline(t,e,n,a,o,c){return new kz(t,e,n,a,o,c)}}class kz extends Ck{newOutliner(t,e,n,a,o,c=0){return new kA(t,e,n,a,o,c)}}var Xr,Uc,fh,vn,Wg,ph,Kg,Zg,Jo,Qr,gh,Jg,Ce,LA,PA,NA,Xl,Ok,Co;const Ei=class Ei{constructor({editor:t=null,uiManager:e=null}){k(this,Ce);k(this,Xr,null);k(this,Uc,null);k(this,fh);k(this,vn,null);k(this,Wg,!1);k(this,ph,!1);k(this,Kg,null);k(this,Zg);k(this,Jo,null);k(this,Qr,null);k(this,gh);var n;t?(T(this,ph,!1),T(this,gh,oe.HIGHLIGHT_COLOR),T(this,Kg,t)):(T(this,ph,!0),T(this,gh,oe.HIGHLIGHT_DEFAULT_COLOR)),T(this,Qr,(t==null?void 0:t._uiManager)||e),T(this,Zg,f(this,Qr)._eventBus),T(this,fh,(t==null?void 0:t.color)||((n=f(this,Qr))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),f(Ei,Jg)||T(Ei,Jg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return se(this,"_keyboardManager",new ym([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}renderButton(){const t=T(this,Xr,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=f(this,Qr)._signal;t.addEventListener("click",L(this,Ce,Xl).bind(this),{signal:e}),t.addEventListener("keydown",L(this,Ce,NA).bind(this),{signal:e});const n=T(this,Uc,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=f(this,fh),t.append(n),t}renderMainDropdown(){const t=T(this,vn,L(this,Ce,LA).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===f(this,Xr)){L(this,Ce,Xl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&L(this,Ce,PA).call(this,e,t)}_moveToNext(t){var e,n;if(!f(this,Ce,Co)){L(this,Ce,Xl).call(this,t);return}if(t.target===f(this,Xr)){(e=f(this,vn).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=f(this,vn))==null?void 0:e.firstChild)||t.target===f(this,Xr)){f(this,Ce,Co)&&this._hideDropdownFromKeyboard();return}f(this,Ce,Co)||L(this,Ce,Xl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!f(this,Ce,Co)){L(this,Ce,Xl).call(this,t);return}(e=f(this,vn).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!f(this,Ce,Co)){L(this,Ce,Xl).call(this,t);return}(e=f(this,vn).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=f(this,vn))==null||t.classList.add("hidden"),(e=f(this,Jo))==null||e.abort(),T(this,Jo,null)}_hideDropdownFromKeyboard(){var t;if(!f(this,ph)){if(!f(this,Ce,Co)){(t=f(this,Kg))==null||t.unselect();return}this.hideDropdown(),f(this,Xr).focus({preventScroll:!0,focusVisible:f(this,Wg)})}}updateColor(t){if(f(this,Uc)&&(f(this,Uc).style.backgroundColor=t),!f(this,vn))return;const e=f(this,Qr).highlightColors.values();for(const n of f(this,vn).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=f(this,Xr))==null||t.remove(),T(this,Xr,null),T(this,Uc,null),(e=f(this,vn))==null||e.remove(),T(this,vn,null)}};Xr=new WeakMap,Uc=new WeakMap,fh=new WeakMap,vn=new WeakMap,Wg=new WeakMap,ph=new WeakMap,Kg=new WeakMap,Zg=new WeakMap,Jo=new WeakMap,Qr=new WeakMap,gh=new WeakMap,Jg=new WeakMap,Ce=new WeakSet,LA=function(){const t=document.createElement("div"),e=f(this,Qr)._signal;t.addEventListener("contextmenu",ss,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of f(this,Qr).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",f(Ei,Jg)[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.setAttribute("aria-selected",a===f(this,fh)),o.addEventListener("click",L(this,Ce,PA).bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",L(this,Ce,NA).bind(this),{signal:e}),t},PA=function(t,e){e.stopPropagation(),f(this,Zg).dispatch("switchannotationeditorparams",{source:this,type:f(this,gh),value:t})},NA=function(t){Ei._keyboardManager.exec(this,t)},Xl=function(t){if(f(this,Ce,Co)){this.hideDropdown();return}if(T(this,Wg,t.detail===0),f(this,Jo)||(T(this,Jo,new AbortController),window.addEventListener("pointerdown",L(this,Ce,Ok).bind(this),{signal:f(this,Qr).combinedSignal(f(this,Jo))})),f(this,vn)){f(this,vn).classList.remove("hidden");return}const e=T(this,vn,L(this,Ce,LA).call(this));f(this,Xr).append(e)},Ok=function(t){var e;(e=f(this,vn))!=null&&e.contains(t.target)||this.hideDropdown()},Co=function(){return f(this,vn)&&!f(this,vn).classList.contains("hidden")},k(Ei,Jg,null);let wb=Ei;var mh,tm,Ia,$c,yh,Ti,em,nm,qc,xr,Yi,zn,bh,ja,ti,vh,Er,im,Yt,IA,j0,kk,Lk,Pk,jA,Ql,Rr,ud,Nk,B0,yp,Ik,jk,Bk,zk,Fk;const ge=class ge extends ke{constructor(e){super({...e,name:"highlightEditor"});k(this,Yt);k(this,mh,null);k(this,tm,0);k(this,Ia);k(this,$c,null);k(this,yh,null);k(this,Ti,null);k(this,em,null);k(this,nm,0);k(this,qc,null);k(this,xr,null);k(this,Yi,null);k(this,zn,!1);k(this,bh,null);k(this,ja);k(this,ti,null);k(this,vh,"");k(this,Er);k(this,im,"");this.color=e.color||ge._defaultColor,T(this,Er,e.thickness||ge._defaultThickness),T(this,ja,e.opacity||ge._defaultOpacity),T(this,Ia,e.boxes||null),T(this,im,e.methodOfCreation||""),T(this,vh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(T(this,zn,!0),L(this,Yt,j0).call(this,e),L(this,Yt,Ql).call(this)):f(this,Ia)&&(T(this,mh,e.anchorNode),T(this,tm,e.anchorOffset),T(this,em,e.focusNode),T(this,nm,e.focusOffset),L(this,Yt,IA).call(this),L(this,Yt,Ql).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ge.prototype;return se(this,"_keyboardManager",new ym([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,zn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,Er),methodOfCreation:f(this,im)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;ke.initialize(e,n),ge._defaultColor||(ge._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case oe.HIGHLIGHT_DEFAULT_COLOR:ge._defaultColor=n;break;case oe.HIGHLIGHT_THICKNESS:ge._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return f(this,bh)}updateParams(e,n){switch(e){case oe.HIGHLIGHT_COLOR:L(this,Yt,kk).call(this,n);break;case oe.HIGHLIGHT_THICKNESS:L(this,Yt,Lk).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[oe.HIGHLIGHT_DEFAULT_COLOR,ge._defaultColor],[oe.HIGHLIGHT_THICKNESS,ge._defaultThickness]]}get propertiesToUpdate(){return[[oe.HIGHLIGHT_COLOR,this.color||ge._defaultColor],[oe.HIGHLIGHT_THICKNESS,f(this,Er)||ge._defaultThickness],[oe.HIGHLIGHT_FREE,f(this,zn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(T(this,yh,new wb({editor:this})),e.addColorPicker(f(this,yh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(L(this,Yt,yp).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,L(this,Yt,yp).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){L(this,Yt,jA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(L(this,Yt,Ql).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?L(this,Yt,jA).call(this):e&&(L(this,Yt,Ql).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,u;const{drawLayer:n}=this.parent;let a;f(this,zn)?(e=(e-this.rotation+360)%360,a=L(o=ge,Rr,ud).call(o,f(this,xr).box,e)):a=L(c=ge,Rr,ud).call(c,[this.x,this.y,this.width,this.height],e),n.updateProperties(f(this,Yi),{bbox:a,root:{"data-main-rotation":e}}),n.updateProperties(f(this,ti),{bbox:L(u=ge,Rr,ud).call(u,f(this,Ti).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();f(this,vh)&&(e.setAttribute("aria-label",f(this,vh)),e.setAttribute("role","mark")),f(this,zn)?e.classList.add("free"):this.div.addEventListener("keydown",L(this,Yt,Nk).bind(this),{signal:this._uiManager._signal});const n=T(this,qc,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=f(this,$c);const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),Qx(this,f(this,qc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(f(this,ti),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(f(this,ti),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:L(this,Yt,B0).call(this,!0);break;case 1:case 3:L(this,Yt,B0).call(this,!1);break}}select(){var e;super.select(),f(this,ti)&&((e=this.parent)==null||e.drawLayer.updateProperties(f(this,ti),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),f(this,ti)&&((e=this.parent)==null||e.drawLayer.updateProperties(f(this,ti),{rootClass:{selected:!1}}),f(this,zn)||L(this,Yt,B0).call(this,!1))}get _mustFixPosition(){return!f(this,zn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(f(this,Yi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(f(this,ti),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:a,x:o,y:c}){const{x:u,y:d,width:p,height:g}=a.getBoundingClientRect(),y=new AbortController,b=e.combinedSignal(y),v=S=>{y.abort(),L(this,Rr,zk).call(this,e,S)};window.addEventListener("blur",v,{signal:b}),window.addEventListener("pointerup",v,{signal:b}),window.addEventListener("pointerdown",cn,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",ss,{signal:b}),a.addEventListener("pointermove",L(this,Rr,Bk).bind(this,e),{signal:b}),this._freeHighlight=new kA({x:o,y:c},[u,d,p,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,a){var A,E,x,M;let o=null;if(e instanceof fk){const{data:{quadPoints:C,rect:_,rotation:D,id:R,color:N,opacity:$,popupRef:j},parent:{page:{pageNumber:H}}}=e;o=e={annotationType:qt.HIGHLIGHT,color:Array.from(N),opacity:$,quadPoints:C,boxes:null,pageIndex:H-1,rect:_.slice(0),rotation:D,id:R,deleted:!1,popupRef:j}}else if(e instanceof Jx){const{data:{inkLists:C,rect:_,rotation:D,id:R,color:N,borderStyle:{rawWidth:$},popupRef:j},parent:{page:{pageNumber:H}}}=e;o=e={annotationType:qt.HIGHLIGHT,color:Array.from(N),thickness:$,inkLists:C,boxes:null,pageIndex:H-1,rect:_.slice(0),rotation:D,id:R,deleted:!1,popupRef:j}}const{color:c,quadPoints:u,inkLists:d,opacity:p}=e,g=await super.deserialize(e,n,a);g.color=Rt.makeHexColor(...c),T(g,ja,p||1),d&&T(g,Er,e.thickness),g.annotationElementId=e.id||null,g._initialData=o;const[y,b]=g.pageDimensions,[v,S]=g.pageTranslation;if(u){const C=T(g,Ia,[]);for(let _=0;_<u.length;_+=8)C.push({x:(u[_]-v)/y,y:1-(u[_+1]-S)/b,width:(u[_+2]-u[_])/y,height:(u[_+1]-u[_+5])/b});L(A=g,Yt,IA).call(A),L(E=g,Yt,Ql).call(E),g.rotate(g.rotation)}else if(d){T(g,zn,!0);const C=d[0],_={x:C[0]-v,y:b-(C[1]-S)},D=new kA(_,[0,0,y,b],1,f(g,Er)/2,!0,.001);for(let $=0,j=C.length;$<j;$+=2)_.x=C[$]-v,_.y=b-(C[$+1]-S),D.add(_);const{id:R,clipPathId:N}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);L(x=g,Yt,j0).call(x,{highlightOutlines:D.getOutlines(),highlightId:R,clipPathId:N}),L(M=g,Yt,Ql).call(M),g.rotate(g.parentRotation)}return g}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),a=ke._colorManager.convert(this.color),o={annotationType:qt.HIGHLIGHT,color:a,opacity:f(this,ja),thickness:f(this,Er),quadPoints:L(this,Yt,Ik).call(this),outlines:L(this,Yt,jk).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:L(this,Yt,yp).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!L(this,Yt,Fk).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};mh=new WeakMap,tm=new WeakMap,Ia=new WeakMap,$c=new WeakMap,yh=new WeakMap,Ti=new WeakMap,em=new WeakMap,nm=new WeakMap,qc=new WeakMap,xr=new WeakMap,Yi=new WeakMap,zn=new WeakMap,bh=new WeakMap,ja=new WeakMap,ti=new WeakMap,vh=new WeakMap,Er=new WeakMap,im=new WeakMap,Yt=new WeakSet,IA=function(){const e=new DA(f(this,Ia),.001);T(this,xr,e.getOutlines()),[this.x,this.y,this.width,this.height]=f(this,xr).box;const n=new DA(f(this,Ia),.0025,.001,this._uiManager.direction==="ltr");T(this,Ti,n.getOutlines());const{lastPoint:a}=f(this,Ti);T(this,bh,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},j0=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var y,b;if(T(this,xr,e),T(this,Ti,e.getNewOutline(f(this,Er)/2+1.5,.0025)),n>=0)T(this,Yi,n),T(this,$c,a),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),T(this,ti,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:f(this,Ti).box,path:{d:f(this,Ti).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(f(this,Yi),{bbox:L(y=ge,Rr,ud).call(y,f(this,xr).box,(v-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(f(this,ti),{bbox:L(b=ge,Rr,ud).call(b,f(this,Ti).box,v),path:{d:f(this,Ti).toSVGPath()}})}const[c,u,d,p]=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=p;break;case 90:{const[v,S]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*S/v,this.height=p*v/S;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=p;break;case 270:{const[v,S]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*S/v,this.height=p*v/S;break}}const{lastPoint:g}=f(this,Ti);T(this,bh,[(g[0]-c)/d,(g[1]-u)/p])},kk=function(e){const n=(c,u)=>{var d,p;this.color=c,T(this,ja,u),(d=this.parent)==null||d.drawLayer.updateProperties(f(this,Yi),{root:{fill:c,"fill-opacity":u}}),(p=f(this,yh))==null||p.updateColor(c)},a=this.color,o=f(this,ja);this.addCommands({cmd:n.bind(this,e,ge._defaultOpacity),undo:n.bind(this,a,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Lk=function(e){const n=f(this,Er),a=o=>{T(this,Er,o),L(this,Yt,Pk).call(this,o)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Pk=function(e){if(!f(this,zn))return;L(this,Yt,j0).call(this,{highlightOutlines:f(this,xr).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},jA=function(){f(this,Yi)===null||!this.parent||(this.parent.drawLayer.remove(f(this,Yi)),T(this,Yi,null),this.parent.drawLayer.remove(f(this,ti)),T(this,ti,null))},Ql=function(e=this.parent){f(this,Yi)===null&&({id:ai(this,Yi)._,clipPathId:ai(this,$c)._}=e.drawLayer.draw({bbox:f(this,xr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":f(this,ja)},rootClass:{highlight:!0,free:f(this,zn)},path:{d:f(this,xr).toSVGPath()}},!1,!0),T(this,ti,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:f(this,zn)},bbox:f(this,Ti).box,path:{d:f(this,Ti).toSVGPath()}},f(this,zn))),f(this,qc)&&(f(this,qc).style.clipPath=f(this,$c)))},Rr=new WeakSet,ud=function([e,n,a,o],c){switch(c){case 90:return[1-n-o,e,o,a];case 180:return[1-e-a,1-n-o,a,o];case 270:return[n,1-e-a,o,a]}return[e,n,a,o]},Nk=function(e){ge._keyboardManager.exec(this,e)},B0=function(e){if(!f(this,mh))return;const n=window.getSelection();e?n.setPosition(f(this,mh),f(this,tm)):n.setPosition(f(this,em),f(this,nm))},yp=function(){return f(this,zn)?this.rotation:0},Ik=function(){if(f(this,zn))return null;const[e,n]=this.pageDimensions,[a,o]=this.pageTranslation,c=f(this,Ia),u=new Float32Array(c.length*8);let d=0;for(const{x:p,y:g,width:y,height:b}of c){const v=p*e+a,S=(1-g)*n+o;u[d]=u[d+4]=v,u[d+1]=u[d+3]=S,u[d+2]=u[d+6]=v+y*e,u[d+5]=u[d+7]=S-b*n,d+=8}return u},jk=function(e){return f(this,xr).serialize(e,L(this,Yt,yp).call(this))},Bk=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},zk=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Fk=function(e){const{color:n}=this._initialData;return e.color.some((a,o)=>a!==n[o])},k(ge,Rr),bt(ge,"_defaultColor",null),bt(ge,"_defaultOpacity",1),bt(ge,"_defaultThickness",12),bt(ge,"_type","highlight"),bt(ge,"_editorType",qt.HIGHLIGHT),bt(ge,"_freeHighlightId",-1),bt(ge,"_freeHighlight",null),bt(ge,"_freeHighlightClipId","");let Sb=ge;var Gc;class Hk{constructor(){k(this,Gc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){f(this,Gc)[t]=e}toSVGProperties(){const t=f(this,Gc);return T(this,Gc,Object.create(null)),{root:t}}reset(){T(this,Gc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Te("Not implemented")}}Gc=new WeakMap;var Xi,wh,Tn,Vc,Yc,tl,el,nl,Xc,ue,BA,zA,FA,bp,Uk,z0,vp,dd;const _t=class _t extends ke{constructor(e){super(e);k(this,ue);k(this,Xi,null);k(this,wh);bt(this,"_drawId",null);T(this,wh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(L(this,ue,BA).call(this,e),L(this,ue,bp).call(this))}static _mergeSVGProperties(e,n){const a=new Set(Object.keys(e));for(const[o,c]of Object.entries(n))a.has(o)?Object.assign(e[o],c):e[o]=c;return e}static getDefaultDrawingOptions(e){Te("Not implemented")}static get typesMap(){Te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,n),this._currentParent&&(f(_t,Tn).updateProperty(a,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[a,o]of this.typesMap)e.push([a,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[a,o]of this.constructor.typesMap)e.push([a,n[o]]);return e}_updateProperty(e,n,a){const o=this._drawingOptions,c=o[n],u=d=>{var g;o.updateProperty(n,d);const p=f(this,Xi).updateProperty(n,d);p&&L(this,ue,vp).call(this,p),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:u.bind(this,a),undo:u.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,_t._mergeSVGProperties(f(this,Xi).getPathResizingSVGProperties(L(this,ue,z0).call(this)),{bbox:L(this,ue,dd).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,_t._mergeSVGProperties(f(this,Xi).getPathResizedSVGProperties(L(this,ue,z0).call(this)),{bbox:L(this,ue,dd).call(this)}))}_onTranslating(e,n){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:L(this,ue,dd).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,_t._mergeSVGProperties(f(this,Xi).getPathTranslatedSVGProperties(L(this,ue,z0).call(this),this.parentDimensions),{bbox:L(this,ue,dd).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,f(this,wh)&&(T(this,wh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){L(this,ue,FA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(L(this,ue,bp).call(this),L(this,ue,vp).call(this,f(this,Xi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),L(this,ue,FA).call(this)):e&&(this._uiManager.addShouldRescale(this),L(this,ue,bp).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,_t._mergeSVGProperties({bbox:L(this,ue,dd).call(this)},f(this,Xi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&L(this,ue,vp).call(this,f(this,Xi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const a=super.render();a.classList.add("draw");const o=document.createElement("div");a.append(o),o.setAttribute("aria-hidden","true"),o.className="internal";const[c,u]=this.parentDimensions;return this.setDims(this.width*c,this.height*u),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),a}static createDrawerInstance(e,n,a,o,c){Te("Not implemented")}static startDrawing(e,n,a,o){var E;const{target:c,offsetX:u,offsetY:d,pointerId:p,pointerType:g}=o;if(f(_t,el)&&f(_t,el)!==g)return;const{viewport:{rotation:y}}=e,{width:b,height:v}=c.getBoundingClientRect(),S=T(_t,Vc,new AbortController),A=e.combinedSignal(S);if(f(_t,tl)||T(_t,tl,p),f(_t,el)??T(_t,el,g),window.addEventListener("pointerup",x=>{var M;f(_t,tl)===x.pointerId?this._endDraw(x):(M=f(_t,nl))==null||M.delete(x.pointerId)},{signal:A}),window.addEventListener("pointercancel",x=>{var M;f(_t,tl)===x.pointerId?this._currentParent.endDrawingSession():(M=f(_t,nl))==null||M.delete(x.pointerId)},{signal:A}),window.addEventListener("pointerdown",x=>{f(_t,el)===x.pointerType&&((f(_t,nl)||T(_t,nl,new Set)).add(x.pointerId),f(_t,Tn).isCancellable()&&(f(_t,Tn).removeLastElement(),f(_t,Tn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",ss,{signal:A}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),c.addEventListener("touchmove",x=>{x.timeStamp===f(_t,Xc)&&cn(x)},{signal:A}),e.toggleDrawing(),(E=n._editorUndoBar)==null||E.hide(),f(_t,Tn)){e.drawLayer.updateProperties(this._currentDrawId,f(_t,Tn).startNew(u,d,b,v,y));return}n.updateUIForDefaultProperties(this),T(_t,Tn,this.createDrawerInstance(u,d,b,v,y)),T(_t,Yc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(f(_t,Yc).toSVGProperties(),f(_t,Tn).defaultSVGProperties),!0,!1)}static _drawMove(e){var c;if(T(_t,Xc,-1),!f(_t,Tn))return;const{offsetX:n,offsetY:a,pointerId:o}=e;if(f(_t,tl)===o){if(((c=f(_t,nl))==null?void 0:c.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,f(_t,Tn).add(n,a)),T(_t,Xc,e.timeStamp),cn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,T(_t,Tn,null),T(_t,Yc,null),T(_t,el,null),T(_t,Xc,NaN)),f(_t,Vc)&&(f(_t,Vc).abort(),T(_t,Vc,null),T(_t,tl,NaN),T(_t,nl,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,f(_t,Tn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=f(_t,Tn),o=this._currentDrawId,c=a.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,a.setLastElement(c))},undo:()=>{n.drawLayer.updateProperties(o,a.removeLastElement())},mustExec:!1,type:oe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(oe.DRAW_STEP),!f(_t,Tn).isEmpty()){const{pageDimensions:[a,o],scale:c}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:f(_t,Tn).getOutlines(a*c,o*c,c,this._INNER_MARGIN),drawingOptions:f(_t,Yc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,a,o,c,u){Te("Not implemented")}static async deserialize(e,n,a){var y,b;const{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}=n.viewport,p=this.deserializeDraw(u,d,o,c,this._INNER_MARGIN,e),g=await super.deserialize(e,n,a);return g.createDrawingOptions(e),L(y=g,ue,BA).call(y,{drawOutlines:p}),L(b=g,ue,bp).call(b),g.onScaleChanging(),g.rotate(),g}serializeDraw(e){const[n,a]=this.pageTranslation,[o,c]=this.pageDimensions;return f(this,Xi).serialize([n,a,o,c],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Xi=new WeakMap,wh=new WeakMap,Tn=new WeakMap,Vc=new WeakMap,Yc=new WeakMap,tl=new WeakMap,el=new WeakMap,nl=new WeakMap,Xc=new WeakMap,ue=new WeakSet,BA=function({drawOutlines:e,drawId:n,drawingOptions:a}){T(this,Xi,e),this._drawingOptions||(this._drawingOptions=a),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=L(this,ue,zA).call(this,e,this.parent),L(this,ue,vp).call(this,e.box)},zA=function(e,n){const{id:a}=n.drawLayer.draw(_t._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},FA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},bp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=L(this,ue,zA).call(this,f(this,Xi),e)}},Uk=function([e,n,a,o]){const{parentDimensions:[c,u],rotation:d}=this;switch(d){case 90:return[n,1-e,a*(u/c),o*(c/u)];case 180:return[1-e,1-n,a,o];case 270:return[1-n,e,a*(u/c),o*(c/u)];default:return[e,n,a,o]}},z0=function(){const{x:e,y:n,width:a,height:o,parentDimensions:[c,u],rotation:d}=this;switch(d){case 90:return[1-n,e,a*(c/u),o*(u/c)];case 180:return[1-e,1-n,a,o];case 270:return[n,1-e,a*(c/u),o*(u/c)];default:return[e,n,a,o]}},vp=function(e){if([this.x,this.y,this.width,this.height]=L(this,ue,Uk).call(this,e),this.div){this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)}this._onResized()},dd=function(){const{x:e,y:n,width:a,height:o,rotation:c,parentRotation:u,parentDimensions:[d,p]}=this;switch((c*4+u)/90){case 1:return[1-n-o,e,o,a];case 2:return[1-e-a,1-n-o,a,o];case 3:return[n,1-e-a,o,a];case 4:return[e,n-a*(d/p),o*(p/d),a*(d/p)];case 5:return[1-n,e,a*(d/p),o*(p/d)];case 6:return[1-e-o*(p/d),1-n,o*(p/d),a*(d/p)];case 7:return[n-a*(d/p),1-e-o*(p/d),a*(d/p),o*(p/d)];case 8:return[e-a,n-o,a,o];case 9:return[1-n,e-a,o,a];case 10:return[1-e,1-n,a,o];case 11:return[n-o,1-e,o,a];case 12:return[e-o*(p/d),n,o*(p/d),a*(d/p)];case 13:return[1-n-a*(d/p),e-o*(p/d),a*(d/p),o*(p/d)];case 14:return[1-e,1-n-a*(d/p),o*(p/d),a*(d/p)];case 15:return[n,1-e,a*(d/p),o*(p/d)];default:return[e,n,a,o]}},bt(_t,"_currentDrawId",-1),bt(_t,"_currentParent",null),k(_t,Tn,null),k(_t,Vc,null),k(_t,Yc,null),k(_t,tl,NaN),k(_t,el,null),k(_t,nl,null),k(_t,Xc,NaN),bt(_t,"_INNER_MARGIN",3);let Ab=_t;var Os,Rn,Mn,Qc,Sh,ci,Fn,_r,Wc,Kc,Zc,Ah,F0;class Lz{constructor(t,e,n,a,o,c){k(this,Ah);k(this,Os,new Float64Array(6));k(this,Rn);k(this,Mn);k(this,Qc);k(this,Sh);k(this,ci);k(this,Fn,"");k(this,_r,0);k(this,Wc,new wm);k(this,Kc);k(this,Zc);T(this,Kc,n),T(this,Zc,a),T(this,Qc,o),T(this,Sh,c),[t,e]=L(this,Ah,F0).call(this,t,e);const u=T(this,Rn,[NaN,NaN,NaN,NaN,t,e]);T(this,ci,[t,e]),T(this,Mn,[{line:u,points:f(this,ci)}]),f(this,Os).set(u,0)}updateProperty(t,e){t==="stroke-width"&&T(this,Sh,e)}isEmpty(){return!f(this,Mn)||f(this,Mn).length===0}isCancellable(){return f(this,ci).length<=10}add(t,e){[t,e]=L(this,Ah,F0).call(this,t,e);const[n,a,o,c]=f(this,Os).subarray(2,6),u=t-o,d=e-c;return Math.hypot(f(this,Kc)*u,f(this,Zc)*d)<=2?null:(f(this,ci).push(t,e),isNaN(n)?(f(this,Os).set([o,c,t,e],2),f(this,Rn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(f(this,Os)[0])&&f(this,Rn).splice(6,6),f(this,Os).set([n,a,o,c,t,e],0),f(this,Rn).push(...xt.createBezierPoints(n,a,o,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(f(this,ci).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,o){T(this,Kc,n),T(this,Zc,a),T(this,Qc,o),[t,e]=L(this,Ah,F0).call(this,t,e);const c=T(this,Rn,[NaN,NaN,NaN,NaN,t,e]);T(this,ci,[t,e]);const u=f(this,Mn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),f(this,Mn).push({line:c,points:f(this,ci)}),f(this,Os).set(c,0),T(this,_r,0),this.toSVGPath(),null}getLastElement(){return f(this,Mn).at(-1)}setLastElement(t){return f(this,Mn)?(f(this,Mn).push(t),T(this,Rn,t.line),T(this,ci,t.points),T(this,_r,0),{path:{d:this.toSVGPath()}}):f(this,Wc).setLastElement(t)}removeLastElement(){if(!f(this,Mn))return f(this,Wc).removeLastElement();f(this,Mn).pop(),T(this,Fn,"");for(let t=0,e=f(this,Mn).length;t<e;t++){const{line:n,points:a}=f(this,Mn)[t];T(this,Rn,n),T(this,ci,a),T(this,_r,0),this.toSVGPath()}return{path:{d:f(this,Fn)}}}toSVGPath(){const t=xt.svgRound(f(this,Rn)[4]),e=xt.svgRound(f(this,Rn)[5]);if(f(this,ci).length===2)return T(this,Fn,`${f(this,Fn)} M ${t} ${e} Z`),f(this,Fn);if(f(this,ci).length<=6){const a=f(this,Fn).lastIndexOf("M");T(this,Fn,`${f(this,Fn).slice(0,a)} M ${t} ${e}`),T(this,_r,6)}if(f(this,ci).length===4){const a=xt.svgRound(f(this,Rn)[10]),o=xt.svgRound(f(this,Rn)[11]);return T(this,Fn,`${f(this,Fn)} L ${a} ${o}`),T(this,_r,12),f(this,Fn)}const n=[];f(this,_r)===0&&(n.push(`M ${t} ${e}`),T(this,_r,6));for(let a=f(this,_r),o=f(this,Rn).length;a<o;a+=6){const[c,u,d,p,g,y]=f(this,Rn).slice(a,a+6).map(xt.svgRound);n.push(`C${c} ${u} ${d} ${p} ${g} ${y}`)}return T(this,Fn,f(this,Fn)+n.join(" ")),T(this,_r,f(this,Rn).length),f(this,Fn)}getOutlines(t,e,n,a){const o=f(this,Mn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),f(this,Wc).build(f(this,Mn),t,e,n,f(this,Qc),f(this,Sh),a),T(this,Os,null),T(this,Rn,null),T(this,Mn,null),T(this,Fn,null),f(this,Wc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Os=new WeakMap,Rn=new WeakMap,Mn=new WeakMap,Qc=new WeakMap,Sh=new WeakMap,ci=new WeakMap,Fn=new WeakMap,_r=new WeakMap,Wc=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,Ah=new WeakSet,F0=function(t,e){return xt._normalizePoint(t,e,f(this,Kc),f(this,Zc),f(this,Qc))};var ui,rm,sm,Qi,ks,Ls,xh,Eh,Jc,$n,ua,$k,qk,Gk;class wm extends xt{constructor(){super(...arguments);k(this,$n);k(this,ui);k(this,rm,0);k(this,sm);k(this,Qi);k(this,ks);k(this,Ls);k(this,xh);k(this,Eh);k(this,Jc)}build(e,n,a,o,c,u,d){T(this,ks,n),T(this,Ls,a),T(this,xh,o),T(this,Eh,c),T(this,Jc,u),T(this,sm,d??0),T(this,Qi,e),L(this,$n,qk).call(this)}get thickness(){return f(this,Jc)}setLastElement(e){return f(this,Qi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return f(this,Qi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of f(this,Qi)){if(e.push(`M${xt.svgRound(n[4])} ${xt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${xt.svgRound(n[10])} ${xt.svgRound(n[11])}`);continue}for(let a=6,o=n.length;a<o;a+=6){const[c,u,d,p,g,y]=n.subarray(a,a+6).map(xt.svgRound);e.push(`C${c} ${u} ${d} ${p} ${g} ${y}`)}}return e.join("")}serialize([e,n,a,o],c){const u=[],d=[],[p,g,y,b]=L(this,$n,$k).call(this);let v,S,A,E,x,M,C,_,D;switch(f(this,Eh)){case 0:D=xt._rescale,v=e,S=n+o,A=a,E=-o,x=e+p*a,M=n+(1-g-b)*o,C=e+(p+y)*a,_=n+(1-g)*o;break;case 90:D=xt._rescaleAndSwap,v=e,S=n,A=a,E=o,x=e+g*a,M=n+p*o,C=e+(g+b)*a,_=n+(p+y)*o;break;case 180:D=xt._rescale,v=e+a,S=n,A=-a,E=o,x=e+(1-p-y)*a,M=n+g*o,C=e+(1-p)*a,_=n+(g+b)*o;break;case 270:D=xt._rescaleAndSwap,v=e+a,S=n+o,A=-a,E=-o,x=e+(1-g-b)*a,M=n+(1-p-y)*o,C=e+(1-g)*a,_=n+(1-p)*o;break}for(const{line:R,points:N}of f(this,Qi))u.push(D(R,v,S,A,E,c?new Array(R.length):null)),d.push(D(N,v,S,A,E,c?new Array(N.length):null));return{lines:u,points:d,rect:[x,M,C,_]}}static deserialize(e,n,a,o,c,{paths:{lines:u,points:d},rotation:p,thickness:g}){const y=[];let b,v,S,A,E;switch(p){case 0:E=xt._rescale,b=-e/a,v=n/o+1,S=1/a,A=-1/o;break;case 90:E=xt._rescaleAndSwap,b=-n/o,v=-e/a,S=1/o,A=1/a;break;case 180:E=xt._rescale,b=e/a+1,v=-n/o,S=-1/a,A=1/o;break;case 270:E=xt._rescaleAndSwap,b=n/o+1,v=e/a+1,S=-1/o,A=-1/a;break}if(!u){u=[];for(const M of d){const C=M.length;if(C===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(C===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const _=new Float32Array(3*(C-2));u.push(_);let[D,R,N,$]=M.subarray(0,4);_.set([NaN,NaN,NaN,NaN,D,R],0);for(let j=4;j<C;j+=2){const H=M[j],F=M[j+1];_.set(xt.createBezierPoints(D,R,N,$,H,F),(j-2)*3),[D,R,N,$]=[N,$,H,F]}}}for(let M=0,C=u.length;M<C;M++)y.push({line:E(u[M].map(_=>_??NaN),b,v,S,A),points:E(d[M].map(_=>_??NaN),b,v,S,A)});const x=new this.prototype.constructor;return x.build(y,a,o,1,p,g,c),x}get box(){return f(this,ui)}updateProperty(e,n){return e==="stroke-width"?L(this,$n,Gk).call(this,n):null}updateParentDimensions([e,n],a){const[o,c]=L(this,$n,ua).call(this);T(this,ks,e),T(this,Ls,n),T(this,xh,a);const[u,d]=L(this,$n,ua).call(this),p=u-o,g=d-c,y=f(this,ui);return y[0]-=p,y[1]-=g,y[2]+=2*p,y[3]+=2*g,y}updateRotation(e){return T(this,rm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return f(this,ui).map(xt.svgRound).join(" ")}get defaultProperties(){const[e,n]=f(this,ui);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=f(this,ui);let a=0,o=0,c=0,u=0,d=0,p=0;switch(f(this,rm)){case 90:o=n/e,c=-e/n,d=e;break;case 180:a=-1,u=-1,d=e,p=n;break;case 270:o=-n/e,c=e/n,p=n;break;default:return""}return`matrix(${a} ${o} ${c} ${u} ${xt.svgRound(d)} ${xt.svgRound(p)})`}getPathResizingSVGProperties([e,n,a,o]){const[c,u]=L(this,$n,ua).call(this),[d,p,g,y]=f(this,ui);if(Math.abs(g-c)<=xt.PRECISION||Math.abs(y-u)<=xt.PRECISION){const E=e+a/2-(d+g/2),x=n+o/2-(p+y/2);return{path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${E} ${x})`}}}const b=(a-2*c)/(g-2*c),v=(o-2*u)/(y-2*u),S=g/a,A=y/o;return{path:{"transform-origin":`${xt.svgRound(d)} ${xt.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${A}) translate(${xt.svgRound(c)} ${xt.svgRound(u)}) scale(${b} ${v}) translate(${xt.svgRound(-c)} ${xt.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,a,o]){const[c,u]=L(this,$n,ua).call(this),d=f(this,ui),[p,g,y,b]=d;if(d[0]=e,d[1]=n,d[2]=a,d[3]=o,Math.abs(y-c)<=xt.PRECISION||Math.abs(b-u)<=xt.PRECISION){const x=e+a/2-(p+y/2),M=n+o/2-(g+b/2);for(const{line:C,points:_}of f(this,Qi))xt._translate(C,x,M,C),xt._translate(_,x,M,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(a-2*c)/(y-2*c),S=(o-2*u)/(b-2*u),A=-v*(p+c)+e+c,E=-S*(g+u)+n+u;if(v!==1||S!==1||A!==0||E!==0)for(const{line:x,points:M}of f(this,Qi))xt._rescale(x,A,E,v,S,x),xt._rescale(M,A,E,v,S,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],a){const[o,c]=a,u=f(this,ui),d=e-u[0],p=n-u[1];if(f(this,ks)===o&&f(this,Ls)===c)for(const{line:g,points:y}of f(this,Qi))xt._translate(g,d,p,g),xt._translate(y,d,p,y);else{const g=f(this,ks)/o,y=f(this,Ls)/c;T(this,ks,o),T(this,Ls,c);for(const{line:b,points:v}of f(this,Qi))xt._rescale(b,d,p,g,y,b),xt._rescale(v,d,p,g,y,v);u[2]*=g,u[3]*=y}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(n)}`}}}get defaultSVGProperties(){const e=f(this,ui);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${xt.svgRound(e[0])} ${xt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ui=new WeakMap,rm=new WeakMap,sm=new WeakMap,Qi=new WeakMap,ks=new WeakMap,Ls=new WeakMap,xh=new WeakMap,Eh=new WeakMap,Jc=new WeakMap,$n=new WeakSet,ua=function(e=f(this,Jc)){const n=f(this,sm)+e/2*f(this,xh);return f(this,Eh)%180===0?[n/f(this,ks),n/f(this,Ls)]:[n/f(this,Ls),n/f(this,ks)]},$k=function(){const[e,n,a,o]=f(this,ui),[c,u]=L(this,$n,ua).call(this,0);return[e+c,n+u,a-2*c,o-2*u]},qk=function(){const e=T(this,ui,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of f(this,Qi)){if(o.length<=12){for(let d=4,p=o.length;d<p;d+=6)Rt.pointBoundingBox(o[d],o[d+1],e);continue}let c=o[4],u=o[5];for(let d=6,p=o.length;d<p;d+=6){const[g,y,b,v,S,A]=o.subarray(d,d+6);Rt.bezierBoundingBox(c,u,g,y,b,v,S,A,e),c=S,u=A}}const[n,a]=L(this,$n,ua).call(this);e[0]=fi(e[0]-n,0,1),e[1]=fi(e[1]-a,0,1),e[2]=fi(e[2]+n,0,1),e[3]=fi(e[3]+a,0,1),e[2]-=e[0],e[3]-=e[1]},Gk=function(e){const[n,a]=L(this,$n,ua).call(this);T(this,Jc,e);const[o,c]=L(this,$n,ua).call(this),[u,d]=[o-n,c-a],p=f(this,ui);return p[0]-=u,p[1]-=d,p[2]+=2*u,p[3]+=2*d,p};class pv extends Hk{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ke._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new pv(this._viewParameters);return t.updateAll(this),t}}var Hb,Vk;const yd=class yd extends Ab{constructor(e){super({...e,name:"inkEditor"});k(this,Hb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){ke.initialize(e,n),this._defaultDrawingOptions=new pv(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return se(this,"typesMap",new Map([[oe.INK_THICKNESS,"stroke-width"],[oe.INK_COLOR,"stroke"],[oe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,a,o,c){return new Lz(e,n,a,o,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,a,o,c,u){return wm.deserialize(e,n,a,o,c,u)}static async deserialize(e,n,a){let o=null;if(e instanceof Jx){const{data:{inkLists:u,rect:d,rotation:p,id:g,color:y,opacity:b,borderStyle:{rawWidth:v},popupRef:S},parent:{page:{pageNumber:A}}}=e;o=e={annotationType:qt.INK,color:Array.from(y),thickness:v,opacity:b,paths:{points:u},boxes:null,pageIndex:A-1,rect:d.slice(0),rotation:p,id:g,deleted:!1,popupRef:S}}const c=await super.deserialize(e,n,a);return c.annotationElementId=e.id||null,c._initialData=o,c}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:a}=this;n.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:a}){this._drawingOptions=yd.getDefaultDrawingOptions({stroke:Rt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:a,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:c,"stroke-opacity":u,"stroke-width":d}}=this,p={annotationType:qt.INK,color:ke._colorManager.convert(c),opacity:u,thickness:d,paths:{lines:n,points:a},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(p.isCopy=!0,p):this.annotationElementId&&!L(this,Hb,Vk).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:n,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Hb=new WeakSet,Vk=function(e){const{color:n,thickness:a,opacity:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((u,d)=>u!==n[d])||e.thickness!==a||e.opacity!==o||e.pageIndex!==c},bt(yd,"_type","ink"),bt(yd,"_editorType",qt.INK),bt(yd,"_defaultDrawingOptions",null);let HA=yd;class UA extends wm{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const t0=8,tp=3;var tu,be,$A,Wr,Yk,Xk,qA,H0,Qk,Wk,Kk,GA,VA,Zk;class $a{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},o,c,u,d){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${n} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:S,actualBoundingBoxAscent:A,actualBoundingBoxDescent:E,fontBoundingBoxAscent:x,fontBoundingBoxDescent:M,width:C}=g.measureText(t),_=1.5,D=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||0,C)*_),R=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||y,Math.abs(x)+Math.abs(M)||y)*_);p=new OffscreenCanvas(D,R),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,D,R),g.fillStyle="black",g.fillText(t,D*(_-1)/2,R*(3-_)/2);const N=L(this,be,GA).call(this,g.getImageData(0,0,D,R).data),$=L(this,be,Kk).call(this,N),j=L(this,be,VA).call(this,$),H=L(this,be,qA).call(this,N,D,R,j);return this.processDrawnLines({lines:{curves:H,width:D,height:R},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,o){const[c,u,d]=L(this,be,Zk).call(this,t),[p,g]=L(this,be,Wk).call(this,c,u,d,Math.hypot(u,d)*f(this,tu).sigmaSFactor,f(this,tu).sigmaR,f(this,tu).kernelSize),y=L(this,be,VA).call(this,g),b=L(this,be,qA).call(this,p,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:c,areContours:u}){a%180!==0&&([e,n]=[n,e]);const{curves:d,width:p,height:g}=t,y=t.thickness??0,b=[],v=Math.min(e/p,n/g),S=v/e,A=v/n,E=[];for(const{points:M}of d){const C=c?L(this,be,Qk).call(this,M):M;if(!C)continue;E.push(C);const _=C.length,D=new Float32Array(_),R=new Float32Array(3*(_===2?2:_-2));if(b.push({line:R,points:D}),_===2){D[0]=C[0]*S,D[1]=C[1]*A,R.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[N,$,j,H]=C;N*=S,$*=A,j*=S,H*=A,D.set([N,$,j,H],0),R.set([NaN,NaN,NaN,NaN,N,$],0);for(let F=4;F<_;F+=2){const G=D[F]=C[F]*S,Q=D[F+1]=C[F+1]*A;R.set(xt.createBezierPoints(N,$,j,H,G,Q),(F-2)*3),[N,$,j,H]=[j,H,G,Q]}}if(b.length===0)return null;const x=u?new UA:new wm;return x.build(b,e,n,1,a,u?0:y,o),{outline:x,newCurves:E,areContours:u,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:o}){let c=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let _=2,D=C.length;_<D;_++){const R=C[_]-C[_-2];c=Math.min(c,R),u=Math.max(u,R)}}let p;c>=-128&&u<=127?p=Int8Array:c>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=t0+tp*g,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*p.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=a,b[v++]=o,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(n??0)),b[v++]=g,b[v++]=p.BYTES_PER_ELEMENT;for(const C of t)b[v++]=C.length-2,b[v++]=C[0],b[v++]=C[1];const S=new CompressionStream("deflate-raw"),A=S.writable.getWriter();await A.ready,A.write(b);const E=p.prototype.constructor;for(const C of t){const _=new E(C.length-2);for(let D=2,R=C.length;D<R;D++)_[D-2]=C[D]-C[D-2];A.write(_)}A.close();const x=await new Response(S.readable).arrayBuffer(),M=new Uint8Array(x);return eO(M)}static async decompressSignature(t){try{const e=rB(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const C of n)c||(c=new Uint8Array(new Uint32Array(C.buffer,0,4)[0])),c.set(C,u),u+=C.length;const d=new Uint32Array(c.buffer,0,c.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=d[2],y=d[3],b=d[4]===0,v=d[5],S=d[6],A=d[7],E=[],x=(t0+tp*S)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(A){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(c.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(c.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(c.buffer,x);break}u=0;for(let C=0;C<S;C++){const _=d[tp*C+t0],D=new Float32Array(_+2);E.push(D);for(let R=0;R<tp-1;R++)D[R]=d[tp*C+t0+R+1];for(let R=0;R<_;R++)D[R+2]=D[R]+M[u++]}return{areContours:b,thickness:v,outlines:E,width:g,height:y}}catch(e){return Gt(`decompressSignature: ${e}`),null}}}tu=new WeakMap,be=new WeakSet,$A=function(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a},Wr=new WeakMap,Yk=function(t,e,n,a,o,c,u){const d=L(this,be,$A).call(this,n,a,o,c);for(let p=0;p<8;p++){const g=(-p+d-u+16)%8,y=f(this,Wr)[2*g],b=f(this,Wr)[2*g+1];if(t[(n+y)*e+(a+b)]!==0)return g}return-1},Xk=function(t,e,n,a,o,c,u){const d=L(this,be,$A).call(this,n,a,o,c);for(let p=0;p<8;p++){const g=(p+d+u+16)%8,y=f(this,Wr)[2*g],b=f(this,Wr)[2*g+1];if(t[(n+y)*e+(a+b)]!==0)return g}return-1},qA=function(t,e,n,a){const o=t.length,c=new Int32Array(o);for(let g=0;g<o;g++)c[g]=t[g]<=a?1:0;for(let g=1;g<n-1;g++)c[g*e]=c[g*e+e-1]=0;for(let g=0;g<e;g++)c[g]=c[e*n-1-g]=0;let u=1,d;const p=[];for(let g=1;g<n-1;g++){d=1;for(let y=1;y<e-1;y++){const b=g*e+y,v=c[b];if(v===0)continue;let S=g,A=y;if(v===1&&c[b-1]===0)u+=1,A-=1;else if(v>=1&&c[b+1]===0)u+=1,A+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const E=[y,g],x=A===y+1,M={isHole:x,points:E,id:u,parent:0};p.push(M);let C;for(const F of p)if(F.id===d){C=F;break}C?C.isHole?M.parent=x?C.parent:d:M.parent=x?d:C.parent:M.parent=x?d:0;const _=L(this,be,Yk).call(this,c,e,g,y,S,A,0);if(_===-1){c[b]=-u,c[b]!==1&&(d=Math.abs(c[b]));continue}let D=f(this,Wr)[2*_],R=f(this,Wr)[2*_+1];const N=g+D,$=y+R;S=N,A=$;let j=g,H=y;for(;;){const F=L(this,be,Xk).call(this,c,e,j,H,S,A,1);D=f(this,Wr)[2*F],R=f(this,Wr)[2*F+1];const G=j+D,Q=H+R;E.push(Q,G);const X=j*e+H;if(c[X+1]===0?c[X]=-u:c[X]===1&&(c[X]=u),G===g&&Q===y&&j===N&&H===$){c[b]!==1&&(d=Math.abs(c[b]));break}else S=j,A=H,j=G,H=Q}}}return p},H0=function(t,e,n,a){if(n-e<=4){for(let N=e;N<n-2;N+=2)a.push(t[N],t[N+1]);return}const o=t[e],c=t[e+1],u=t[n-4]-o,d=t[n-3]-c,p=Math.hypot(u,d),g=u/p,y=d/p,b=g*c-y*o,v=d/u,S=1/p,A=Math.atan(v),E=Math.cos(A),x=Math.sin(A),M=S*(Math.abs(E)+Math.abs(x)),C=S*(1-M+M**2),_=Math.max(Math.atan(Math.abs(x+E)*C),Math.atan(Math.abs(x-E)*C));let D=0,R=e;for(let N=e+2;N<n-2;N+=2){const $=Math.abs(b-g*t[N+1]+y*t[N]);$>D&&(R=N,D=$)}D>(p*_)**2?(L(this,be,H0).call(this,t,e,R+2,a),L(this,be,H0).call(this,t,R,n,a)):a.push(o,c)},Qk=function(t){const e=[],n=t.length;return L(this,be,H0).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},Wk=function(t,e,n,a,o,c){const u=new Float32Array(c**2),d=-2*a**2,p=c>>1;for(let A=0;A<c;A++){const E=(A-p)**2;for(let x=0;x<c;x++)u[A*c+x]=Math.exp((E+(x-p)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let A=0;A<256;A++)g[A]=Math.exp(A**2/y);const b=t.length,v=new Uint8Array(b),S=new Uint32Array(256);for(let A=0;A<n;A++)for(let E=0;E<e;E++){const x=A*e+E,M=t[x];let C=0,_=0;for(let R=0;R<c;R++){const N=A+R-p;if(!(N<0||N>=n))for(let $=0;$<c;$++){const j=E+$-p;if(j<0||j>=e)continue;const H=t[N*e+j],F=u[R*c+$]*g[Math.abs(H-M)];C+=H*F,_+=F}}const D=v[x]=Math.round(C/_);S[D]++}return[v,S]},Kk=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},GA=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,d=n.length;u<d;u++){if(t[(u<<2)+3]===0){a=n[u]=255;continue}const g=n[u]=t[u<<2];g>a&&(a=g),g<o&&(o=g)}const c=255/(a-o);for(let u=0;u<e;u++)n[u]=(n[u]-o)*c;return n},VA=function(t){let e,n=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-c>a&&(a=e-c,u=e-1),n=d,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},Zk=function(t){const e=t,{width:n,height:a}=t,{maxDim:o}=f(this,tu);let c=n,u=a;if(n>o||a>o){let b=n,v=a,S=Math.log2(Math.max(n,a)/o);const A=Math.floor(S);S=S===A?A-1:A;for(let x=0;x<S;x++){c=b,u=v,c>o&&(c=Math.ceil(c/2)),u>o&&(u=Math.ceil(u/2));const M=new OffscreenCanvas(c,u);M.getContext("2d").drawImage(t,0,0,b,v,0,0,c,u),b=c,v=u,t!==e&&t.close(),t=M.transferToImageBitmap()}const E=Math.min(o/c,o/u);c=Math.round(c*E),u=Math.round(u*E)}const p=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,c,u);const g=p.getImageData(0,0,c,u).data;return[L(this,be,GA).call(this,g),c,u]},k($a,be),k($a,tu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k($a,Wr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class tE extends Hk{constructor(){super(),super.updateProperties({fill:ke._defaultLineColor,"stroke-width":0})}clone(){const t=new tE;return t.updateAll(this),t}}class eE extends pv{constructor(t){super(t),super.updateProperties({stroke:ke._defaultLineColor,"stroke-width":1})}clone(){const t=new eE(this._viewParameters);return t.updateAll(this),t}}var il,Wi,rl,sl;const ji=class ji extends Ab{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});k(this,il,!1);k(this,Wi,null);k(this,rl,null);k(this,sl,null);this._willKeepAspectRatio=!0,T(this,rl,e.signatureData||null),T(this,Wi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){ke.initialize(e,n),this._defaultDrawingOptions=new tE,this._defaultDrawnSignatureOptions=new eE(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return se(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!f(this,Wi)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(f(this,rl)){const{lines:o,mustSmooth:c,areContours:u,description:d,uuid:p,heightInPage:g}=f(this,rl),{rawDims:{pageWidth:y,pageHeight:b},rotation:v}=this.parent.viewport,S=$a.processDrawnLines({lines:o,pageWidth:y,pageHeight:b,rotation:v,innerMargin:ji._INNER_MARGIN,mustSmooth:c,areContours:u});this.addSignature(S,g,d,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return a&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){T(this,sl,e),this.addEditToolbar()}getUuid(){return f(this,sl)}get description(){return f(this,Wi)}set description(e){T(this,Wi,e),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:a,width:o,height:c}=f(this,rl),u=Math.max(o,c),d=$a.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:a,width:o,height:c},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&f(this,Wi)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,f(this,sl),f(this,Wi)),e.show()),e):null}addSignature(e,n,a,o){const{x:c,y:u}=this,{outline:d}=T(this,rl,e);T(this,il,d instanceof UA),T(this,Wi,a),this.div.setAttribute("data-l10n-args",JSON.stringify({description:a}));let p;f(this,il)?p=ji.getDefaultDrawingOptions():(p=ji._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:p});const[g,y]=this.parentDimensions,[,b]=this.pageDimensions;let v=n/b;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(g*this.width,y*this.height),this.x=c,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:o}=this.parent.viewport;return $a.process(e,n,a,o,ji._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:a,pageHeight:o},rotation:c}=this.parent.viewport;return $a.extractContoursFromText(e,n,a,o,c,ji._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:o}=this.parent.viewport;return $a.processDrawnLines({lines:e,pageWidth:n,pageHeight:a,rotation:o,innerMargin:ji._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=ji.getDefaultDrawingOptions():(this._drawingOptions=ji._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:a,rect:o}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":c}}=this,u={annotationType:qt.SIGNATURE,isSignature:!0,areContours:f(this,il),color:[0,0,0],thickness:f(this,il)?0:c,pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.paths={lines:n,points:a},u.uuid=f(this,sl),u.isCopy=!0):u.lines=n,f(this,Wi)&&(u.accessibilityData={type:"Figure",alt:f(this,Wi)}),u}static deserializeDraw(e,n,a,o,c,u){return u.areContours?UA.deserialize(e,n,a,o,c,u):wm.deserialize(e,n,a,o,c,u)}static async deserialize(e,n,a){var c;const o=await super.deserialize(e,n,a);return T(o,il,e.areContours),T(o,Wi,((c=e.accessibilityData)==null?void 0:c.alt)||""),T(o,sl,e.uuid),o}};il=new WeakMap,Wi=new WeakMap,rl=new WeakMap,sl=new WeakMap,bt(ji,"_type","signature"),bt(ji,"_editorType",qt.SIGNATURE),bt(ji,"_defaultDrawingOptions",null);let YA=ji;var Fe,Dn,al,Ba,ol,_h,za,eu,Ps,Ki,Ch,de,wp,Sp,U0,$0,q0,QA,G0,Jk;class XA extends ke{constructor(e){super({...e,name:"stampEditor"});k(this,de);k(this,Fe,null);k(this,Dn,null);k(this,al,null);k(this,Ba,null);k(this,ol,null);k(this,_h,"");k(this,za,null);k(this,eu,!1);k(this,Ps,null);k(this,Ki,!1);k(this,Ch,!1);T(this,Ba,e.bitmapUrl),T(this,ol,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){ke.initialize(e,n)}static isHandlingMimeForPasting(e){return HS.includes(e)}static paste(e,n){n.pasteEditor(qt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:u}=e||this.copyCanvas(null,null,!0).imageData,d=await a.guess({name:"altText",request:{data:o,width:c,height:u,channels:o.length/(c*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;f(this,Dn)&&(T(this,Fe,null),this._uiManager.imageManager.deleteId(f(this,Dn)),(e=f(this,za))==null||e.remove(),T(this,za,null),f(this,Ps)&&(clearTimeout(f(this,Ps)),T(this,Ps,null))),super.remove()}rebuild(){if(!this.parent){f(this,Dn)&&L(this,de,U0).call(this);return}super.rebuild(),this.div!==null&&(f(this,Dn)&&f(this,za)===null&&L(this,de,U0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(f(this,al)||f(this,Fe)||f(this,Ba)||f(this,ol)||f(this,Dn)||f(this,eu))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),f(this,eu)||(f(this,Fe)?L(this,de,$0).call(this):L(this,de,U0).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:a,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(T(this,Dn,a),o&&T(this,Fe,o),T(this,eu,!1),L(this,de,$0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;f(this,Ps)!==null&&clearTimeout(f(this,Ps)),T(this,Ps,setTimeout(()=>{T(this,Ps,null),L(this,de,QA).call(this)},200))}copyCanvas(e,n,a=!1){var v;e||(e=224);const{width:o,height:c}=f(this,Fe),u=new Ya;let d=f(this,Fe),p=o,g=c,y=null;if(n){if(o>n||c>n){const $=Math.min(n/o,n/c);p=Math.floor(o*$),g=Math.floor(c*$)}y=document.createElement("canvas");const S=y.width=Math.ceil(p*u.sx),A=y.height=Math.ceil(g*u.sy);f(this,Ki)||(d=L(this,de,q0).call(this,S,A));const E=y.getContext("2d");E.filter=this._uiManager.hcmFilter;let x="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":(v=window.matchMedia)!=null&&v.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",M="#42414d");const C=15,_=C*u.sx,D=C*u.sy,R=new OffscreenCanvas(_*2,D*2),N=R.getContext("2d");N.fillStyle=x,N.fillRect(0,0,_*2,D*2),N.fillStyle=M,N.fillRect(0,0,_,D),N.fillRect(_,D,_,D),E.fillStyle=E.createPattern(R,"repeat"),E.fillRect(0,0,S,A),E.drawImage(d,0,0,d.width,d.height,0,0,S,A)}let b=null;if(a){let S,A;if(u.symmetric&&d.width<e&&d.height<e)S=d.width,A=d.height;else if(d=f(this,Fe),o>e||c>e){const M=Math.min(e/o,e/c);S=Math.floor(o*M),A=Math.floor(c*M),f(this,Ki)||(d=L(this,de,q0).call(this,S,A))}const x=new OffscreenCanvas(S,A).getContext("2d",{willReadFrequently:!0});x.drawImage(d,0,0,d.width,d.height,0,0,S,A),b={width:S,height:A,data:x.getImageData(0,0,S,A).data}}return{canvas:y,width:p,height:g,imageData:b}}static async deserialize(e,n,a){var E;let o=null,c=!1;if(e instanceof pk){const{data:{rect:x,rotation:M,id:C,structParent:_,popupRef:D},container:R,parent:{page:{pageNumber:N}},canvas:$}=e;let j,H;$?(delete e.canvas,{id:j,bitmap:H}=a.imageManager.getFromCanvas(R.id,$),$.remove()):(c=!0,e._hasNoCanvas=!0);const F=((E=await n._structTree.getAriaAttributes(`${qx}${C}`))==null?void 0:E.get("aria-label"))||"";o=e={annotationType:qt.STAMP,bitmapId:j,bitmap:H,pageIndex:N-1,rect:x.slice(0),rotation:M,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:_,popupRef:D}}const u=await super.deserialize(e,n,a),{rect:d,bitmap:p,bitmapUrl:g,bitmapId:y,isSvg:b,accessibilityData:v}=e;c?(a.addMissingCanvas(e.id,u),T(u,eu,!0)):y&&a.imageManager.isValidId(y)?(T(u,Dn,y),p&&T(u,Fe,p)):T(u,Ba,g),T(u,Ki,b);const[S,A]=u.pageDimensions;return u.width=(d[2]-d[0])/S,u.height=(d[3]-d[1])/A,u.annotationElementId=e.id||null,v&&(u.altTextData=v),u._initialData=o,T(u,Ch,!!o),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:qt.STAMP,bitmapId:f(this,Dn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,Ki),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=L(this,de,G0).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(a.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const d=L(this,de,Jk).call(this,a);if(d.isSame)return null;d.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,n===null)return a;n.stamps||(n.stamps=new Map);const u=f(this,Ki)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(f(this,Dn)))n.stamps.set(f(this,Dn),{area:u,serialized:a}),a.bitmap=L(this,de,G0).call(this,!1);else if(f(this,Ki)){const d=n.stamps.get(f(this,Dn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=L(this,de,G0).call(this,!1))}return a}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Fe=new WeakMap,Dn=new WeakMap,al=new WeakMap,Ba=new WeakMap,ol=new WeakMap,_h=new WeakMap,za=new WeakMap,eu=new WeakMap,Ps=new WeakMap,Ki=new WeakMap,Ch=new WeakMap,de=new WeakSet,wp=function(e,n=!1){if(!e){this.remove();return}T(this,Fe,e.bitmap),n||(T(this,Dn,e.id),T(this,Ki,e.isSvg)),e.file&&T(this,_h,e.file.name),L(this,de,$0).call(this)},Sp=function(){if(T(this,al,null),this._uiManager.enableWaiting(!1),!!f(this,za)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Fe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Fe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},U0=function(){if(f(this,Dn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,Dn)).then(a=>L(this,de,wp).call(this,a,!0)).finally(()=>L(this,de,Sp).call(this));return}if(f(this,Ba)){const a=f(this,Ba);T(this,Ba,null),this._uiManager.enableWaiting(!0),T(this,al,this._uiManager.imageManager.getFromUrl(a).then(o=>L(this,de,wp).call(this,o)).finally(()=>L(this,de,Sp).call(this)));return}if(f(this,ol)){const a=f(this,ol);T(this,ol,null),this._uiManager.enableWaiting(!0),T(this,al,this._uiManager.imageManager.getFromFile(a).then(o=>L(this,de,wp).call(this,o)).finally(()=>L(this,de,Sp).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=HS.join(",");const n=this._uiManager._signal;T(this,al,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),L(this,de,wp).call(this,o)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>L(this,de,Sp).call(this))),e.click()},$0=function(){var y;const{div:e}=this;let{width:n,height:a}=f(this,Fe);const[o,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,a=this.height*c;else if(n>u*o||a>u*c){const b=Math.min(u*o/n,u*c/a);n*=b,a*=b}const[d,p]=this.parentDimensions;this.setDims(n*d/o,a*p/c),this._uiManager.enableWaiting(!1);const g=T(this,za,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/o,this.height=a/c,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),L(this,de,QA).call(this),f(this,Ch)||(this.parent.addUndoableEditor(this),T(this,Ch,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,_h)&&this.div.setAttribute("aria-description",f(this,_h))},q0=function(e,n){const{width:a,height:o}=f(this,Fe);let c=a,u=o,d=f(this,Fe);for(;c>2*e||u>2*n;){const p=c,g=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(c,u);y.getContext("2d").drawImage(d,0,0,p,g,0,0,c,u),d=y.transferToImageBitmap()}return d},QA=function(){const[e,n]=this.parentDimensions,{width:a,height:o}=this,c=new Ya,u=Math.ceil(a*e*c.sx),d=Math.ceil(o*n*c.sy),p=f(this,za);if(!p||p.width===u&&p.height===d)return;p.width=u,p.height=d;const g=f(this,Ki)?f(this,Fe):L(this,de,q0).call(this,u,d),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,u,d)},G0=function(e){if(e){if(f(this,Ki)){const o=this._uiManager.imageManager.getSvgUrl(f(this,Dn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=f(this,Fe),n.getContext("2d").drawImage(f(this,Fe),0,0),n.toDataURL()}if(f(this,Ki)){const[n,a]=this.pageDimensions,o=Math.round(this.width*n*yl.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*yl.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(f(this,Fe),0,0,f(this,Fe).width,f(this,Fe).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(f(this,Fe))},Jk=function(e){var u;const{pageIndex:n,accessibilityData:{altText:a}}=this._initialData,o=e.pageIndex===n,c=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===a;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&c,isSameAltText:c}},bt(XA,"_type","stamp"),bt(XA,"_editorType",qt.STAMP);var nu,Th,Ns,ll,Fa,Cr,cl,Rh,iu,Kr,Ha,ei,Ua,Mt,ul,He,t3,vs,KA,ZA,V0;const zr=class zr{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:p,l10n:g}){k(this,He);k(this,nu);k(this,Th,!1);k(this,Ns,null);k(this,ll,null);k(this,Fa,null);k(this,Cr,new Map);k(this,cl,!1);k(this,Rh,!1);k(this,iu,!1);k(this,Kr,null);k(this,Ha,null);k(this,ei,null);k(this,Ua,null);k(this,Mt);const y=[...f(zr,ul).values()];if(!zr._initialized){zr._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),T(this,Mt,t),this.pageIndex=e,this.div=n,T(this,nu,o),T(this,Ns,c),this.viewport=p,T(this,ei,d),this.drawLayer=u,this._structTree=a,f(this,Mt).addLayer(this)}get isEmpty(){return f(this,Cr).size===0}get isInvisible(){return this.isEmpty&&f(this,Mt).getMode()===qt.NONE}updateToolbar(t){f(this,Mt).updateToolbar(t)}updateMode(t=f(this,Mt).getMode()){switch(L(this,He,V0).call(this),t){case qt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case qt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case qt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of f(zr,ul).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=f(this,ei))==null?void 0:e.div)}setEditingState(t){f(this,Mt).setEditingState(t)}addCommands(t){f(this,Mt).addCommands(t)}cleanUndoStack(t){f(this,Mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=f(this,Ns))==null||e.div.classList.toggle("disabled",!t)}async enable(){T(this,iu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of f(this,Cr).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(f(this,Mt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!f(this,Ns)){T(this,iu,!1);return}const e=f(this,Ns).getEditableAnnotations();for(const n of e){if(n.hide(),f(this,Mt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=await this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}T(this,iu,!1)}disable(){var a;T(this,Rh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of f(this,Cr).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(a=this.getEditableAnnotation(o.annotationElementId))==null||a.show(),o.remove()}if(f(this,Ns)){const o=f(this,Ns).getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(f(this,Mt).isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=t.get(u),d&&(f(this,Mt).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}L(this,He,V0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of f(zr,ul).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,Rh,!1)}getEditableAnnotation(t){var e;return((e=f(this,Ns))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){f(this,Mt).getActive()!==t&&f(this,Mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=f(this,ei))!=null&&t.div&&!f(this,Ua)){T(this,Ua,new AbortController);const e=f(this,Mt).combinedSignal(f(this,Ua));f(this,ei).div.addEventListener("pointerdown",L(this,He,t3).bind(this),{signal:e}),f(this,ei).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=f(this,ei))!=null&&t.div&&f(this,Ua)&&(f(this,Ua).abort(),T(this,Ua,null),f(this,ei).div.classList.remove("highlighting"))}enableClick(){if(f(this,ll))return;T(this,ll,new AbortController);const t=f(this,Mt).combinedSignal(f(this,ll));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=f(this,ll))==null||t.abort(),T(this,ll,null)}attach(t){f(this,Cr).set(t.id,t);const{annotationElementId:e}=t;e&&f(this,Mt).isDeletedAnnotationElement(e)&&f(this,Mt).removeDeletedAnnotationElement(t)}detach(t){var e;f(this,Cr).delete(t.id),(e=f(this,nu))==null||e.removePointerInTextLayer(t.contentDiv),!f(this,Rh)&&t.annotationElementId&&f(this,Mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),f(this,Mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(f(this,Mt).addDeletedAnnotationElement(t.annotationElementId),ke.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),f(this,Mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!f(this,iu)),f(this,Mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!f(this,Fa)&&(t._focusEventsAllowed=!1,T(this,Fa,setTimeout(()=>{T(this,Fa,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:f(this,Mt)._signal}),e.focus())},0))),t._structTreeParentId=(n=f(this,nu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return f(this,Mt).getId()}combinedSignal(t){return f(this,Mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=f(this,He,vs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){f(this,Mt).updateToolbar(t),await f(this,Mt).updateMode(t);const{offsetX:n,offsetY:a}=L(this,He,ZA).call(this),o=this.getNextId(),c=L(this,He,KA).call(this,{parent:this,id:o,x:n,y:a,uiManager:f(this,Mt),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=f(zr,ul).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,f(this,Mt)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=L(this,He,KA).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:f(this,Mt),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(t={}){this.createAndAddNewEditor(L(this,He,ZA).call(this),!0,t)}setSelected(t){f(this,Mt).setSelected(t)}toggleSelected(t){f(this,Mt).toggleSelected(t)}unselect(t){f(this,Mt).unselect(t)}pointerup(t){var a;const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!f(this,cl)||(T(this,cl,!1),(a=f(this,He,vs))!=null&&a.isDrawer&&f(this,He,vs).supportMultipleDrawings))return;if(!f(this,Th)){T(this,Th,!0);return}const n=f(this,Mt).getMode();if(n===qt.STAMP||n===qt.SIGNATURE){f(this,Mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(f(this,Mt).getMode()===qt.HIGHLIGHT&&this.enableTextSelection(),f(this,cl)){T(this,cl,!1);return}const{isMac:e}=Vn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(T(this,cl,!0),(a=f(this,He,vs))!=null&&a.isDrawer){this.startDrawingSession(t);return}const n=f(this,Mt).getActive();T(this,Th,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),f(this,Kr)){f(this,He,vs).startDrawing(this,f(this,Mt),!1,t);return}f(this,Mt).setCurrentDrawingSession(this),T(this,Kr,new AbortController);const e=f(this,Mt).combinedSignal(f(this,Kr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(T(this,Ha,null),this.commitOrRemove())},{signal:e}),f(this,He,vs).startDrawing(this,f(this,Mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&T(this,Ha,e);return}f(this,Ha)&&setTimeout(()=>{var e;(e=f(this,Ha))==null||e.focus(),T(this,Ha,null)},0)}endDrawingSession(t=!1){return f(this,Kr)?(f(this,Mt).setCurrentDrawingSession(null),f(this,Kr).abort(),T(this,Kr,null),T(this,Ha,null),f(this,He,vs).endDrawing(t)):null}findNewParent(t,e,n){const a=f(this,Mt).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return f(this,Kr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){f(this,Kr)&&f(this,He,vs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=f(this,Mt).getActive())==null?void 0:t.parent)===this&&(f(this,Mt).commitOrRemove(),f(this,Mt).setActiveEditor(null)),f(this,Fa)&&(clearTimeout(f(this,Fa)),T(this,Fa,null));for(const n of f(this,Cr).values())(e=f(this,nu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,f(this,Cr).clear(),f(this,Mt).removeLayer(this)}render({viewport:t}){this.viewport=t,du(this.div,t);for(const e of f(this,Mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){f(this,Mt).commitOrRemove(),L(this,He,V0).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,du(this.div,{rotation:n}),e!==n)for(const a of f(this,Cr).values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return f(this,Mt).viewParameters.realScale}};nu=new WeakMap,Th=new WeakMap,Ns=new WeakMap,ll=new WeakMap,Fa=new WeakMap,Cr=new WeakMap,cl=new WeakMap,Rh=new WeakMap,iu=new WeakMap,Kr=new WeakMap,Ha=new WeakMap,ei=new WeakMap,Ua=new WeakMap,Mt=new WeakMap,ul=new WeakMap,He=new WeakSet,t3=function(t){f(this,Mt).unselectAll();const{target:e}=t;if(e===f(this,ei).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&f(this,ei).div.contains(e)){const{isMac:n}=Vn.platform;if(t.button!==0||t.ctrlKey&&n)return;f(this,Mt).showAllEditors("highlight",!0,!0),f(this,ei).div.classList.add("free"),this.toggleDrawing(),Sb.startHighlighting(this,f(this,Mt).direction==="ltr",{target:f(this,ei).div,x:t.x,y:t.y}),f(this,ei).div.addEventListener("pointerup",()=>{f(this,ei).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,Mt)._signal}),t.preventDefault()}},vs=function(){return f(zr,ul).get(f(this,Mt).getMode())},KA=function(t){const e=f(this,He,vs);return e?new e.prototype.constructor(t):null},ZA=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),p=(o+u)/2-t,g=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}},V0=function(){for(const t of f(this,Cr).values())t.isEmpty()&&t.remove()},bt(zr,"_initialized",!1),k(zr,ul,new Map([RA,HA,XA,Sb,YA].map(t=>[t._editorType,t])));let WA=zr;var Zr,di,ru,am,Ub,e3,zs,tx,n3,ex;const yn=class yn{constructor({pageIndex:t}){k(this,zs);k(this,Zr,null);k(this,di,new Map);k(this,ru,new Map);this.pageIndex=t}setParent(t){if(!f(this,Zr)){T(this,Zr,t);return}if(f(this,Zr)!==t){if(f(this,di).size>0)for(const e of f(this,di).values())e.remove(),t.append(e);T(this,Zr,t)}}static get _svgFactory(){return se(this,"_svgFactory",new bb)}draw(t,e=!1,n=!1){const a=ai(yn,am)._++,o=L(this,zs,tx).call(this),c=yn._svgFactory.createElement("defs");o.append(c);const u=yn._svgFactory.createElement("path");c.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&f(this,ru).set(a,u);const p=n?L(this,zs,n3).call(this,c,d):null,g=yn._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),f(this,di).set(a,o),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=ai(yn,am)._++,a=L(this,zs,tx).call(this),o=yn._svgFactory.createElement("defs");a.append(o);const c=yn._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${n}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=yn._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=yn._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=yn._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const p=yn._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${u}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return a.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),f(this,di).set(n,a),n}finalizeDraw(t,e){f(this,ru).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:a,rootClass:o,path:c}=e,u=typeof t=="number"?f(this,di).get(t):t;if(u){if(n&&L(this,zs,ex).call(this,u,n),a&&L(d=yn,Ub,e3).call(d,u,a),o){const{classList:p}=u;for(const[g,y]of Object.entries(o))p.toggle(g,y)}if(c){const g=u.firstChild.firstChild;L(this,zs,ex).call(this,g,c)}}}updateParent(t,e){if(e===this)return;const n=f(this,di).get(t);n&&(f(e,Zr).append(n),f(this,di).delete(t),f(e,di).set(t,n))}remove(t){f(this,ru).delete(t),f(this,Zr)!==null&&(f(this,di).get(t).remove(),f(this,di).delete(t))}destroy(){T(this,Zr,null);for(const t of f(this,di).values())t.remove();f(this,di).clear(),f(this,ru).clear()}};Zr=new WeakMap,di=new WeakMap,ru=new WeakMap,am=new WeakMap,Ub=new WeakSet,e3=function(t,[e,n,a,o]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`},zs=new WeakSet,tx=function(){const t=yn._svgFactory.create(1,1,!0);return f(this,Zr).append(t),t.setAttribute("aria-hidden",!0),t},n3=function(t,e){const n=yn._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=yn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a},ex=function(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)},k(yn,Ub),k(yn,am,0);let JA=yn;globalThis.pdfjsTestingUtils={HighlightOutliner:DA};globalThis.pdfjsLib={AbortException:ml,AnnotationEditorLayer:WA,AnnotationEditorParamsType:oe,AnnotationEditorType:qt,AnnotationEditorUIManager:hu,AnnotationLayer:_A,AnnotationMode:Ro,AnnotationType:ln,build:hz,ColorPicker:wb,createValidAbsoluteUrl:KD,DOMSVGFactory:bb,DrawLayer:JA,FeatureTest:Vn,fetchData:gm,getDocument:fv,getFilenameFromUrl:sB,getPdfFilenameFromUrl:aB,getUuid:tO,getXfaPageViewport:oB,GlobalWorkerOptions:Jr,ImageKind:m0,InvalidPDFException:zS,isDataScheme:dv,isPdfFile:Vx,isValidExplicitDest:sz,MathClamp:fi,noContextMenu:ss,normalizeUnicode:nB,OPS:pb,OutputScale:Ya,PasswordResponses:Y8,PDFDataRangeTransport:tk,PDFDateString:Yx,PDFWorker:Sd,PermissionFlag:V8,PixelsPerInch:yl,RenderingCancelledException:Gx,ResponseException:gb,setLayerDimensions:du,shadow:se,SignatureExtractor:$a,stopEvent:cn,SupportedImageMimeTypes:HS,TextLayer:Ip,TouchManager:yb,updateUrlHash:ZD,Util:Rt,VerbosityLevel:lv,version:dz,XfaLayer:nk};function Pz({pdfRef:i,onLoaded:t}){const e=Vt(o=>o.book.activeBookId),{data:n,isSuccess:a}=o4(e,{skip:!e,refetchOnMountOrArgChange:!1});U.useEffect(()=>{console.log("[STATE CHANGE] bookId:",e)},[e]),U.useEffect(()=>{console.log("[STATE CHANGE] fileUrl:",n)},[n]),U.useEffect(()=>{console.log("[STATE CHANGE] isSuccess:",a)},[a]),U.useEffect(()=>{console.log("[useLoadPDFDocument] pdfRef:",i)},[i]),U.useEffect(()=>{if(!e){console.log("[useLoadPDFDocument] Exit early – brak bookId");return}if(!n){console.log("[useLoadPDFDocument] ⏳ Czekam na fileUrl...");return}console.log("[useLoadPDFDocument] fileUrl ready:",n);let o=!1;return(async()=>{try{console.log("[useLoadPDFDocument] start getDocument");const d=await fv(n).promise;if(o){console.log("[useLoadPDFDocument]  Anulowano ładowanie PDF");return}console.log("[useLoadPDFDocument]  PDF loaded ✓ numPages:",d.numPages),i.current=d,typeof t=="function"&&(console.log("[useLoadPDFDocument]  onLoaded() fired"),t())}catch(u){console.error("[useLoadPDFDocument]  Błąd podczas ładowania PDF:",u)}})(),()=>{o=!0,console.log("[useLoadPDFDocument] cleanup/unmount – cancelled = true")}},[n,e,i,t])}function Nz(i,t,e="single"){console.log("[usePDFPagination] bookId",i);const n=or(),a=t<=1?"single":e,o=a==="double",c=o?2:1,u=Vt(v=>Cx(v,i)),d=o&&u%2===0?u-1:u,p=d<=1,g=d+c-1>=t,y=U.useCallback(()=>{if(p)return;const v=Math.max(1,d-c);n(IT({id:i,stats:{currentPage:v}}))},[n,i,d,c,p]),b=U.useCallback(()=>{if(g)return;const v=Math.min(t,d+c);n(IT({id:i,stats:{currentPage:v}}))},[n,i,d,c,t,g]);return{currentPage:d,totalPages:t,isPrevDisabled:p,isNextDisabled:g,handlePrev:y,handleNext:b,viewMode:a}}function Iz(){console.log("[usePDFZoom] usePDFZoom() called");const i=or(),t=U.useMemo(()=>[.5,.75,1,1.25,1.5],[]),e=Vt(p=>p.reader.currentScale)??1,n=t.indexOf(e),a=n<=0,o=n>=t.length-1,c=U.useCallback(()=>{o||i(Hw(t[n+1]))},[o,n,i,t]),u=U.useCallback(()=>{a||i(Hw(t[n-1]))},[a,n,i,t]),d=U.useCallback(()=>{e!==1&&i(Hw(1))},[e,i]);return{scaleLevels:t,currentScale:e,isMinZoom:a,isMaxZoom:o,handleZoomIn:c,handleZoomOut:u,handleReset:d}}async function jz({pdf:i,scale:t,from:e,to:n,renderedPages:a}){if(console.log("[renderPages] start →",{from:e,to:n,scale:t}),!i)return console.warn("[renderPages] No PDF document → aborting"),{};const o=a||{},c={};for(let u=e;u<=n;u++){if(o[u]){console.log(`[renderPages] Page ${u} already rendered → skipping`);continue}try{console.log(`[renderPages] Rendering page ${u}`);const d=await i.getPage(u),p=d.getViewport({scale:t}),g=document.createElement("canvas"),y=g.getContext("2d");g.width=p.width,g.height=p.height,await d.render({canvasContext:y,viewport:p}).promise,c[u]={id:`p${u}-s${t}`,dataUrl:g.toDataURL("image/png"),width:p.width,height:p.height,pageNumber:u},g.remove()}catch(d){console.error(`[renderPages] Error rendering page ${u}:`,d)}}return console.log("[renderPages] done → total new pages:",Object.keys(c).length),c}async function Bz({pdf:i,scale:t,currentPage:e,renderedPages:n,renderedRanges:a,bookId:o,dispatch:c,loadingRef:u}){if(console.log("[preloadByScale] start",{currentPage:e,scale:t,bookId:o}),!i||!o||u.current){console.warn("[preloadByScale] Guard failed → skipping preload",{pdf:!!i,bookId:o,loading:u.current});return}try{const d=i.numPages,g=Math.floor(15/2),y=Math.max(1,e-g),b=Math.min(d,e+g);if(y>b){console.warn("[preloadByScale] Invalid range → start > end → skipping render",{start:y,end:b});return}if(console.log("[preloadByScale] Calculated range:",{start:y,end:b}),console.log("[preloadByScale] Existing ranges:",a),(a||[]).some(([A,E])=>y>=A&&b<=E)){console.log("[preloadByScale] Range already cached → skipping render");return}u.current=!0;const S=await jz({pdf:i,scale:t,from:y,to:b,renderedPages:n});console.log("[preloadByScale] Rendered pages:",Object.keys(S)),Object.keys(S).length&&(c(x4({bookId:o,scale:String(t),pages:S})),console.log("[preloadByScale] Dispatched renderedPages ✓")),c(E4({bookId:o,scale:String(t),range:[y,b]})),console.log("[preloadByScale] Dispatched renderedRanges ✓")}catch(d){console.error("[preloadByScale] Error:",d)}finally{u.current=!1,console.log("[preloadByScale] Done ✓ loadingRef reset")}}const YR=4;function zz(i,t,e){if(console.log("[shouldPreload] currentPage",i),!Array.isArray(t)||typeof i!="number")return!1;if(t.length===0)return!0;const n=[...t].sort((d,p)=>d[0]-p[0]),[a]=n[0],[,o]=n[n.length-1],c=i>=o-YR&&o<e,u=i<=a+YR&&a>1;return c||u}const Fz={},Hz=[],Uz=()=>{var x;const i=or(),t=U.useRef(null),e=U.useRef(!1),[n,a]=U.useState(!1),o=Vt(Ex),c=Vt(M=>Cx(M,o)),u=Vt(O4)??1,d=Vt(GM),p=Vt(xx(o)),g=((x=p==null?void 0:p.meta)==null?void 0:x.totalPages)??0,y=Vt(M=>{var C,_;return((_=(C=M.pdfCache[o])==null?void 0:C[String(u)])==null?void 0:_.pages)??Fz}),b=Vt(M=>{var C,_;return((_=(C=M.pdfCache[o])==null?void 0:C[String(u)])==null?void 0:_.ranges)??Hz}),v=Math.min(c,g);U.useEffect(()=>(console.log("[usePreloadPDFPages] mounted"),()=>{console.log("[usePreloadPDFPages] cleanup on unmount"),t.current=null,e.current=!1}),[]);const S=U.useCallback(()=>(console.log("[usePreloadPDFPages] preload() called",{bookId:o,currentPage:v,scale:u,ranges:b}),!t.current||e.current||!o||!Number.isInteger(v)?(console.log("[usePreloadPDFPages] preload() → guard failed",{pdf:!!t.current,loading:e.current,bookId:o,currentPage:v}),Promise.resolve()):Bz({pdf:t.current,scale:u,currentPage:v,renderedPages:y,renderedRanges:b,bookId:o,dispatch:i,loadingRef:e})),[o,v,u,y,b,i]);U.useEffect(()=>{console.log("[STATE CHANGE] currentPage:",c)},[c]),U.useEffect(()=>{console.log("[STATE CHANGE] totalPages:",g)},[g]),U.useEffect(()=>{console.log("[STATE CHANGE] scale:",u)},[u]),U.useEffect(()=>{console.log("[STATE CHANGE] pdfReady:",n)},[n]),U.useEffect(()=>{console.log("[STATE CHANGE] renderedRanges:",b)},[b]),U.useEffect(()=>{console.log("[STATE CHANGE] renderedPages:",y)},[y]),U.useEffect(()=>{console.log("[STATE CHANGE] bookId:",o)},[o]),U.useEffect(()=>{console.log("[STATE CHANGE] viewMode:",d)},[d]),U.useEffect(()=>{const M=n&&g>0&&zz(v,b,g);console.log("[usePreloadPDFPages] useEffect fired",{pdfReady:n,currentPage:v,scale:u,totalPages:g,renderedRanges:b,should:M}),M&&S()},[n,v,b,S,g,o,u]);const A=U.useMemo(()=>{if(d==="double"){const M=v+1;return v>=g?[v]:[v,Math.min(M,g)]}return[v]},[v,g,d]),E=U.useMemo(()=>{const M=Array.from(new Set(A)).map(C=>({pageNumber:C,...y[C]})).filter(C=>C.dataUrl);return console.log("[usePreloadPDFPages] visiblePages:",M.map(C=>C.pageNumber)),M},[A,y]);return{pdfRef:t,preload:S,visiblePages:E,setPdfReady:a}},$z=st.div`
  width: ${({$isSidebarOpen:i})=>i?"calc(100vw - 20rem)":"100vw"};
  height: calc(100vh - 17vh);
  overflow: auto;
  padding: 2rem;
  position: relative;
`,qz=st.div`
  display: flex;
  gap: 0.3rem;
  margin: 0 auto;
`,Gz=st.img`
  object-fit: contain;
  margin: 1rem;
`,Vz=()=>{console.log("[RenderedPDFViewer] RenderedPDFViewer() called");const i=Vt(c=>c.ui.sidebarOpen),{pdfRef:t,preload:e,visiblePages:n,setPdfReady:a}=Uz(),o=U.useCallback(()=>a(!0),[a]);return Pz({pdfRef:t,preload:e,onLoaded:o}),console.log("[RenderedPDFViewer] visiblePages:",n.map(c=>c.pageNumber)),n.length===0?P.jsx("p",{children:"Loading…"}):P.jsx($z,{$isSidebarOpen:i,children:P.jsx(qz,{children:n.map(({id:c,dataUrl:u,pageNumber:d})=>P.jsx(Gz,{src:u,alt:`Page ${d}`},c))})})},Yz=st.div`
  display: flex;
  gap: 1rem;
`,XR=st.button.withConfig({shouldForwardProp:i=>i!=="$active"&&i!=="$disabled"})`
  background: none;
  border: none;
  font-size: 2rem;
  cursor: ${({$disabled:i})=>i?"not-allowed":"pointer"};
  color: ${({$active:i,$disabled:t})=>t?"var(--text-disabled)":i?"var(--color-accent)":"var(--text-muted)"};
  transition: color 0.3s;

  &:hover {
    color: ${({$disabled:i})=>i?"var(--text-disabled)":"var(--color-accent)"};
  }
`,Xz=()=>{var u;console.log("PageViewModeToggle");const i=or(),t=Vt(d=>d.reader.pageViewMode),e=Vt(Ex),n=Vt(xx(e)),o=(((u=n==null?void 0:n.meta)==null?void 0:u.totalPages)??0)<=1,c=d=>{d==="double"&&o||i(zM(d))};return P.jsxs(Yz,{children:[P.jsx(XR,{$active:t==="single",onClick:()=>c("single"),title:"Single Page View",children:P.jsx(YD,{})}),P.jsx(XR,{$active:t==="double",$disabled:o,onClick:()=>c("double"),title:"Double Page View",disabled:o,children:P.jsx(XD,{})})]})},Qz=st.div`
  display: flex;
  align-items: center;
  gap: 1rem;

  button {
    background: none;
    border: none;
    padding: 0.25rem;
    font-size: 1.5rem;
    color: white;
    cursor: pointer;

    &:disabled {
      opacity: 0.4;
      cursor: default;
    }
  }
`,Wz=st.span`
  font-size: 0.9rem;
  color: #fff;
`,Kz=()=>{var g;console.log("PDFPageControls");const i=Hs(),t=Vt(Ex),e=Vt(GM),n=Vt(xx(t)),a=((g=n==null?void 0:n.meta)==null?void 0:g.totalPages)??0,{currentPage:o,isPrevDisabled:c,isNextDisabled:u,handlePrev:d,handleNext:p}=Nz(t,a,e);return!i.pathname.startsWith("/read")||!t||a<=0?null:P.jsxs(Qz,{children:[P.jsx("button",{onClick:d,disabled:c,children:P.jsx(d8,{})}),P.jsxs(Wz,{children:[o," of ",a]}),P.jsx("button",{onClick:p,disabled:u,children:P.jsx(h8,{})})]})},Zz=st.div`
  display: flex;  
  align-items: center;
  gap: 0.6rem;
`,Jz=st.span`
  font-size: 0.85rem;
  color: #fff;
`,tF=()=>{console.log("PDFZoomControls");const{handleZoomIn:i,handleZoomOut:t,handleReset:e,isMinZoom:n,isMaxZoom:a,currentScale:o}=Iz();return P.jsxs(Zz,{children:[P.jsx("button",{onClick:t,disabled:n,title:"Zoom out",children:P.jsx(m8,{})}),P.jsxs(Jz,{children:[Math.round(o*100),"%"]}),P.jsx("button",{onClick:i,disabled:a,title:"Zoom in",children:P.jsx(c8,{})}),P.jsx("button",{onClick:e,title:"Reset zoom",children:P.jsx(g8,{})})]})},eF=st.nav`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 7vh;
  width: 100%;
  padding: 2rem 3rem;
  background: var(--gradient-metal-blue-light);
  border-bottom: 1rem solid var(--color-metal-100);
  overflow: hidden;
  box-shadow: 0 0 1rem rgba(0, 0, 0, 0.384);
`,nF=st.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin: 0 auto;
`,iF=st.div`
  display: flex;
  align-items: center;
  gap: 2rem;
`,KU=()=>{console.log("ReaderToolbar");const i=Hh();return P.jsxs(eF,{children:[P.jsx(iF,{children:P.jsx(u8,{size:32,color:"white",style:{cursor:"pointer"},onClick:()=>i("/library")})}),P.jsxs(nF,{children:[P.jsx(Xz,{}),P.jsx(tF,{}),P.jsx(Kz,{})]})]})},rF=st.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%; 
  background: var(--bg-default);
`,aS=()=>P.jsx(rF,{children:P.jsx(Vz,{})}),sF=(i,t)=>{const e=[...i],n=u=>new Date(u||0),a=u=>(u||"").toLowerCase(),o=u=>Number(u)||0,c={"title-asc":(u,d)=>a(u.meta.title).localeCompare(a(d.meta.title)),"title-desc":(u,d)=>a(d.meta.title).localeCompare(a(u.meta.title)),"author-asc":(u,d)=>a(u.meta.author).localeCompare(a(d.meta.author)),"author-desc":(u,d)=>a(d.meta.author).localeCompare(a(u.meta.author)),"date-asc":(u,d)=>n(u.meta.addedAt)-n(d.meta.addedAt),"date-desc":(u,d)=>n(d.meta.addedAt)-n(u.meta.addedAt),"updated-asc":(u,d)=>n(u.updatedAt)-n(d.updatedAt),"updated-desc":(u,d)=>n(d.updatedAt)-n(u.updatedAt),"publication-asc":(u,d)=>n(u.meta.publicationDate)-n(d.meta.publicationDate),"publication-desc":(u,d)=>n(d.meta.publicationDate)-n(u.meta.publicationDate),"rating-asc":(u,d)=>o(u.flags.rating)-o(d.flags.rating),"rating-desc":(u,d)=>o(d.flags.rating)-o(u.flags.rating)};return e.sort(c[t]||c["title-asc"])};function aF(i){return rn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(i)}const oF=()=>({validate:U.useCallback(t=>!t||t.type!=="application/pdf"?(alert("Invalid file format. Please upload a PDF file."),!1):!0,[])}),lF=async i=>{var b;const t=await fv(URL.createObjectURL(i)).promise,n=(await t.getMetadata()).info||{},a=n.Title||i.name.replace(/\.pdf$/i,""),o=n.Author||"",c=n.Subject||"",u=n.Keywords?n.Keywords.split(/\s*,\s*/):[],d=((b=n.Language)==null?void 0:b.trim())||"unknown";let p=null;if(n.CreationDate){const v=n.CreationDate.replace(/^D:/,""),S=v.substr(0,4),A=v.substr(4,2)||"01",E=v.substr(6,2)||"01",x=v.substr(8,2)||"00",M=v.substr(10,2)||"00",C=v.substr(12,2)||"00";p=new Date(`${S}-${A}-${E}T${x}:${M}:${C}Z`).toISOString()}let g=null;p&&(g=new Date(p).getUTCFullYear());const y=t.numPages;return{title:a,author:o,subject:c,keywords:u,language:d,publicationDate:p,publishedYear:g,totalPages:y}},cF=async i=>{const e=await(await fv(URL.createObjectURL(i)).promise).getPage(1),n=e.getViewport({scale:1}),a=document.createElement("canvas"),o=a.getContext("2d");return a.width=n.width,a.height=n.height,await e.render({canvasContext:o,viewport:n}).promise,a.toDataURL("image/png")},uF=()=>{const[i]=LM(),{validate:t}=oF(),[e,n]=U.useState(!1);return{handleUpload:async o=>{if(!t(o))return{success:!1};n(!0);try{const{title:c,author:u,subject:d,keywords:p,language:g,publicationDate:y,publishedYear:b,totalPages:v}=await lF(o),S=await cF(o),A=new FormData;return A.append("file",o),A.append("title",c),A.append("author",u),A.append("subject",d),p.length&&A.append("keywords",p.join(",")),g&&A.append("language",g),y&&A.append("publicationDate",y),b&&A.append("publishedYear",b),A.append("totalPages",v),A.append("cover",S),{success:!0,savedBook:await i(A).unwrap()}}finally{n(!1)}},uploading:e}};Jr.workerSrc="/pdf.worker.min.js";const dF=st.div.withConfig({shouldForwardProp:i=>i!=="viewMode"})`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  color: var(--text-primary);

  ${({viewMode:i})=>i==="grid"&&`
    width: var(--tile-size);
    aspect-ratio: 2 / 3;
    background: var(--gradient-main);
    backdrop-filter: blur(6px);
    border-radius: var(--border-radius);
    box-shadow: var(--glass-shadow);
    padding: 0.5rem;
  `}

  ${({viewMode:i})=>i==="list"&&`
    grid-column: 1 / -1;
    width: 100%;
    height: 8vh;
    background: var(--gradient-main);
    backdrop-filter: blur(6px);
    border-radius: var(--border-radius);
    box-shadow: var(--glass-shadow);
  `}

  ${({viewMode:i})=>i==="table"&&`
    width: 100%;
    height: 5vh;
    background: transparent;
    border-bottom: 1px solid var(--border-color);
  `}

  &:hover {
    transform: translateY(-2px);
    background-color: ${({viewMode:i})=>i==="table"?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.1)"};
  }
`,hF=st.input`
  display: none;
`,gv=()=>{const i=U.useRef(null),[t,e]=U.useState(!1),n=Vt(zh),{handleUpload:a}=uF(),o=()=>{var u;(u=i.current)==null||u.click()},c=async u=>{var p;const d=(p=u.target.files)==null?void 0:p[0];d&&(e(!0),await a(d),e(!1),u.target.value=null)};return P.jsxs(P.Fragment,{children:[P.jsx(dF,{viewMode:n,onClick:o,children:t?P.jsx("span",{children:"Uploading..."}):P.jsx(aF,{size:32})}),P.jsx(hF,{type:"file",accept:"application/pdf",ref:i,onChange:c})]})},fF=st.div`
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-radius: var(--border-radius);
  margin-bottom: 1rem;
`,pF=st.div`
  display: flex;
  gap: 0.5rem;
`,oS=st.button.withConfig({shouldForwardProp:i=>i!=="$active"})`
  background: transparent;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--text-primary);
  opacity: ${({$active:i})=>i?1:.4};
  transition: opacity 0.2s;
  &:hover { opacity: 0.8; }
`,gF=st.button.withConfig({shouldForwardProp:i=>i!=="$active"})`
  padding: 0.4rem 1rem;
  border-radius: 6px;
  background: ${({$active:i})=>i?"var(--color-accent)":"transparent"};
  color: white;
  border: 1px solid white;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s;
  &:hover { background: var(--color-accent-hover); }
`,mF=st.button.withConfig({shouldForwardProp:i=>i!=="$visible"})`
  display: ${({$visible:i})=>i?"inline-flex":"none"};
  align-items: center;
  gap: 0.25rem;
  padding: 0.4rem 1rem;
  border-radius: 6px;
  background: var(--color-danger);
  color: white;
  border: none;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s;
  &:hover { background: var(--color-danger-hover); }
`,yF=st.select`
  padding: 0.4rem 1rem;
  border-radius: 6px;
  background: var(--background-color);
  color: var(--text-primary);
  font-size: 1rem;
  border: 1px solid var(--border-color);
  &:focus {
    outline: none;
    border-color: var(--color-accent);
  }
`,bF=()=>{const{pathname:i}=Hs(),t=or(),[e]=Bh(),n=Vt(pu),a=Vt(_x),o=Vt(zh),c=Vt($M),u=U.useMemo(()=>i==="/library"?"My Books":i==="/library/import"?"Import Books":i==="/library/archive"?"Archive":i==="/library/favorites"?"Favorites":"",[i]),d=i.startsWith("/library"),p=()=>{a.forEach(g=>{e({id:g,changes:{flags:{isArchived:!0}}})}),t(jM())};return P.jsxs(fF,{children:[P.jsx("h2",{children:u}),P.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d&&P.jsx(gF,{onClick:()=>t(m4()),$active:n,children:n?"Done":"Manage"}),P.jsxs(mF,{$visible:n&&a.length>0,onClick:p,children:[P.jsx(b8,{})," Delete selected"]}),d&&P.jsxs(P.Fragment,{children:[P.jsxs(yF,{value:c,onChange:g=>t(y4(g.target.value)),children:[P.jsx("option",{value:"title-asc",children:"Title A–Z"}),P.jsx("option",{value:"title-desc",children:"Title Z–A"}),P.jsx("option",{value:"author-asc",children:"Author A–Z"}),P.jsx("option",{value:"author-desc",children:"Author Z–A"}),P.jsx("option",{value:"date-desc",children:"Recently added"}),P.jsx("option",{value:"date-asc",children:"Oldest added"}),P.jsx("option",{value:"updated-desc",children:"Last edited"}),P.jsx("option",{value:"rating-desc",children:"Highest rating"}),P.jsx("option",{value:"rating-asc",children:"Lowest rating"})]}),P.jsxs(pF,{children:[P.jsx(oS,{$active:o==="grid",onClick:()=>t(Fw("grid")),title:"Grid view",children:P.jsx(f8,{})}),P.jsx(oS,{$active:o==="list",onClick:()=>t(Fw("list")),title:"List view",children:P.jsx(p8,{})}),P.jsx(oS,{$active:o==="table",onClick:()=>t(Fw("table")),title:"Table view",children:P.jsx(y8,{})})]})]})]})]})},ZU=wn.memo(bF),vF=st.div`
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  margin-bottom: 1rem;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-radius: var(--border-radius);
`,lS=st.button`
  padding: 0.4rem 1rem;
  border-radius: 6px;
  background-color: var(--color-accent);
  color: white;
  border: none;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s ease;

  &:hover {
    background-color: var(--color-accent-hover);
  }
`,wF=()=>{const i=or(),t=Vt(_x),[e]=Kb(),[n]=Bh(),a=()=>{i(jM()),i(g4(!1))},o=async()=>{for(const d of t)await e(d);a()},c=async()=>{for(const d of t)await n({id:d,changes:{flags:{isArchived:!0}}});a()},u=()=>{a()};return t.length===0?null:P.jsxs(vF,{children:[P.jsxs("div",{children:[t.length," selected books"]}),P.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[P.jsx(lS,{onClick:o,children:"Delete"}),P.jsx(lS,{onClick:c,children:"Archive"}),P.jsx(lS,{onClick:u,children:"Cancel"})]})]})},JU=wn.memo(wF);function SF(i){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5l0-377.4c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8L0 454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5l0-370.3c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11L304 456c0 11.4 11.7 19.3 22.4 15.5z"},child:[]}]})(i)}function AF(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 32l448 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96L0 64C0 46.3 14.3 32 32 32zm0 128l448 0 0 256c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-256zm128 80c0 8.8 7.2 16 16 16l160 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-160 0c-8.8 0-16 7.2-16 16z"},child:[]}]})(i)}function xF(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"},child:[]}]})(i)}function nE(i){const t=Hh(),e=or(),[n]=l4(),[a]=c4(),[o]=u4(),[c]=d4();return{openReader:()=>{e(NM(i._id)),t(`/read/${i._id}`)},toggleArchive:async()=>{var b;const g=(b=i.flags)==null?void 0:b.isArchived,y=g?a:n;try{await y(i._id).unwrap(),e(nb({id:i._id,changes:{flags:{...i.flags,isArchived:!g}}}))}catch(v){console.error("Failed to toggle archive status",v)}},toggleFavorite:async()=>{var b;const g=(b=i.flags)==null?void 0:b.isFavorited,y=g?c:o;try{await y(i._id).unwrap(),e(nb({id:i._id,changes:{flags:{...i.flags,isFavorited:!g}}}))}catch(v){console.error("Failed to toggle favorite status",v)}}}}const EF=st.div`
  display: flex;
  gap: 0.5rem;
  opacity: ${({$disabled:i})=>i?.3:1};
`,cS=st.button`
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  color: ${({$active:i,$alwaysWhite:t})=>t?"white":i?"crimson":"gray"};

  &:disabled {
    cursor: not-allowed;
  }
`;function iE({book:i}){var c,u;const{openReader:t,toggleFavorite:e,toggleArchive:n}=nE(i),a=Vt(pu),o=d=>p=>{p.stopPropagation(),a||d()};return P.jsxs(EF,{disabled:a,children:[P.jsx(cS,{onClick:o(t),title:"Read",$disabled:a,$alwaysWhite:!0,children:P.jsx(SF,{})}),P.jsx(cS,{onClick:o(e),title:"Favorite",$disabled:a,$active:(c=i.flags)==null?void 0:c.isFavorited,children:P.jsx(xF,{})}),P.jsx(cS,{onClick:o(n),title:"Archive",$disabled:a,$active:(u=i.flags)==null?void 0:u.isArchived,children:P.jsx(AF,{})})]})}const _F=st.input`
  width: 1.3rem;
  height: 1.3rem;
  accent-color: #4f46e5;
  cursor: pointer;
  transition: transform 0.2s ease;
   
  &:hover {
    transform: scale(1.1);
  }
//---Version for tile in grid layout
  ${({$isTile:i})=>i&&`
      position: absolute;
      top: 1rem;
      right: 1rem;
    `}  
`,rE=({bookId:i,isTile:t})=>{const e=or(),n=Vt(pu),a=Vt(_x);if(!n)return null;const o=c=>{c.stopPropagation(),e(IM(i))};return P.jsx(_F,{$isTile:t,type:"checkbox",checked:a.includes(i),onClick:o,readOnly:!0})},CF=st.div`
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  margin-bottom: 1.2rem;
`,TF=st.div`
  display: grid;
  grid-template-columns: 5% 55% 20% 15% 5%;
  align-items: center;
  padding: 1.2rem 2rem;
  background: var(--glass-bg);
  border-radius: var(--border-radius);
  box-shadow: var(--glass-shadow);
  backdrop-filter: blur(6px);
  transition: transform 0.2s ease, background 0.2s ease;

  ${({$isManageMode:i})=>!i&&`
    cursor: pointer;
    &:hover {
      transform: translateY(-2px);
      background: var(--gradient-main);
    }
  `}
`,RF=st.img`
  width: 48px;
  height: 64px;
  object-fit: cover;
  border-radius: 0.4rem;
  box-shadow: var(--glass-shadow);
`,MF=st.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
`,DF=st.div`
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 50%;
`,OF=st.div`
  color: var(--text-secondary);
  font-size: 0.75rem;
  margin-top: 0.2rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,kF=st.div`
  color: var(--text-secondary);
  font-size: 0.8rem;
  white-space: nowrap;
`,LF=st.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,PF=st.div`
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1rem;
  color: var(--text-secondary);
  cursor: pointer;

  &:hover {
    color: var(--color-accent);
  }
`,NF=({book:i,onOpenPreview:t,onRemoveClick:e})=>{var u,d,p,g;const n=Vt(pu),a=(u=i==null?void 0:i.meta)==null?void 0:u.createdAt,o=a?new Date(a).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"}):"—",c=y=>{y.stopPropagation(),e()};return P.jsx(CF,{children:P.jsxs(TF,{onClick:n?void 0:t,$isManageMode:n,children:[P.jsx(RF,{src:(d=i.meta)==null?void 0:d.cover,alt:"cover"}),P.jsxs(MF,{children:[P.jsx(DF,{children:(p=i.meta)==null?void 0:p.title}),P.jsx(OF,{children:((g=i.meta)==null?void 0:g.author)||"Unknown"})]}),P.jsx(kF,{children:o}),P.jsx(LF,{children:P.jsx(iE,{book:i})}),n?P.jsx(rE,{bookId:i._id}):P.jsx(PF,{onClick:c,children:P.jsx(ov,{})})]})})},IF=st.tr`
  &:nth-child(even) {
    background: rgba(255, 255, 255, 0.05);
  }
`,hd=st.td`
  padding: 0.75rem;
  border-bottom: 1px solid var(--border-color);
  color: var(--text-primary);
`,jF=st(hd)`
  text-align: right;
  cursor: pointer;
`,BF=({book:i,onOpenPreview:t,onRemoveClick:e})=>{const n=Vt(pu),a=new Date(i.meta.createdAt).toLocaleDateString(),o=c=>c.stopPropagation();return P.jsxs(IF,{onClick:t,children:[P.jsx(hd,{onClick:o,children:n&&P.jsx(rE,{bookId:i._id})}),P.jsx(hd,{children:i.meta.title}),P.jsx(hd,{children:i.meta.author}),P.jsx(hd,{children:a}),P.jsx(hd,{children:P.jsx(iE,{book:i})}),P.jsx(jF,{onClick:c=>{c.stopPropagation(),e()},children:P.jsx(ov,{})})]})},zF=st.div`
  width: var(--tile-size);
  aspect-ratio: 2 / 3;
  flex: none;
  background: var(--gradient-main);
  backdrop-filter: blur(6px);
  border-radius: var(--border-radius);
  justify-content: space-between;
  box-shadow: var(--glass-shadow);
  padding: 4%;
  display: flex;   
  flex-direction: column;
  align-items: center;
  position: relative;
  cursor: pointer;
  min-height: 0;
  overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;

  &:hover {
    transform: translateY(-4%);
    box-shadow: var(--glass-shadow-hover);
  }
`,FF=st.div`
  position: absolute;
  top: 0.4em;
  right: 0.4em;
  z-index: 3;
  pointer-events: auto;
`,HF=st.span`
  font-size: 1.1em;
  color: var(--text-secondary);
  cursor: pointer;

  &:hover {
    color: var(--color-accent);
  }
`,UF=st.div`
  height: 15%;
  width: 80%;
  padding-top: 6%;
  padding-bottom: 20%;
  padding-left: 8%;
  padding-right: 8%;
  display: flex;
  align-items: start;
  justify-content: center;
`,$F=st.h3`
  font-size: 0.65em;
  font-weight: 600;
  text-align: center;
  color: var(--text-primary);
  -webkit-line-clamp: 2;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.2;
`,qF=st.div`
  width: 100%;
  height: 65%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  padding: 0 6%;
`,GF=st.img`
  height: 100%;
  width: auto;
  object-fit: cover;
  object-position: center;
`,VF=st.div`
  height: 12%;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6%;
  padding-top: 2%;
`,YF=({book:i,onOpenPreview:t,onRemoveClick:e})=>{const n=Vt(pu);return P.jsxs(zF,{onClick:t,children:[n&&P.jsx(rE,{bookId:i._id,isTile:!0}),!n&&P.jsx(FF,{children:P.jsx(HF,{onClick:a=>{a.stopPropagation(),e()},children:P.jsx(ov,{})})}),P.jsx(UF,{children:P.jsx($F,{children:i.meta.title})}),P.jsx(qF,{children:i.meta.cover?P.jsx(GF,{src:i.meta.cover,alt:i.meta.title}):P.jsx("span",{style:{color:"transparent"},children:"No cover"})}),P.jsx(VF,{children:P.jsx(iE,{book:i})})]})},sE=({book:i,viewType:t})=>{var S,A;const e=or(),[n]=Kb(),[a,o]=U.useState(!1),c=Vt(pu),{openReader:u}=nE(i),d=()=>e(IM(i._id)),p=()=>{c||e(b4(i._id))},g=()=>o(!0),y=async()=>{await n(i._id),o(!1)},b=()=>o(!1),v={book:i,onSelect:d,onOpenPreview:p,onOpenReader:u,onRemoveClick:g,isManageMode:c};return P.jsxs(P.Fragment,{children:[t==="grid"&&P.jsx(YF,{...v,onClick:p}),t==="list"&&P.jsx(NF,{...v,onClick:p}),t==="table"&&P.jsx(BF,{...v,onClick:p}),a&&P.jsx(WD,{bookId:i._id,bookTitle:(S=i.meta)==null?void 0:S.title,variant:(A=i.flags)!=null&&A.isArchived?"permanent-delete":"library",onConfirm:y,onCancel:b})]})},XF=st.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--color-blue-300);
  font-weight: 500;
  text-align: center;
`,QF=st.div`
  display: flex;
  gap: 0.4em;
  margin-bottom: 0.4em;

  .label { opacity: 0.68; }
  .percent { font-weight: 700; }
`,WF=st.div`
  width: 100%;
  max-width: 120px;
  height: 6px;
  background: var(--progress-bg, rgba(0, 0, 0, 0.1));
  border-radius: 3px;
  overflow: hidden;
  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.2);
`,KF=st.div`
  width: ${({$percent:i})=>`${i}%`};
  height: 100%;
  background: var(--progress-fill, #4caf50);
  transition: width 0.3s ease;
`;function ZF({bookId:i,totalPages:t}){var p,g;const e=Vt(qM),{data:n,isLoading:a}=h4(i,{skip:!i,refetchOnMountOrArgChange:!0}),o=((p=n==null?void 0:n.stats)==null?void 0:p.currentPage)||(n==null?void 0:n.currentPage)||0,c=((g=n==null?void 0:n.stats)==null?void 0:g.maxVisitedPage)||(n==null?void 0:n.maxVisitedPage)||0,u=e==="max"?c:o,d=a||t<2?0:Math.round(Math.min(u,t)/t*100);return!i||t<2?null:P.jsxs(XF,{children:[P.jsxs(QF,{children:[P.jsx("span",{className:"label",children:"Progress:"}),P.jsx("span",{className:"percent",children:a?"—":`${d}%`})]}),P.jsx(WF,{children:P.jsx(KF,{$percent:d})})]})}const JF=({_id:i=crypto.randomUUID(),title:t="Untitled",author:e="",fileUrl:n="",totalPages:a=1,createdAt:o=new Date().toISOString()}={})=>({_id:i,meta:{title:t,author:e,fileUrl:n,totalPages:a,createdAt:o}});function tH(i,t){const[e]=Bh(),n=Hh(),a=or(),[o,c]=U.useState({meta:{},flags:{},stats:{}}),[u,d]=U.useState(!1),[p,g]=U.useState(!1);return U.useEffect(()=>{i&&(c(structuredClone(i)),d(!1),g(!1))},[i]),{form:o,isEditingMain:u,isEditingNotes:p,handleChange:x=>{const{name:M,value:C}=x.target;c(_=>M in _.meta?{..._,meta:{..._.meta,[M]:C}}:M in _.flags?{..._,flags:{..._.flags,[M]:typeof _.flags[M]=="number"?Number(C):typeof _.flags[M]=="boolean"?!!C:C}}:M in _.stats?{..._,stats:{..._.stats,[M]:typeof _.stats[M]=="number"?Number(C):C}}:_)},handleEdit:x=>{x==="main"&&d(!0),x==="notes"&&g(!0)},handleCancel:x=>{i&&c(structuredClone(i)),x==="main"&&d(!1),x==="notes"&&g(!1)},handleSave:async x=>{var M,C;if(i)try{let _;if(x==="main"&&(_={meta:{...o.meta,updatedAt:new Date().toISOString()},flags:{...o.flags},stats:{...o.stats}}),x==="notes"){const D=((M=o.flags)==null?void 0:M.notes)||"",R={text:typeof D=="string"?D:"",page:null,createdAt:new Date},N=Array.isArray((C=i.flags)==null?void 0:C.notes)?i.flags.notes:[];_={flags:{...i.flags,notes:[...N,R]}}}await e({id:i._id,changes:_}).unwrap(),a(nb({id:i._id,changes:_})),x==="main"&&d(!1),x==="notes"&&g(!1)}catch(_){console.error(`Save error (${x}):`,_)}},handleRead:()=>{i!=null&&i._id&&(a(NM(i._id)),n(`/read/${i._id}`),t==null||t())},handleNotesChange:async x=>{if(c(M=>({...M,flags:{...M.flags,notes:x}})),!!(i!=null&&i._id))try{await e({id:i._id,changes:{flags:{notes:x}}}).unwrap(),a(nb({id:i._id,changes:{flags:{notes:x}}}))}catch(M){console.error("Failed to update notes",M)}}}}const eH=st.div`
  grid-area: footer;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 1.3em;
  padding: 1.5em 2.5em;
  background: var(--gradient-main-v7), rgba(30,40,80,0.23);
  border-top: 1.5px solid rgba(255,255,255,0.08);
  box-shadow: 0 4px 38px 0 rgba(60,100,220,0.10);
  backdrop-filter: blur(12px) saturate(115%);
`,e0=st.button`
  padding: 0.5em 1.8em;
  border: none;

  background: ${({$primary:i})=>i?"var(--gradient-main-v6), linear-gradient(90deg,rgba(40,130,255,.32),rgba(100,190,255,.18))":"rgba(255,255,255,0.07)"};

  color: ${({$primary:i})=>i?"#fff":"var(--color-light-0)"};
  font-weight: 600;

  box-shadow: ${({$primary:i})=>i?"0 0 18px 1.5px rgba(34,124,255,0.14)":"0 0 6px 0 rgba(0,0,0,0.08)"};

  transition: background .13s, box-shadow .15s, filter .14s;
  cursor: pointer;
  filter: blur(0) brightness(1.04);

  &:hover {
    background: ${({$primary:i})=>i?"var(--gradient-main-v5), rgba(80,180,255,0.24)":"rgba(255,255,255,0.14)"};
    box-shadow: 0 0 28px 2.2px rgba(44,114,255,0.23);
    filter: brightness(1.09) saturate(1.08);
  }
`,nH=({isEditing:i,onCancel:t,onSave:e,onEdit:n,onClose:a})=>P.jsx(eH,{children:i?P.jsxs(P.Fragment,{children:[P.jsx(e0,{onClick:t,children:"Cancel"}),P.jsx(e0,{$primary:!0,onClick:e,children:"Save Changes"})]}):P.jsxs(P.Fragment,{children:[P.jsx(e0,{onClick:a,children:"Close"}),P.jsx(e0,{$primary:!0,onClick:n,children:"Edit"})]})}),iH=st.div`
  width: 100%;
  aspect-ratio: 2/3;
  grid-area: cover;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
`,rH=st.div`
  font-size: var(--modal-lg);
  width: 100%;
  padding: 1.0em;
  text-align: center;
  color: rgba(200,210,255,.42);
  letter-spacing: .05em;
`,sH=st.img`
  width: 98%;
  height: 98%;
  object-fit: cover;
  display: block;
`;function aH({cover:i,title:t}){return P.jsx(iH,{children:i?P.jsx(sH,{src:i,alt:t}):P.jsx(rH,{children:"No Cover"})})}function oH(i){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(i)}function lH(i){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(i)}const cH=st.div`
  display: flex;
  gap: 0.16em;
  cursor: pointer;
`,uH=st.span`
  font-size: var(--modal-xl);
  color: ${({$active:i})=>i?"var(--color-yellow-400)":"rgba(255, 255, 255, 0.356)"};
  transition: color 0.15s, transform 0.1s;

  &:hover,
  &:focus {
    color: var(--color-yellow-300);
    transform: scale(1.13);
  }
`;function dH({name:i="rating",value:t=0,onChange:e}){const[n,a]=U.useState(0),o=n||t;return P.jsx(cH,{onMouseLeave:()=>a(0),children:[...Array(5)].map((c,u)=>P.jsx(uH,{$active:u<o,onMouseEnter:()=>a(u+1),onClick:()=>{a(0),e({target:{name:i,value:u+1}})},tabIndex:0,onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(a(0),e({target:{name:i,value:u+1}}))},title:`Rating: ${u+1}/5`,children:P.jsx(lH,{})},u))})}const hH=st.div`
  display: grid;
  grid-area: rating;
  grid-template-rows: auto auto auto;
  grid-template-areas:
    'read'
    'stars'
    'progress';
  justify-items: center;
  align-items: center;
  width: 100%;
  height: 100%;
`,fH=st.button`
  grid-area: read;
  margin-top: 0.9em;
  padding: 0.7em 1.8em;
  border-radius: 0.9em;
  border: none;
  font-weight: 600;
  background: linear-gradient(90deg, rgba(40,130,255,0.32), rgba(100,190,255,0.18));
  color: #fff;
  box-shadow: 0 0 18px 1.5px rgba(34,124,255,0.12);
  cursor: pointer;
  transition: background 0.13s;

  &:hover {
    background: rgba(40,130,255,0.44);
  }
`,pH=st.div`
  grid-area: stars;
  display: grid;
  grid-auto-flow: column;
  gap: 1em;
  justify-content: center;
  align-items: center;
`,gH=st.div`
  grid-area: progress;
  display: flex;
  justify-content: center;
  width: 100%;
`;function mH({form:i,onChange:t,handleRead:e}){var g,y,b;const n=i._id,{data:a,isLoading:o}=a4(n,{skip:!n}),[c]=Bh(),u=((g=i.flags)==null?void 0:g.rating)??0,d=o?((y=i.meta)==null?void 0:y.totalPages)??1:((b=a==null?void 0:a.meta)==null?void 0:b.totalPages)??1,p=v=>{t({target:{name:"rating",value:v}}),c({id:n,changes:{flags:{rating:v}}})};return P.jsxs(hH,{children:[P.jsx(fH,{onClick:e,children:"Read"}),P.jsx(pH,{children:P.jsx(dH,{value:u,onChange:v=>p(v.target.value)})}),P.jsx(gH,{children:P.jsx(ZF,{bookId:n,totalPages:d})})]})}const yH=st.div`
  grid-area: left;
  display: grid;
  width: 100%;
  height: 100%;

  grid-template-rows: 4fr 2fr;
  grid-template-areas:
    "cover"
    "rating";
  gap: .8em;
  align-items: stretch;
  padding: 1em;
  box-shadow: 0 0 9em 0 rgba(34, 53, 122, 0.842);
  overflow: hidden;
`,QR=st.div`
  width: 100%;
  height: 100%;
`,bH=({form:i,isEditing:t,handleChange:e,handleRead:n})=>P.jsxs(yH,{children:[P.jsx(QR,{style:{gridArea:"cover"},children:P.jsx(aH,{cover:i.meta.cover,title:i.meta.title})}),P.jsx(QR,{style:{gridArea:"rating"},children:P.jsx(mH,{form:i,isEditing:t,onChange:e,handleRead:n})})]});function as({label:i,children:t,$editable:e,className:n}){return P.jsxs(vH,{className:n,$editable:e,children:[i&&P.jsx(wH,{children:i}),P.jsx(SH,{children:t})]})}const vH=st.div`
  display: flex;
  flex-direction: column;
  gap: 0.4em;
  background: ${({$editable:i})=>i?"rgba(53, 80, 170, 0.07)":"transparent"};
  border-radius: 0.7em;
  padding: 0.1em 0.8em;
  transition: background 0.17s;
`,wH=st.div`
  font-size: var(--modal-md);
  color: var(--color-blue-200);
  text-transform: uppercase;
  letter-spacing: 0.03em;
  font-weight: 600;
`,SH=st.div`
  width: 100%;
  color: #ffffff;
  font-weight: 500;
`;function xb({name:i,value:t,onChange:e,...n}){return P.jsx(AH,{name:i,value:t,onChange:e,autoComplete:"off",...n})}const AH=st.input`
  padding: 0.45em 0.7em;
  border-radius: .5em;
  background: rgba(255,255,255,0.14);
  color: #f5f8ff;
  border: 1.5px solid var(--color-blue-500);
  box-shadow: 0 1px 8px 0 rgba(80,140,230,0.08);
  transition: box-shadow .16s, border-color .16s, background .15s;

  &::placeholder {
    color: var(--color-blue-200);
    opacity: .8;
  }

  &:focus {
    box-shadow: 0 0 0 2px var(--see-02), 0 2px 12px 0 rgba(60,170,255,0.09);
    border-color: var(--color-blue-400);
    background: rgba(68,110,240,0.11);
    outline: none;
  }
`;st.textarea`
  padding: 0.45em 0.7em;
  border-radius: 1.1em;
  background: rgba(255,255,255,0.10);
  color: #ffffff;
  width: 100%;
  border: 1.5px solid var(--color-blue-500);
  transition: box-shadow .15s, border-color .15s, background .14s;
  resize: vertical;

  &::placeholder {
    color: var(--color-blue-200);
    opacity: .8;
  }

  &:focus {
    box-shadow: 0 0 0 2px var(--see-02), 0 2px 10px 0 rgba(60,170,255,0.12);
    border-color: var(--color-blue-400);
    background: rgba(38,66,140,0.15);
    outline: none;
  }
`;const xH=st.div`
  display: grid;
  grid-area: header;
  background: rgba(46, 51, 80, 0.11);
  gap: 0.9em 1em;
  padding: 0.7em 0.9em;
  grid-template-columns: 1.7fr 1fr 2.2em;
  grid-template-rows: auto auto;
  grid-template-areas: 
    "title year heart"
    "author author heart";
`,EH=st.div` 
  display: -webkit-box;
  max-height: 9.1em ;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  grid-area: title;
  overflow: hidden;
`,_H=st.div` grid-area: year; `,CH=st.div` grid-area: author; `,TH=st.div`
  grid-area: heart;
  display: flex;
  align-items: flex-start;
  justify-content: flex-end;
  height: 100%;
`,RH=st.button`
  background: none;
  border: none;
  cursor: pointer;
  color: ${({$active:i})=>i?"rgb(214, 0, 64)":"rgba(129, 129, 129, 0.39)"};
  filter: drop-shadow(0 0 0.6em ${({$active:i})=>i?"#de3683cc":"transparent"});
  transition: color .12s, filter .13s, transform .12s;
  margin-top: 0.13em;

  &:hover {
    color: rgb(214, 0, 64);
    transform: scale(1.08);
  }
`,uS=st.span`
  opacity: 0.9;
`,MH=({form:i,isEditing:t,handleChange:e})=>{const{meta:n={},flags:a={}}=i,o=a.isFavorited??!1,c=()=>e({target:{name:"isFavorited",value:!o}});return P.jsxs(xH,{children:[P.jsx(EH,{children:P.jsx(as,{label:"Title",$editable:t,children:t?P.jsx(xb,{name:"title",value:n.title||"",onChange:e}):n.title||P.jsx(uS,{children:"—"})})}),P.jsx(_H,{label:"Year of Publication",children:n.publishedYear||P.jsx(uS,{children:"—"})}),P.jsx(CH,{children:P.jsx(as,{label:"Author",$editable:t,children:t?P.jsx(xb,{name:"author",value:n.author||"",onChange:e}):n.author||P.jsx(uS,{children:"—"})})}),P.jsx(TH,{children:P.jsx(RH,{type:"button",$active:o,title:o?"delete from favorites":"add to favorites",onClick:c,children:P.jsx(oH,{})})})]})};st.div`
  width: 100%;
  min-width: 0;
  font-size: inherit;
  display: flex;
  align-items: stretch;
  overflow: hidden;
`;st.div`
  display: flex;
  flex-wrap: wrap;
  gap: 0.3em;
  border: 1px solid var(--glass-shadow-hover);
  border-radius: 0.4em;
  padding: 0.3em;
`;st.span`
  background: var(--color-blue-500);
  color: white;
  padding: 0.2em 0.6em;
  border-radius: 1em;
  display: flex;
  align-items: center;
`;st.button`
  margin-left: 0.4em;
  background: none;
  border: none;
  color: white;
  cursor: pointer;
`;st.input`
  flex: 1;
  min-width: 6em;
  border: none;
  background: transparent;
  color: white;

  &:focus {
    outline: none;
  }
`;const DH=st.div`
  display: flex;
  flex-wrap: wrap;
  gap: 0.45em;
  align-items: center;
`,OH=st.span`
  display: inline-block;
  background: var(--gradient-main-v3), linear-gradient(90deg,#7db6ff 0%,#5deed5 100%);
  color: #fff;
  padding: 0.12em 1.1em;
  border-radius: 1.2em;
  font-weight: 600;
  box-shadow: 0 2px 12px 0 rgba(105,180,255,0.14);
  border: 1px solid rgba(186,242,255,0.12);
  opacity: .98;
  margin-bottom: 0.12em;
  text-shadow: 0 1px 2px rgba(0,0,0,.08);
  filter: blur(0) brightness(1.09);
  transition: filter .13s;

  &:hover {
    filter: brightness(1.13) saturate(1.12);
  }
`,kH=({tags:i=[]})=>i.length?P.jsx(DH,{children:i.map(t=>P.jsx(OH,{children:t},t))}):P.jsx("span",{style:{opacity:.45},children:"—"}),LH=["fantasy","romance","crime","horror","thriller","sci-fi","adventure","literary fiction","biography","historical","drama","young adult"],PH=st.div`
  grid-area: meta;
  background: rgba(33, 53, 91, 0.13);
  color: white;
  padding: 1em;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto auto auto;
  grid-template-areas:
    'totalPages addedAt'
    'language lastOpened'
    'collection documentType'
    'genre tags';
  gap: 0.8em 1.1em;
`,NH=st(as)` grid-area: language; `,IH=st(as)` grid-area: genre; `,jH=st(as)` grid-area: totalPages; `,BH=st(as)` grid-area: collection; `,zH=st(as)` grid-area: addedAt; `,FH=st(as)` grid-area: lastOpened; `,HH=st(as)` grid-area: documentType; `,UH=st(as)` grid-area: tags; `,$H=({form:i,isEditing:t,handleChange:e})=>{var a;const n=(i==null?void 0:i.meta)||{};return console.log("[MetaSection] meta:",n),console.log("[MetaSection] meta.addedAt:",n==null?void 0:n.addedAt),P.jsxs(PH,{children:[P.jsx(NH,{label:"Language",children:n.language||P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(zH,{label:"Added on",children:n.addedAt?new Date(n.addedAt).toLocaleDateString():P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(jH,{label:"Page count",$editable:!1,children:n.totalPages||P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(FH,{label:"Last opened",children:(a=i.stats)!=null&&a.lastOpenedAt?new Date(i.stats.lastOpenedAt).toLocaleDateString():P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(BH,{label:"Collection",$editable:t,children:t?P.jsx(xb,{name:"collection",value:n.collection||"",onChange:e}):n.collection||P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(HH,{label:"Document type",children:n.documentType||P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(IH,{label:"Genre",$editable:t,children:t?P.jsxs(P.Fragment,{children:[P.jsx(xb,{name:"genre",value:n.genre||"",onChange:e,list:"genre-suggestions",placeholder:"e.g. fantasy"}),P.jsx("datalist",{id:"genre-suggestions",children:LH.map(o=>P.jsx("option",{value:o},o))})]}):n.genre||P.jsx("span",{style:{opacity:.45},children:"—"})}),P.jsx(UH,{label:"Tags",$editable:!1,children:P.jsx(kH,{tags:n.tags||[]})})]})},qH=st.div`
  min-height: 4em;
  padding: 0.8em 0.15em 0.8em 0.6em;
  cursor: pointer;
  border-radius: 0.7em;
  background: ${({$empty:i})=>"rgba(28, 38, 68, 0.123)"};
  flex: 1 1 100%;
  transition: background .16s;
  overflow-y: auto;
`,GH=st.textarea`
  width: 100%;
  min-height: 0;
  flex: 1 1 auto;
  resize: none;
  border-radius: 0.7em;
  padding: 0.8em 0.7em;
  background: rgba(34,51,115,0.14);
  border: .1em solid #3a6ef07b;
  box-shadow: 0 1px 8px 0 rgba(80,140,230,0.08);
  outline: none;
  font-family: inherit;
  transition: box-shadow .18s, border-color .15s, background .14s;
  overflow-y: auto;

  &:focus {
    background: rgba(38,66,140,0.16);
    border-color: var(--color-blue-400, #579dff4c);
    box-shadow: 0 0 0 2px var(--color-blue-200, #9fc4c417);
  }
`,VH=st.div`
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.6em;
`,YH=st.span``;function XH({note:i,onSave:t,readOnly:e}){const[n,a]=U.useState(!1),[o,c]=U.useState(i.text||""),u=U.useRef(null);U.useEffect(()=>{c(i.text||""),a(!1)},[i.id,i.text]),U.useEffect(()=>{n&&u.current&&(u.current.focus(),u.current.select())},[n]);const d=()=>{a(!1),o!==i.text&&t(i.id,o)},p=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),u.current&&u.current.blur())};return P.jsxs(as,{label:"Note",$editable:n&&!e,children:[n&&!e?P.jsx(GH,{ref:u,value:o,onChange:g=>c(g.target.value),onBlur:d,onKeyDown:p,placeholder:"add note"}):P.jsx(qH,{$empty:!i.text,onClick:()=>!e&&a(!0),children:i.text||P.jsx("span",{style:{opacity:.48},children:"No note"})}),P.jsxs(VH,{children:[P.jsx(YH,{children:"Last edited:"}),P.jsx("span",{children:i.createdAt?new Date(i.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}):""})]})]})}const QH=st.div`
  grid-area: notes;
  display: flex;
  flex-direction: column;
  gap: 1em;
`;function WR(i){return i.map(t=>t.id?t:{...t,id:t.createdAt||crypto.randomUUID()})}function WH({form:i,handleNotesChange:t,readOnly:e=!1}){var u;const[n,a]=U.useState(()=>{var d;return WR(Array.isArray((d=i.flags)==null?void 0:d.notes)&&i.flags.notes.length>0?i.flags.notes:[{id:crypto.randomUUID(),text:"",createdAt:new Date().toISOString()}])});U.useEffect(()=>{var d;a(WR(Array.isArray((d=i.flags)==null?void 0:d.notes)&&i.flags.notes.length>0?i.flags.notes:[{id:crypto.randomUUID(),text:"",createdAt:new Date().toISOString()}]))},[(u=i.flags)==null?void 0:u.notes]);const o=(d,p)=>{const g=[{id:d,text:p,createdAt:new Date().toISOString()}];a(g),t&&t(g)},c=n[0];return P.jsx(QH,{children:P.jsx(XH,{note:c,onSave:o,readOnly:e})})}const KH=st.div`
  grid-area: right;
  display: grid;
  width: 100%;
  max-height: 100%;
  background: rgba(250,250,255,0.04);

  grid-template-columns: 1fr 1fr;
  grid-template-rows: ${({$editing:i})=>i?"auto 1fr":"auto auto 1fr"};
  grid-template-areas: ${({$editing:i})=>i?`"header header"
         "meta meta"`:`"header header"
         "meta meta"
         "notes notes"`};
  gap: 1.2em 0.9em;
  padding: 1.6em 2.2em 1em 1.5em;
  overflow-y: auto;
`;function ZH({form:i,isEditingNotes:t,isEditingMain:e,handleChange:n,handleEdit:a,handleNotesChange:o,handleCancel:c}){return P.jsxs(KH,{$editing:e,children:[P.jsx(MH,{form:i,isEditing:e,handleChange:n}),P.jsx($H,{form:i,isEditing:e,handleChange:n}),!e&&P.jsx(WH,{form:i,isEditingNotes:t,handleNotesChange:o,handleEdit:a,handleCancel:c})]})}const JH=st.div`
  width: 100%;
  height: 100%;
  display: grid;
  gap: 1em;
  overflow: hidden;
  border-radius: 1em;
  padding: 1em;

  /* Grid layout */
  grid-template-columns: 1.1fr 2.9fr;
  grid-template-rows: 1fr 10%;
  grid-template-areas:
    'left  right'
    'footer footer';

  /* Appearance */
  background: var(--gradient-main);
  backdrop-filter: blur(12px) saturate(120%);
  box-shadow: 0 0 24px 4px rgba(0, 0, 0, 0.08);

  color: var(--color-light-0);
  font-size: var(--modal-font-size);
`,tU=({isEditingNotes:i,isEditingMain:t,handleCancel:e,handleSave:n,handleRead:a,handleEdit:o,handleNotesChange:c,onClose:u,...d})=>P.jsxs(JH,{children:[P.jsx(bH,{form:d.form,handleChange:d.handleChange,handleRead:a}),P.jsx(ZH,{form:d.form,isEditingMain:t,isEditingNotes:i,handleChange:d.handleChange,handleNotesChange:c,handleSave:n,handleEdit:o,handleCancel:e,onClose:u}),P.jsx(nH,{isEditing:t,onEdit:()=>o("main"),onCancel:()=>e("main"),onSave:()=>n("main"),onClose:u})]}),eU=bD`
  from { opacity: 0; transform: scale(0.97); }
  to   { opacity: 1; transform: scale(1);  }
`,nU=st.div`
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(5px);
  z-index: 1000;
`,iU=st.div`
  width: var(--modal-width);
  height: var(--modal-height);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border-radius: 1rem;
  background: rgba(30, 35, 45, 0.85);
  backdrop-filter: blur(12px);
  border: 1.5px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 2rem 5rem rgba(0,0,0,0.4), inset 0 0 1rem rgba(255,255,255,0.15);
  animation: ${eU} 0.3s ease-out;
`;function t7({book:i,onClose:t}){const{form:e,isEditingMain:n,isEditingNotes:a,handleChange:o,handleEdit:c,handleCancel:u,handleSave:d,handleRead:p,handleNotesChange:g}=tH(i,t);if(!i)return null;const y=document.getElementById("modal-root")||document.body;return qD.createPortal(P.jsx(nU,{onClick:t,children:P.jsx(iU,{onClick:b=>b.stopPropagation(),children:P.jsx(tU,{form:e,isEditingMain:n,isEditingNotes:a,handleChange:o,handleEdit:c,handleCancel:u,handleSave:d,handleRead:p,handleNotesChange:g,onClose:t})})}),y)}const rU=st.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, var(--tile-size));
  gap: 1.5rem;
  padding: 2rem;
  width: 100%;
  justify-content: start;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-radius: var(--border-radius);
`,sU=({books:i,hideAddTile:t})=>P.jsxs(rU,{children:[!t&&P.jsx(gv,{}),i.map(e=>P.jsx(sE,{book:e,viewType:"grid"},e._id))]}),aU=st.div`
  width: 100%;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-radius: var(--border-radius);
  overflow: hidden;
`,oU=st.div`
  display: grid;
  grid-template-columns: 5% 45% 30% 15% 5%;
  padding: 1rem 2rem;
  font-weight: bold;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-color);
`,lU=({books:i,hideAddTile:t,onRestore:e,onDelete:n})=>P.jsxs(aU,{children:[P.jsxs(oU,{children:[P.jsx("span",{}),P.jsx("span",{children:"Title"}),P.jsx("span",{children:"Author"}),P.jsx("span",{children:"Date added"}),P.jsx("span",{children:"Actions"})]}),!t&&P.jsx(gv,{viewMode:"list"}),i.map(a=>a?P.jsx(sE,{book:a,viewType:"list",onOpenPreview:()=>e&&e(a._id),onRemoveClick:()=>n&&n(a)},a._id):null)]}),cU=st.div`
  width: 100%;
  padding: 2rem;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-radius: var(--border-radius);
  overflow-x: auto;
`,uU=st.table`
  width: 100%;
  border-collapse: collapse;
  min-width: 600px;
`,nd=st.th`
  text-align: left;
  padding: 0.75rem;
  border-bottom: 2px solid var(--border-color);
  color: var(--text-secondary);
  cursor: ${({sortable:i})=>i?"pointer":"default"};

  &:hover {
    color: ${({sortable:i})=>i?"var(--color-accent)":"var(--text-secondary)"};
  }
`,n0=st.td`
  padding: 0.75rem;
  border-bottom: 1px solid var(--border-color);
  color: var(--text-primary);
`,dU=st.tr`
  td {
    padding: 1rem 0;
  }
`,hU=st.tr`
  td {
    padding: 2rem;
    color: var(--text-secondary);
    font-style: italic;
    text-align: center;
  }
`,fU=({books:i,hideAddTile:t})=>P.jsx(cU,{children:P.jsxs(uU,{children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx(nd,{style:{width:"40px"}}),P.jsx(nd,{children:"Title"}),P.jsx(nd,{children:"Author"}),P.jsx(nd,{children:"Date added"}),P.jsx(nd,{style:{width:"140px"},children:"Actions"}),P.jsx(nd,{style:{width:"40px"}})]})}),P.jsxs("tbody",{children:[P.jsxs(dU,{children:[P.jsx(n0,{}),P.jsx(n0,{colSpan:4,children:!t&&P.jsx(gv,{})}),P.jsx(n0,{})]}),i.length===0?P.jsx(hU,{children:P.jsx(n0,{colSpan:6,children:"No books — add first!"})}):i.map(e=>P.jsx(sE,{book:e,viewType:"table"},e._id))]})]})}),pU=({onBack:i})=>{const[t,e]=U.useState(null),{addBookToLibrary:n}=nE(),[a]=LM(),{data:o=[],error:c,isLoading:u}=f4(),d=async p=>{try{e(p.slug);const g=await fetch(p.pdf);if(!g.ok)throw new Error("Failed to download PDF");const y=await g.blob(),b=new File([y],`${p.slug}.pdf`,{type:"application/pdf"}),v=new FormData;v.append("file",b),v.append("totalPages",1);const S=await a(v).unwrap(),A=JF(S);n(A),alert(`Imported "${p.title}" successfully!`)}catch(g){console.error("Error importing book:",g),alert("Import failed.")}finally{e(null)}};return u?P.jsx("p",{className:"p-4",children:"Loading..."}):c?P.jsx("p",{className:"p-4 text-red-500",children:"Error loading books."}):P.jsxs("div",{className:"p-4",children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsx("h2",{className:"text-2xl font-bold",children:"Import from Wolne Lektury"}),P.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Back to Library"})]}),P.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:o.map(p=>P.jsxs("div",{className:"flex flex-col justify-between p-4 border rounded bg-white/10 backdrop-blur-md",children:[P.jsxs("div",{className:"mb-2",children:[P.jsx("strong",{className:"block text-lg mb-1",children:p.title}),P.jsx("p",{className:"text-sm text-gray-300",children:p.author})]}),P.jsx("button",{onClick:()=>d(p),disabled:t===p.slug,className:"mt-auto px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:t===p.slug?"Importing...":"Import"})]},p.slug))})]})};st.p`
  padding: 2rem;
  text-align: center;
`;const aE=({books:i,hideAddTile:t=!1})=>{const e=Vt(zh),n=Vt($M),a=U.useMemo(()=>sF(i,n),[i,n]);switch(e){case"grid":return P.jsx(sU,{books:a,hideAddTile:t});case"list":return P.jsx(lU,{books:a,hideAddTile:t});case"table":return P.jsx(fU,{books:a,hideAddTile:t});default:return P.jsx(gv,{hideAddTile:t})}},gU=st.div`
  width: 100%;
  flex: 1;  
`,mU=()=>{const i=Vt(zh),{data:t=[],isLoading:e,isError:n}=Ax();if(e)return P.jsx(jS,{});if(n)return P.jsx("div",{children:"Error loading books."});const a=t.filter(o=>{var c;return!((c=o.flags)!=null&&c.isArchived)}).filter(o=>{var c,u;return((c=o.meta)==null?void 0:c.title)&&((u=o.meta)==null?void 0:u.fileUrl)});return P.jsx(gU,{children:P.jsx(aE,{books:a,viewMode:i})})},KR=st.div`
  width: 100%;
  flex: 1;
  display: flex;
  flex-direction: column;
`,yU=()=>{const[i,t]=U.useState(null),e=Vt(zh),{data:n=[],isLoading:a}=Ax(),[o]=Bh(),[c]=Kb(),u=n.filter(g=>{var y;return(y=g.flags)==null?void 0:y.isArchived}),d=g=>o({id:g,changes:{flags:{isArchived:!1}}}),p=async()=>{if(i)try{await c(i._id)}catch(g){console.error("Delete error:",g)}finally{t(null)}};return a?null:u.length?P.jsxs(KR,{children:[P.jsx(aE,{books:u,viewMode:e,onRestore:d,onDelete:g=>t(g),hideAddTile:!0}),i&&P.jsx(WD,{variant:"permanent-delete",bookTitle:i.meta.title,onConfirm:p,onCancel:()=>t(null)})]}):P.jsx(KR,{children:P.jsx("p",{style:{padding:"2rem",opacity:.6},children:"No books in archive"})})},bU=st.div`  
  width: 100%;
  flex: 1;
`,vU=()=>{const i=Vt(zh),{data:t=[],isLoading:e}=Ax();if(e)return null;const n=t.filter(a=>{var o,c;return((o=a.flags)==null?void 0:o.isFavorited)&&!((c=a.flags)!=null&&c.isArchived)});return P.jsx(bU,{children:P.jsx(aE,{books:n,viewMode:i,hideAddTile:!0})})},wU=()=>P.jsx(pU,{}),SU=U.lazy(()=>rv(()=>import("./index-Vj-fb_tY.js"),__vite__mapDeps([0,1]))),AU=U.lazy(()=>rv(()=>import("./index-DulfDZ-H.js"),[])),xU=U.lazy(()=>rv(()=>import("./index-D4L1PcVS.js"),[])),EU=U.lazy(()=>rv(()=>import("./index-B-5Bvph4.js"),[])),_U=jj([{path:"/",element:P.jsx(U.Suspense,{fallback:P.jsx(jS,{}),children:P.jsx(SU,{})}),children:[{index:!0,element:P.jsx(H8,{})}]},{path:"/",element:P.jsx(U.Suspense,{fallback:P.jsx(jS,{}),children:P.jsx(AU,{})}),errorElement:P.jsx(ER,{}),children:[{path:"library",element:P.jsx(xU,{}),children:[{index:!0,element:P.jsx(mU,{})},{path:"import",element:P.jsx(wU,{})},{path:"archive",element:P.jsx(yU,{})},{path:"favorites",element:P.jsx(vU,{})}]},{path:"read",element:P.jsx(EU,{}),children:[{index:!0,element:P.jsx(aS,{})},{path:":bookId",element:P.jsx(aS,{})},{path:":read",element:P.jsx(aS,{})}]},{path:"settings",element:P.jsx(q8,{})},{path:"*",element:P.jsx(ER,{})}]}]);function CU(){return P.jsx(Qj,{router:_U})}const TU=st.div`
  display: flex;
  height: 100vh;
  overflow: hidden;
  width: 100vw;
`,RU=()=>P.jsxs(P.Fragment,{children:[P.jsx(vD,{}),P.jsx(TU,{children:P.jsx(CU,{})})]});Jr.workerSrc="/pdf.worker.min.js";window.Worker||console.error("Web Workers are not supported in this browser.");b5.createRoot(document.getElementById("root")).render(P.jsx(U.StrictMode,{children:P.jsx(F6,{children:P.jsx(RU,{})})}));export{GU as A,JU as B,ha as C,qU as D,T4 as E,rn as G,jS as L,QU as O,KU as R,WU as S,Vt as a,pu as b,_x as c,st as d,YU as e,VU as f,Ax as g,sF as h,ZU as i,P as j,t7 as k,jU as l,XU as m,Hh as n,OU as o,NM as p,BU as q,U as r,$M as s,Cx as t,or as u,h4 as v,IT as w,Ex as x,DU as y,Hs as z};
